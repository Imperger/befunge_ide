{"version":3,"file":"js/app.03779c31.js","mappings":"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","sources":["webpack://befunge/./src/App.vue","webpack://befunge/./src/App.vue?7ccd","webpack://befunge/./src/registerServiceWorker.ts","webpack://befunge/./src/lib/DOM/MouseButtons.ts","webpack://befunge/./src/lib/math/MathUtil.ts","webpack://befunge/./src/app/AppEventTransformer.ts","webpack://befunge/./src/app/InjectionToken.ts","webpack://befunge/./src/Inversify.ts","webpack://befunge/./src/app/AppSettings.ts","webpack://befunge/./src/app/AppSettingsCodec.ts","webpack://befunge/./src/app/CodeEditor/CellsOutline.frag","webpack://befunge/./src/app/CodeEditor/CellsOutline.vert","webpack://befunge/./src/app/CodeEditor/Grid.frag","webpack://befunge/./src/app/CodeEditor/Grid.vert","webpack://befunge/./src/lib/NotNull.ts","webpack://befunge/./src/lib/font/FontAtlasBuilder.ts","webpack://befunge/./src/lib/renderer/PrimitiveBuilder.ts","webpack://befunge/./src/lib/ArrayHelper.ts","webpack://befunge/./src/lib/renderer/ShaderProgram.ts","webpack://befunge/./src/lib/renderer/TypeSizeResolver.ts","webpack://befunge/./src/lib/renderer/PrimitivesRenderer.ts","webpack://befunge/./src/app/CodeEditor/EditorGridRenderer.ts","webpack://befunge/./src/app/CodeEditor/EditorGridCellsOutlineRenderer.ts","webpack://befunge/./src/app/CodeEditor/Selection.frag","webpack://befunge/./src/app/CodeEditor/Selection.vert","webpack://befunge/./src/app/CodeEditor/SelectionRenderer.ts","webpack://befunge/./src/app/CodeEditor/CodeEditorRenderer.ts","webpack://befunge/./src/lib/math/Transformation.ts","webpack://befunge/./src/lib/math/Intersection.ts","webpack://befunge/./src/lib/renderer/Camera.ts","webpack://befunge/./src/app/CameraService.ts","webpack://befunge/./src/app/Overlay/Layouts/HeadlineControlsLayout.ts","webpack://befunge/./src/app/Overlay/Layouts/DebugControlsLayout.ts","webpack://befunge/./src/lib/befunge/CPU/CPU.ts","webpack://befunge/./src/lib/Observable.ts","webpack://befunge/./src/lib/DI/AsyncConstructorActivator.ts","webpack://befunge/./src/lib/math/RectanglePacker.ts","webpack://befunge/./src/lib/renderer/TextureAtlas.ts","webpack://befunge/./src/lib/UI/UIIcon.ts","webpack://befunge/./src/lib/UI/UIObservablePositioningGroup.ts","webpack://befunge/./src/lib/UI/UIAlert/UIALertIcon.frag","webpack://befunge/./src/lib/UI/UIAlert/UIAlertIcon.vert","webpack://befunge/./src/lib/UI/UIAlert/UIALertPanel.frag","webpack://befunge/./src/lib/UI/UIAlert/UIAlertPanel.vert","webpack://befunge/./src/lib/UI/UIAlert/UIObservableAlert.ts","webpack://befunge/./src/lib/MemoryPoolTracker.ts","webpack://befunge/./src/lib/UI/UIAlert/UIAlertRenderer.ts","webpack://befunge/./src/lib/UI/UIEditableTextList/UIEditableTextListCursor.frag","webpack://befunge/./src/lib/UI/UIEditableTextList/UIEditableTextListCursor.vert","webpack://befunge/./src/lib/UI/UIEditableTextList/UIObservableEditableTextList.ts","webpack://befunge/./src/lib/UI/UIEditableTextList/UIEditableTextListRenderer.ts","webpack://befunge/./src/lib/UI/UIIconButton/UIIconButton.frag","webpack://befunge/./src/lib/UI/UIIconButton/UIIconButton.vert","webpack://befunge/./src/lib/UI/UIIconButton/UIIconButtonOutline.frag","webpack://befunge/./src/lib/UI/UIIconButton/UIIconButtonOutline.vert","webpack://befunge/./src/lib/UI/UIIconButton/UIObservableIconButton.ts","webpack://befunge/./src/lib/UI/UIIconButton/UIIconButtonRenderer.ts","webpack://befunge/./src/lib/UI/UILabel/UILabel.frag","webpack://befunge/./src/lib/UI/UILabel/UIObservableLabel.ts","webpack://befunge/./src/lib/UI/UILabel/UILabel.vert","webpack://befunge/./src/lib/ExceptionTrap.ts","webpack://befunge/./src/lib/font/FontGlyphCollection.ts","webpack://befunge/./src/lib/SelfBind.ts","webpack://befunge/./src/lib/UI/UILabel/UILabelRenderer.ts","webpack://befunge/./src/lib/UI/UITextButton/UIObservableTextButton.ts","webpack://befunge/./src/lib/UI/UITextList/UIObservableTextList.ts","webpack://befunge/./src/lib/UI/UITextList/UITextListBorder.frag","webpack://befunge/./src/lib/UI/UITextList/UITextListBorder.vert","webpack://befunge/./src/lib/UI/UITextList/UITextListStencil.frag","webpack://befunge/./src/lib/UI/UITextList/UITextListStencil.vert","webpack://befunge/./src/lib/UI/UITextList/UITextListRenderer.ts","webpack://befunge/./src/lib/UI/UIRenderer.ts","webpack://befunge/./src/app/Overlay/DebugControls.ts","webpack://befunge/./src/app/Overlay/EditControls.ts","webpack://befunge/./src/app/Overlay/EditDirectionControls.ts","webpack://befunge/./src/app/Overlay/FileControls.ts","webpack://befunge/./src/app/History/AppHistory.ts","webpack://befunge/./src/app/Overlay/HistoryControls.ts","webpack://befunge/./src/app/Overlay/IOControls.ts","webpack://befunge/./src/app/Overlay/LanguageSyntaxHelpControls.ts","webpack://befunge/./src/app/Overlay/SnackbarControls.ts","webpack://befunge/./src/lib/font/EscapeString.ts","webpack://befunge/./src/app/Overlay/StackControls.ts","webpack://befunge/./src/lib/EnumSize.ts","webpack://befunge/./src/app/Overlay/VirtualKeyboardControls.ts","webpack://befunge/./src/app/Overlay/OverlayService.ts","webpack://befunge/./src/app/SourceCodeMemory.ts","webpack://befunge/./src/app/CodeEditor/CodeEditorExtension.ts","webpack://befunge/./src/app/CodeEditor/CodeEditorTooltipService.ts","webpack://befunge/./src/lib/containers/Array2D.ts","webpack://befunge/./src/app/CodeEditor/EditableTarget.ts","webpack://befunge/./src/app/CodeEditor/CodeEditorService.ts","webpack://befunge/./src/lib/befunge/CPU/CPUImpl.ts","webpack://befunge/./src/lib/befunge/instructions/Add.ts","webpack://befunge/./src/lib/befunge/instructions/Bridge.ts","webpack://befunge/./src/lib/befunge/instructions/Divide.ts","webpack://befunge/./src/lib/befunge/instructions/EndProgram.ts","webpack://befunge/./src/lib/befunge/instructions/GreatherThan.ts","webpack://befunge/./src/lib/befunge/instructions/HorizontalIf.ts","webpack://befunge/./src/lib/befunge/instructions/InputASCII.ts","webpack://befunge/./src/lib/befunge/instructions/InputInteger.ts","webpack://befunge/./src/lib/befunge/instructions/MemoryRead.ts","webpack://befunge/./src/lib/befunge/instructions/MemoryWrite.ts","webpack://befunge/./src/lib/befunge/instructions/Modulo.ts","webpack://befunge/./src/lib/befunge/instructions/Multiply.ts","webpack://befunge/./src/lib/befunge/instructions/Negation.ts","webpack://befunge/./src/lib/befunge/instructions/NoOperation.ts","webpack://befunge/./src/lib/befunge/instructions/PCDirectionDown.ts","webpack://befunge/./src/lib/befunge/instructions/PCDirectionLeft.ts","webpack://befunge/./src/lib/befunge/instructions/PCDirectionRandom.ts","webpack://befunge/./src/lib/befunge/instructions/PCDirectionRight.ts","webpack://befunge/./src/lib/befunge/instructions/PCDirectionUp.ts","webpack://befunge/./src/lib/befunge/instructions/StackPop.ts","webpack://befunge/./src/lib/befunge/instructions/PrintASCII.ts","webpack://befunge/./src/lib/befunge/instructions/PrintInteger.ts","webpack://befunge/./src/lib/befunge/instructions/StackDuplicate.ts","webpack://befunge/./src/lib/befunge/instructions/StackPushDigit.ts","webpack://befunge/./src/lib/befunge/instructions/StackSwap.ts","webpack://befunge/./src/lib/befunge/instructions/Subtract.ts","webpack://befunge/./src/lib/befunge/instructions/ToggleStringMode.ts","webpack://befunge/./src/lib/befunge/instructions/VerticalIf.ts","webpack://befunge/./src/lib/befunge/IOPort.ts","webpack://befunge/./src/lib/befunge/Befunge.ts","webpack://befunge/./src/lib/befunge/Debugger.ts","webpack://befunge/./src/lib/befunge/Profiler.ts","webpack://befunge/./src/app/BefungeToolbox.ts","webpack://befunge/./src/app/CodeExecution/DebuggingService.ts","webpack://befunge/./src/app/CodeExecution/ExecutionService.ts","webpack://befunge/./src/app/AnalysisTools/Heatmap/HeatmapGrid.frag","webpack://befunge/./src/app/AnalysisTools/Heatmap/HeatmapGrid.vert","webpack://befunge/./src/app/AnalysisTools/Heatmap/HeatMapGridRenderer.ts","webpack://befunge/./src/app/AnalysisTools/Heatmap/HeatmapExtension.ts","webpack://befunge/./src/app/CodeExecution/ProfilingService.ts","webpack://befunge/./src/app/CodeExecution/CodeExecutionService.ts","webpack://befunge/./src/app/CodeEditorServiceInputReceiver.ts","webpack://befunge/./src/app/Effects/SmoothCameraMove.ts","webpack://befunge/./src/app/Effects/SmoothCameraZoom.ts","webpack://befunge/./src/lib/befunge/BefungeSourceCodeCodec.ts","webpack://befunge/./src/lib/befunge/memory/ModuloPointerArithmetics.ts","webpack://befunge/./src/lib/befunge/memory/ArrayMemory.ts","webpack://befunge/./src/lib/befunge/SourceCodeValidityAnalyser.ts","webpack://befunge/./src/lib/DOM/FileStorage/FileStorage.ts","webpack://befunge/./src/lib/effect/EffectRunner.ts","webpack://befunge/./src/lib/UI/InputReceiver.ts","webpack://befunge/./src/app/History/Commands/EditCellCommand/EditCellCommand.ts","webpack://befunge/./src/app/History/Commands/EditCellCommand/PostActions/MoveNextAction.ts","webpack://befunge/./src/app/History/Commands/EditCellsRegionCommand/EditCellsRegionCommand.ts","webpack://befunge/./src/app/History/Commands/EditCellsRegionCommand/PostActions/MoveNextAction.ts","webpack://befunge/./src/app/History/Commands/EditCellsRegionCommand/PostActions/StayLeftTopAction.ts","webpack://befunge/./src/app/AppService.ts","webpack://befunge/./src/lib/DOM/EventWaiter.ts","webpack://befunge/./src/lib/DOM/FileStorage/DOMEmulatedFileStorage.ts","webpack://befunge/./src/lib/DOM/FileStorage/FilePickerApiFileStorage.ts","webpack://befunge/./src/app/GlobalDependencies.ts","webpack://befunge/./src/lib/VueComponents/WebglCanvas.vue?8f8a","webpack://befunge/./src/lib/VueComponents/WebglCanvas.vue","webpack://befunge/./src/app/CodeEditor.vue?f59c","webpack://befunge/./src/app/CodeEditor.vue","webpack://befunge/./src/router/index.ts","webpack://befunge/./src/store/index.ts","webpack://befunge/./src/main.ts","webpack://befunge/webpack/bootstrap","webpack://befunge/webpack/runtime/chunk loaded","webpack://befunge/webpack/runtime/compat get default export","webpack://befunge/webpack/runtime/define property getters","webpack://befunge/webpack/runtime/global","webpack://befunge/webpack/runtime/hasOwnProperty shorthand","webpack://befunge/webpack/runtime/make namespace object","webpack://befunge/webpack/runtime/jsonp chunk loading","webpack://befunge/webpack/startup"],"sourcesContent":["<template>\n  <router-view />\n</template>\n\n<style>\n#app {\n  font-family: Roboto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  height: 100%;\n}\n\nnav {\n  padding: 30px;\n}\n\nnav a {\n  font-weight: bold;\n  color: #2c3e50;\n}\n\nnav a.router-link-exact-active {\n  color: #42b983;\n}\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=4fb952e8\"\nconst script = {}\n\nimport \"./App.vue?vue&type=style&index=0&id=4fb952e8&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker';\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready() {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n          'For more details, visit https://goo.gl/AFskqB'\n      );\n    },\n    registered() {\n      console.log('Service worker has been registered.');\n    },\n    cached() {\n      console.log('Content has been cached for offline use.');\n    },\n    updatefound() {\n      console.log('New content is downloading.');\n    },\n    updated() {\n      console.log('New content is available; please refresh.');\n    },\n    offline() {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    },\n    error(error) {\n      console.error('Error during service worker registration:', error);\n    }\n  });\n}\n","export enum MouseButtons {\n  Nope = 0,\n  Left = 1,\n  Right = 2,\n  Wheel = 4,\n  BrowserBack = 8,\n  BrowserForward = 16\n}\n","import { Vec2 } from \"../Primitives\";\n\ninterface ExtremumResult {\n    min: Vec2;\n    max: Vec2;\n}\n\nexport class MathUtil {\n    static Clamp(value: number, min: number, max: number): number {\n        return Math.max(Math.min(value, max), min);\n    }\n\n    static Between(value: number, min: number, max: number): boolean {\n        return value >= min && value <= max;\n    }\n\n    static Equal(x: number, y: number, tolerance = Number.EPSILON) {\n        return Math.abs(x - y) < tolerance;\n    }\n\n    static Extremum(points: Vec2[]): ExtremumResult {\n        if (points.length === 0) {\n            throw new Error('Empty points array');\n        }\n\n        const min = { ...points[0] };\n        const max = { ...points[0] };\n\n        for (let n = 1; n < points.length; ++n) {\n            const p = points[n];\n\n            if (p.x < min.x) {\n                min.x = p.x;\n            }\n\n            if (p.x > max.x) {\n                max.x = p.x;\n            }\n\n            if (p.y < min.y) {\n                min.y = p.y;\n            }\n\n            if (p.y > max.y) {\n                max.y = p.y;\n            }\n        }\n\n        return { min, max };\n    }\n\n    static Distance(p0: Vec2, p1: Vec2): number {\n        return Math.sqrt(MathUtil.SqrDistance(p0, p1));\n    }\n\n    public static SqrDistance(p0: Vec2, p1: Vec2): number {\n        return Math.pow(p0.x - p1.x, 2) + Math.pow(p0.y - p1.y, 2);\n    }\n}\n","import { vec2 } from \"gl-matrix\";\nimport { injectable } from \"inversify\";\n\nimport { MouseButtons } from \"@/lib/DOM/MouseButtons\";\nimport { MathUtil } from \"@/lib/math/MathUtil\";\nimport { Vec2 } from \"@/lib/Primitives\";\n\nclass OnSelectStrategy {\n    private mouseDownStart = 0;\n    private lastMouseDownPosition: Vec2 = { x: 0, y: 0 };\n\n    private isSelect = false;\n\n    constructor(\n        private releaseTimeout: number,\n        private maxDistance: number) { }\n\n    OnMouseDown(e: MouseEvent): void {\n        this.mouseDownStart = Date.now();\n        this.lastMouseDownPosition.x = e.offsetX;\n        this.lastMouseDownPosition.y = e.offsetY;\n    }\n\n    OnMouseUp(e: MouseEvent): void {\n        const distance = vec2.dist(\n            [this.lastMouseDownPosition.x, this.lastMouseDownPosition.y],\n            [e.offsetX, e.offsetY]);\n\n        const elapsedTime = Date.now() - this.mouseDownStart;\n\n        this.isSelect = distance <= this.maxDistance && elapsedTime <= this.releaseTimeout;\n    }\n\n    get IsSelect(): boolean {\n        return this.isSelect;\n    }\n}\n\nexport interface MouseMovementEvent {\n    startX: number;\n    startY: number;\n    movementX: number;\n    movementY: number;\n}\n\nexport interface MouseSelectEvent {\n    offsetX: number;\n    offsetY: number;\n}\n\ninterface TouchTrace {\n    id: number;\n    x: number;\n    y: number;\n}\n\ntype OnPanFn = (e: MouseMovementEvent) => void;\n\nclass TouchPan {\n    private touchPrev!: TouchTrace;\n\n    constructor(private pan: OnPanFn) { }\n\n    OnTouchStart(e: TouchEvent): void {\n        const touch = e.targetTouches[0];\n        this.touchPrev = {\n            id: touch.identifier,\n            x: touch.pageX,\n            y: touch.pageY\n        };\n    }\n\n    OnTouchMove(e: TouchEvent): void {\n        if (e.targetTouches.item(0)?.identifier !== this.touchPrev.id) {\n            return;\n        }\n\n        const touch = e.targetTouches[0];\n\n        this.pan({\n            startX: this.touchPrev.x * window.devicePixelRatio,\n            startY: this.touchPrev.y * window.devicePixelRatio,\n            movementX: (touch.pageX - this.touchPrev.x) * window.devicePixelRatio,\n            movementY: (touch.pageY - this.touchPrev.y) * window.devicePixelRatio\n        });\n\n        this.touchPrev.x = touch.pageX;\n        this.touchPrev.y = touch.pageY;\n    }\n}\n\ntype ZoomStartFn = () => void;\n\ntype ZoomProgressFn = (zoom: number) => void;\n\nexport class TouchZoom {\n    private readonly prev: TouchTrace[] = [\n        { id: -1, x: 0, y: 0 },\n        { id: -1, x: 0, y: 0 }\n    ];\n\n    constructor(\n        private zoomStart: ZoomStartFn,\n        private zoomProgress: ZoomProgressFn\n    ) { }\n\n    public OnTouchStart(e: TouchEvent): void {\n        if (e.targetTouches.length !== 2) {\n            return;\n        }\n\n        this.zoomStart();\n\n        this.UpdateTrace(e);\n    }\n\n    public OnTouchEnd(e: TouchEvent): void {\n        [...e.targetTouches].forEach(touch => {\n            const prevTouch = this.prev.find(x => x.id === touch.identifier);\n\n            if (prevTouch) {\n                prevTouch.id = -1;\n            }\n        });\n    }\n\n    public OnTouchMove(e: TouchEvent): void {\n        if (\n            e.targetTouches.length !== 2 ||\n            !this.prev.every(trace => trace.id !== -1)\n        ) {\n            return;\n        }\n\n        e.preventDefault();\n\n        const [p0, p1] = (\n            e.targetTouches[0].identifier === this.prev[0].id\n                ? [e.targetTouches[0], e.targetTouches[1]]\n                : [e.targetTouches[1], e.targetTouches[0]]\n        ).map(touch => ({ x: touch.pageX, y: touch.pageY }));\n\n        const dist0 = MathUtil.Distance(this.prev[0], this.prev[1]);\n        const dist1 = MathUtil.Distance(p0, p1);\n\n        this.zoomProgress(dist0 / dist1);\n    }\n\n    private UpdateTrace(e: TouchEvent): void {\n        for (let n = 0; n < e.targetTouches.length; ++n) {\n            this.prev[n].id = e.targetTouches[n].identifier;\n            this.prev[n].x = e.targetTouches[n].pageX;\n            this.prev[n].y = e.targetTouches[n].pageY;\n        }\n    }\n}\n\n@injectable()\nexport abstract class AppEventTransformer {\n    private readonly selectStrategy = new OnSelectStrategy(250, 3);\n\n    private touchPan: TouchPan;\n    private touchZoom: TouchZoom;\n\n    constructor() {\n        this.touchPan = new TouchPan((e: MouseMovementEvent) => this.OnPan(e));\n        this.touchZoom = new TouchZoom(\n            () => this.OnTouchZoomStart(),\n            (zoom: number) => this.OnTouchZoom(zoom)\n        );\n    }\n\n    OnMouseMove(e: MouseEvent): void {\n        if (e.buttons & MouseButtons.Left) {\n            this.OnPan({\n                startX: e.offsetX * window.devicePixelRatio,\n                startY: e.offsetY * window.devicePixelRatio,\n                movementX: e.movementX * window.devicePixelRatio,\n                movementY: e.movementY * window.devicePixelRatio\n            });\n        }\n    }\n\n    OnMouseDown(e: MouseEvent): void {\n        this.selectStrategy.OnMouseDown(e);\n    }\n\n    OnMouseUp(e: MouseEvent): void {\n        this.selectStrategy.OnMouseUp(e);\n\n        if (this.selectStrategy.IsSelect) {\n            this.OnSelect({\n                offsetX: e.offsetX * window.devicePixelRatio,\n                offsetY: e.offsetY * window.devicePixelRatio\n            });\n        }\n    }\n\n    OnTouchStart(e: TouchEvent): void {\n        this.touchPan.OnTouchStart(e);\n        this.touchZoom.OnTouchStart(e);\n    }\n\n    OnTouchMove(e: TouchEvent): void {\n        this.touchPan.OnTouchMove(e);\n        this.touchZoom.OnTouchMove(e);\n    }\n\n    OnTouchEnd(e: TouchEvent): void {\n        this.touchZoom.OnTouchEnd(e);\n    }\n\n    abstract OnPan(e: MouseMovementEvent): void;\n\n    abstract OnSelect(e: MouseSelectEvent): void;\n\n    abstract OnTouchZoomStart(): void;\n\n    abstract OnTouchZoom(zoom: number): void;\n}\n","export const InjectionToken = {\n    WebGLRenderingContext: Symbol('webgl2 rendering context'),\n    FontAtlas: Symbol('Font atlas'),\n    IconAtlas: Symbol('Icon atlas'),\n    FontAtlasTexture: Symbol('Font texture'),\n    IconAtlasTexture: Symbol('Icon texture'),\n    FontGlyphCollectionFactory: Symbol('Font glyph collection factory'),\n    HeatmapGridRendererFactory: Symbol('Heatmap grid renderer factory'),\n    HeatmapExtensionFactory: Symbol('Heatmap extension factory'),\n    UITextListRendererFactory: Symbol('UITetList renderer factory'),\n    CodeEditorServiceInputReceiverFactory: Symbol('CodeEditorServiceInputReceiver factory'),\n    UIEditableTextListRendererFactory: Symbol('UIEditableTextListRenderer factory'),\n    FileStorage: Symbol('File storage')\n};\n\n\nexport const UILabelRendererTargetName = {\n    Perspective: Symbol('UILabel perspective renderer'),\n    Unique: Symbol('UILabel unique')\n}\n\nexport const AppCommandInjectionToken = {\n    EditCellCommandFactory: Symbol('EditCellCommand factory'),\n    EditCellsRegionFactory: Symbol('EditCellsRegion factory')\n};\n\nexport const EditCellCommandPostAction = {\n    MoveNext: Symbol('MoveNext post action')\n};\n\nexport const EditCellsRegionCommandPostAction = {\n    MoveNext: Symbol('MoveNext post action'),\n    StayLeftTop: Symbol('StayLeftTop post action')\n};\n","import { Container } from \"inversify\";\n\nconst Inversify = new Container();\n\nexport { Inversify };\n","import { inject, injectable } from \"inversify\";\n\nimport { InjectionToken } from \"./InjectionToken\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { MemoryLimit } from \"@/lib/befunge/memory/MemoryLimit\";\nimport { Rgb } from \"@/lib/Primitives\";\n\ninterface Dimension {\n    Width: number;\n    Height: number;\n}\n\nexport interface ZCameraBoundary {\n    min: number;\n    max: number;\n}\n\nexport interface Visual {\n    editableCellStyle: Rgb;\n}\n\n@injectable()\nexport class AppSettings {\n    constructor(@inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext) {\n        this.AspectRatio = this.gl.canvas.width / this.gl.canvas.height;\n    }\n\n    public readonly ZNear = 1;\n\n    public readonly ZFar = 500;\n\n    public readonly Fovy = 60 / 180 * Math.PI;\n\n    public readonly ZCameraBoundary: ZCameraBoundary = { min: 50, max: 250 };\n\n    public AspectRatio = 1;\n\n    public get DevicePixelRatio(): number {\n        return window.devicePixelRatio;\n    }\n\n    public ViewDimension: Dimension = { Width: 800, Height: 600 };\n\n    public ExecutionTimeout = 1000;\n\n    public MaxOutputLength = 1000;\n\n    public MemoryLimit: MemoryLimit = { Width: 80, Height: 25 };\n\n    public Visual: Visual = { editableCellStyle: [0.21568627450980393, 0.2784313725490196, 0.30980392156862746] };\n}\n\nInversify.bind(AppSettings).toSelf().inSingletonScope();\n","export interface ShareableAppSettings {\n    heatmap?: boolean;\n    input?: string;\n}\n\nexport class DecodingException extends Error { }\n\ntype SettingsAssertion = [keyof ShareableAppSettings, (prop: keyof ShareableAppSettings, settings: ShareableAppSettings) => boolean];\n\nexport class AppSettingsCodec {\n    static Encode(settings: ShareableAppSettings): string {\n        return btoa(JSON.stringify(settings));\n    }\n\n    static Decode(encoded: string): ShareableAppSettings {\n        try {\n            const settings = JSON.parse(atob(encoded));\n\n            AppSettingsCodec.PropsValidation(settings);\n\n            return settings;\n        } catch (e) {\n            if (e instanceof DOMException) {\n                switch (e.name) {\n                    case 'InvalidCharacterError':\n                        throw new DecodingException('Failed to decode base64 shared settings url');\n                }\n            } else if (e instanceof SyntaxError) {\n                throw new DecodingException('Failed to decode json shared settings url');\n            }\n\n            throw e;\n        }\n    }\n\n    private static PropsValidation(settings: ShareableAppSettings): void {\n        const assertions: SettingsAssertion[] = [\n            ['heatmap', (p, x) => typeof x[p] === 'boolean'],\n            ['input', (p, x) => typeof x[p] === 'string']\n        ];\n\n        if (!assertions.every(x => x[0] in settings ? x[1](x[0], settings) : true)) {\n            throw new DecodingException('Failed to validate settings properties');\n        }\n    }\n}\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 v_color;\\n\\nout vec4 out_color;\\n\\n\\nvoid main() \\n{\\n      out_color = vec4(v_color, 1);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec2 a_vertex;\\nin vec3 a_color;\\n\\nout vec3 v_color;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position = u_viewProject * vec4(a_vertex, 0.01, 1.0);\\n\\n  v_color = a_color;\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec2 v_glyph;\\nin vec3 v_color;\\n\\nout vec4 out_color;\\n\\nuniform sampler2D u_glyph;\\n\\nvoid main() \\n{\\n      vec4 text_color = texture(u_glyph, v_glyph);\\n \\n      out_color = vec4(v_color - text_color.xyz, text_color.w);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec4 a_vertex;\\nin vec3 a_color;\\nin vec2 a_glyph;\\n\\nout vec2 v_glyph;\\nout vec3 v_color;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position = u_viewProject * a_vertex;\\n\\n  v_glyph = a_glyph;\\n  v_color = a_color;\\n}\\n\"","export function NotNull(msg: string): never {\n  throw new Error(msg);\n}\n","import { NotNull } from \"../NotNull\";\nimport { Vec2 } from \"../Primitives\";\n\ninterface AtlasFontOptions {\n    Name: string;\n    Size: number;\n}\n\ninterface AtlasOptions {\n    ASCIIRange: { Start: string, End: string },\n    Font: AtlasFontOptions\n}\n\ninterface UV {\n    A: Vec2;\n    B: Vec2;\n}\n\nexport class FontAtlas {\n    constructor(\n        private readonly startSymbolCode: number,\n        public readonly Columns: number,\n        public readonly Rows: number,\n        public readonly GlyphCount: number,\n        public readonly Image: ImageData) { }\n\n    LookupUV(symbol: string): UV {\n        if (symbol.length === 0) {\n            throw new Error(\"Symbol can't be empty string\");\n        }\n\n        const symbolCode = symbol.charCodeAt(0);\n        const glyphIdx = symbolCode - this.startSymbolCode;\n\n        if (glyphIdx < 0 || glyphIdx >= this.GlyphCount) {\n            throw new Error(\"The font atlas doesn't contain glyph for given symbol\");\n        }\n\n        const column = glyphIdx % this.Columns;\n        const row = Math.floor(glyphIdx / this.Columns);\n\n        const glyphWidth = 1 / this.Columns;\n        const glyphHeight = 1 / this.Rows;\n\n        const leftTop: Vec2 = {\n            x: glyphWidth * column,\n            y: glyphHeight * row\n        };\n\n        return {\n            A: leftTop,\n            B: { x: leftTop.x + glyphWidth, y: leftTop.y + glyphHeight }\n        };\n    }\n}\n\nclass FontAtlasBuilderImpl {\n    private options!: AtlasOptions;\n    private context!: CanvasRenderingContext2D;\n\n    Build(options: AtlasOptions): FontAtlas {\n        this.options = options;\n\n        const startCode = options.ASCIIRange.Start.charCodeAt(0);\n        const endCode = options.ASCIIRange.End.charCodeAt(0);\n\n        if (startCode > endCode) {\n            throw new Error('options.ASCIIRange.Start symbol must precede options.ASCIIRange.End');\n        }\n\n        const glyphCount = endCode - startCode + 1;\n        const columnCount = Math.ceil(Math.sqrt(glyphCount));\n        const rowCount = Math.ceil(glyphCount / columnCount);\n        const glyphCellSize = this.GlyphCellSize();\n\n        const canvas = this.SetupCanvas(columnCount * glyphCellSize, rowCount * glyphCellSize);\n        this.FillCanvasWithGlyphs(glyphCount, columnCount);\n\n        return new FontAtlas(\n            startCode,\n            columnCount,\n            rowCount,\n            glyphCount,\n            this.context.getImageData(0, 0, canvas.width, canvas.height)\n        );\n    }\n\n    private SetupCanvas(width: number, height: number): HTMLCanvasElement {\n        const canvas = document.createElement('canvas');\n\n        canvas.width = width;\n        canvas.height = height;\n\n        const context = canvas.getContext('2d') ?? NotNull('Failed to get context');\n        context.font = `${this.options.Font.Size}px ${this.options.Font.Name}`;\n        context.fillStyle = '#000';\n\n        this.context = context;\n\n        return canvas;\n    }\n\n    private FillCanvasWithGlyphs(glyphCount: number, columnCount: number): void {\n        for (let n = 0; n < glyphCount; ++n) {\n            const col = n % columnCount;\n            const row = Math.floor(n / columnCount);\n\n            const glyphCellSize = this.GlyphCellSize();\n            const halfGlyphCellSize = glyphCellSize / 2;\n            const cellCenter: Vec2 = { x: col * glyphCellSize + halfGlyphCellSize, y: row * glyphCellSize + halfGlyphCellSize };\n            const symbol = String.fromCharCode(this.options.ASCIIRange.Start.charCodeAt(0) + n);\n\n            const drawPosition = this.CenteredToBaseLine(cellCenter, symbol);\n\n            this.context.fillText(symbol, drawPosition.x, drawPosition.y);\n        }\n    }\n\n    private GlyphCellSize(): number {\n        return Math.ceil(this.options.Font.Size / 10) * 10;\n    }\n\n    private CenteredToBaseLine(pos: Vec2, symbol: string): Vec2 {\n        const metrics = this.context.measureText(symbol);\n\n        const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n\n        return {\n            x: pos.x - metrics.width / 2,\n            y: pos.y - metrics.actualBoundingBoxDescent + height / 2\n        };\n    }\n}\n\nexport class FontAtlasBuilder {\n    static Build(options: AtlasOptions): FontAtlas {\n        return new FontAtlasBuilderImpl().Build(options);\n    }\n}\n","import { Vec2 } from \"../Primitives\";\n\ninterface Dimension {\n    width: number;\n    height: number;\n}\n\ninterface ObjectAttribute {\n    LeftBottom: number[];\n    LeftTop: number[];\n    RightTop: number[];\n    RightBottom: number[];\n}\n\ntype Attribute = number[] | ObjectAttribute;\n\nexport class PrimitiveBuilder {\n    static AABBRectangle(\n        position: Vec2,\n        dimension: Dimension,\n        attributes: Attribute[]\n    ): number[] {\n        const leftBottom = [position.x, position.y];\n        const leftTop = [position.x, position.y + dimension.height];\n        const rightTop = [position.x + dimension.width, position.y + dimension.height];\n        const rightBottom = [position.x + dimension.width, position.y];\n\n        for (const attr of attributes) {\n            if (Array.isArray(attr)) {\n                leftBottom.push(...attr);\n                leftTop.push(...attr);\n                rightTop.push(...attr);\n                rightBottom.push(...attr);\n            } else {\n                leftBottom.push(...attr.LeftBottom);\n                leftTop.push(...attr.LeftTop);\n                rightTop.push(...attr.RightTop);\n                rightBottom.push(...attr.RightBottom);\n            }\n        }\n\n        return [\n            ...leftBottom,\n            ...rightTop,\n            ...leftTop,\n            ...leftBottom,\n            ...rightBottom,\n            ...rightTop\n        ];\n    }\n\n    static AABBFrame(\n        position: Vec2,\n        dimension: Dimension,\n        borderWidth: number,\n        attributes: Attribute[]): number[] {\n        const borderTop = PrimitiveBuilder.AABBRectangle(\n            { x: position.x, y: position.y + dimension.height - borderWidth },\n            { width: dimension.width, height: borderWidth },\n            attributes\n        );\n\n        const borderRight = PrimitiveBuilder.AABBRectangle(\n            { x: position.x + dimension.width - borderWidth, y: position.y },\n            { width: borderWidth, height: dimension.height - borderWidth },\n            attributes\n        );\n\n        const borderBottom = PrimitiveBuilder.AABBRectangle(\n            { x: position.x, y: position.y },\n            { width: dimension.width - borderWidth, height: borderWidth },\n            attributes\n        );\n\n        const borderLeft = PrimitiveBuilder.AABBRectangle(\n            { x: position.x, y: position.y + borderWidth },\n            { width: borderWidth, height: dimension.height - 2 * borderWidth },\n            attributes\n        );\n\n        return [\n            ...borderTop,\n            ...borderRight,\n            ...borderBottom,\n            ...borderLeft\n        ];\n    }\n}\n","type Comparator<T> = (a: T, b: T) => boolean;\n\nexport interface ArrayLikeMut<T> {\n    readonly length: number;\n    [n: number]: T;\n}\n\nexport class ArrayHelper {\n    static Max<T>(array: T[], comparator: Comparator<T>): T {\n        if (array.length === 1) {\n            return array[0];\n        }\n\n        let max = array[0];\n        for (let n = 1; n < array.length; ++n) {\n            if (comparator(max, array[n])) {\n                max = array[n];\n            }\n        }\n\n        return max;\n    }\n\n    static Min<T>(array: T[], comparator: Comparator<T>): T {\n        if (array.length === 1) {\n            return array[0];\n        }\n\n        let min = array[0];\n        for (let n = 1; n < array.length; ++n) {\n            if (comparator(array[n], min)) {\n                min = array[n];\n            }\n        }\n\n        return min;\n    }\n\n    static Copy<T>(dest: ArrayLikeMut<T>, destStart: number, src: ArrayLikeMut<T>, srcStart: number, length: number): void {\n        for (let n = 0; n < length; ++n) {\n            dest[destStart + n] = src[srcStart + n];\n        }\n    }\n}\n","import { NotNull } from '../NotNull';\n\nexport type Mat4 = [\n  number, number, number, number,\n  number, number, number, number,\n  number, number, number, number,\n  number, number, number, number];\n\nexport class ShaderProgram {\n  private uniformCache: Map<string, WebGLUniformLocation> = new Map();\n  protected instance: WebGLProgram;\n  public constructor(protected gl: WebGL2RenderingContext) {\n    if (!gl) throw new Error('Invalid webgl2 context');\n\n    this.instance =\n      gl.createProgram() ?? NotNull(\"Can't create shader program\");\n  }\n\n  public Attach(type: number, source: string) {\n    const shader = this.gl.createShader(type);\n    if (shader === null) throw new Error('Failed to create shader');\n\n    this.gl.shaderSource(shader, source);\n    this.gl.compileShader(shader);\n\n    if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n      const err = new Error(\n        this.gl.getShaderInfoLog(shader) ?? 'Failed to compile shader'\n      );\n      this.gl.deleteShader(shader);\n      throw err;\n    }\n\n    this.gl.attachShader(this.instance, shader);\n  }\n\n  public async AttachFromUrl(type: number, url: string) {\n    this.Attach(type, await (await fetch(url)).text());\n  }\n\n  public Link() {\n    this.gl.linkProgram(this.instance);\n    if (!this.gl.getProgramParameter(this.instance, this.gl.LINK_STATUS)) {\n      const err = new Error(\n        this.gl.getProgramParameter(this.instance, this.gl.LINK_STATUS) ??\n        'Failed to link shader'\n      );\n      this.gl.deleteProgram(this.instance);\n      throw err;\n    }\n  }\n\n  public Use() {\n    this.gl.useProgram(this.instance);\n  }\n\n  public SetUniform3fv(name: string, value: number[]) {\n    this.gl.uniform3fv(this.GetUniformLocation(name), value);\n  }\n\n  public SetUniform2fv(name: string, value: number[]) {\n    this.gl.uniform2fv(this.GetUniformLocation(name), value);\n  }\n\n  public SetUniform4fv(name: string, value: number[]) {\n    this.gl.uniform4fv(this.GetUniformLocation(name), value);\n  }\n\n  public SetUniform1f(name: string, value: number) {\n    this.gl.uniform1f(this.GetUniformLocation(name), value);\n  }\n\n  public SetUniform1i(name: string, value: number) {\n    this.gl.uniform1i(this.GetUniformLocation(name), value);\n  }\n\n  public SetUniform2iv(name: string, value: number[]) {\n    this.gl.uniform2iv(this.GetUniformLocation(name), value);\n  }\n\n  public SetUniformMatrix4fv(name: string, value: Mat4 | Float32Array) {\n    this.gl.uniformMatrix4fv(this.GetUniformLocation(name), false, value);\n  }\n\n  public GetAttributeLocation(name: string) {\n    this.Use();\n\n    const loc = this.gl.getAttribLocation(this.instance, name);\n\n    if (loc === -1) throw new Error(`Failed to locate attribute '${name}'`);\n\n    return loc;\n  }\n\n  Dispose(): void {\n    this.gl.deleteProgram(this.instance);\n  }\n\n  private GetUniformLocation(name: string) {\n    this.Use();\n\n    let loc = this.uniformCache.get(name) ?? null;\n\n    if (loc === null) {\n      loc = this.gl.getUniformLocation(this.instance, name);\n\n      if (loc === null) throw new Error(`Failed to locate uniform '${name}'`);\n\n      this.uniformCache.set(name, loc);\n    }\n\n    return loc;\n  }\n}\n","type SupportedTypes<T extends readonly (readonly [GLenum, number])[]> =\n  T[number][0];\n\nexport class TypeSizeResolver {\n  private static readonly Sizes = [\n    [window.WebGL2RenderingContext.BYTE, Int8Array.BYTES_PER_ELEMENT] as const,\n    [\n      window.WebGL2RenderingContext.SHORT,\n      Int16Array.BYTES_PER_ELEMENT\n    ] as const,\n    [\n      window.WebGL2RenderingContext.UNSIGNED_BYTE,\n      Uint8Array.BYTES_PER_ELEMENT\n    ] as const,\n    [\n      window.WebGL2RenderingContext.UNSIGNED_SHORT,\n      Uint16Array.BYTES_PER_ELEMENT\n    ] as const,\n    [\n      window.WebGL2RenderingContext.FLOAT,\n      Float32Array.BYTES_PER_ELEMENT\n    ] as const,\n    [window.WebGL2RenderingContext.HALF_FLOAT, 2] as const,\n    [window.WebGL2RenderingContext.INT, Int32Array.BYTES_PER_ELEMENT] as const,\n    [\n      window.WebGL2RenderingContext.UNSIGNED_INT,\n      Uint32Array.BYTES_PER_ELEMENT\n    ] as const,\n    [\n      window.WebGL2RenderingContext.INT_2_10_10_10_REV,\n      Int32Array.BYTES_PER_ELEMENT\n    ] as const,\n    [\n      window.WebGL2RenderingContext.UNSIGNED_INT_2_10_10_10_REV,\n      Int32Array.BYTES_PER_ELEMENT\n    ] as const\n  ] as const;\n\n  public static Resolve(\n    type: SupportedTypes<typeof TypeSizeResolver.Sizes>\n  ): number {\n    return (\n      TypeSizeResolver.Sizes.find(x => x[0] === type) as [GLenum, number]\n    )[1];\n  }\n}\n","\nimport { injectable, unmanaged } from 'inversify';\n\nimport { ArrayHelper } from '../ArrayHelper';\nimport { NotNull } from '../NotNull';\nimport { ArrayItemType } from '../TypeUtil';\n\nimport { ShaderProgram } from './ShaderProgram';\nimport { TypeSizeResolver } from './TypeSizeResolver';\n\ninterface ShaderProgramSource {\n  vertex: string;\n  fragment: string;\n}\n\ntype BasePrimitiveType =\n  | typeof WebGL2RenderingContext.POINTS\n  | typeof WebGL2RenderingContext.LINES\n  | typeof WebGL2RenderingContext.LINE_LOOP\n  | typeof WebGL2RenderingContext.LINE_STRIP\n  | typeof WebGL2RenderingContext.TRIANGLES\n  | typeof WebGL2RenderingContext.TRIANGLE_STRIP\n  | typeof WebGL2RenderingContext.TRIANGLE_FAN;\n\ntype FloatTypes = typeof WebGL2RenderingContext.HALF_FLOAT | typeof WebGL2RenderingContext.FLOAT;\ntype IntegerTypes = ArrayItemType<PrimitivesRenderer['IntegerTypes']>\n\ninterface FloatAttributeDescription {\n  name: string;\n  size: GLint;\n  type: FloatTypes;\n  normalized: GLboolean;\n}\n\ninterface IntegerAttributeDescription {\n  name: string;\n  size: GLint;\n  type: IntegerTypes;\n}\n\ntype AttributeDescription = FloatAttributeDescription | IntegerAttributeDescription;\n\ninterface PrimitiveDescription {\n  indicesPerPrimitive: number;\n  basePrimitiveType: BasePrimitiveType;\n}\n\n@injectable()\nexport class PrimitivesRenderer {\n  protected vbo!: WebGLBuffer;\n  private vao!: WebGLVertexArrayObject;\n  protected shader!: ShaderProgram;\n\n  protected vertexData = new ArrayBuffer(0);\n\n  //private componentsPerAttributeSet = 0;\n  /**\n   * Size of one vertex attributes in bytes\n   */\n  private stride = 0;\n  /**\n   * Count of primitive values per vertex\n   */\n  private componentsPerVertex = 0;\n  /**\n   * The total count of vertex stored in vertexData\n   */\n  private vertexCount = 0;\n\n  constructor(\n    @unmanaged() protected readonly gl: WebGL2RenderingContext,\n    @unmanaged() shaderSource: ShaderProgramSource,\n    @unmanaged() private attributes: AttributeDescription[],\n    @unmanaged() private readonly primitiveDescription: PrimitiveDescription\n  ) {\n    this.Setup(shaderSource);\n    this.SetupAttributes(attributes);\n  }\n\n  public UploadAttributes(attributes: number[]): void {\n    this.vertexCount = attributes.length / this.componentsPerVertex;\n    this.vertexData = new ArrayBuffer(this.stride * this.vertexCount);\n\n    for (let vertexStart = 0; vertexStart < attributes.length; vertexStart += this.componentsPerVertex) {\n      for (let attrDescIdx = 0, offset = 0, byteOffset = 0;\n        attrDescIdx < this.attributes.length;\n        offset += this.attributes[attrDescIdx].size,\n        byteOffset += TypeSizeResolver.Resolve(this.attributes[attrDescIdx].type) * this.attributes[attrDescIdx].size,\n        ++attrDescIdx) {\n\n        const attrInfo = this.attributes[attrDescIdx];\n\n        switch (attrInfo.type) {\n          case this.gl.FLOAT:\n            {\n              const target = new Float32Array(this.vertexData, vertexStart / this.componentsPerVertex * this.stride + byteOffset, attrInfo.size);\n\n              target.set(attributes.slice(vertexStart + offset, vertexStart + offset + attrInfo.size));\n            }\n            break;\n          case this.gl.UNSIGNED_INT:\n            {\n              const target = new Uint32Array(this.vertexData, vertexStart / this.componentsPerVertex * this.stride + byteOffset, attrInfo.size);\n\n              target.set(attributes.slice(vertexStart + offset, vertexStart + offset + attrInfo.size));\n            }\n            break;\n          default:\n            throw new Error('Unsupported attribute type');\n        }\n      }\n    }\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vbo);\n    this.gl.bufferData(\n      this.gl.ARRAY_BUFFER,\n      this.vertexData,\n      this.gl.DYNAMIC_DRAW\n    );\n  }\n\n  /**\n   * Update attributes for specific primitive. \n   * @param attributes Attributes that will be uploaded\n   * @param offset Starting index of primitive attributes. Measured in number of attributes\n   */\n  public UpdatePrimitiveComponents(attributes: number[], offset: number): void {\n    const vertexDataOffsetStart = offset / this.componentsPerVertex * this.stride;\n    for (let vertexStart = 0; vertexStart < attributes.length; vertexStart += this.componentsPerVertex) {\n      for (\n        let attrDescIdx = 0, byteOffset = vertexDataOffsetStart, attributeOffset = 0;\n        attrDescIdx < this.attributes.length;\n        attributeOffset += this.attributes[attrDescIdx].size,\n        byteOffset += TypeSizeResolver.Resolve(this.attributes[attrDescIdx].type) * this.attributes[attrDescIdx].size,\n        ++attrDescIdx) {\n\n        const attrInfo = this.attributes[attrDescIdx];\n\n        switch (attrInfo.type) {\n          case this.gl.FLOAT:\n            {\n              const target = new Float32Array(this.vertexData, vertexStart / this.componentsPerVertex * this.stride + byteOffset, attrInfo.size);\n\n              target.set(attributes.slice(vertexStart + attributeOffset, vertexStart + attributeOffset + attrInfo.size));\n            }\n            break;\n          case this.gl.UNSIGNED_INT:\n            {\n              const target = new Uint32Array(this.vertexData, vertexStart / this.componentsPerVertex * this.stride + byteOffset, attrInfo.size);\n\n              target.set(attributes.slice(vertexStart + attributeOffset, vertexStart + attributeOffset + attrInfo.size));\n            }\n            break;\n          default:\n            throw new Error('Unsupported attribute type');\n        }\n      }\n    }\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vbo);\n\n    const modifiedData = new Uint8Array(this.vertexData, vertexDataOffsetStart, attributes.length / this.componentsPerVertex * this.stride);\n    this.gl.bufferSubData(\n      this.gl.ARRAY_BUFFER,\n      vertexDataOffsetStart,\n      modifiedData,\n      0,\n      modifiedData.length);\n  }\n\n  /**\n   * Extract primitive attributes\n   * @param index primitive index\n   * @returns primitive components\n   */\n  PrimitiveComponents(index: number): number[] {\n    return this.PrimitiveComponentsRange(index, 1);\n  }\n\n  /**\n   * Extract attributes for 1 or more consequenced primitives\n   * @param primitiveStartIdx index of a first primitive\n   * @param primitivesCount number of primitives whose attributes will be retrieved\n   * @returns primitives components\n   */\n  PrimitiveComponentsRange(primitiveStartIdx: number, primitivesCount: number): number[] {\n    const attributes = new Array<number>(this.ComponentsPerPrimitive * primitivesCount).fill(0);\n\n    for (let vertexIdx = 0, attrIdx = 0; vertexIdx < this.primitiveDescription.indicesPerPrimitive * primitivesCount; ++vertexIdx) {\n      let byteOffset = (primitiveStartIdx * this.primitiveDescription.indicesPerPrimitive + vertexIdx) * this.stride;\n\n      for (const attrInfo of this.attributes) {\n        switch (attrInfo.type) {\n          case this.gl.FLOAT:\n            {\n              const src = new Float32Array(this.vertexData, byteOffset, attrInfo.size);\n              ArrayHelper.Copy(attributes, attrIdx, src, 0, src.length);\n            }\n            break;\n          case this.gl.UNSIGNED_INT:\n            {\n              const src = new Uint32Array(this.vertexData, byteOffset, attrInfo.size);\n              ArrayHelper.Copy(attributes, attrIdx, src, 0, src.length);\n            }\n            break;\n          default:\n            throw new Error('Unsupported attribute type');\n        }\n\n        byteOffset += TypeSizeResolver.Resolve(attrInfo.type) * attrInfo.size;\n        attrIdx += attrInfo.size;\n      }\n    }\n\n    return attributes;\n  }\n\n  /**\n   * Returns the total count of primitives\n   */\n  get TotalPrimitives(): number {\n    return this.vertexCount / this.primitiveDescription.indicesPerPrimitive;\n  }\n\n  /**\n     * Returns the count of components per vertex\n     */\n  get ComponentsPerVertex(): number {\n    return this.componentsPerVertex;\n  }\n\n  /**\n   * Returns the count of components per primitive\n   */\n  get ComponentsPerPrimitive(): number {\n    return this.componentsPerVertex * this.primitiveDescription.indicesPerPrimitive;\n  }\n\n  public Draw(): void {\n    this.shader.Use();\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vbo);\n    this.gl.bindVertexArray(this.vao);\n    this.gl.drawArrays(\n      this.primitiveDescription.basePrimitiveType,\n      0,\n      this.vertexCount\n    );\n  }\n\n  Dispose(): void {\n    this.gl.deleteBuffer(this.vbo);\n    this.gl.deleteVertexArray(this.vao);\n\n    this.shader.Dispose();\n  }\n\n  private Setup(shaderSource: ShaderProgramSource): void {\n    this.vbo = this.gl.createBuffer() ?? NotNull('Failed to create vbo');\n    this.vao = this.gl.createVertexArray() ?? NotNull('Failed to create vao');\n\n    this.shader = new ShaderProgram(this.gl);\n    this.shader.Attach(this.gl.FRAGMENT_SHADER, shaderSource.fragment);\n    this.shader.Attach(this.gl.VERTEX_SHADER, shaderSource.vertex);\n    this.shader.Link();\n    this.shader.Use();\n  }\n\n  private SetupAttributes(attributes: AttributeDescription[]): void {\n    if (attributes.length === 0) {\n      throw new Error(\"Attributes description can't be empty\");\n    }\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vbo);\n\n    this.gl.bindVertexArray(this.vao);\n\n    [this.componentsPerVertex, this.stride] = attributes.reduce(\n      (acc, attr) => [acc[0] + attr.size, acc[1] + attr.size * TypeSizeResolver.Resolve(attr.type)],\n      [0, 0]);\n\n    for (\n      let n = 0, offset = 0;\n      n < attributes.length;\n      offset += attributes[n].size * TypeSizeResolver.Resolve(attributes[n].type),\n      ++n) {\n      const attr = attributes[n];\n\n      const location = this.shader.GetAttributeLocation(attr.name);\n      this.gl.enableVertexAttribArray(location);\n\n      if (this.IsIntegerAttributesType(attr)) {\n        this.gl.vertexAttribIPointer(\n          location,\n          attr.size,\n          attr.type,\n          this.stride,\n          offset);\n      } else {\n        this.gl.vertexAttribPointer(\n          location,\n          attr.size,\n          attr.type,\n          attr.normalized,\n          this.stride,\n          offset);\n      }\n    }\n\n    this.gl.bindVertexArray(null);\n  }\n\n  private IsIntegerAttributesType(attributes: AttributeDescription): attributes is IntegerAttributeDescription {\n    return (this.IntegerTypes as number[]).includes(attributes.type);\n  }\n\n  private get IntegerTypes() {\n    return [this.gl.BYTE, this.gl.UNSIGNED_BYTE,\n    this.gl.SHORT, this.gl.UNSIGNED_SHORT,\n    this.gl.INT, this.gl.UNSIGNED_INT];\n  }\n}\n","\nimport { inject, injectable } from 'inversify';\n\nimport { AppSettings } from '../AppSettings';\nimport { InjectionToken } from '../InjectionToken';\n\nimport FGrid from './Grid.frag';\nimport VGrid from './Grid.vert';\n\nimport { Inversify } from '@/Inversify';\nimport { EnumSize } from '@/lib/EnumSize';\nimport { FontAtlas } from '@/lib/font/FontAtlasBuilder';\nimport { Rgb, Rgba, Vec2 } from '@/lib/Primitives';\nimport { PrimitiveBuilder } from '@/lib/renderer/PrimitiveBuilder';\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from '@/lib/renderer/ShaderProgram';\n\nexport interface EditorGridDimension {\n    Columns: number;\n    Rows: number;\n}\n\n@injectable()\nexport class EditorGridRenderer extends PrimitivesRenderer {\n    public readonly CellSize = 10;\n\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext,\n        @inject(InjectionToken.FontAtlas) private fontAtlas: FontAtlas,\n        @inject(InjectionToken.FontAtlasTexture) private fontAtlasTexture: WebGLTexture) {\n\n        super(gl,\n            { fragment: FGrid, vertex: VGrid },\n            [{\n                name: 'a_vertex',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_color',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_glyph',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false\n            }],\n            { indicesPerPrimitive: 6, basePrimitiveType: gl.TRIANGLES });\n\n        this.SetupRenderer();\n    }\n\n    ResizeGrid(): void {\n\n        const vertexList: number[] = [];\n        for (let row = 0; row < this.settings.MemoryLimit.Height; ++row) {\n            for (let col = 0; col < this.settings.MemoryLimit.Width; ++col) {\n                const cell = this.BuildCell(\n                    { x: col * this.CellSize, y: row * this.CellSize },\n                    [0, 0.592156862745098, 0.6549019607843137],\n                    ' ');\n\n                vertexList.push(...cell);\n            }\n        }\n\n        this.UploadAttributes(vertexList);\n    }\n\n    Symbol(symbol: string, column: number, row: number): void {\n        row = this.settings.MemoryLimit.Height - row - 1;\n        const cellIdx = row * this.settings.MemoryLimit.Width + column;\n        const cellAttrs = this.PrimitiveComponents(cellIdx);\n        const symbolUV = this.fontAtlas.LookupUV(symbol);\n\n        const UVStartOffset = 5;\n\n        // Left bottom\n        cellAttrs[UVStartOffset] = symbolUV.A.x;\n        cellAttrs[UVStartOffset + 1] = symbolUV.B.y;\n\n        // Right top\n        cellAttrs[UVStartOffset + this.ComponentsPerVertex] = symbolUV.B.x;\n        cellAttrs[UVStartOffset + this.ComponentsPerVertex + 1] = symbolUV.A.y;\n\n        // Left top\n        cellAttrs[UVStartOffset + 2 * this.ComponentsPerVertex] = symbolUV.A.x;\n        cellAttrs[UVStartOffset + 2 * this.ComponentsPerVertex + 1] = symbolUV.A.y;\n\n        // Left bottom\n        cellAttrs[UVStartOffset + 3 * this.ComponentsPerVertex] = symbolUV.A.x;\n        cellAttrs[UVStartOffset + 3 * this.ComponentsPerVertex + 1] = symbolUV.B.y;\n\n        // Right bottom\n        cellAttrs[UVStartOffset + 4 * this.ComponentsPerVertex] = symbolUV.B.x;\n        cellAttrs[UVStartOffset + 4 * this.ComponentsPerVertex + 1] = symbolUV.B.y;\n\n        // Right top\n        cellAttrs[UVStartOffset + 5 * this.ComponentsPerVertex] = symbolUV.B.x;\n        cellAttrs[UVStartOffset + 5 * this.ComponentsPerVertex + 1] = symbolUV.A.y;\n\n        this.UpdatePrimitiveComponents(cellAttrs, cellIdx * this.ComponentsPerPrimitive);\n    }\n\n    Draw(): void {\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this.fontAtlasTexture);\n\n        super.Draw();\n    }\n\n    private BuildCell(\n        position: Vec2,\n        color: Rgb | Rgba,\n        symbol: string\n    ): number[] {\n        const uv = this.fontAtlas.LookupUV(symbol);\n\n        return PrimitiveBuilder.AABBRectangle(\n            position,\n            { width: this.CellSize, height: this.CellSize },\n            [\n                color,\n                {\n                    LeftBottom: [uv.A.x, uv.B.y],\n                    LeftTop: [uv.A.x, uv.A.y],\n                    RightTop: [uv.B.x, uv.A.y],\n                    RightBottom: [uv.B.x, uv.B.y]\n                }\n            ]\n        );\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n\n    get Dimension(): EditorGridDimension {\n        return {\n            Columns: this.settings.MemoryLimit.Width,\n            Rows: this.settings.MemoryLimit.Height\n        };\n    }\n\n    private SetupRenderer(): void {\n        this.ResizeGrid();\n    }\n}\n\nInversify.bind(EditorGridRenderer).toSelf().inSingletonScope();\n","import { inject, injectable } from 'inversify';\n\nimport { InjectionToken } from '../InjectionToken';\n\nimport FCellsOutline from './CellsOutline.frag';\nimport VCellsOutline from './CellsOutline.vert';\nimport { EditorGridRenderer } from \"./EditorGridRenderer\";\n\nimport { Inversify } from '@/Inversify';\nimport { Rgb } from '@/lib/Primitives';\nimport { PrimitiveBuilder } from '@/lib/renderer/PrimitiveBuilder';\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from '@/lib/renderer/ShaderProgram';\n\n\n@injectable()\nexport class EditorGridCellsOutlineRenderer extends PrimitivesRenderer {\n    private readonly outlineWidth = 0.2;\n    private readonly cellOutlineColor: Rgb = [0.5647058823529412, 0.6431372549019608, 0.6823529411764706];\n\n    private gridOutlineWidth = 0.5;\n    private readonly gridOutlineColor: Rgb = [0.20392156862745098, 0.596078431372549, 0.8588235294117647];\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) protected gl: WebGL2RenderingContext,\n        @inject(EditorGridRenderer) private gridRenderer: EditorGridRenderer) {\n\n        super(\n            gl,\n            { fragment: FCellsOutline, vertex: VCellsOutline },\n            [{\n                name: 'a_vertex',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_color',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            }],\n            { indicesPerPrimitive: 6, basePrimitiveType: gl.TRIANGLES }\n        );\n\n        this.SetupRenderer();\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n\n    private SetupRenderer(): void {\n        const vertexList: number[] = [];\n\n        const editorOutline = PrimitiveBuilder.AABBFrame(\n            { x: 0, y: 0 },\n            {\n                width: this.gridRenderer.Dimension.Columns * this.gridRenderer.CellSize,\n                height: this.gridRenderer.Dimension.Rows * this.gridRenderer.CellSize\n            },\n            this.gridOutlineWidth,\n            [this.gridOutlineColor]);\n\n        vertexList.push(...editorOutline);\n\n        for (let row = 1; row < this.gridRenderer.Dimension.Rows; ++row) {\n            const rowAttrs = PrimitiveBuilder.AABBRectangle(\n                { x: 0, y: row * this.gridRenderer.CellSize },\n                {\n                    width: this.gridRenderer.Dimension.Columns * this.gridRenderer.CellSize,\n                    height: this.outlineWidth\n                },\n                [this.cellOutlineColor]);\n\n            vertexList.push(...rowAttrs);\n        }\n\n        for (let col = 1; col < this.gridRenderer.Dimension.Columns; ++col) {\n            const colAttrs = PrimitiveBuilder.AABBRectangle(\n                { x: col * this.gridRenderer.CellSize, y: 0 },\n                {\n                    width: this.outlineWidth,\n                    height: this.gridRenderer.Dimension.Rows * this.gridRenderer.CellSize\n                },\n                [this.cellOutlineColor]);\n\n            vertexList.push(...colAttrs);\n        }\n\n        this.UploadAttributes(vertexList);\n    }\n}\n\nInversify.bind(EditorGridCellsOutlineRenderer).toSelf().inSingletonScope();\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec2 v_glyph;\\nin vec3 v_color;\\n\\nout vec4 out_color;\\n\\nvoid main() \\n{ \\n      out_color = vec4(v_color, 1);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec2 a_vertex;\\nin vec3 a_color;\\n\\nout vec3 v_color;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position = u_viewProject * vec4(a_vertex, 0.02, 1.0);\\n  v_color = a_color;\\n}\\n\"","import { inject, injectable } from 'inversify';\n\nimport { InjectionToken } from '../InjectionToken';\n\nimport { EditorGridRenderer } from './EditorGridRenderer';\nimport FSelection from './Selection.frag';\nimport VSelection from './Selection.vert';\n\nimport { Inversify } from '@/Inversify';\nimport { MathUtil } from '@/lib/math/MathUtil';\nimport { Rgb, Vec2 } from '@/lib/Primitives';\nimport { PrimitiveBuilder } from '@/lib/renderer/PrimitiveBuilder';\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from '@/lib/renderer/ShaderProgram';\n\ninterface SelectionBoundaryPoint {\n    x: number;\n    y: number;\n}\n\ninterface Selection {\n    a: SelectionBoundaryPoint;\n    b: SelectionBoundaryPoint;\n}\n\n@injectable()\nexport class SelectionRenderer extends PrimitivesRenderer {\n    private static readonly IndicesPerPrimitive = 24;\n\n    private readonly selected: Selection[] = [];\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext,\n        @inject(EditorGridRenderer) private editorGridRenderer: EditorGridRenderer) {\n\n        super(\n            gl,\n            { fragment: FSelection, vertex: VSelection },\n            [\n                {\n                    name: 'a_vertex',\n                    size: 2,\n                    type: gl.FLOAT,\n                    normalized: false\n                },\n                {\n                    name: 'a_color',\n                    size: 3,\n                    type: gl.FLOAT,\n                    normalized: false\n                }\n            ],\n            { indicesPerPrimitive: SelectionRenderer.IndicesPerPrimitive, basePrimitiveType: gl.TRIANGLES });\n    }\n\n    Select(x: number, y: number, color: Rgb): void {\n        this.SelectRegion({ x, y }, { x, y }, color);\n    }\n\n    SelectRegion(p0: Vec2, p1: Vec2, color: Rgb): void {\n        const region = MathUtil.Extremum([this.FlipY(p0), this.FlipY(p1)]);\n\n        if (this.OutOfGrid(region.min) || this.OutOfGrid(region.max)) {\n            return;\n        }\n\n        const selectionIdx = this.selected\n            .findIndex(r => r.a.x === region.min.x && r.a.y === region.min.y && r.b.x === region.max.x && r.b.y === region.max.y);\n\n        if (selectionIdx !== -1) {\n            const colorOffset = 2;\n            const attrs = this.PrimitiveComponents(selectionIdx);\n\n            for (let n = 0; n < SelectionRenderer.IndicesPerPrimitive; ++n) {\n                const colorStart = colorOffset + n * this.ComponentsPerVertex;\n\n                attrs[colorStart] = color[0];\n                attrs[colorStart + 1] = color[1];\n                attrs[colorStart + 2] = color[2];\n            }\n\n            this.UpdatePrimitiveComponents(attrs, selectionIdx * this.ComponentsPerVertex * SelectionRenderer.IndicesPerPrimitive)\n        } else {\n            this.selected.push({ a: region.min, b: region.max });\n\n            const attributes = PrimitiveBuilder.AABBFrame(\n                {\n                    x: region.min.x * this.editorGridRenderer.CellSize,\n                    y: region.min.y * this.editorGridRenderer.CellSize\n                },\n                {\n                    width: (region.max.x - region.min.x + 1) * this.editorGridRenderer.CellSize,\n                    height: (region.max.y - region.min.y + 1) * this.editorGridRenderer.CellSize\n                },\n                0.5,\n                [color]);\n\n            this.UploadAttributes([\n                ...this.PrimitiveComponentsRange(0, this.TotalPrimitives),\n                ...attributes\n            ]);\n        }\n    }\n\n    private OutOfGrid(p: Vec2): boolean {\n        return p.x < 0 || p.x >= this.editorGridRenderer.Dimension.Columns ||\n            p.y < 0 || p.y >= this.editorGridRenderer.Dimension.Rows;\n    }\n\n    private FlipY(point: Vec2): Vec2 {\n        return {\n            x: point.x,\n            y: this.editorGridRenderer.Dimension.Rows - point.y - 1\n        }\n    }\n\n    Unselect(x: number, y: number): void {\n        this.UnselectRegion({ x, y }, { x, y });\n    }\n\n    UnselectRegion(p0: Vec2, p1: Vec2): void {\n        const region = MathUtil.Extremum([this.FlipY(p0), this.FlipY(p1)]);\n\n        const selectionIdx = this.selected\n            .findIndex(r => r.a.x === region.min.x && r.a.y === region.min.y && r.b.x === region.max.x && r.b.y === region.max.y);\n\n        if (selectionIdx === -1) {\n            return;\n        }\n\n        const attributes = this.PrimitiveComponentsRange(0, this.TotalPrimitives);\n        attributes.splice(selectionIdx * this.ComponentsPerPrimitive, this.ComponentsPerPrimitive);\n\n        this.UploadAttributes(attributes);\n\n        this.selected.splice(selectionIdx, 1);\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n}\n\nInversify.bind(SelectionRenderer).toSelf().inSingletonScope();","import { inject, injectable } from \"inversify\";\n\nimport { EditorGridCellsOutlineRenderer } from \"./EditorGridCellsOutlineRenderer\";\nimport { EditorGridDimension, EditorGridRenderer } from \"./EditorGridRenderer\";\nimport { SelectionRenderer } from \"./SelectionRenderer\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\nimport { Mat4 } from \"@/lib/renderer/ShaderProgram\";\n\n@injectable()\nexport class CodeEditorRenderer {\n    private viewProjection!: Mat4 | Float32Array;\n\n    constructor(\n        @inject(EditorGridRenderer) private editorGridRenderer: EditorGridRenderer,\n        @inject(EditorGridCellsOutlineRenderer) private editorGridCellsOutlineRenderer: EditorGridCellsOutlineRenderer,\n        @inject(SelectionRenderer) private selectionRenderer: SelectionRenderer) { }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.viewProjection = mat;\n\n        this.editorGridRenderer.ViewProjection = mat;\n        this.editorGridCellsOutlineRenderer.ViewProjection = mat;\n        this.selectionRenderer.ViewProjection = mat;\n    }\n\n    get ViewProjection(): Mat4 | Float32Array {\n        return this.viewProjection;\n    }\n\n    Symbol(symbol: string, column: number, row: number): void {\n        this.editorGridRenderer.Symbol(symbol, column, row);\n    }\n\n    Select(column: number, row: number, color: Rgb): void {\n        this.selectionRenderer.Select(column, row, color);\n    }\n\n    SelectRegion(p0: Vec2, p1: Vec2, color: Rgb): void {\n        this.selectionRenderer.SelectRegion(p0, p1, color);\n    }\n\n    Unselect(column: number, row: number): void {\n        this.selectionRenderer.Unselect(column, row);\n    }\n\n    UnselectRegion(p0: Vec2, p1: Vec2): void {\n        this.selectionRenderer.UnselectRegion(p0, p1);\n    }\n\n    Draw(): void {\n        this.editorGridRenderer.Draw();\n        this.editorGridCellsOutlineRenderer.Draw();\n        this.selectionRenderer.Draw();\n    }\n\n    Clear(): void {\n        for (let row = 0; row < this.Dimension.Rows; ++row) {\n            for (let column = 0; column < this.Dimension.Columns; ++column) {\n                this.Symbol(' ', column, row);\n            }\n        }\n    }\n\n    IsValidLocation(column: number, row: number): boolean {\n        return column >= 0 && column < this.Dimension.Columns && row >= 0 && row < this.Dimension.Rows;\n    }\n\n    get Dimension(): EditorGridDimension {\n        return this.editorGridRenderer.Dimension;\n    }\n\n    get CellSize(): number {\n        return this.editorGridRenderer.CellSize;\n    }\n}\n\nInversify.bind(CodeEditorRenderer).toSelf().inSingletonScope();\n","import { vec2 } from \"gl-matrix\";\n\nimport { ArrayHelper } from \"../ArrayHelper\";\nimport { Vec2 } from \"../Primitives\";\n\nimport { MathUtil } from \"./MathUtil\";\n\nexport interface Rectangle {\n    lb: Vec2;\n    rt: Vec2;\n}\n\ninterface DistanceDiffResult {\n    distance: number;\n    diff: vec2;\n}\n\nexport class Transformation {\n    static MoveRectangleToPlaceInsideRectangle(movable: Rectangle, destination: Rectangle): Vec2 {\n        const betweenByX = MathUtil.Between(movable.lb.x, destination.lb.x, destination.rt.x) &&\n            MathUtil.Between(movable.rt.x, destination.lb.x, destination.rt.x);\n\n        const betweenByY = MathUtil.Between(movable.lb.y, destination.lb.y, destination.rt.y) &&\n            MathUtil.Between(movable.rt.y, destination.lb.y, destination.rt.y);\n\n        if (betweenByX && betweenByY) return { x: 0, y: 0 };\n\n        if (betweenByX) {\n            const distanceToTop = Math.abs(movable.rt.y - destination.rt.y);\n            const distanceToBottom = Math.abs(movable.lb.y - destination.lb.y);\n            return {\n                x: 0,\n                y: distanceToTop < distanceToBottom ? -distanceToTop : distanceToBottom\n            };\n        }\n\n        if (betweenByY) {\n            const distanceToLeft = Math.abs(movable.lb.x - destination.lb.x);\n            const distanceToRight = Math.abs(movable.rt.x - destination.rt.x);\n            return {\n                x: distanceToLeft < distanceToRight ? distanceToLeft : -distanceToRight,\n                y: 0\n            };\n        }\n\n        const corners = [\n            Transformation.DistanceDiff(\n                vec2.fromValues(movable.lb.x, movable.lb.y),\n                vec2.fromValues(destination.lb.x, destination.lb.y)),\n            Transformation.DistanceDiff(\n                vec2.fromValues(movable.lb.x, movable.rt.y),\n                vec2.fromValues(destination.lb.x, destination.rt.y)),\n            Transformation.DistanceDiff(\n                vec2.fromValues(movable.rt.x, movable.rt.y),\n                vec2.fromValues(destination.rt.x, destination.rt.y)),\n            Transformation.DistanceDiff(\n                vec2.fromValues(movable.rt.x, movable.lb.y),\n                vec2.fromValues(destination.rt.x, destination.lb.y))\n        ];\n\n        const closest = ArrayHelper.Min(corners, (a, b) => a.distance < b.distance);\n\n        return { x: closest.diff[0], y: closest.diff[1] };\n    }\n\n    static ShortestMoveForIntersection(movable: Rectangle, destination: Rectangle): Vec2 {\n        const leftToRight = destination.rt.x - movable.lb.x;\n        const rightToLeft = destination.lb.x - movable.rt.x;\n\n        const bottomToTop = destination.rt.y - movable.lb.y;\n        const topToBottom = destination.lb.y - movable.rt.y;\n\n        const intersectByX = !(leftToRight < 0 || rightToLeft > 0);\n        const intersectByY = !(bottomToTop < 0 || topToBottom > 0);\n\n        if (intersectByX && intersectByY) {\n            return { x: 0, y: 0 };\n        }\n\n        const x = leftToRight < 0 ?\n            leftToRight :\n            rightToLeft > 0 ?\n                rightToLeft :\n                0;\n\n        const y = bottomToTop < 0 ?\n            bottomToTop :\n            topToBottom > 0 ?\n                topToBottom :\n                0;\n\n\n        return { x, y };\n    }\n\n    private static DistanceDiff(a: vec2, b: vec2): DistanceDiffResult {\n        return {\n            distance: vec2.distance(a, b),\n            diff: vec2.sub(vec2.create(), b, a)\n        };\n    }\n}\n","import { vec3 } from 'gl-matrix';\n\nimport { Vec2 } from '../Primitives';\n\nexport interface Plane {\n    a: number;\n    b: number;\n    c: number;\n    d: number\n}\n\nexport type Vec3 = [number, number, number];\n\nexport interface Line {\n    a: Vec3;\n    b: Vec3;\n}\n\n// (x, y) represents left bottom corner\nexport interface Rectangle {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\n\nexport interface Range {\n    min: number;\n    max: number;\n}\n\nexport class Intersection {\n    static PlaneLine(plane: Plane, line: Line): Vec3 {\n        const d0 = vec3.dot([plane.a, plane.b, plane.c], line.a) + plane.d;\n        const d1 = vec3.dot([plane.a, plane.b, plane.c], line.b) + plane.d;\n        const t = -d0 / (d1 - d0);\n        const intersection = vec3.add(vec3.create(), line.a, vec3.scale(vec3.create(), vec3.sub(vec3.create(), line.b, line.a), t));\n\n        return [intersection[0], intersection[1], intersection[2]];\n    }\n\n    static AABBRectanglePoint(rectangle: Rectangle, point: Vec2): boolean {\n        return (\n            point.x <= rectangle.x + rectangle.width &&\n            point.x >= rectangle.x &&\n            point.y <= rectangle.y + rectangle.height &&\n            point.y >= rectangle.y\n        );\n    }\n\n    static RectangleRectangle(a: Rectangle, b: Rectangle): boolean {\n        const aTopRight: Vec2 = { x: a.x + a.width, y: a.y + a.height };\n        const bTopRight: Vec2 = { x: b.x + b.width, y: b.y + b.height };\n\n        return a.x < bTopRight.x && aTopRight.x > b.x &&\n            a.y < bTopRight.y && aTopRight.y > b.y;\n    }\n\n    static RangeRange(a: Range, b: Range): boolean {\n        return a.min < b.max && a.max > b.min;\n    }\n}\n","import { vec2, vec3, vec4, mat4 } from 'gl-matrix';\n\nimport { Intersection, Plane } from '../math/Intersection';\nimport { Vec2 } from '../Primitives';\n\nexport interface WndCoord {\n    x: number;\n    y: number;\n    z: number;\n}\n\nexport interface Viewport {\n    width: number;\n    height: number;\n}\n\nexport class Camera {\n    static Unproject(position: WndCoord, viewProjection: mat4, viewport: Viewport): vec4 {\n        const vec = vec3.fromValues(position.x, position.y, position.z);\n\n        const v = vec4.fromValues(\n            2 * vec[0] / viewport.width - 1,\n            1 - 2 * vec[1] / viewport.height,\n            2 * vec[2] - 1,\n            1\n        );\n\n        const invertViewProj = mat4.invert(mat4.create(), viewProjection);\n\n        const pos = vec4.transformMat4(vec4.create(), v, invertViewProj);\n\n        pos[3] = 1 / pos[3];\n        pos[0] *= pos[3];\n        pos[1] *= pos[3];\n        pos[2] *= pos[3];\n\n        return pos;\n    }\n\n    static UnprojectMovement(movement: Vec2, plane: Plane, viewProjection: mat4, viewport: Viewport): Vec2 {\n        const posNear0 = Camera.Unproject({ x: 0, y: 0, z: 0 }, viewProjection, viewport);\n        const posFar0 = Camera.Unproject({ x: 0, y: 0, z: 1 }, viewProjection, viewport);\n\n        const intersection0 = Intersection.PlaneLine(\n            plane,\n            { a: [posNear0[0], posNear0[1], posNear0[2]], b: [posFar0[0], posFar0[1], posFar0[2]] });\n\n        const posNear1 = Camera.Unproject({ x: movement.x, y: movement.y, z: 0 }, viewProjection, viewport);\n        const posFar1 = Camera.Unproject({ x: movement.x, y: movement.y, z: 1 }, viewProjection, viewport);\n\n        const intersection1 = Intersection.PlaneLine(\n            plane,\n            { a: [posNear1[0], posNear1[1], posNear1[2]], b: [posFar1[0], posFar1[1], posFar1[2]] });\n\n        const delta = vec2.sub(\n            vec2.create(),\n            vec2.fromValues(intersection0[0], intersection0[1]),\n            vec2.fromValues(intersection1[0], intersection1[1]));\n\n        return { x: delta[0], y: delta[1] };\n    }\n}\n","import { mat4, vec3 } from \"gl-matrix\";\nimport { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"./AppSettings\";\nimport { CodeEditorRenderer } from \"./CodeEditor/CodeEditorRenderer\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Transformation } from \"@/lib/math/Transformation\";\nimport { Vec3 } from \"@/lib/Primitives\";\nimport { Camera } from \"@/lib/renderer/Camera\";\n\n@injectable()\nexport class CameraService {\n    private camera: mat4 = mat4.create();\n    private projection: mat4 = mat4.create();\n    private viewProjection: mat4 = mat4.create();\n\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(CodeEditorRenderer) private codeEditorRenderer: CodeEditorRenderer) {\n        this.UpdateProjection();\n        this.UpdateViewProjection();\n    }\n\n    MoveTo(position: Partial<Vec3>): void {\n        position.x !== undefined && (this.camera[12] = position.x);\n        position.y !== undefined && (this.camera[13] = position.y);\n        position.z !== undefined && (this.camera[14] = position.z);\n\n        this.UpdateViewProjection();\n        this.MaintainCodeEditorVisible();\n    }\n\n    Translate(delta: Partial<Vec3>): void {\n        mat4.translate(\n            this.camera,\n            this.camera,\n            [\n                delta.x ?? 0,\n                delta.y ?? 0,\n                delta.z ?? 0\n            ]);\n\n        this.UpdateViewProjection();\n        this.MaintainCodeEditorVisible();\n    }\n\n    get Position(): Vec3 {\n        return {\n            x: this.camera[12],\n            y: this.camera[13],\n            z: this.camera[14]\n        };\n    }\n\n    get ViewProjection(): mat4 {\n        return this.viewProjection;\n    }\n\n    Resize(): void {\n        this.UpdateProjection();\n        this.UpdateViewProjection();\n    }\n\n    private UpdateProjection(): void {\n        mat4.perspective(\n            this.projection,\n            this.settings.Fovy,\n            this.settings.AspectRatio,\n            this.settings.ZNear,\n            this.settings.ZFar);\n    }\n\n    private UpdateViewProjection(): void {\n        const view = mat4.invert(mat4.create(), this.camera);\n        mat4.mul(this.viewProjection, this.projection, view);\n    }\n\n    private MaintainCodeEditorVisible(): void {\n        const cellSize = this.codeEditorRenderer.CellSize;\n        const lbNDC = vec3.transformMat4(vec3.create(), [cellSize, cellSize, 0], this.viewProjection);\n        const rtNDC = vec3.transformMat4(\n            vec3.create(),\n            [\n                (this.settings.MemoryLimit.Width - 1) * cellSize,\n                (this.settings.MemoryLimit.Height - 1) * cellSize,\n                0\n            ],\n            this.viewProjection);\n\n        const ndcCompensation = Transformation.ShortestMoveForIntersection(\n            { lb: { x: lbNDC[0], y: lbNDC[1] }, rt: { x: rtNDC[0], y: rtNDC[1] } },\n            { lb: { x: -1, y: -1 }, rt: { x: 1, y: 1 } });\n\n        if (ndcCompensation.x === 0 && ndcCompensation.y === 0) {\n            return;\n        }\n\n        const screenCompensation = {\n            x: ndcCompensation.x * this.settings.ViewDimension.Width / 2,\n            y: ndcCompensation.y * this.settings.ViewDimension.Height / 2\n        };\n\n        const worldCompensation = Camera.UnprojectMovement(\n            { x: screenCompensation.x, y: -screenCompensation.y },\n            { a: 0, b: 0, c: 1, d: 0 },\n            this.ViewProjection,\n            {\n                width: this.settings.ViewDimension.Width,\n                height: this.settings.ViewDimension.Height\n            });\n\n        mat4.translate(\n            this.camera,\n            this.camera,\n            [\n                worldCompensation.x,\n                worldCompensation.y,\n                0\n            ]);\n\n        this.UpdateViewProjection();\n    }\n}\n\nInversify.bind(CameraService).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"@/app/AppSettings\";\nimport { Inversify } from \"@/Inversify\";\nimport { MathUtil } from \"@/lib/math/MathUtil\";\nimport { Vec2 } from \"@/lib/Primitives\";\nimport { Dimension, UIComponent } from \"@/lib/UI/UIComponent\";\n\n@injectable()\nexport class HeadlineControlsLayout {\n    private skipUpdates = false;\n\n    private components: UIComponent[] = [];\n\n    private position: Vec2 = { x: Number.POSITIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n\n    private absolutePosition: Vec2 = { x: Number.POSITIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n\n    private dimension: Dimension = { width: 0, height: 0 };\n\n    constructor(@inject(AppSettings) private settings: AppSettings) { }\n\n    Watch(component: UIComponent): void {\n        component.Observable.Attach(component => this.ComponentUpdated(component));\n\n        this.components.push(component);\n        this.ComponentUpdated(component);\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    get AbsolutePosition(): Vec2 {\n        return this.absolutePosition;\n    }\n\n    get Dimension(): Dimension {\n        return this.dimension;\n    }\n\n    get Scale(): number {\n        return this.settings.DevicePixelRatio;\n    }\n\n    private ComponentUpdated(component: UIComponent): void {\n        if (!this.skipUpdates && (component.Scale / this.settings.DevicePixelRatio < 1 || component.AbsolutePosition.x + component.Dimension.width > this.settings.ViewDimension.Width)) {\n            const margin = 10;\n            const targetScale = this.settings.ViewDimension.Width / (component.Position.x + component.Dimension.width / component.Scale + margin);\n            const scale = Math.min(targetScale / this.settings.DevicePixelRatio - Number.EPSILON, 1);\n\n            this.skipUpdates = true;\n            this.components.forEach(x => x.Scale = scale);\n            this.skipUpdates = false;\n        }\n\n        this.MaintainPositionDimension();\n    }\n\n    private MaintainPositionDimension(): void {\n        const relativeExtremum = MathUtil\n            .Extremum(this.components.map(x => ({ ...x.Position })));\n\n        this.position.x = relativeExtremum.min.x;\n        this.position.y = relativeExtremum.min.y;\n\n\n        const absoluteExtremum = MathUtil\n            .Extremum(this.components.flatMap(x => this.MapComponent(x)));\n\n        this.absolutePosition.x = absoluteExtremum.min.x;\n        this.absolutePosition.y = absoluteExtremum.min.y;\n\n        this.dimension.width = absoluteExtremum.max.x - absoluteExtremum.min.x;\n        this.dimension.height = absoluteExtremum.max.y - absoluteExtremum.min.y;\n    }\n\n    private MapComponent(component: UIComponent): Vec2[] {\n        const dimension = component.Dimension;\n\n        return [\n            component.AbsolutePosition,\n            {\n                x: component.AbsolutePosition.x + dimension.width,\n                y: component.AbsolutePosition.y + dimension.height\n            }\n        ];\n    }\n}\n\nInversify.bind(HeadlineControlsLayout).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { HeadlineControlsLayout } from \"./HeadlineControlsLayout\";\n\nimport { AppSettings } from \"@/app/AppSettings\";\nimport { Inversify } from \"@/Inversify\";\nimport { Intersection } from \"@/lib/math/Intersection\";\nimport { UIComponent } from \"@/lib/UI/UIComponent\";\n\n@injectable()\nexport class DebugControlsLayout {\n    private skipUpdates = false;\n\n    private debugGroup!: UIComponent;\n\n    private readonly verticalPosition = 60;\n\n    constructor(\n        @inject(HeadlineControlsLayout) private headlineLayout: HeadlineControlsLayout,\n        @inject(AppSettings) private settings: AppSettings) { }\n\n    set DebugGroup(group: UIComponent) {\n        this.debugGroup = group;\n\n        group.Observable.Attach(() => this.DebugGroupUpdated());\n    }\n\n    DebugGroupUpdated(): void {\n        if (this.skipUpdates) {\n            return;\n        }\n\n        queueMicrotask(() => this.RecalculatePosition());\n    }\n\n    private RecalculatePosition(): void {\n        const debugGroupDimension = this.debugGroup.Dimension;\n\n        if (Intersection.RangeRange(\n            { min: this.debugGroup.AbsolutePosition.x, max: this.debugGroup.AbsolutePosition.x + debugGroupDimension.width },\n            { min: this.headlineLayout.AbsolutePosition.x, max: this.headlineLayout.AbsolutePosition.x + this.headlineLayout.Dimension.width })) {\n\n            const margin = 10;\n\n            this.skipUpdates = true;\n\n            this.debugGroup.Position = {\n                x: this.debugGroup.Position.x,\n                y: (this.settings.ViewDimension.Height - this.headlineLayout.AbsolutePosition.y) / this.headlineLayout.Scale + debugGroupDimension.height / this.debugGroup.Scale + margin\n            };\n\n            this.skipUpdates = false;\n        } else {\n            this.skipUpdates = true;\n\n            this.debugGroup.Position = {\n                x: this.debugGroup.Position.x,\n                y: this.verticalPosition\n            };\n\n            this.skipUpdates = false;\n        }\n    }\n}\n\nInversify.bind(DebugControlsLayout).toSelf().inSingletonScope();\n","import { Pointer } from '../memory/Memory';\n\nexport class IllegalInstructionException extends Error {\n  constructor(\n    public readonly Where: Pointer,\n    public readonly Opcode: number,\n    public readonly Symbol: string) {\n    super(`An illegal instruction was executed.\\nWith opcode ${Opcode}(${Symbol}) at location ${Where.x}:${Where.y}`);\n  }\n}\n\nexport enum PCDirection {\n  Right,\n  Down,\n  Left,\n  Up\n}\n\nexport interface CPU {\n  StackPush(value: number): void;\n  StackPop(): number;\n  StackDuplicate(): void;\n  StackSwap(): void;\n\n  PCDirection(dir: PCDirection): void;\n  ExecuteNext(): void;\n  SkipNext(): void;\n\n  StringModeToggle(): void;\n\n  ReadMemory(ptr: Pointer): number;\n  WriteMemory(ptr: Pointer, value: number): void;\n\n  WriteIO(symbol: string): void;\n  ReadCharacter(): string;\n  ReadNumber(): number;\n\n  Halt(): void;\n\n  get IsHalted(): boolean;\n\n  get NextInstructionCode(): string;\n\n  get PC(): { Location: Pointer; Direction: PCDirection };\n\n  get Stack(): number[];\n}\n","export type Observer<T> = (target: T) => void;\n\nexport type ObserverDetacher = () => void;\n\ninterface ObserverDescriptor<T> {\n    id: symbol;\n    priority: number;\n    observer: Observer<T>;\n}\n\ninterface AttachOptions {\n    priority: number;\n}\n\nexport const ObservablePriority = {\n    Low: Number.NEGATIVE_INFINITY,\n    Normal: 0,\n    High: Number.POSITIVE_INFINITY\n}\n\nexport interface Observable<T> {\n    Attach(observer: Observer<T>, options?: AttachOptions): ObserverDetacher;\n}\n\nexport class ObservableController<T> implements Observable<T> {\n    private observers: ObserverDescriptor<T>[] = [];\n\n    Attach(observer: Observer<T>, options: AttachOptions = { priority: ObservablePriority.Normal }): ObserverDetacher {\n        const descriptor: ObserverDescriptor<T> = {\n            id: Symbol(),\n            priority: options.priority,\n            observer\n        };\n\n        this.observers.push(descriptor);\n\n        this.MaintainSorted();\n\n        return () => this.observers.splice(this.observers.findIndex(x => x.id === descriptor.id), 1);\n    }\n\n    DetachAll(): void {\n        this.observers = [];\n    }\n\n    Notify(sender: T): void {\n        this.observers.forEach(o => o.observer(sender));\n    }\n\n    private MaintainSorted(): void {\n        for (let n = this.observers.length - 1;\n            n > 0 && this.observers[n].priority > this.observers[n - 1].priority;\n            --n) {\n            const temp = this.observers[n - 1];\n            this.observers[n - 1] = this.observers[n];\n            this.observers[n] = temp;\n        }\n    }\n}\n","import { interfaces } from \"inversify\";\n\nexport interface AsyncConstructable {\n    AsyncConstructor(): Promise<void>;\n}\n\nexport async function AsyncConstructorActivator<T extends AsyncConstructable>(_context: interfaces.Context, constructable: T): Promise<T> {\n    await constructable.AsyncConstructor();\n    return constructable;\n}\n","import { Vec2 } from \"../Primitives\";\n\nexport interface Rectangle {\n    width: number;\n    height: number;\n}\n\ninterface PackageItem<TRectangle extends Rectangle> {\n    target: TRectangle;\n    position: Vec2;\n}\n\ninterface Dimension {\n    width: number;\n    height: number;\n}\n\nexport interface Package<TRectangle extends Rectangle> {\n    items: PackageItem<TRectangle>[];\n    dimension: Dimension;\n}\n\nexport class RectangleRowPacker<TRectangle extends Rectangle> {\n    private rectangles: TRectangle[] = [];\n\n    Add(rectangle: TRectangle): void {\n        this.rectangles.push(rectangle);\n    }\n\n    Pack(): Package<TRectangle> {\n        let idealArea = 0;\n        let maxWidth = 0;\n        for (const rect of this.rectangles) {\n            idealArea += rect.width * rect.height;\n            maxWidth = Math.max(maxWidth, rect.width);\n        }\n\n        const estimatedWidth = Math.max(Math.ceil(Math.sqrt(idealArea)), maxWidth);\n\n        this.rectangles.sort((a, b) => b.height - a.height);\n\n        const pack: PackageItem<TRectangle>[] = [];\n        let maxHeightInRow = 0;\n        let x = 0, y = 0;\n        for (const rect of this.rectangles) {\n            if (x + rect.width > estimatedWidth) {\n                x = 0;\n                y += maxHeightInRow;\n                maxHeightInRow = 0;\n            }\n\n            pack.push({ target: rect, position: { x, y } });\n\n            maxHeightInRow = Math.max(maxHeightInRow, rect.height);\n            x += rect.width;\n        }\n\n        return { items: pack, dimension: { width: estimatedWidth, height: y + maxHeightInRow } };\n    }\n}\n\n/* class RectanglePacker<TRectangle extends Rectangle> {\n    private rectangles: Rectangle[] = [];\n\n    Add(rectangle: Rectangle): void {\n        this.rectangles.push(rectangle.Clone());\n    }\n\n    Pack(): void {\n        const roughtArea = this.RoughlyPackedArea();\n\n        console.log(roughtArea);\n    }\n\n    private RoughlyPackedArea(): number {\n        const totalWidthFromLeft = Array.from({ length: this.rectangles.length + 1 }, () => ({ width: 0, maxHeight: 0 }));\n\n        for (let n = 0; n < this.rectangles.length; ++n) {\n            const rect = this.rectangles[n];\n\n            totalWidthFromLeft[n + 1].width = totalWidthFromLeft[n].width + rect.Width;\n            totalWidthFromLeft[n + 1].maxHeight = Math.max(totalWidthFromLeft[n].maxHeight, rect.Height);\n        }\n\n        totalWidthFromLeft[totalWidthFromLeft.length - 1].width = 0;\n        totalWidthFromLeft[totalWidthFromLeft.length - 1].maxHeight = 0;\n\n        for (let n = this.rectangles.length - 1; n >= 0; --n) {\n            const rect = this.rectangles[n];\n\n            const nonRotatedHeight = Math.max(totalWidthFromLeft[n].maxHeight, rect.Height, totalWidthFromLeft[n + 1].maxHeight);\n            const nonRotatedWidth = totalWidthFromLeft[n].width + rect.Width + totalWidthFromLeft[n + 1].width;\n            const nonRotatedArea = nonRotatedWidth * nonRotatedHeight;\n\n            const rotatedHeight = Math.max(totalWidthFromLeft[n].maxHeight, rect.Width, totalWidthFromLeft[n + 1].maxHeight);\n            const rotatedWidth = totalWidthFromLeft[n].width + rect.Height + totalWidthFromLeft[n + 1].width;\n            const rotatedArea = rotatedWidth * rotatedHeight;\n\n            //console.log(`${nonRotatedWidth} * ${nonRotatedHeight} = ${nonRotatedArea}`, `${rotatedWidth} * ${rotatedHeight} = ${rotatedArea}`);\n            if (rotatedArea < nonRotatedArea) {\n                const w = rect.Width;\n                rect.Width = rect.Height;\n                rect.Height = w;\n\n                if (n > 0 && totalWidthFromLeft[n - 1].maxHeight < rect.Height) {\n                    totalWidthFromLeft[n - 1].maxHeight = rect.Height;\n                }\n            }\n\n            totalWidthFromLeft[n].width = rect.Width + totalWidthFromLeft[n + 1].width;\n            totalWidthFromLeft[n].maxHeight = Math.max(rect.Height, totalWidthFromLeft[n + 1].maxHeight);\n            //console.log(JSON.stringify(totalWidthFromLeft));\n        }\n\n        let totalWidth = 0;\n        let maxHeight = 0;\n\n        for (const rect of this.rectangles) {\n            totalWidth += rect.Width;\n            maxHeight = Math.max(maxHeight, rect.Height);\n        }\n\n        return totalWidth * maxHeight;\n    }\n} */\n","import { Package, RectangleRowPacker } from \"../math/RectanglePacker\";\nimport { NotNull } from \"../NotNull\";\nimport { Vec2 } from \"../Primitives\";\n\ninterface Dimension {\n    width: number;\n    height: number;\n}\n\nexport interface UV {\n    A: Vec2;\n    B: Vec2;\n}\n\ninterface ImageToPack<TId> {\n    id: TId;\n    filename: string;\n    width: number;\n    height: number;\n}\n\nexport class TextureAtlas<TId> {\n    protected static readonly UndefinedUV = { A: { x: -1, y: -1 }, B: { x: -1, y: -1 } };\n\n    protected pack!: Package<ImageToPack<TId>>;\n\n    constructor(public readonly Image: ImageData, pack: Package<ImageToPack<TId>>) {\n        this.ClonePackage(pack);\n        this.NormalizePackage();\n    }\n\n    LookupUV(id: TId): UV {\n        const found = this.pack.items.find(x => x.target.id === id);\n\n        if (found === undefined) {\n            return TextureAtlas.UndefinedUV;\n        }\n\n        return {\n            A: { x: found.position.x, y: found.position.y },\n            B: { x: found.position.x + found.target.width, y: found.position.y + found.target.height }\n        };\n    }\n\n    static IsUndefinedUV(uv: UV): boolean {\n        return uv === TextureAtlas.UndefinedUV;\n    }\n\n    private ClonePackage(pack: Package<ImageToPack<TId>>): void {\n        this.pack = {\n            dimension: { ...pack.dimension },\n            items: pack.items.map(x => ({ position: { ...x.position }, target: { ...x.target } }))\n        };\n    }\n\n    private NormalizePackage(): void {\n        this.pack.items.forEach(item => {\n            item.position.x /= this.pack.dimension.width;\n            item.position.y /= this.pack.dimension.height;\n            item.target.width /= this.pack.dimension.width;\n            item.target.height /= this.pack.dimension.height;\n        });\n    }\n}\n\nexport class TextureAtlasBuilder<TId> {\n    private images: ImageToPack<TId>[] = [];\n\n    private context!: CanvasRenderingContext2D;\n\n    Add(id: TId, filename: string, dimension: Dimension): void {\n        this.images.push({ id, filename, ...dimension });\n    }\n\n    async Build(): Promise<TextureAtlas<TId>> {\n        const packer = new RectangleRowPacker<ImageToPack<TId>>();\n        this.images.forEach(img => packer.Add(img));\n        const pack = packer.Pack();\n\n        this.SetupCanvas(pack.dimension.width, pack.dimension.height);\n\n        for (const packed of pack.items) {\n            const img = await TextureAtlasBuilder.CreateImage(packed.target.filename);\n\n            this.context.drawImage(img,\n                packed.position.x, packed.position.y,\n                packed.target.width, packed.target.height);\n        }\n\n        return new TextureAtlas(\n            this.context.getImageData(0, 0, pack.dimension.width, pack.dimension.height),\n            pack\n        );\n    }\n\n    private SetupCanvas(width: number, height: number): void {\n        const canvas = document.createElement('canvas');\n\n        //document.body.appendChild(canvas);\n\n        canvas.width = width;\n        canvas.height = height;\n\n        const context = canvas.getContext('2d') ?? NotNull('Failed to get context');\n\n        this.context = context;\n    }\n\n    private static async CreateImage(src: string): Promise<HTMLImageElement> {\n        const image = new Image();\n        return new Promise((resolve, reject) => {\n            image.onload = () => resolve(image);\n            image.onerror = () => reject(new Error('Failed to create an image'));\n            image.src = `${process.env.BASE_URL}${src}`;\n        });\n    }\n}\n","import { injectable } from \"inversify\";\n\nimport { AsyncConstructable, AsyncConstructorActivator } from \"../DI/AsyncConstructorActivator\";\nimport { TextureAtlas, TextureAtlasBuilder, UV } from \"../renderer/TextureAtlas\";\n\nimport { Inversify } from \"@/Inversify\";\n\nexport enum UIIcon {\n    Empty, Open, Save, ArrowRight, ArrowDown, ArrowLeft, ArrowUp, Debugger,\n    Play, PlayDebug, DebugStepInto,\n    ExclamationCircle, ExclamationTriangle, QuestionMark, CheckCircle,\n    Breakpoint, ArrowThinAll, ArrowThinRight, ArrowThinDown, ArrowThinLeft, ArrowThinUp,\n    Delete, Stop, Heatmap, Undo, Redo, Settings, Select, Copy, Cut, Paste, EditDelete, Share,\n    Input, Output, Keyboard, Shift, Backspace, Enter\n};\n\nexport interface UVExtra extends UV {\n    aspectRatio: number;\n}\n\nexport interface IconExtra<TId> {\n    id: TId;\n    aspectRatio: number;\n}\n\n@injectable()\nexport class UIIconAtlas implements AsyncConstructable {\n    private atlas!: TextureAtlas<UIIcon>;\n    private iconExtras: IconExtra<UIIcon>[] = [];\n\n    async AsyncConstructor(): Promise<void> {\n        await this.BuildAtlas();\n    }\n\n    LookupUV(id: UIIcon): UVExtra {\n        switch (id) {\n            case UIIcon.ArrowLeft:\n                {\n                    const uv = this.atlas.LookupUV(UIIcon.ArrowRight);\n                    return {\n                        A: { x: uv.B.x, y: uv.B.y },\n                        B: { x: uv.A.x, y: uv.A.y },\n                        aspectRatio: this.ExtractAspectRatio(UIIcon.ArrowRight)\n                    };\n                }\n            case UIIcon.ArrowUp:\n                {\n                    const uv = this.atlas.LookupUV(UIIcon.ArrowDown);\n                    return {\n                        A: { x: uv.B.x, y: uv.B.y },\n                        B: { x: uv.A.x, y: uv.A.y },\n                        aspectRatio: this.ExtractAspectRatio(UIIcon.ArrowDown)\n                    };\n                }\n            case UIIcon.ArrowThinLeft:\n                {\n                    const uv = this.atlas.LookupUV(UIIcon.ArrowThinRight);\n                    return {\n                        A: { x: uv.B.x, y: uv.B.y },\n                        B: { x: uv.A.x, y: uv.A.y },\n                        aspectRatio: this.ExtractAspectRatio(UIIcon.ArrowThinRight)\n                    };\n                }\n            case UIIcon.ArrowThinDown:\n                {\n                    const uv = this.atlas.LookupUV(UIIcon.ArrowThinUp);\n                    return {\n                        A: { x: uv.B.x, y: uv.B.y },\n                        B: { x: uv.A.x, y: uv.A.y },\n                        aspectRatio: this.ExtractAspectRatio(UIIcon.ArrowThinUp)\n                    };\n                }\n            case UIIcon.Undo:\n                {\n                    const uv = this.atlas.LookupUV(UIIcon.Redo);\n                    return {\n                        A: { x: uv.B.x, y: uv.A.y },\n                        B: { x: uv.A.x, y: uv.B.y },\n                        aspectRatio: this.ExtractAspectRatio(UIIcon.Redo)\n                    };\n                }\n            default:\n                return { ...this.atlas.LookupUV(id), aspectRatio: this.ExtractAspectRatio(id) };\n        }\n    }\n\n    get Image(): ImageData {\n        return this.atlas.Image;\n    }\n\n    private ExtractAspectRatio(id: UIIcon): number {\n        return this.iconExtras.find(x => x.id === id)!.aspectRatio;\n    }\n\n    private async BuildAtlas(): Promise<void> {\n        const builder = new TextureAtlasBuilder<UIIcon>();\n\n        const icons = [\n            {\n                id: UIIcon.Empty,\n                filename: 'ui_icons/empty.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ArrowRight,\n                filename: 'ui_icons/arrow_right.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ArrowDown,\n                filename: 'ui_icons/arrow_down.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Debugger,\n                filename: 'ui_icons/bug.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Open,\n                filename: 'ui_icons/open.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Save,\n                filename: 'ui_icons/save.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Play,\n                filename: 'ui_icons/play.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.PlayDebug,\n                filename: 'ui_icons/play_debug.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.DebugStepInto,\n                filename: 'ui_icons/debug_step_into.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ExclamationCircle,\n                filename: 'ui_icons/exclamation_circle.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ExclamationTriangle,\n                filename: 'ui_icons/exclamation_triangle.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.QuestionMark,\n                filename: 'ui_icons/question_mark.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.CheckCircle,\n                filename: 'ui_icons/check_circle.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Breakpoint,\n                filename: 'ui_icons/breakpoint.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ArrowThinAll,\n                filename: 'ui_icons/arrow_thin_all.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ArrowThinUp,\n                filename: 'ui_icons/arrow_thin_up.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ArrowThinRight,\n                filename: 'ui_icons/arrow_thin_right.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Delete,\n                filename: 'ui_icons/trash_can.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Stop,\n                filename: 'ui_icons/stop.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Heatmap,\n                filename: 'ui_icons/heatmap.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Redo,\n                filename: 'ui_icons/redo.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Settings,\n                filename: 'ui_icons/settings.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Select,\n                filename: 'ui_icons/select.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Copy,\n                filename: 'ui_icons/copy.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Cut,\n                filename: 'ui_icons/cut.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Paste,\n                filename: 'ui_icons/paste.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.EditDelete,\n                filename: 'ui_icons/edit_delete.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Share,\n                filename: 'ui_icons/share.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Input,\n                filename: 'ui_icons/input.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Output,\n                filename: 'ui_icons/output.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Keyboard,\n                filename: 'ui_icons/keyboard.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Shift,\n                filename: 'ui_icons/shift.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Backspace,\n                filename: 'ui_icons/backspace.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Enter,\n                filename: 'ui_icons/enter.svg',\n                dimension: { width: 128, height: 128 }\n            }\n        ];\n\n        for (const icon of icons) {\n            builder.Add(icon.id, icon.filename, icon.dimension);\n            this.iconExtras.push({ id: icon.id, aspectRatio: icon.dimension.width / icon.dimension.height });\n        }\n\n        this.atlas = await builder.Build();\n    }\n}\n\nInversify.bind(UIIconAtlas).toSelf().inSingletonScope().onActivation(AsyncConstructorActivator);\n","import { Observable, ObservableController } from \"../Observable\";\nimport { Vec2 } from \"../Primitives\";\n\nimport { Dimension, UIComponent } from \"./UIComponent\";\n\nimport { AppSettings } from \"@/app/AppSettings\";\nimport { Inversify } from \"@/Inversify\";\n\nexport enum HorizontalAnchor { Left, Right, Middle };\n\nexport enum VerticalAnchor { Bottom, Top };\n\nexport interface Anchor {\n    horizontal?: HorizontalAnchor;\n    vertical?: VerticalAnchor;\n}\n\nexport class UIObservablePositioningGroup implements UIComponent {\n    private observable = new ObservableController<UIObservablePositioningGroup>();\n\n    private scale = 1;\n\n    private childs: UIComponent[] = [];\n\n    private updateNeeded = false;\n\n    private dimension: Dimension = { width: 0, height: 0 };\n\n    constructor(\n        private position: Vec2,\n        private anchor: Anchor = { vertical: VerticalAnchor.Bottom, horizontal: HorizontalAnchor.Left }) {\n    }\n\n    public Resize(): void {\n        this.observable.Notify(this);\n    }\n\n    AppendChild(component: UIComponent): void {\n        this.childs.push(component);\n\n        if (!this.updateNeeded) {\n            queueMicrotask(() => this.UpdateChilds());\n        }\n\n        this.updateNeeded = true;\n    }\n\n    private UpdateChilds(): void {\n        this.CalculateDimension();\n\n        this.observable.Notify(this);\n\n        this.updateNeeded = false;\n    }\n\n    RemoveChild(component: UIComponent): void {\n        const removeIdx = this.childs.indexOf(component);\n\n        if (removeIdx !== -1) {\n            this.childs.splice(removeIdx, 1);\n        }\n\n        if (!this.updateNeeded) {\n            queueMicrotask(() => this.UpdateChilds());\n        }\n\n        this.updateNeeded = true;\n    }\n\n    get Observable(): Observable<UIComponent> {\n        return this.observable;\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    set Position(position: Vec2) {\n        this.position = position;\n\n        this.observable.Notify(this);\n    }\n\n    get AbsolutePosition(): Vec2 {\n        const dimension = Inversify.get(AppSettings).ViewDimension;\n\n        return {\n            x: this.HorizontalPositionRespectAnchor(dimension.Width),\n            y: this.VerticalPositionRespectAnchor(dimension.Height)\n        };\n    }\n\n    get Scale(): number {\n        return this.scale * Inversify.get(AppSettings).DevicePixelRatio;\n    }\n\n    set Scale(scale: number) {\n        this.scale = scale;\n\n        this.observable.Notify(this);\n    }\n\n    get Dimension(): Dimension {\n        return this.dimension;\n    }\n\n    CalculateDimension(): void {\n        if (this.childs.length === 0) {\n\n            this.dimension.width = 0;\n            this.dimension.height = 0;\n\n            return;\n        }\n\n        const min = { x: Number.POSITIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n        const max = { x: Number.NEGATIVE_INFINITY, y: Number.NEGATIVE_INFINITY };\n\n        for (const component of this.childs) {\n            UIObservablePositioningGroup.MaintainExtremum(component.Position, { min, max });\n\n            const rightTop = {\n                x: component.Position.x * component.Scale + component.Dimension.width,\n                y: component.Position.y * component.Scale + component.Dimension.height\n            };\n\n            UIObservablePositioningGroup.MaintainExtremum(rightTop, { min, max });\n        }\n\n        this.dimension.width = max.x - min.x;\n        this.dimension.height = max.y - min.y;\n    }\n\n    Destroy(): void {\n        [...this.childs].forEach(x => x.Destroy());\n    }\n\n    private static MaintainExtremum(point: Vec2, extremum: { min: Vec2, max: Vec2 }): void {\n        if (point.x < extremum.min.x) {\n            extremum.min.x = point.x;\n        }\n\n        if (point.x > extremum.max.x) {\n            extremum.max.x = point.x;\n        }\n\n        if (point.y < extremum.min.y) {\n            extremum.min.y = point.y;\n        }\n\n        if (point.y > extremum.max.y) {\n            extremum.max.y = point.y;\n        }\n    }\n\n    private HorizontalPositionRespectAnchor(viewWidth: number): number {\n        switch (this.anchor.horizontal) {\n            default:\n            case HorizontalAnchor.Left:\n                return this.position.x * this.Scale;\n            case HorizontalAnchor.Right:\n                return viewWidth - this.position.x * this.Scale;\n            case HorizontalAnchor.Middle:\n                return (viewWidth - this.Dimension.width) / 2 + this.Position.x;\n        }\n    }\n\n    private VerticalPositionRespectAnchor(viewHeight: number): number {\n        switch (this.anchor.vertical) {\n            default:\n            case VerticalAnchor.Bottom:\n                return this.position.y * this.Scale;\n            case VerticalAnchor.Top:\n                return viewHeight - this.position.y * this.Scale;\n        }\n    }\n}\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec2 v_icon;\\nin vec3 v_fillColor;\\nin vec3 v_iconColor;\\n\\nout vec4 out_color;\\n\\nuniform sampler2D u_icon;\\n\\nvoid main() \\n{\\n    vec4 text_color = texture(u_icon, v_icon);\\n    out_color = mix(vec4(v_fillColor, 1.0), vec4(v_iconColor - text_color.xzy, 1.0), text_color.w);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\nin vec3 a_fillColor;\\nin vec3 a_iconColor;\\nin vec2 a_icon;\\n\\nout vec2 v_icon;\\nout vec3 v_fillColor;\\nout vec3 v_iconColor;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0) ;\\n\\n  v_icon = a_icon;\\n  v_fillColor = a_fillColor;\\n  v_iconColor = a_iconColor;\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 v_color;\\n\\nout vec4 out_color;\\n\\n\\nvoid main() \\n{\\n      out_color = vec4(v_color, 1);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\nin vec3 a_color;\\n\\nout vec3 v_color;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0) ;\\n\\n  v_color = a_color;\\n}\\n\"","import { vec2 } from \"gl-matrix\";\n\nimport { UIComponent } from \"../UIComponent\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\n\nimport { Dimension, UIAlert, UIAlertIconStyle, UIAlertStyle, UIAlertText } from \"./UIAlert\";\n\nimport { Observable, ObservableController, ObserverDetacher } from \"@/lib/Observable\";\nimport { Vec2 } from \"@/lib/Primitives\";\n\nexport type DeleterCallback = (component: UIObservableAlert) => void;\n\nexport class UIObservableAlert implements UIComponent, UIAlert {\n    private observable = new ObservableController<UIObservableAlert>();\n\n    private scale = 1;\n\n    private isDestroyed = false;\n\n    private parentDetacher: ObserverDetacher | null = null;\n\n    constructor(\n        private position: Vec2,\n        private dimension: Dimension,\n        private zIndex: number,\n        private icon: UIAlertIconStyle,\n        private text: UIAlertText,\n        private style: UIAlertStyle,\n        public Offset: number,\n        private deleter: DeleterCallback,\n        private parent: UIObservablePositioningGroup | null = null) {\n        this.parentDetacher = parent?.Observable.Attach(() => this.observable.Notify(this)) ?? null;\n    }\n\n    Destroy(): void {\n        this.isDestroyed = true;\n\n        this.Uninitialize();\n\n        this.parent?.RemoveChild(this);\n\n        this.deleter(this);\n\n        if (this.parentDetacher !== null) {\n            this.parentDetacher();\n        }\n    }\n\n    get Observable(): Observable<UIObservableAlert> {\n        return this.observable;\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    set Position(position: Vec2) {\n        this.position = position;\n\n        this.observable.Notify(this);\n    }\n\n    get Dimension(): Dimension {\n        return {\n            width: this.dimension.width * this.Scale,\n            height: this.dimension.height * this.Scale\n        };\n    }\n\n    set Dimension(dimension: Dimension) {\n        this.dimension = dimension;\n\n        this.observable.Notify(this);\n    }\n\n    get AbsolutePosition(): Vec2 {\n        if (this.parent) {\n            const parentPosition = [this.parent.AbsolutePosition.x, this.parent.AbsolutePosition.y] as const;\n            const absolutePosition = vec2.add(vec2.create(), parentPosition, [this.Position.x * this.Scale, this.Position.y * this.Scale]);\n\n            return { x: absolutePosition[0], y: absolutePosition[1] };\n        } else {\n            return this.Position;\n        }\n    }\n\n    get ZIndex(): number {\n        return this.zIndex;\n    }\n\n    set ZIndex(zIndex: number) {\n        this.zIndex = zIndex;\n\n        this.observable.Notify(this);\n    }\n\n    get Scale(): number {\n        return this.parent === null ? this.scale : this.scale * this.parent.Scale;\n    }\n\n    set Scale(scale: number) {\n        this.scale = scale;\n\n        this.observable.Notify(this);\n    }\n\n    get Icon(): UIAlertIconStyle {\n        return this.icon;\n    }\n\n    set Icon(style: UIAlertIconStyle) {\n        this.icon = { ...style };\n\n        this.observable.Notify(this);\n    }\n\n    get Text(): UIAlertText {\n        return this.text;\n    }\n\n    set Text(text: UIAlertText) {\n        this.text = { ...text };\n\n        this.observable.Notify(this);\n    }\n\n    get Style(): UIAlertStyle {\n        return this.style;\n    }\n\n    set Style(style: UIAlertStyle) {\n        this.style = { ...style };\n\n        this.observable.Notify(this);\n    }\n\n    get IsDestroyed(): boolean {\n        return this.isDestroyed;\n    }\n\n    private Uninitialize(): void {\n        this.position = { x: 0, y: 0 };\n        this.dimension = { width: 0, height: 0 };\n    }\n}\n","export abstract class MemoryPoolTracker {\n    private static readonly NoFree = -1;\n    private static readonly InUse = -2;\n    private static growthFactor = 2;\n    private static shrinkFactor = 0.25;\n\n    private pool: number[];\n    private nextFree = MemoryPoolTracker.NoFree;\n    private size = 0;\n\n    constructor(\n        capacity: number) {\n        this.pool = Array.from({ length: capacity }, (_, n) => n + 1);\n\n        if (capacity > 0) {\n            this.pool[this.pool.length - 1] = MemoryPoolTracker.NoFree;\n\n            this.nextFree = 0;\n        }\n    }\n\n    /**\n     *\n     * @returns index in the pool array\n     */\n    Allocate(): number {\n        ++this.size;\n\n        if (this.HasFreeSlot) {\n            const freeSlot = this.nextFree;\n\n            this.nextFree = this.pool[this.nextFree];\n\n            this.pool[freeSlot] = MemoryPoolTracker.InUse;\n\n            return freeSlot;\n        } else {\n            const slot = this.pool.length;\n            this.nextFree = this.pool.length + 1;\n\n            this.pool = [\n                ...this.pool,\n                ...Array.from({ length: this.pool.length * MemoryPoolTracker.growthFactor - this.pool.length }, (_, n) => this.pool.length + n + 1)\n            ];\n            this.pool[this.pool.length - 1] = MemoryPoolTracker.NoFree;\n\n            this.pool[slot] = MemoryPoolTracker.InUse;\n\n            this.OnExtend(this.Capacity);\n\n            return slot;\n        }\n    }\n\n    Free(index: number): void {\n        if (index >= this.pool.length || this.pool[index] !== MemoryPoolTracker.InUse) {\n            return;\n        }\n\n        this.pool[index] = this.nextFree;\n\n        this.nextFree = index;\n\n        --this.size;\n\n        if (this.size / this.Capacity <= MemoryPoolTracker.shrinkFactor) {\n            this.OnShrink(this.GatherInUseIndices());\n\n            this.Shrink();\n        }\n    }\n\n\n    get Capacity(): number {\n        return this.pool.length;\n    }\n\n    abstract OnShrink(inUseIndices: number[]): void;\n\n    abstract OnExtend(extendedCapacity: number): void;\n\n    private get HasFreeSlot(): boolean {\n        return this.nextFree < this.pool.length && this.nextFree !== MemoryPoolTracker.NoFree;\n    }\n\n    private GatherInUseIndices(): number[] {\n        const inUse: number[] = [];\n\n        for (let n = 0; n < this.pool.length; ++n) {\n            if (this.pool[n] === MemoryPoolTracker.InUse) {\n                inUse.push(n);\n            }\n        }\n\n        return inUse;\n    }\n\n    private Shrink(): void {\n        this.pool.splice(this.size, this.pool.length - this.size);\n\n        for (let n = 0; n < this.pool.length; ++n) {\n            this.pool[n] = MemoryPoolTracker.InUse;\n        }\n\n        this.nextFree = MemoryPoolTracker.NoFree;\n    }\n}\n","import { inject, injectable } from 'inversify';\n\nimport { UIIconAtlas } from '../UIIcon';\nimport { UILabel } from '../UILabel/UILabel';\nimport { UIObservablePositioningGroup } from '../UIObservablePositioningGroup';\nimport { UICreator } from '../UIRenderer';\n\nimport { UIAlert, UIAlertIconStyle, UIAlertStyle, UIAlertText } from './UIAlert';\nimport FUIALertIcon from './UIALertIcon.frag';\nimport VUIAlertIcon from './UIAlertIcon.vert';\nimport FUIAlertPanel from './UIALertPanel.frag';\nimport VUIAlertPanel from './UIAlertPanel.vert';\nimport { UIObservableAlert } from './UIObservableAlert';\n\nimport { AppSettings } from '@/app/AppSettings';\nimport { InjectionToken } from '@/app/InjectionToken';\nimport { Inversify } from '@/Inversify';\nimport { ArrayHelper } from '@/lib/ArrayHelper';\nimport { MemoryPoolTracker } from '@/lib/MemoryPoolTracker';\nimport { Vec2 } from '@/lib/Primitives';\nimport { PrimitiveBuilder } from '@/lib/renderer/PrimitiveBuilder';\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from '@/lib/renderer/ShaderProgram';\n\n\n@injectable()\nclass UIAlertIconRenderer extends PrimitivesRenderer {\n    constructor(@inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext) {\n\n        super(gl,\n            { fragment: FUIALertIcon, vertex: VUIAlertIcon },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_fillColor',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_iconColor',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_icon',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false\n            }],\n            { indicesPerPrimitive: 6, basePrimitiveType: gl.TRIANGLES });\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n}\n\nInversify.bind(UIAlertIconRenderer).toSelf().inSingletonScope();\n\n@injectable()\nexport class UIAlertRenderer extends PrimitivesRenderer {\n    private readonly zFarIncluded = 0.1;\n\n    private uiRenderer!: UICreator;\n\n    private alerts: UIObservableAlert[] = [];\n\n    private vertexAttributesTracker: MemoryPoolTracker;\n\n    private panelContentZOffset = 0.001;\n\n    private readonly iconMargin = 10;\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext,\n        @inject(UIAlertIconRenderer) private alertIcon: UIAlertIconRenderer,\n        @inject(InjectionToken.IconAtlas) private iconAtlas: UIIconAtlas,\n        @inject(InjectionToken.IconAtlasTexture) private iconAtlasTexture: WebGLTexture,\n        @inject(AppSettings) private settings: AppSettings) {\n\n        super(gl,\n            { fragment: FUIAlertPanel, vertex: VUIAlertPanel },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_color',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            }],\n            { indicesPerPrimitive: 6, basePrimitiveType: gl.TRIANGLES });\n\n        this.vertexAttributesTracker = new (class extends MemoryPoolTracker {\n            constructor(private renderer: UIAlertRenderer) {\n                const initialCapacity = 1;\n                super(initialCapacity);\n\n                renderer.UploadAttributes(Array.from({ length: renderer.ComponentsPerPrimitive * initialCapacity }, () => 0));\n                renderer.alertIcon.UploadAttributes(Array.from({ length: this.renderer.alertIcon.ComponentsPerPrimitive * initialCapacity }, () => 0));\n            }\n\n            OnShrink(inUseIndices: number[]): void {\n                const panelAttrs = new Array(this.renderer.ComponentsPerPrimitive * inUseIndices.length).fill(0);\n                const alertIconComponents = new Array(this.renderer.alertIcon.ComponentsPerPrimitive * inUseIndices.length).fill(0);\n\n                for (let n = 0; n < inUseIndices.length; ++n) {\n                    const offset = inUseIndices[n];\n\n                    const panelComponents = this.renderer.PrimitiveComponents(offset);\n                    ArrayHelper.Copy(\n                        panelAttrs,\n                        n * this.renderer.ComponentsPerPrimitive,\n                        panelComponents,\n                        0,\n                        panelComponents.length);\n\n\n                    const alertIconComponents = this.renderer.alertIcon.PrimitiveComponents(offset);\n                    ArrayHelper.Copy(\n                        alertIconComponents,\n                        n * this.renderer.alertIcon.ComponentsPerPrimitive,\n                        alertIconComponents,\n                        0,\n                        alertIconComponents.length);\n                }\n\n                this.renderer.UploadAttributes(panelAttrs);\n                this.renderer.alertIcon.UploadAttributes(alertIconComponents);\n\n                this.renderer.alerts.forEach(alert => {\n                    const idx = inUseIndices.indexOf(alert.Offset);\n\n                    if (idx === -1) {\n                        throw new Error(`Can't find position for offset ${alert.Offset}`);\n                    }\n\n                    alert.Offset = idx;\n                });\n            }\n\n            OnExtend(extendedCapacity: number): void {\n                const panelComponents = this.renderer.PrimitiveComponentsRange(0, this.renderer.TotalPrimitives);\n\n                const extendedPanelAttrs = Array.from(\n                    { length: extendedCapacity * this.renderer.ComponentsPerPrimitive },\n                    (_, n) => n < panelComponents.length ? panelComponents[n] : 0);\n\n                this.renderer.UploadAttributes(extendedPanelAttrs);\n\n\n                const alertIconsComponents = this.renderer.PrimitiveComponentsRange(0, this.renderer.TotalPrimitives);\n\n                const extendedAlertIconAttrs = Array.from(\n                    { length: extendedCapacity * this.renderer.alertIcon.ComponentsPerPrimitive },\n                    (_, n) => n < alertIconsComponents.length ? alertIconsComponents[n] : 0);\n\n                this.renderer.alertIcon.UploadAttributes(extendedAlertIconAttrs);\n            }\n        })(this);\n    }\n\n    Create(position: Vec2,\n        zIndex: number,\n        icon: UIAlertIconStyle,\n        text: UIAlertText,\n        style: UIAlertStyle,\n        parent: UIObservablePositioningGroup | null = null): UIAlert {\n\n        const alertText = this.uiRenderer.CreateLabel(\n            position,\n            zIndex + this.panelContentZOffset,\n            text.text,\n            text.lineHeight,\n            parent);\n        alertText.StyleRange(0, alertText.Text.length, { color: text.color })\n\n        const iconSideLength = alertText.Dimension.height / alertText.Scale;\n        const alert = new UIObservableAlert(\n            position,\n            {\n                width: iconSideLength + 3 * this.iconMargin + alertText.Dimension.width / alertText.Scale,\n                height: iconSideLength + 2 * this.iconMargin\n            },\n            zIndex,\n            icon,\n            text,\n            style,\n            this.vertexAttributesTracker.Allocate(),\n            (component: UIObservableAlert) => this.Destroy(component, alertText),\n            parent);\n\n        if (parent !== null) {\n            parent.AppendChild(alert);\n        }\n\n        alert.Observable.Attach((component: UIObservableAlert) => this.UpdateComponent(component, alertText));\n\n        this.alerts.push(alert);\n\n        this.UpdateComponent(alert, alertText);\n\n        return alert;\n    }\n\n    public Draw(): void {\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this.iconAtlasTexture);\n\n        super.Draw();\n        this.alertIcon.Draw();\n    }\n\n    get UIRenderer(): UICreator {\n        return this.uiRenderer;\n    }\n\n    set UIRenderer(renderer: UICreator) {\n        this.uiRenderer = renderer;\n    }\n\n    get Alerts(): readonly UIAlert[] {\n        return this.alerts;\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n        this.alertIcon.ViewProjection = mat;\n    }\n\n    private UpdateComponent(component: UIObservableAlert, label: UILabel): void {\n        label.Position = this.LabelPosition(component, label);\n        label.Text = component.Text.text;\n        label.LineHeight = component.Text.lineHeight;\n        this.UpdateAttributes(component);\n    }\n\n    private LabelPosition(component: UIObservableAlert, label: UILabel): Vec2 {\n        return {\n            x: component.Position.x + 2 * this.iconMargin + (component.Dimension.height / component.Scale - 2 * this.iconMargin),\n            y: component.Position.y + (component.Dimension.height / component.Scale - label.Dimension.height / label.Scale) / 2\n        };\n    }\n\n    private UpdateAttributes(component: UIObservableAlert): void {\n        this.UpdatePrimitiveComponents(\n            this.ExtractPanelAttributes(component),\n            component.Offset * this.ComponentsPerPrimitive);\n\n        if (component.IsDestroyed) {\n            const emptyAttrs = new Array(this.alertIcon.ComponentsPerPrimitive).fill(0);\n\n            this.alertIcon.UpdatePrimitiveComponents(\n                emptyAttrs,\n                component.Offset * this.alertIcon.ComponentsPerPrimitive);\n        } else {\n            this.alertIcon.UpdatePrimitiveComponents(\n                this.ExtractIconAttributes(component),\n                component.Offset * this.alertIcon.ComponentsPerPrimitive);\n        }\n    }\n\n    private ExtractPanelAttributes(component: UIObservableAlert): number[] {\n        return PrimitiveBuilder.AABBRectangle(\n            component.AbsolutePosition,\n            component.Dimension,\n            [\n                [this.settings.ZFar - component.ZIndex - this.zFarIncluded],\n                component.Style.fillColor\n            ])\n    }\n\n    private ExtractIconAttributes(component: UIObservableAlert): number[] {\n        const sideLength = this.AlertIconSideLength(component);\n        const iconUV = this.iconAtlas.LookupUV(component.Icon.icon);\n\n        return PrimitiveBuilder.AABBRectangle(\n            { x: component.AbsolutePosition.x + this.iconMargin, y: component.AbsolutePosition.y + this.iconMargin },\n            { width: sideLength, height: sideLength },\n            [\n                [this.settings.ZFar - component.ZIndex - this.panelContentZOffset - this.zFarIncluded],\n                component.Style.fillColor,\n                component.Icon.color,\n                {\n                    LeftBottom: [iconUV.A.x, iconUV.B.y],\n                    LeftTop: [iconUV.A.x, iconUV.A.y],\n                    RightTop: [iconUV.B.x, iconUV.A.y],\n                    RightBottom: [iconUV.B.x, iconUV.B.y]\n                }\n            ]);\n    }\n\n    private AlertIconSideLength(component: UIObservableAlert): number {\n        return component.Dimension.height - 2 * this.iconMargin;\n    }\n\n    private Destroy(component: UIObservableAlert, alertText: UILabel): void {\n        const toDestroyIdx = this.alerts.indexOf(component);\n\n        if (toDestroyIdx === -1) {\n            return;\n        }\n\n        this.alerts.splice(toDestroyIdx, 1)\n\n        this.UpdateAttributes(component);\n\n        this.vertexAttributesTracker.Free(component.Offset);\n\n        alertText.Destroy();\n    }\n}\n\nInversify.bind(UIAlertRenderer).toSelf().inSingletonScope();\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nout vec4 out_color;\\n\\nvoid main() \\n{\\n      out_color = vec4(0.17254901960784313, 0.24313725490196078, 0.3137254901960784, 1);\\n}\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0) ;\\n}\\n\"","import { MyInputEvent } from \"../InputReceiver\";\nimport { Dimension } from \"../UIComponent\";\nimport { SymbolStyle } from \"../UILabel/UILabel\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\nimport { UICreator } from \"../UIRenderer\";\nimport { ContainerStyle, UITextList } from \"../UITextList/UITextList\";\n\nimport { UIEditableTextList } from \"./UIEditableTextList\";\n\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Vec2 } from \"@/lib/Primitives\";\n\nexport type UIObservableEditableTextListDeleter = () => void;\n\nexport class UIObservableEditableTextList implements UIEditableTextList {\n    public visible = true;\n\n    private onVanish = new ObservableController<void>();\n\n    private textList: UITextList;\n\n    private hasFocus = false;\n\n    private onUpdate = new ObservableController<UIObservableEditableTextList>();\n\n    constructor(\n        position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        containerStyle: ContainerStyle,\n        lineHeight: number,\n        uiRenderer: UICreator,\n        private deleter: UIObservableEditableTextListDeleter,\n        parent: UIObservablePositioningGroup | null\n    ) {\n        this.textList = uiRenderer.CreateTextList(\n            position,\n            dimension,\n            zIndex,\n            text,\n            containerStyle,\n            lineHeight,\n            parent);\n    }\n\n    StyleRange(begin: number, end: number, style: SymbolStyle): void {\n        this.textList.StyleRange(begin, end, style);\n    }\n\n    get OnVanish(): Observable<void> {\n        return this.onVanish;\n    }\n\n    OnInput(e: MyInputEvent): void {\n        const keyCode = e.key.charCodeAt(0);\n\n        if (e.key === 'Backspace' && this.Text.length > 0) {\n            const toDelete = 1 + +(this.Text[this.Text.length - 1] === '\\n' && this.Text.length > 1);\n            this.Text = this.Text.slice(0, this.Text.length - toDelete)\n        } else if (e.key.length === 1 && keyCode >= ' '.charCodeAt(0) && keyCode <= '~'.charCodeAt(0)) {\n            this.Text = this.Text + e.key;\n        } else if (e.key === 'Enter') {\n            this.Text = this.Text + '\\n';\n        }\n    }\n\n    get Position(): Vec2 {\n        return this.textList.Position;\n    }\n\n    set Position(position: Vec2) {\n        this.textList.Position = position;\n    }\n\n    get Dimension(): Dimension {\n        return this.textList.Dimension;\n    }\n\n    set Dimension(dimension: Dimension) {\n        this.textList.Dimension = dimension;\n    }\n\n    get AbsolutePosition(): Vec2 {\n        return this.textList.AbsolutePosition;\n    }\n\n    get Text(): string {\n        return this.textList.Text;\n    }\n\n    set Text(text: string) {\n        this.textList.Text = text;\n    }\n\n    get ZIndex(): number {\n        return this.textList.ZIndex;\n    }\n\n    set ZIndex(zIndex: number) {\n        this.textList.ZIndex = zIndex;\n    }\n\n    get LineHeight(): number {\n        return this.textList.LineHeight;\n    }\n\n    set LineHeight(lineHeight: number) {\n        this.textList.LineHeight = lineHeight;\n    }\n\n    get ContainerStyle(): ContainerStyle {\n        return this.textList.ContainerStyle;\n    }\n\n    set ContainerStyle(style: ContainerStyle) {\n        this.textList.ContainerStyle = style;\n    }\n\n    get Scale(): number {\n        return this.textList.Scale;\n    }\n\n    set Scale(scale: number) {\n        this.textList.Scale = scale;\n    }\n\n    get Visible(): boolean {\n        return this.visible;\n    }\n\n    set Visible(value: boolean) {\n        this.visible = value;\n\n        if (!value) {\n            this.onVanish.Notify();\n        }\n\n        this.textList.Visible = value;\n    }\n\n    get Observable(): Observable<UIObservableEditableTextList> {\n        return this.onUpdate;\n    }\n\n    get HasFocus(): boolean {\n        return this.hasFocus;\n    }\n\n    Focus(): void {\n        this.hasFocus = true;\n    }\n\n    Blur(): void {\n        this.hasFocus = false;\n    }\n\n    ScrollToTop(): void {\n        this.textList.ScrollToTop();\n    }\n\n    ScrollAligned(offset: number): void {\n        this.textList.ScrollAligned(offset);\n    }\n\n    Destroy(): void {\n        this.onVanish.Notify();\n\n        this.onVanish.DetachAll();\n        this.onUpdate.DetachAll();\n\n        this.deleter();\n\n        this.textList.Destroy();\n    }\n}\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { Dimension } from \"../UIComponent\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\nimport { UICreator, UIRenderer } from \"../UIRenderer\";\nimport { ContainerStyle } from \"../UITextList/UITextList\";\n\nimport { UIEditableTextList } from \"./UIEditableTextList\";\nimport FEditableTextListCursor from './UIEditableTextListCursor.frag';\nimport VEditableTextListCursor from './UIEditableTextListCursor.vert';\nimport { UIObservableEditableTextList, UIObservableEditableTextListDeleter } from \"./UIObservableEditableTextList\";\n\nimport { InjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { Vec2 } from \"@/lib/Primitives\";\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from \"@/lib/renderer/ShaderProgram\";\n\n@injectable()\nexport class UIEditableTextListRenderer extends PrimitivesRenderer {\n    private uiRenderer!: UICreator;\n\n    constructor(@inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext) {\n\n        super(gl,\n            { fragment: FEditableTextListCursor, vertex: VEditableTextListCursor },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            }],\n            { indicesPerPrimitive: 6, basePrimitiveType: gl.TRIANGLES });\n    }\n\n    Create(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        containerStyle: ContainerStyle,\n        lineHeight: number,\n        deleter: UIObservableEditableTextListDeleter,\n        parent: UIObservablePositioningGroup | null = null): UIEditableTextList {\n\n        return new UIObservableEditableTextList(\n            position,\n            dimension,\n            zIndex,\n            text,\n            containerStyle,\n            lineHeight,\n            this.uiRenderer,\n            deleter,\n            parent);\n    }\n\n    get UIRenderer(): UICreator {\n        return this.uiRenderer;\n    }\n\n    set UIRenderer(renderer: UICreator) {\n        this.uiRenderer = renderer;\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n}\n\nInversify.bind(UIEditableTextListRenderer).toSelf().inTransientScope();\n\nexport type UIEditableTextListRendererFactory = (uiRenderer: UIRenderer) => UIEditableTextListRenderer;\n\nInversify\n    .bind<interfaces.Factory<UIEditableTextListRendererFactory>>(InjectionToken.UIEditableTextListRendererFactory)\n    .toFactory<UIEditableTextListRenderer, [UIRenderer]>(ctx => (uiRenderer: UIRenderer) => {\n        const instance = ctx.container.get(UIEditableTextListRenderer);\n        instance.UIRenderer = uiRenderer;\n\n        return instance;\n    });\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nvec2 UndefinedUV = vec2(-1.0, -1.0);\\n\\nin vec2 v_icon;\\nin vec3 v_fillColor;\\nin vec3 v_iconColor;\\n\\nout vec4 out_color;\\n\\nuniform sampler2D u_icon;\\n\\nvoid main() \\n{\\n      if (v_icon.xy == UndefinedUV) {\\n            out_color = vec4(v_fillColor, 1.0);\\n      } else {\\n            vec4 text_color = texture(u_icon, v_icon);\\n            out_color = mix(vec4(v_fillColor, 1.0), vec4(v_iconColor - text_color.xzy, 1.0), text_color.w);\\n      }\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\nin vec3 a_fillColor;\\nin vec3 a_iconColor;\\nin vec2 a_icon;\\n\\nout vec2 v_icon;\\nout vec3 v_fillColor;\\nout vec3 v_iconColor;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0) ;\\n\\n  v_icon = a_icon;\\n  v_fillColor = a_fillColor;\\n  v_iconColor = a_iconColor;\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 v_color;\\n\\nout vec4 out_color;\\n\\n\\nvoid main() \\n{\\n      out_color = vec4(v_color, 1);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\nin vec3 a_color;\\n\\nout vec3 v_color;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0) ;\\n\\n  v_color = a_color;\\n}\\n\"","import { vec2 } from \"gl-matrix\";\n\nimport { UIComponent } from \"../UIComponent\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\n\nimport { Dimension, UIButtonStyle, UIIconStyle, UIIconButton } from \"./UIIconButton\";\n\nimport { Observable, ObservableController, ObserverDetacher } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\n\nexport type TouchCallback = (sender: UIIconButton) => void;\n\nexport type UpdateCallback = (component: UIObservableIconButton) => void;\n\nexport type DeleterCallback = (component: UIObservableIconButton) => void;\n\nexport class UIObservableIconButton implements UIComponent, UIIconButton {\n    private static readonly DisabledIconColor: Rgb = [0.47058823529411764, 0.5647058823529412, 0.611764705882353];\n\n    private static UninitializedTag = -1;\n\n    private observable = new ObservableController<UIObservableIconButton>();\n\n    private scale = 1;\n\n    private destroyed = false;\n\n    private disabled = false;\n\n    private originIconStyle!: UIIconStyle;\n\n    private parentDetacher: ObserverDetacher | null = null;\n\n    constructor(\n        private position: Vec2,\n        private dimension: Dimension,\n        private zIndex: number,\n        private style: UIButtonStyle,\n        private iconStyle: UIIconStyle,\n        private touchCallback: TouchCallback,\n        public Offset: number,\n        private deleter: DeleterCallback,\n        private parent: UIObservablePositioningGroup | null = null) {\n        this.parentDetacher = parent?.Observable.Attach(() => this.observable.Notify(this)) ?? null;\n    }\n\n    get Observable(): Observable<UIObservableIconButton> {\n        return this.observable;\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    set Position(position: Vec2) {\n        this.position = position;\n\n        this.observable.Notify(this);\n    }\n\n    get AbsolutePosition(): Vec2 {\n        if (this.parent) {\n            const parentPosition = [this.parent.AbsolutePosition.x, this.parent.AbsolutePosition.y] as const;\n            const absolutePosition = vec2.add(vec2.create(), parentPosition, [this.Position.x * this.Scale, this.Position.y * this.Scale]);\n\n            return { x: absolutePosition[0], y: absolutePosition[1] };\n        } else {\n            return this.Position;\n        }\n    }\n\n    get Dimension(): Dimension {\n        return { width: this.dimension.width * this.Scale, height: this.dimension.height * this.Scale };\n    }\n\n    set Dimension(dimension: Dimension) {\n        this.dimension = dimension;\n\n        this.observable.Notify(this);\n    }\n\n    get ZIndex(): number {\n        return this.zIndex;\n    }\n\n    set ZIndex(zIndex: number) {\n        this.zIndex = zIndex;\n\n        this.observable.Notify(this);\n    }\n\n    get Icon(): UIIconStyle {\n        return this.iconStyle;\n    }\n\n    set Icon(style: UIIconStyle) {\n        this.iconStyle = style;\n\n        this.observable.Notify(this);\n    }\n\n    get Style(): UIButtonStyle {\n        return this.style;\n    }\n\n    set Style(style: UIButtonStyle) {\n        this.style = { ...style };\n\n        this.observable.Notify(this);\n    }\n\n    get Scale(): number {\n        return this.parent === null ? this.scale : this.scale * this.parent.Scale;\n    }\n\n    set Scale(scale: number) {\n        this.scale = scale;\n\n        this.observable.Notify(this);\n    }\n\n    get Destroyed(): boolean {\n        return this.destroyed;\n    }\n\n    get Disable(): boolean {\n        return this.disabled;\n    }\n\n    set Disable(value: boolean) {\n        if (value === this.disabled) {\n            return;\n        }\n\n        this.disabled = value;\n\n        if (value) {\n            this.originIconStyle = { ...this.iconStyle };\n\n            this.iconStyle.color = UIObservableIconButton.DisabledIconColor;\n        } else {\n            this.iconStyle.color = this.originIconStyle.color;\n        }\n\n        this.observable.Notify(this);\n    }\n\n    Touch(): void {\n        if (!this.disabled) {\n            this.touchCallback(this);\n        }\n    }\n\n    Destroy(): void {\n        this.Uninitialize();\n\n        this.parent?.RemoveChild(this);\n\n        this.deleter(this);\n\n        this.Offset = UIObservableIconButton.UninitializedTag;\n\n        if (this.parentDetacher !== null) {\n            this.parentDetacher();\n        }\n    }\n\n    private Uninitialize(): void {\n        this.position = { x: 0, y: 0 };\n        this.dimension = { width: 0, height: 0 };\n        this.destroyed = true;\n    }\n}\n","\nimport { inject, injectable } from \"inversify\";\n\nimport { MemoryPoolTracker } from \"../../MemoryPoolTracker\";\nimport { Rgb, Vec2 } from \"../../Primitives\";\nimport { PrimitiveBuilder } from \"../../renderer/PrimitiveBuilder\";\nimport { PrimitivesRenderer } from \"../../renderer/PrimitivesRenderer\";\nimport { Mat4 } from \"../../renderer/ShaderProgram\";\nimport { UIIconAtlas, UVExtra } from \"../UIIcon\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\n\nimport { Dimension, UIButtonStyle, UIIconButton, UIIconStyle } from \"./UIIconButton\";\nimport FUIIconButton from './UIIconButton.frag';\nimport VUIIconButton from './UIIconButton.vert';\nimport FUIIconButtonOutline from './UIIconButtonOutline.frag';\nimport VUIIconButtonOutline from './UIIconButtonOutline.vert';\nimport { TouchCallback, UIObservableIconButton } from \"./UIObservableIconButton\";\n\nimport { AppSettings } from \"@/app/AppSettings\";\nimport { InjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { ArrayHelper } from \"@/lib/ArrayHelper\";\nimport { TextureAtlas } from \"@/lib/renderer/TextureAtlas\";\n\n\nclass UIButtonOutlineRenderer extends PrimitivesRenderer {\n    constructor(gl: WebGL2RenderingContext) {\n\n        super(gl,\n            { fragment: FUIIconButtonOutline, vertex: VUIIconButtonOutline },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_color',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            }],\n            { indicesPerPrimitive: 24, basePrimitiveType: gl.TRIANGLES });\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n}\n\ninterface TouchAnimationStart {\n    target: UIIconButton;\n    originFillColor: Rgb;\n    timestamp: number;\n}\n\n@injectable()\nexport class UIIconButtonRenderer extends PrimitivesRenderer {\n    private readonly zFarIncluded = 0.1;\n\n    private settings: AppSettings;\n\n    private iconButtons: UIObservableIconButton[] = [];\n\n    private outline: UIButtonOutlineRenderer;\n\n    private vertexAttributesTracker: MemoryPoolTracker;\n\n    private touchStart: TouchAnimationStart[] = [];\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext,\n        @inject(InjectionToken.IconAtlas) private iconAtlas: UIIconAtlas,\n        @inject(InjectionToken.IconAtlasTexture) private iconAtlasTexture: WebGLTexture) {\n\n        super(gl,\n            { fragment: FUIIconButton, vertex: VUIIconButton },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_fillColor',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_iconColor',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_icon',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false\n            }],\n            { indicesPerPrimitive: 18, basePrimitiveType: gl.TRIANGLES });\n\n        this.settings = Inversify.get(AppSettings);\n\n        this.outline = new UIButtonOutlineRenderer(gl);\n\n        this.vertexAttributesTracker = new (class extends MemoryPoolTracker {\n            constructor(private renderer: UIIconButtonRenderer) {\n                const initialCapacity = 2;\n                super(initialCapacity);\n\n                renderer.UploadAttributes(Array.from({ length: renderer.ComponentsPerPrimitive * initialCapacity }, () => 0));\n                renderer.outline.UploadAttributes(Array.from({ length: renderer.outline.ComponentsPerPrimitive * initialCapacity }, () => 0));\n            }\n\n            OnShrink(inUseIndices: number[]): void {\n                const buttonAttrs = new Array(this.renderer.ComponentsPerPrimitive * inUseIndices.length).fill(0);\n                const buttonOutlineAttrs = new Array(this.renderer.outline.ComponentsPerPrimitive * inUseIndices.length).fill(0);\n\n                for (let n = 0; n < inUseIndices.length; ++n) {\n                    const offset = inUseIndices[n];\n\n                    const buttonComponents = this.renderer.PrimitiveComponents(offset);\n                    ArrayHelper.Copy(\n                        buttonAttrs,\n                        n * this.renderer.ComponentsPerPrimitive,\n                        buttonComponents,\n                        0,\n                        buttonComponents.length);\n\n                    const buttonOutlineComponents = this.renderer.outline.PrimitiveComponents(offset);\n                    ArrayHelper.Copy(\n                        buttonOutlineAttrs,\n                        n * this.renderer.outline.ComponentsPerPrimitive,\n                        buttonOutlineComponents,\n                        0,\n                        buttonOutlineComponents.length);\n                }\n\n                this.renderer.UploadAttributes(buttonAttrs);\n                this.renderer.outline.UploadAttributes(buttonOutlineAttrs);\n\n                this.renderer.iconButtons.forEach(btn => {\n                    const idx = inUseIndices.indexOf(btn.Offset);\n\n                    if (idx === -1) {\n                        throw new Error(`Can't find position for offset ${btn.Offset}`);\n                    }\n\n                    btn.Offset = idx;\n                });\n            }\n\n            OnExtend(extendedCapacity: number): void {\n                const buttonComponents = this.renderer.PrimitiveComponentsRange(0, this.renderer.TotalPrimitives);\n\n                const extendedButtonAttrs = Array.from(\n                    { length: extendedCapacity * this.renderer.ComponentsPerPrimitive },\n                    (_, n) => n < buttonComponents.length ? buttonComponents[n] : 0);\n\n                this.renderer.UploadAttributes(extendedButtonAttrs);\n\n\n                const buttonOutlineComponents = this.renderer.outline.PrimitiveComponentsRange(0, this.renderer.outline.TotalPrimitives);\n                const extendedOutlineAttrs = Array.from(\n                    { length: extendedCapacity * this.renderer.outline.ComponentsPerPrimitive },\n                    (_, n) => n < buttonOutlineComponents.length ? buttonOutlineComponents[n] : 0);\n\n                this.renderer.outline.UploadAttributes(extendedOutlineAttrs);\n            }\n        })(this);\n    }\n\n    Create(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        style: UIButtonStyle,\n        iconStyle: UIIconStyle,\n        touchCallback: TouchCallback,\n        parent: UIObservablePositioningGroup | null): UIIconButton {\n\n        const button = new UIObservableIconButton(\n            position,\n            dimension,\n            zIndex,\n            style,\n            iconStyle,\n            (sender: UIIconButton) => this.TouchProxy(sender, touchCallback),\n            this.vertexAttributesTracker.Allocate(),\n            (component: UIObservableIconButton) => this.Destroy(component),\n            parent);\n\n        if (parent !== null) {\n            parent.AppendChild(button);\n        }\n\n        button.Observable.Attach((component: UIObservableIconButton) => this.UpdateAttributes(component));\n\n        this.iconButtons.push(button);\n\n        if (parent === null) {\n            this.UpdateAttributes(button);\n        }\n\n        return button;\n    }\n\n    private TouchProxy(sender: UIIconButton, origin: TouchCallback): void {\n        const alreadyTouchedIdx = this.touchStart.findIndex(btn => btn.target === sender);\n\n        if (alreadyTouchedIdx !== -1) {\n            const animation = this.touchStart[alreadyTouchedIdx];\n            animation.target.Style = { ...animation.target.Style, fillColor: animation.originFillColor };\n\n            this.touchStart.splice(alreadyTouchedIdx, 1);\n        }\n\n        this.touchStart.push({ target: sender, originFillColor: sender.Style.fillColor, timestamp: Date.now() });\n\n        origin(sender);\n    }\n\n    private Destroy(component: UIObservableIconButton): void {\n        const toDestroyIdx = this.iconButtons.indexOf(component);\n\n        if (toDestroyIdx === -1) {\n            return;\n        }\n\n        this.iconButtons.splice(toDestroyIdx, 1)\n\n        this.UpdateAttributes(component);\n\n        this.vertexAttributesTracker.Free(component.Offset);\n    }\n\n    Draw(): void {\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this.iconAtlasTexture);\n\n        this.TouchAnimation();\n\n        super.Draw();\n        this.outline.Draw();\n    }\n\n    private TouchAnimation(): void {\n        const lightingDuration = 80;\n        const darkeningDuration = 100;\n        const brightFactor = 1.2;\n\n        const notFinished: TouchAnimationStart[] = [];\n        const finished: TouchAnimationStart[] = [];\n        for (const animation of this.touchStart) {\n            if (animation.target.Destroyed) {\n                continue;\n            }\n\n            if (Date.now() - animation.timestamp <= lightingDuration + darkeningDuration) {\n                notFinished.push(animation);\n            } else {\n                finished.push(animation);\n            }\n        }\n\n        this.touchStart = notFinished;\n\n        finished.forEach(anim => anim.target.Style = { ...anim.target.Style, fillColor: anim.originFillColor });\n\n        for (const animation of this.touchStart) {\n            const fillColor: Rgb = [...animation.target.Style.fillColor];\n            const elapsed = Date.now() - animation.timestamp;\n\n            if (elapsed <= lightingDuration) {\n                const lightingProgress = elapsed / lightingDuration;\n                const bright = 1 + (brightFactor - 1) * lightingProgress;\n\n                fillColor[0] = Math.min(1, animation.originFillColor[0] * bright);\n                fillColor[1] = Math.min(1, animation.originFillColor[1] * bright);\n                fillColor[2] = Math.min(1, animation.originFillColor[2] * bright);\n            } else {\n                const darkeningProgress = (elapsed - lightingDuration) / darkeningDuration;\n                const bright = 1 + (brightFactor - 1) * (1 - darkeningProgress);\n\n                fillColor[0] = Math.min(1, animation.originFillColor[0] * bright);\n                fillColor[1] = Math.min(1, animation.originFillColor[1] * bright);\n                fillColor[2] = Math.min(1, animation.originFillColor[2] * bright);\n            }\n\n            animation.target.Style = { ...animation.target.Style, fillColor };\n        }\n    }\n\n    get IconButtons(): readonly UIIconButton[] {\n        return this.iconButtons;\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n        this.outline.ViewProjection = mat;\n    }\n\n    private UpdateAttributes(component: UIObservableIconButton): void {\n        this.UpdateContentAttributes(component);\n\n        if (component.Destroyed) {\n            this.ResetOutlineAttributes(component);\n        } else {\n            this.UpdateOutlineAttributes(component);\n        }\n    }\n\n    private UpdateContentAttributes(component: UIObservableIconButton): void {\n        this.UpdatePrimitiveComponents(\n            this.ExtractContentAttributes(component),\n            component.Offset * this.ComponentsPerPrimitive);\n    }\n\n    private ResetOutlineAttributes(component: UIObservableIconButton): void {\n        this.outline.UpdatePrimitiveComponents(\n            new Array(this.outline.ComponentsPerPrimitive).fill(0),\n            component.Offset * this.outline.ComponentsPerPrimitive);\n    }\n\n    private UpdateOutlineAttributes(component: UIObservableIconButton): void {\n        this.outline.UpdatePrimitiveComponents(\n            this.ExtractOutlineAttributes(component),\n            component.Offset * this.outline.ComponentsPerPrimitive);\n    }\n\n    private ExtractContentAttributes(component: UIObservableIconButton): number[] {\n        const iconUV = this.iconAtlas.LookupUV(component.Icon.icon);\n\n        if (TextureAtlas.IsUndefinedUV(iconUV)) {\n            throw new Error(`Can't find icon with id ${component.Icon.icon}`);\n        }\n\n        return component.Dimension.width / component.Dimension.height >= 1 ?\n            this.ExtractContentAttributesWide(component, iconUV) :\n            this.ExtractContentAttributesTall(component, iconUV);\n    }\n\n    private ExtractContentAttributesWide(component: UIObservableIconButton, iconUV: UVExtra): number[] {\n        const iconWidth = component.Dimension.height * iconUV.aspectRatio;\n        const segmentWidth = (component.Dimension.width - iconWidth) / 2;\n\n        const leftSegmentAttributes = PrimitiveBuilder.AABBRectangle(\n            component.AbsolutePosition,\n            { width: segmentWidth, height: component.Dimension.height },\n            [[this.settings.ZFar - component.ZIndex - this.zFarIncluded], component.Style.fillColor, component.Icon.color, [-1, -1]]);\n\n        const iconAttributes = PrimitiveBuilder.AABBRectangle(\n            { x: component.AbsolutePosition.x + segmentWidth, y: component.AbsolutePosition.y },\n            { width: iconWidth, height: component.Dimension.height },\n            [\n                [this.settings.ZFar - component.ZIndex - this.zFarIncluded],\n                component.Style.fillColor,\n                component.Icon.color,\n                {\n                    LeftBottom: [iconUV.A.x, iconUV.B.y],\n                    LeftTop: [iconUV.A.x, iconUV.A.y],\n                    RightTop: [iconUV.B.x, iconUV.A.y],\n                    RightBottom: [iconUV.B.x, iconUV.B.y]\n                }\n            ]);\n\n        const rightSegmentAttributes = PrimitiveBuilder.AABBRectangle(\n            { x: component.AbsolutePosition.x + segmentWidth + iconWidth, y: component.AbsolutePosition.y },\n            { width: segmentWidth, height: component.Dimension.height },\n            [[this.settings.ZFar - component.ZIndex - this.zFarIncluded], component.Style.fillColor, component.Icon.color, [-1, -1]]);\n\n        return [...leftSegmentAttributes, ...iconAttributes, ...rightSegmentAttributes];\n    }\n\n    private ExtractContentAttributesTall(component: UIObservableIconButton, iconUV: UVExtra): number[] {\n        const iconHeight = component.Dimension.width / iconUV.aspectRatio;\n        const segmentHeight = (component.Dimension.height - iconHeight) / 2;\n\n        const bottomSegmentAttributes = PrimitiveBuilder.AABBRectangle(\n            component.AbsolutePosition,\n            { width: component.Dimension.width, height: segmentHeight },\n            [[this.settings.ZFar - component.ZIndex - this.zFarIncluded], component.Style.fillColor, component.Icon.color, [-1, -1]]);\n\n        const iconAttributes = PrimitiveBuilder.AABBRectangle(\n            { x: component.AbsolutePosition.x, y: component.AbsolutePosition.y + segmentHeight },\n            { width: component.Dimension.width, height: iconHeight },\n            [\n                [this.settings.ZFar - component.ZIndex - this.zFarIncluded],\n                component.Style.fillColor,\n                component.Icon.color,\n                {\n                    LeftBottom: [iconUV.A.x, iconUV.B.y],\n                    LeftTop: [iconUV.A.x, iconUV.A.y],\n                    RightTop: [iconUV.B.x, iconUV.A.y],\n                    RightBottom: [iconUV.B.x, iconUV.B.y]\n                }\n            ]);\n\n        const topSegmentAttributes = PrimitiveBuilder.AABBRectangle(\n            { x: component.AbsolutePosition.x, y: component.AbsolutePosition.y + segmentHeight + iconHeight },\n            { width: component.Dimension.width, height: segmentHeight },\n            [[this.settings.ZFar - component.ZIndex - this.zFarIncluded], component.Style.fillColor, component.Icon.color, [-1, -1]]);\n\n        return [...bottomSegmentAttributes, ...iconAttributes, ...topSegmentAttributes];\n    }\n\n    private ExtractOutlineAttributes(component: UIObservableIconButton): number[] {\n        const width = 2;\n\n        return PrimitiveBuilder.AABBFrame(\n            { x: component.AbsolutePosition.x - width, y: component.AbsolutePosition.y - width },\n            { width: component.Dimension.width + 2 * width, height: component.Dimension.height + 2 * width },\n            width * component.Scale, [[this.settings.ZFar - component.ZIndex - this.zFarIncluded], component.Style.outlineColor]);\n    }\n}\n\nInversify.bind(UIIconButtonRenderer).toSelf().inSingletonScope();\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 v_color;\\nin vec2 v_glyph;\\n\\nout vec4 out_color;\\n\\nuniform sampler2D u_icon;\\n\\nvoid main() \\n{\\n    vec4 text_color = texture(u_icon, v_glyph);\\n    //out_color = mix(vec4(1.0, 0, 0, 1.0), vec4(v_color - text_color.xzy, 1.0), text_color.w);\\n\\n    out_color = vec4(v_color - text_color.xzy, text_color.w);\\n}\\n\"","import { vec2 } from \"gl-matrix\";\n\nimport { Dimension, UIComponent } from \"../UIComponent\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\n\nimport { SymbolStyle, UILabel } from \"./UILabel\";\n\nimport { Observable, ObservableController, ObserverDetacher } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\n\nexport interface GlyphAllocator {\n    Allocate: (component: UIObservableLabel) => number;\n    Free: (idx: number) => void;\n}\n\nexport enum UpdatedProperty { Position = 0, Style, Text, LineHeight, ZIndex, Scale };\ntype ComponentsToUpdate = [boolean, boolean, boolean, boolean, boolean, boolean];\n\nexport class UIObservableLabel implements UIComponent, UILabel {\n    public static readonly NonPrintableOffset = -1;\n\n    private static readonly NonPrintableSymbols = ['\\r', '\\n'];\n\n    private static DefaultSymbolStyle = { color: [0, 0, 0] as Rgb };\n\n    private scale = 1;\n\n    private symbolsStyle: SymbolStyle[];\n\n    private offsets: number[] = [];\n\n    private observable = new ObservableController<UIObservableLabel>();\n\n    public dimension: Dimension = { width: 0, height: 0 };\n\n    private parentDetacher: ObserverDetacher | null = null;\n\n    private updateNeeded = false;\n\n    private changedProperties: ComponentsToUpdate = [false, false, false, false, false, false];\n\n    constructor(\n        private position: Vec2,\n        private text: string,\n        private lineHeight: number,\n        private zIndex: number,\n        private glyphAllocator: GlyphAllocator,\n        private parent: UIObservablePositioningGroup | null\n    ) {\n        this.symbolsStyle = [];\n        this.ResizeSymbolStyles();\n\n        this.AdjustPoolMemory();\n\n        this.parentDetacher = parent?.Observable.Attach(() => this.DeferredNotify()) ?? null;\n    }\n\n    StyleRange(begin: number, end: number, style: SymbolStyle): void {\n        for (let n = begin; n < end; ++n) {\n            this.symbolsStyle[n] = { ...style };\n        }\n\n        this.changedProperties[UpdatedProperty.Style] = true;\n\n        this.DeferredNotify();\n    }\n\n    ReplaceOffset(old: number, offset: number): void {\n        this.offsets[this.offsets.indexOf(old)] = offset;\n    }\n\n    get Style(): SymbolStyle[] {\n        return this.symbolsStyle;\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    set Position(position: Vec2) {\n        this.position = position;\n\n        this.changedProperties[UpdatedProperty.Position] = true;\n\n        this.DeferredNotify();\n    }\n\n    get AbsolutePosition(): Vec2 {\n        if (this.parent) {\n            const parentPosition = [this.parent.AbsolutePosition.x, this.parent.AbsolutePosition.y] as const;\n            const absolutePosition = vec2.add(vec2.create(), parentPosition, [this.Position.x * this.Scale, this.Position.y * this.Scale]);\n\n            return { x: absolutePosition[0], y: absolutePosition[1] };\n        } else {\n            return this.Position;\n        }\n    }\n\n    get Text(): string {\n        return this.text;\n    }\n\n    set Text(text: string) {\n        this.text = text;\n        this.ResizeSymbolStyles();\n        this.AdjustPoolMemory();\n\n        this.changedProperties[UpdatedProperty.Text] = true;\n\n        this.DeferredNotify();\n    }\n\n    get LineHeight(): number {\n        return this.lineHeight;\n    }\n\n    set LineHeight(lineHeight: number) {\n        this.lineHeight = lineHeight;\n\n        this.changedProperties[UpdatedProperty.LineHeight] = true;\n\n        this.DeferredNotify();\n    }\n\n    get ZIndex(): number {\n        return this.zIndex;\n    }\n\n    set ZIndex(zIndex: number) {\n        this.zIndex = zIndex;\n\n        this.changedProperties[UpdatedProperty.ZIndex] = true;\n\n        this.DeferredNotify();\n    }\n\n    get Scale(): number {\n        return this.parent === null ? this.scale : this.scale * this.parent.Scale;\n    }\n\n    set Scale(scale: number) {\n        this.scale = scale;\n\n        this.changedProperties[UpdatedProperty.Scale] = true;\n\n        this.DeferredNotify();\n    }\n\n    get Dimension(): Dimension {\n        return { ...this.dimension };\n    }\n\n    UpdateTextDimension(dimension: Dimension): void {\n        this.dimension = dimension;\n    }\n\n    get Offsets(): number[] {\n        return this.offsets;\n    }\n\n    get Observable(): Observable<UIObservableLabel> {\n        return this.observable;\n    }\n\n    get ChangedProperties(): ComponentsToUpdate {\n        return this.changedProperties;\n    }\n\n    private get PrintableTextLength(): number {\n        return this.text\n            .split('')\n            .filter(char => !UIObservableLabel.NonPrintableSymbols.includes(char))\n            .length;\n    }\n\n    private get PrintableOffsetLength(): number {\n        return this.offsets\n            .filter(x => x !== UIObservableLabel.NonPrintableOffset)\n            .length;\n    }\n\n    Destroy(): void {\n        this.Uninitialize();\n\n        this.parent?.RemoveChild(this);\n\n        if (this.parentDetacher !== null) {\n            this.parentDetacher();\n        }\n    }\n\n    private DeferredNotify(): void {\n        if (!this.updateNeeded) {\n            this.updateNeeded = true;\n            queueMicrotask(() => this.Notify());\n        }\n    }\n\n    private Notify(): void {\n        this.observable.Notify(this);\n        this.updateNeeded = false;\n\n        this.changedProperties.fill(false);\n    }\n\n    private Uninitialize(): void {\n        this.Text = '';\n    }\n\n    private ExtendPoolMemory(): void {\n        let extraMemoryNeeded = this.PrintableTextLength - this.PrintableOffsetLength;\n\n        while (extraMemoryNeeded-- > 0) {\n            const offset = this.glyphAllocator.Allocate(this);\n            this.offsets.push(offset);\n        }\n    }\n\n    private ShrinkPoolMemory(): void {\n        const excessOffsets = this.PrintableOffsetLength - this.PrintableTextLength;\n\n        for (let n = this.offsets.length - 1, released = 0; released < excessOffsets; --n) {\n            const offset = this.offsets[n];\n\n            if (offset !== UIObservableLabel.NonPrintableOffset) {\n                this.glyphAllocator.Free(offset);\n                this.offsets.splice(n, 1);\n\n                ++released;\n            }\n        }\n    }\n\n    private AdjustPoolMemory(): void {\n        if (this.PrintableTextLength > this.PrintableOffsetLength) {\n            this.ExtendPoolMemory();\n        } else if (this.PrintableTextLength < this.PrintableOffsetLength) {\n            this.ShrinkPoolMemory();\n        }\n\n        if (this.text.length > this.offsets.length) {\n            this.AddExtraNonPrintableOffsets();\n        } else if (this.offsets.length > this.text.length) {\n            this.RemoveExcessNonPrintableOffsets();\n        }\n\n        this.AdjustNonPrintableOffsets();\n    }\n\n    private AddExtraNonPrintableOffsets(): void {\n        let extraNonPrintableOffsets = this.text.length - this.offsets.length;\n\n        while (extraNonPrintableOffsets-- > 0) {\n            this.offsets.push(UIObservableLabel.NonPrintableOffset);\n        }\n    }\n\n    private RemoveExcessNonPrintableOffsets(): void {\n        const excessOffsets = this.offsets.length - this.text.length;\n\n        for (let n = this.offsets.length - 1, removed = 0; removed < excessOffsets; --n) {\n            const offset = this.offsets[n];\n\n            if (offset === UIObservableLabel.NonPrintableOffset) {\n                this.offsets.splice(n, 1);\n\n                ++removed;\n            }\n        }\n    }\n\n    private AdjustNonPrintableOffsets(): void {\n        for (let charIdx = 0, offsetStartIdx = 0; charIdx < this.text.length; ++charIdx) {\n            const symbol = this.text[charIdx];\n            const offset = this.offsets[charIdx];\n\n            if (UIObservableLabel.NonPrintableSymbols.includes(symbol) && offset !== UIObservableLabel.NonPrintableOffset) {\n                const nonPrintableOffsetIdx = this.offsets\n                    .slice(offsetStartIdx)\n                    .findIndex((x, n) => x === UIObservableLabel.NonPrintableOffset && !UIObservableLabel.NonPrintableSymbols.includes(this.text[offsetStartIdx + n])) + offsetStartIdx;\n\n                this.offsets[charIdx] = UIObservableLabel.NonPrintableOffset;\n                this.offsets[nonPrintableOffsetIdx] = offset;\n\n                offsetStartIdx = nonPrintableOffsetIdx + 1;\n            }\n        }\n    }\n\n    private ExtendSymbolStyles(): void {\n        this.symbolsStyle = [...this.symbolsStyle, ...Array.from({ length: this.text.length }, () => ({ ...UIObservableLabel.DefaultSymbolStyle }))];\n    }\n\n    private ShrinkSymbolStyles(): void {\n        this.symbolsStyle.splice(this.text.length, this.symbolsStyle.length - this.text.length);\n    }\n\n    private ResizeSymbolStyles(): void {\n        if (this.text.length > this.symbolsStyle.length) {\n            this.ExtendSymbolStyles();\n        } else if (this.text.length < this.symbolsStyle.length) {\n            this.ShrinkSymbolStyles();\n        }\n    }\n}\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\nin vec3 a_color;\\nin vec2 a_glyph;\\n\\nout vec3 v_color;\\nout vec2 v_glyph;\\n\\nuniform mat4 u_viewProject;\\nuniform mat4 u_world;\\n\\nvoid main() {\\n  gl_Position = u_viewProject * u_world * vec4(a_vertex, 1.0f);\\n\\n  v_color = a_color;\\n  v_glyph = a_glyph;\\n}\\n\"","type Callable = (...args: any[]) => any;\n\nclass CatchBlock<TTry extends Callable> {\n    constructor(private fn: TTry, private args: Parameters<TTry>) { }\n\n    CatchFn<TCatch extends Callable>(fn: TCatch, ...args: Parameters<TCatch>): ReturnType<TTry> | ReturnType<TCatch> {\n        try {\n            return this.fn(...this.args);\n        } catch (e) {\n            return fn(...args);\n        }\n    }\n\n    CatchValue<T>(value: T): ReturnType<TTry> | T {\n        try {\n            return this.fn(...this.args);\n        } catch (e) {\n            return value;\n        }\n    }\n}\n\nexport class ExceptionTrap {\n    static Try<T extends Callable>(fn: T, ...args: Parameters<T>) {\n        return new CatchBlock(fn, args);\n    }\n}\n\ntype AsyncCallable = (...args: any[]) => Promise<any>;\n\nclass AsyncCatchBlock<TTry extends AsyncCallable> {\n    constructor(private fn: TTry, private args: Parameters<TTry>) { }\n\n    async CatchFn<TCatch extends AsyncCallable>(fn: TCatch, ...args: Parameters<TCatch>): Promise<ReturnType<TTry> | ReturnType<TCatch>> {\n        try {\n            return await this.fn(...this.args);\n        } catch (e) {\n            return await fn(...args);\n        }\n    }\n\n    async CatchValue<T>(value: T): Promise<ReturnType<TTry> | T> {\n        try {\n            return await this.fn(...this.args);\n        } catch (e) {\n            return await value;\n        }\n    }\n}\n\nexport class AsyncExceptionTrap {\n    static Try<T extends AsyncCallable>(fn: T, ...args: Parameters<T>) {\n        return new AsyncCatchBlock(fn, args);\n    }\n}\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { NotNull } from \"../NotNull\";\nimport { Vec2 } from \"../Primitives\";\nimport { UV } from \"../renderer/TextureAtlas\";\n\nimport { FontAtlas } from \"./FontAtlasBuilder\";\n\nimport { InjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\n\ninterface GlyphMeshFontOptions {\n    Name: string;\n    Size: number;\n}\n\ninterface GlyphMeshOptions {\n    ASCIIRange: { Start: string, End: string },\n    Font: GlyphMeshFontOptions\n}\n\nexport interface GlyphMeshBlueprint {\n    uv: UV; // exact glyph bound\n    width: number;\n    height: number;\n    baselineOffset: Vec2;\n}\n\ninterface AtlasCellDescriptor {\n    uv: UV;\n    sideLength: number;\n}\n\ninterface GlyphBoundary {\n    width: number;\n    height: number;\n}\n\nexport class FontGlyphCollection {\n    constructor(\n        private library: Map<string, GlyphMeshBlueprint>,\n        public readonly LineHeight: number) { }\n\n    Lookup(symbol: string): GlyphMeshBlueprint {\n        if (symbol.length === 0) {\n            throw new Error(\"Symbol can't be empty string\");\n        }\n\n        const blueprint = this.library.get(symbol);\n\n        if (blueprint === undefined) {\n            throw new Error(`Failed to find glyph '${symbol}'`);\n        }\n\n        return blueprint;\n    }\n}\n\n@injectable()\nclass FontGlyphCollectionBuilderImpl {\n    private options!: GlyphMeshOptions;\n    private context!: CanvasRenderingContext2D;\n\n    private lib = new Map<string, GlyphMeshBlueprint>();\n\n    constructor(@inject(InjectionToken.FontAtlas) private fontAtlas: FontAtlas) { }\n\n    Build(options: GlyphMeshOptions): FontGlyphCollection {\n        this.options = options;\n\n        const startCode = options.ASCIIRange.Start.charCodeAt(0);\n        const endCode = options.ASCIIRange.End.charCodeAt(0);\n\n        if (startCode > endCode) {\n            throw new Error('options.ASCIIRange.Start symbol must precede options.ASCIIRange.End');\n        }\n\n\n        const sideLength = this.GlyphCellSize();\n        this.SetupCanvas(sideLength, sideLength);\n\n        this.BuildBlueprints(endCode - startCode + 1);\n\n        return new FontGlyphCollection(this.lib, options.Font.Size);\n    }\n\n    private SetupCanvas(width: number, height: number): void {\n        const canvas = document.createElement('canvas');\n\n        canvas.width = width;\n        canvas.height = height;\n\n        const context = canvas.getContext('2d') ?? NotNull('Failed to get context');\n        context.font = `${this.options.Font.Size}px ${this.options.Font.Name}`;\n        context.fillStyle = '#000';\n\n        this.context = context;\n    }\n\n    private GlyphCellSize(): number {\n        return Math.ceil(this.options.Font.Size / 10) * 10;\n    }\n\n    private BuildBlueprints(glyphCount: number) {\n        for (let n = 0; n < glyphCount; ++n) {\n            const symbol = String.fromCharCode(this.options.ASCIIRange.Start.charCodeAt(0) + n);\n            const atlasUV = this.fontAtlas.LookupUV(symbol);\n            const metrics = this.context.measureText(symbol);\n\n            const width = metrics.width;\n            const extraHeight = this.options.Font.Size / 6.4; // FIXME Added extra height because whem lineHeight has value <= 32 font texture doesnt capture whole glyph\n            const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent + extraHeight;\n\n            const uv = this.AtlasCellToGlyphUV(\n                { uv: atlasUV, sideLength: this.GlyphCellSize() },\n                { width, height });\n\n            const baselineOffset = {\n                x: 0,\n                y: metrics.fontBoundingBoxDescent - metrics.actualBoundingBoxDescent\n            };\n\n            this.lib.set(symbol, { uv, width, height, baselineOffset });\n        }\n    }\n\n    private AtlasCellToGlyphUV(cell: AtlasCellDescriptor, glyph: GlyphBoundary): UV {\n        const relA: Vec2 = {\n            x: (cell.sideLength - glyph.width) / 2,\n            y: (cell.sideLength - glyph.height) / 2\n        };\n\n        const relB: Vec2 = { x: relA.x + glyph.width, y: relA.y + glyph.height };\n\n        const uvWidth = cell.uv.B.x - cell.uv.A.x;\n        const uvHeight = cell.uv.B.y - cell.uv.A.y;\n\n        return {\n            A: {\n                x: cell.uv.A.x + relA.x / cell.sideLength * uvWidth,\n                y: cell.uv.A.y + relA.y / cell.sideLength * uvHeight\n            },\n            B: {\n                x: cell.uv.A.x + relB.x / cell.sideLength * uvWidth,\n                y: cell.uv.A.y + relB.y / cell.sideLength * uvHeight\n            }\n        };\n    }\n}\n\nInversify.bind(FontGlyphCollectionBuilderImpl).toSelf().inRequestScope();\n\nexport type FontGlyphCollectionFactory = (options: GlyphMeshOptions) => FontGlyphCollection;\n\nInversify\n    .bind<interfaces.Factory<FontGlyphCollection>>(InjectionToken.FontGlyphCollectionFactory)\n    .toFactory<FontGlyphCollection, [GlyphMeshOptions]>(ctx => (options: GlyphMeshOptions) => ctx.container.get(FontGlyphCollectionBuilderImpl).Build(options));\n","type Callable = (...args: any[]) => any;\n\ntype MethodsOnly<T> = Pick<T, { [K in keyof T]: T[K] extends Callable ? K : never }[keyof T]>;\n\nexport function SelfBind<TInstance, TMethod extends keyof MethodsOnly<TInstance>>(instance: TInstance, method: TMethod): TInstance[TMethod] {\n    return (instance[method] as any).bind(instance);\n}\n","import { mat4 } from 'gl-matrix';\nimport { inject, injectable } from 'inversify';\n\nimport { UIObservablePositioningGroup } from '../UIObservablePositioningGroup';\n\nimport { UILabel } from './UILabel';\nimport FUILabel from './UILabel.frag';\nimport VUILabel from './UILabel.vert';\nimport { UIObservableLabel, UpdatedProperty } from './UIObservableLabel';\n\nimport { AppSettings } from '@/app/AppSettings';\nimport { InjectionToken, UILabelRendererTargetName } from '@/app/InjectionToken';\nimport { Inversify } from '@/Inversify';\nimport { ArrayHelper } from '@/lib/ArrayHelper';\nimport { ExceptionTrap } from '@/lib/ExceptionTrap';\nimport { FontGlyphCollection, FontGlyphCollectionFactory, GlyphMeshBlueprint } from '@/lib/font/FontGlyphCollection';\nimport { MemoryPoolTracker } from '@/lib/MemoryPoolTracker';\nimport { Vec2 } from '@/lib/Primitives';\nimport { PrimitiveBuilder } from '@/lib/renderer/PrimitiveBuilder';\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from '@/lib/renderer/ShaderProgram';\nimport { SelfBind } from '@/lib/SelfBind';\n\ntype Offset = number;\n\ninterface SplitedLine {\n    startIdx: number;\n    text: string;\n}\n\n/**\n * Note: In PrimitivesRenderer::PrimitiveAttributes method the index parameter means an individual symbol location but not a whole label component.\n *       It's because a label has dynamic attribute count that depends on text length.\n */\n@injectable()\nexport class UILabelRenderer extends PrimitivesRenderer {\n    private readonly zFarIncluded = 0.1;\n\n    private labels = new Map<Offset, UIObservableLabel>();\n\n    private vertexAttributesTracker: MemoryPoolTracker;\n\n    public Unique = false;\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext,\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(InjectionToken.FontAtlasTexture) private fontTexture: WebGLTexture,\n        @inject(InjectionToken.FontGlyphCollectionFactory) private fontGlyphCollectionFactory: FontGlyphCollectionFactory) {\n\n        super(gl,\n            { fragment: FUILabel, vertex: VUILabel },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_color',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_glyph',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false\n            }],\n            { indicesPerPrimitive: 6, basePrimitiveType: gl.TRIANGLES });\n\n        this.shader.SetUniformMatrix4fv('u_world', mat4.create());\n\n\n        this.vertexAttributesTracker = new (class extends MemoryPoolTracker {\n            constructor(private renderer: UILabelRenderer) {\n                const initialCapacity = 256;\n                super(initialCapacity);\n\n                renderer.UploadAttributes(Array.from({ length: renderer.ComponentsPerPrimitive * initialCapacity }, () => 0));\n            }\n\n            Free(index: number): void {\n                const emptyAttrs = new Array(this.renderer.ComponentsPerPrimitive).fill(0);\n\n                this.renderer.UpdatePrimitiveComponents(emptyAttrs, index * this.renderer.ComponentsPerPrimitive);\n\n                super.Free(index);\n            }\n\n            OnShrink(inUseIndices: number[]): void {\n                const labelAttrs = new Array(this.renderer.ComponentsPerPrimitive * inUseIndices.length).fill(0);\n\n                for (let n = 0; n < inUseIndices.length; ++n) {\n                    const offset = inUseIndices[n];\n\n                    const components = this.renderer.PrimitiveComponents(offset);\n                    ArrayHelper.Copy(\n                        labelAttrs,\n                        n * this.renderer.ComponentsPerPrimitive,\n                        components,\n                        0,\n                        components.length);\n                }\n\n                this.renderer.UploadAttributes(labelAttrs);\n\n                inUseIndices.forEach((oldOffset, offset) => {\n                    const label = this.renderer.labels.get(oldOffset);\n\n                    if (label !== undefined) {\n                        this.renderer.labels.delete(oldOffset);\n                        this.renderer.labels.set(offset, label);\n                        label.ReplaceOffset(oldOffset, offset);\n                    }\n                });\n            }\n\n            OnExtend(extendedCapacity: number): void {\n                const components = this.renderer.PrimitiveComponentsRange(0, this.renderer.TotalPrimitives);\n                const extendedLabelAttrs = Array.from(\n                    { length: extendedCapacity * this.renderer.ComponentsPerPrimitive },\n                    (_, n) => n < components.length ? components[n] : 0);\n\n                this.renderer.UploadAttributes(extendedLabelAttrs);\n            }\n        })(this);\n    }\n\n    get Labels(): readonly UILabel[] {\n        return [...new Set([...this.labels.values()]).values()];\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n\n    Create(position: Vec2,\n        zIndex: number,\n        text: string,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null): UILabel {\n        const label = new UIObservableLabel(\n            position,\n            text,\n            lineHeight,\n            zIndex,\n            {\n                Allocate: (component: UIObservableLabel) => this.AllocateGlyph(component),\n                Free: (idx: number) => this.GlyphFree(idx)\n            },\n            parent);\n\n        if (parent !== null) {\n            parent.AppendChild(label);\n        }\n\n        label.Observable.Attach((component: UIObservableLabel) => this.UpdateAttributes(component));\n\n        this.UpdateAttributes(label);\n\n        return label;\n    }\n\n    Draw(): void {\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this.fontTexture);\n\n        super.Draw();\n    }\n\n    private AllocateGlyph(component: UIObservableLabel): number {\n\n        const offset = this.vertexAttributesTracker.Allocate();\n\n        this.labels.set(offset, component);\n\n        return offset;\n    }\n\n    private GlyphFree(idx: number): void {\n        this.labels.delete(idx);\n        this.vertexAttributesTracker.Free(idx);\n    }\n\n    private OnlyPositionChanged(component: UIObservableLabel): boolean {\n        return component.ChangedProperties.every((x, n) => n === UpdatedProperty.Position ? x : !x);\n    }\n\n    private UpdateAttributes(component: UIObservableLabel): void {\n        let width = 0;\n        let { x, y } = { x: 0, y: 0 };\n        const fontGlyphCollection = this.fontGlyphCollectionFactory({ ASCIIRange: { Start: ' ', End: '~' }, Font: { Name: 'Roboto', Size: component.LineHeight } });\n        const lines = UILabelRenderer.SplitString(component.Text);\n\n        if (lines.length === 0) {\n            component.UpdateTextDimension({ width: 0, height: 0 });\n            return;\n        }\n\n        const minBaseOffset = UILabelRenderer.MinBaseOffset(lines[lines.length - 1].text, component, fontGlyphCollection);\n\n        if (this.Unique) {\n            const world = mat4.create();\n            const p = component.AbsolutePosition;\n            mat4.translate(world, world, [p.x, p.y, 0]);\n\n            this.shader.SetUniformMatrix4fv('u_world', world);\n\n            if (this.OnlyPositionChanged(component)) {\n                return;\n            }\n        } else {\n            x = component.AbsolutePosition.x;\n            y = component.AbsolutePosition.y - minBaseOffset;\n        }\n\n        const xOffset = this.Unique ? 0 : component.AbsolutePosition.x;\n\n        for (let n = lines.length - 1; n >= 0; --n) {\n            const line = lines[n];\n\n            if (line.text.length === 0) {\n                x = xOffset;\n                y += component.LineHeight * component.Scale;\n                continue;\n            }\n\n            for (let n = 0; n < line.text.length; ++n) {\n                const symbol = line.text[n];\n                const style = component.Style[line.startIdx + n];\n                const offset = component.Offsets[line.startIdx + n];\n\n                if (offset === UIObservableLabel.NonPrintableOffset) {\n                    continue;\n                }\n\n                const glyphBlueprint = UILabelRenderer.LookupGlyph(symbol, fontGlyphCollection);\n\n                const attributes = PrimitiveBuilder.AABBRectangle(\n                    { x, y: y + glyphBlueprint.baselineOffset.y * component.Scale },\n                    {\n                        width: glyphBlueprint.width * component.Scale,\n                        height: glyphBlueprint.height * component.Scale\n                    },\n                    [\n                        [this.settings.ZFar - component.ZIndex - this.zFarIncluded],\n                        style.color,\n                        {\n                            LeftBottom: [glyphBlueprint.uv.A.x, glyphBlueprint.uv.B.y],\n                            LeftTop: [glyphBlueprint.uv.A.x, glyphBlueprint.uv.A.y],\n                            RightTop: [glyphBlueprint.uv.B.x, glyphBlueprint.uv.A.y],\n                            RightBottom: [glyphBlueprint.uv.B.x, glyphBlueprint.uv.B.y]\n                        }\n                    ]);\n\n                this.UpdatePrimitiveComponents(attributes, offset * this.ComponentsPerPrimitive);\n\n                x += glyphBlueprint.width * component.Scale;\n\n                width = Math.max(width, x - xOffset);\n            }\n\n            x = xOffset;\n            y += component.LineHeight * component.Scale + minBaseOffset;\n        }\n\n        component.UpdateTextDimension({ width, height: y - component.AbsolutePosition.y });\n    }\n\n    private static MinBaseOffset(line: string, component: UIObservableLabel, fontGlyphCollection: FontGlyphCollection): number {\n        if (line.length === 0) {\n            return 0;\n        }\n\n        const comp = (a: string, b: string) => UILabelRenderer.LookupGlyph(a, fontGlyphCollection).baselineOffset.y < UILabelRenderer.LookupGlyph(b, fontGlyphCollection).baselineOffset.y;\n        const maxBaselineOffsetSymbol = ArrayHelper.Min([...line], comp);\n\n        return UILabelRenderer.LookupGlyph(maxBaselineOffsetSymbol, fontGlyphCollection).baselineOffset.y * component.Scale;\n    }\n\n    private static LookupGlyph(symbol: string, fontGlyphCollection: FontGlyphCollection): GlyphMeshBlueprint {\n        return ExceptionTrap\n            .Try(SelfBind(fontGlyphCollection, 'Lookup'), symbol)\n            .CatchFn(SelfBind(fontGlyphCollection, 'Lookup'), '?');\n    }\n\n    private static SplitString(str: string): SplitedLine[] {\n        const lines: SplitedLine[] = [];\n\n        if (str.length === 0) {\n            return [];\n        }\n\n        let lineStart = 0;\n        for (let n = 0; n < str.length; ++n) {\n            const symbol = str[n];\n\n            if (symbol === '\\n') {\n                lines.push({ text: str.slice(lineStart, n), startIdx: lineStart });\n                lineStart = n + 1;\n            }\n        }\n\n        if (lineStart !== str.length) {\n            lines.push({ text: str.slice(lineStart, str.length), startIdx: lineStart });\n        }\n\n        return lines;\n    }\n}\n\nInversify.bind(UILabelRenderer).toSelf().inSingletonScope().whenTargetIsDefault();\nInversify.bind(UILabelRenderer).toSelf().inSingletonScope().whenTargetNamed(UILabelRendererTargetName.Perspective);\nInversify.bind(UILabelRenderer).toSelf().inTransientScope().whenTargetNamed(UILabelRendererTargetName.Unique).onActivation((ctx, instance) => (instance.Unique = true, instance));\n","import { vec2 } from \"gl-matrix\";\n\nimport { UIComponent } from \"../UIComponent\";\nimport { UIIcon } from \"../UIIcon\";\nimport { UIIconButton } from \"../UIIconButton/UIIconButton\";\nimport { SymbolStyle, UILabel } from \"../UILabel/UILabel\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\nimport { UICreator } from \"../UIRenderer\";\n\nimport { Dimension, UIButtonStyle, UICaptionStyle, UITextButton } from \"./UITextButton\";\n\nimport { Observable, ObservableController, ObserverDetacher } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\n\nexport type TouchCallback = (sender: UITextButton) => void;\n\nexport type UpdateCallback = (component: UIObservableTextButton) => void;\n\nexport type DeleterCallback = (component: UIObservableTextButton) => void;\n\nexport class UIObservableTextButton implements UIComponent, UITextButton {\n    private static readonly DisabledIconColor: Rgb = [0.47058823529411764, 0.5647058823529412, 0.611764705882353];\n\n    private observable = new ObservableController<UIObservableTextButton>();\n\n    private scale = 1;\n\n    private destroyed = false;\n\n    private disabled = false;\n\n    private button: UIIconButton;\n\n    private label: UILabel;\n\n    private parentDetacher: ObserverDetacher | null = null;\n\n    constructor(\n        private position: Vec2,\n        private dimension: Dimension,\n        private zIndex: number,\n        private style: UIButtonStyle,\n        private caption: UICaptionStyle,\n        private touchCallback: TouchCallback,\n        uiRenderer: UICreator,\n        private parent: UIObservablePositioningGroup | null = null) {\n\n        this.button = uiRenderer.CreateIconButton(\n            this.position,\n            this.dimension,\n            this.zIndex,\n            this.style,\n            { color: [0, 0, 0], icon: UIIcon.Empty },\n            (sender: UIIconButton) => this.TouchAdapter(sender),\n            this.parent);\n\n        const aboveButton = 0.001;\n        this.label = uiRenderer.CreateLabel(\n            this.Position,\n            zIndex + aboveButton,\n            this.caption.text,\n            this.caption.lineHeight,\n            this.parent);\n        this.label.StyleRange(0, this.label.Text.length, { color: this.caption.color });\n\n        this.label.Position = this.CaptionPosition;\n\n        this.parentDetacher = parent?.Observable.Attach(() => this.observable.Notify(this)) ?? null;\n    }\n\n    get Observable(): Observable<UIObservableTextButton> {\n        return this.observable;\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    set Position(position: Vec2) {\n        this.position = position;\n\n        this.button.Position = this.Position;\n        this.label.Position = this.CaptionPosition;\n\n        this.observable.Notify(this);\n    }\n\n    get AbsolutePosition(): Vec2 {\n        if (this.parent) {\n            const parentPosition = [this.parent.AbsolutePosition.x, this.parent.AbsolutePosition.y] as const;\n            const absolutePosition = vec2.add(vec2.create(), parentPosition, [this.Position.x * this.Scale, this.Position.y * this.Scale]);\n\n            return { x: absolutePosition[0], y: absolutePosition[1] };\n        } else {\n            return this.Position;\n        }\n    }\n\n    get Dimension(): Dimension {\n        return { width: this.dimension.width * this.Scale, height: this.dimension.height * this.Scale };\n    }\n\n    set Dimension(dimension: Dimension) {\n        this.dimension = dimension;\n\n        this.button.Dimension = dimension;\n        this.label.Position = this.CaptionPosition;\n\n        this.observable.Notify(this);\n    }\n\n    get ZIndex(): number {\n        return this.zIndex;\n    }\n\n    set ZIndex(zIndex: number) {\n        this.zIndex = zIndex;\n\n        this.button.ZIndex = zIndex;\n\n        const aboveButton = 0.001;\n        this.label.ZIndex = zIndex + aboveButton;\n\n        this.observable.Notify(this);\n    }\n\n    get Caption(): UICaptionStyle {\n        return this.caption;\n    }\n\n    set Caption(style: UICaptionStyle) {\n        this.caption = { ...style };\n\n        this.label.Text = style.text;\n        this.label.LineHeight = style.lineHeight;\n        this.label.StyleRange(0, this.label.Text.length, { color: style.color });\n\n        queueMicrotask(() => this.label.Position = this.CaptionPosition);\n\n        this.observable.Notify(this);\n    }\n\n    get Style(): UIButtonStyle {\n        return this.style;\n    }\n\n    set Style(style: UIButtonStyle) {\n        this.style = { ...style };\n\n        this.button.Style = { ...style };\n\n        this.observable.Notify(this);\n    }\n\n    get Scale(): number {\n        return this.parent === null ? this.scale : this.scale * this.parent.Scale;\n    }\n\n    set Scale(scale: number) {\n        this.scale = scale;\n\n        this.button.Scale = scale;\n        this.label.Scale = scale;\n\n        this.observable.Notify(this);\n    }\n\n    get Destroyed(): boolean {\n        return this.destroyed;\n    }\n\n    get Disable(): boolean {\n        return this.disabled;\n    }\n\n    set Disable(value: boolean) {\n        if (value === this.disabled) {\n            return;\n        }\n\n        this.disabled = value;\n        this.button.Disable = value;\n\n        this.observable.Notify(this);\n    }\n\n    private get CaptionPosition(): Vec2 {\n        return {\n            x: this.Position.x + (this.dimension.width - this.label.Dimension.width / this.label.Scale) / 2,\n            y: this.Position.y + (this.dimension.height - this.label.Dimension.height / this.label.Scale) / 2\n        }\n    }\n\n    private TouchAdapter(_sender: UIIconButton): void {\n        this.touchCallback(this);\n    }\n\n    StyleCaptionRange(begin: number, end: number, style: SymbolStyle): void {\n        this.label.StyleRange(begin, end, style);\n    }\n\n    Touch(): void {\n        this.button.Touch();\n    }\n\n    Destroy(): void {\n        this.label.Destroy();\n        this.button.Destroy();\n\n        this.parent?.RemoveChild(this);\n\n        if (this.parentDetacher !== null) {\n            this.parentDetacher();\n        }\n    }\n}\n","import { vec2 } from \"gl-matrix\";\n\nimport { Dimension } from \"../UIComponent\";\nimport { UIIcon } from \"../UIIcon\";\nimport { UIButtonStyle, UIIconButton } from \"../UIIconButton/UIIconButton\";\nimport { SymbolStyle, UILabel } from \"../UILabel/UILabel\";\nimport { UILabelRenderer } from \"../UILabel/UILabelRenderer\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\nimport { UICreator } from \"../UIRenderer\";\n\nimport { ContainerStyle, UITextList } from \"./UITextList\";\n\nimport { MathUtil } from \"@/lib/math/MathUtil\";\nimport { Observable, ObservableController, ObserverDetacher } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\n\ninterface ScrollControls {\n    scrollTopButton: UIIconButton;\n    scrollBottomButton: UIIconButton;\n}\n\nexport type UIObservableTextListDeleter = () => void;\n\nexport class UIObservableTextList implements UITextList {\n    public visible = true;\n\n    private scale = 1;\n\n    private scroll = 0;\n\n    private label: UILabel;\n\n    private scrollControls: ScrollControls | null = null;\n\n    private observable = new ObservableController<UIObservableTextList>();\n\n    private readonly scrollButtonDimension: Dimension = { width: 10, height: 20 };\n\n    private margin = 5;\n\n    private readonly scrollButtonStyle: UIButtonStyle = {\n        fillColor: [0.9254901960784314, 0.9411764705882353, 0.9450980392156862],\n        outlineColor: [0.9254901960784314, 0.9411764705882353, 0.9450980392156862]\n    };\n\n    private readonly scrollButtonIconColor: Rgb = [0.17254901960784313, 0.24313725490196078, 0.3137254901960784];\n\n    private parentDetacher: ObserverDetacher | null = null;\n\n    constructor(\n        private position: Vec2,\n        private dimension: Dimension,\n        private zIndex: number,\n        text: string,\n        lineHeight: number,\n        private containerStyle: ContainerStyle,\n        public Offset: number,\n        private labelRenderer: UILabelRenderer,\n        private uiRenderer: UICreator,\n        private deleter: UIObservableTextListDeleter,\n        private parent: UIObservablePositioningGroup | null\n    ) {\n        this.label = this.labelRenderer.Create(\n            {\n                x: position.x + this.ContainerStyle.borderWidth,\n                y: position.y\n            },\n            zIndex,\n            text,\n            lineHeight,\n            parent);\n\n        this.parentDetacher = parent?.Observable.Attach(() => this.observable.Notify(this)) ?? null;\n\n        this.ScheduleUpdateScrollControlsPresence();\n    }\n\n    StyleRange(begin: number, end: number, style: SymbolStyle): void {\n        this.label.StyleRange(begin, end, style);\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    set Position(position: Vec2) {\n        this.position = position;\n\n        this.observable.Notify(this);\n    }\n\n    get Dimension(): Dimension {\n        return {\n            width: this.dimension.width * this.Scale,\n            height: this.dimension.height * this.Scale\n        };\n    }\n\n    set Dimension(dimension: Dimension) {\n        this.dimension = dimension;\n\n        this.observable.Notify(this);\n        this.ScheduleUpdateScrollControlsPresence();\n    }\n\n    get AbsolutePosition(): Vec2 {\n        if (this.parent) {\n            const parentPosition = [this.parent.AbsolutePosition.x, this.parent.AbsolutePosition.y] as const;\n            const absolutePosition = vec2.add(vec2.create(), parentPosition, [this.Position.x * this.Scale, this.Position.y * this.Scale]);\n\n            return { x: absolutePosition[0], y: absolutePosition[1] };\n        } else {\n            return this.Position;\n        }\n    }\n\n    get Text(): string {\n        return this.label.Text;\n    }\n\n    set Text(text: string) {\n        this.label.Text = text;\n\n        this.scroll = 0;\n        this.label.Position = {\n            x: this.position.x + this.ContainerStyle.borderWidth,\n            y: this.position.y\n        }\n\n        this.observable.Notify(this);\n        this.ScheduleUpdateScrollControlsPresence();\n    }\n\n    get ZIndex(): number {\n        return this.zIndex;\n    }\n\n    set ZIndex(zIndex: number) {\n        this.zIndex = zIndex;\n\n        this.label.ZIndex = zIndex;\n\n        this.observable.Notify(this);\n    }\n\n    get LineHeight(): number {\n        return this.label.LineHeight;\n    }\n\n    set LineHeight(lineHeight: number) {\n        this.label.LineHeight = lineHeight;\n\n        this.observable.Notify(this);\n        this.ScheduleUpdateScrollControlsPresence();\n    }\n\n    get ContainerStyle(): ContainerStyle {\n        return {\n            borderWidth: this.containerStyle.borderWidth * this.Scale,\n            fillColor: this.containerStyle.fillColor\n        };\n    }\n\n    set BorderWidth(style: ContainerStyle) {\n        this.containerStyle.borderWidth = style.borderWidth;\n        this.containerStyle.fillColor = style.fillColor;\n\n        this.observable.Notify(this);\n    }\n\n    get Visible(): boolean {\n        return this.visible;\n    }\n\n    set Visible(value: boolean) {\n        this.visible = value;\n\n        this.ScheduleUpdateScrollControlsPresence();\n\n        this.observable.Notify(this);\n    }\n\n    get Scale(): number {\n        return this.parent === null ? this.scale : this.scale * this.parent.Scale;\n    }\n\n    set Scale(scale: number) {\n        this.scale = scale;\n\n        if (this.parent === null) {\n            this.label.Scale = scale;\n        }\n\n        this.ScheduleUpdateScrollControlsPresence();\n\n        if (this.scrollControls !== null) {\n            this.scrollControls.scrollTopButton.Scale = scale;\n            this.scrollControls.scrollBottomButton.Scale = scale;\n        }\n\n\n        this.observable.Notify(this);\n    }\n\n    get Observable(): Observable<UIObservableTextList> {\n        return this.observable;\n    }\n\n    private get IsContentOverflow(): boolean {\n        return this.label.Dimension.height > this.Dimension.height;\n    }\n\n    ScrollToTop(): void {\n        queueMicrotask(() => {\n            if (this.visible && this.IsContentOverflow) {\n                this.scroll = 0;\n                this.ScrollAligned(this.MinScroll);\n            }\n        });\n    }\n\n    Destroy(): void {\n        this.parent?.RemoveChild(this);\n\n        if (this.parentDetacher !== null) {\n            this.parentDetacher();\n        }\n\n        if (this.scrollControls !== null) {\n            this.scrollControls.scrollTopButton.Destroy();\n            this.scrollControls.scrollBottomButton.Destroy();\n            this.scrollControls = null;\n        }\n\n        this.deleter();\n    }\n\n    private ScheduleUpdateScrollControlsPresence(): void {\n        queueMicrotask(() => this.UpdateScrollControlsPresence());\n    }\n\n    private UpdateScrollControlsPresence(): void {\n        if (this.visible && this.IsContentOverflow) {\n            if (this.scrollControls === null) {\n                this.scrollControls = {\n                    scrollTopButton: this.CreateTopScrollButton(),\n                    scrollBottomButton: this.CreateBottomScrollButton()\n                };\n\n                if (this.parent === null) {\n                    this.scrollControls.scrollBottomButton.Scale = this.Scale;\n                    this.scrollControls.scrollTopButton.Scale = this.Scale;\n                }\n\n                this.ScrollAligned(0);\n            }\n\n            this.scrollControls.scrollBottomButton.Position = {\n                x: this.ScrollButtonX,\n                y: this.ScrollBottomButtonY\n            };\n\n            this.scrollControls.scrollTopButton.Position = {\n                x: this.ScrollButtonX,\n                y: this.ScrollTopButtonY\n            };\n        } else {\n            if (this.scrollControls !== null) {\n                this.scrollControls.scrollTopButton.Destroy();\n                this.scrollControls.scrollBottomButton.Destroy();\n                this.scrollControls = null;\n            }\n        }\n    }\n\n    private get ScrollButtonX(): number {\n        return this.Position.x + this.dimension.width - this.containerStyle.borderWidth - this.scrollButtonDimension.width - this.margin;\n    }\n\n    private get ScrollTopButtonY(): number {\n        return this.Position.y + this.dimension.height - this.scrollButtonDimension.height - this.containerStyle.borderWidth - this.margin;\n    }\n\n    private get ScrollBottomButtonY(): number {\n        return this.Position.y + this.ContainerStyle.borderWidth + this.margin;\n    }\n\n    private CreateTopScrollButton(): UIIconButton {\n        return this.uiRenderer.CreateIconButton(\n            {\n                x: this.ScrollButtonX,\n                y: this.ScrollTopButtonY\n            },\n            this.scrollButtonDimension,\n            1,\n            this.scrollButtonStyle,\n            { color: this.scrollButtonIconColor, icon: UIIcon.ArrowUp },\n            (_component: UIIconButton) => this.ScrollAligned(-this.LineHeight),\n            this.parent\n        );\n    }\n\n    private CreateBottomScrollButton(): UIIconButton {\n        return this.uiRenderer.CreateIconButton(\n            {\n                x: this.ScrollButtonX,\n                y: this.ScrollBottomButtonY\n            },\n            this.scrollButtonDimension,\n            1,\n            this.scrollButtonStyle,\n            { color: this.scrollButtonIconColor, icon: UIIcon.ArrowDown },\n            (_component: UIIconButton) => this.ScrollAligned(this.LineHeight),\n            this.parent\n        );\n    }\n\n    get MinScroll(): number {\n        return this.Position.y - this.label.Dimension.height / this.label.Scale + this.dimension.height - 2 * this.containerStyle.borderWidth;\n    }\n\n    get MaxScroll(): number {\n        return this.Position.y;\n    }\n\n    ScrollAligned(offset: number): void {\n        if (!this.IsContentOverflow) {\n            return;\n        }\n\n        this.scroll += offset;\n\n        this.scroll = MathUtil.Clamp(this.scroll, this.MinScroll, this.MaxScroll);\n\n        this.UpdateScrollButtonDisability();\n\n        this.label.Position = { ...this.label.Position, y: this.scroll };\n    }\n\n    private UpdateScrollButtonDisability(): void {\n        if (this.scroll === this.MinScroll) {\n            this.scrollControls!.scrollTopButton.Disable = true;\n        } else if (this.scrollControls!.scrollTopButton.Disable) {\n            this.scrollControls!.scrollTopButton.Disable = false;\n        }\n\n        if (this.scroll === this.MaxScroll) {\n            this.scrollControls!.scrollBottomButton.Disable = true;\n        } else if (this.scrollControls!.scrollBottomButton.Disable) {\n            this.scrollControls!.scrollBottomButton.Disable = false;\n        }\n    }\n}\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nout vec4 out_color;\\n\\nvoid main() \\n{\\n      out_color = vec4(0.17254901960784313, 0.24313725490196078, 0.3137254901960784, 1);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0) ;\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec4 v_fill_color;\\n\\nout vec4 out_color;\\n\\nvoid main() {\\n      out_color = v_fill_color;\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\nin vec4 a_fill_color;\\n\\nout vec4 v_fill_color;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0);\\n  v_fill_color = a_fill_color;\\n}\\n\"","import { inject, injectable, interfaces, named } from \"inversify\";\n\nimport { Dimension } from \"../UIComponent\";\nimport { UILabelRenderer } from \"../UILabel/UILabelRenderer\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\nimport { UICreator, UIRenderer } from \"../UIRenderer\";\n\nimport { UIObservableTextList, UIObservableTextListDeleter } from \"./UIObservableTextList\";\nimport { ContainerStyle, UITextList } from \"./UITextList\";\nimport FTextListBorder from './UITextListBorder.frag'\nimport VTextListBorder from './UITextListBorder.vert'\nimport FUITextListStencil from './UITextListStencil.frag';\nimport VUITextListStencil from './UITextListStencil.vert';\n\nimport { AppSettings } from \"@/app/AppSettings\";\nimport { InjectionToken, UILabelRendererTargetName } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { ArrayHelper } from \"@/lib/ArrayHelper\";\nimport { MemoryPoolTracker } from \"@/lib/MemoryPoolTracker\";\nimport { Vec2 } from \"@/lib/Primitives\";\nimport { PrimitiveBuilder } from \"@/lib/renderer/PrimitiveBuilder\";\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from \"@/lib/renderer/ShaderProgram\";\n\n\nclass UITextListBorderRenderer extends PrimitivesRenderer {\n    constructor(gl: WebGL2RenderingContext) {\n        super(gl,\n            { fragment: FTextListBorder, vertex: VTextListBorder },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            }],\n            { indicesPerPrimitive: 24, basePrimitiveType: gl.TRIANGLES });\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n}\n\n@injectable()\nexport class UITextListRenderer extends PrimitivesRenderer {\n    private readonly zFarIncluded = 0.1;\n\n    private borderRenderer: UITextListBorderRenderer;\n\n    private vertexAttributesTracker: MemoryPoolTracker;\n\n    private uiRenderer!: UICreator;\n\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext,\n        @inject(UILabelRenderer) @named(UILabelRendererTargetName.Unique) private labelRenderer: UILabelRenderer) {\n\n        super(gl,\n            { fragment: FUITextListStencil, vertex: VUITextListStencil },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_fill_color',\n                size: 4,\n                type: gl.FLOAT,\n                normalized: false\n            }],\n            { indicesPerPrimitive: 6, basePrimitiveType: gl.TRIANGLES });\n\n        this.borderRenderer = new UITextListBorderRenderer(this.gl);\n\n        this.vertexAttributesTracker = new (class extends MemoryPoolTracker {\n            constructor(private renderer: UITextListRenderer) {\n                const initialCapacity = 2;\n                super(initialCapacity);\n\n                renderer.UploadAttributes(Array.from({ length: renderer.ComponentsPerPrimitive * initialCapacity }, () => 0));\n                this.renderer.borderRenderer.UploadAttributes(Array.from({ length: renderer.borderRenderer.ComponentsPerPrimitive * initialCapacity }, () => 0));\n            }\n\n            Free(index: number): void {\n                this.renderer.UpdatePrimitiveComponents(\n                    new Array(this.renderer.ComponentsPerPrimitive).fill(0),\n                    index * this.renderer.ComponentsPerPrimitive);\n\n                this.renderer.borderRenderer.UpdatePrimitiveComponents(\n                    new Array(this.renderer.borderRenderer.ComponentsPerPrimitive).fill(0),\n                    index * this.renderer.borderRenderer.ComponentsPerPrimitive);\n\n                super.Free(index);\n            }\n\n            OnShrink(inUseIndices: number[]): void {\n                const scencilRectAttrs = new Array(this.renderer.ComponentsPerPrimitive * inUseIndices.length).fill(0);\n                const borderAttrs = new Array(this.renderer.borderRenderer.ComponentsPerPrimitive * inUseIndices.length).fill(0);\n\n                for (let n = 0; n < inUseIndices.length; ++n) {\n                    const offset = inUseIndices[n];\n\n                    const stencilComponents = this.renderer.PrimitiveComponents(offset);\n                    ArrayHelper.Copy(\n                        scencilRectAttrs,\n                        n * this.renderer.ComponentsPerPrimitive,\n                        stencilComponents,\n                        0,\n                        stencilComponents.length);\n\n                    const borderComponents = this.renderer.borderRenderer.PrimitiveComponents(offset);\n                    ArrayHelper.Copy(\n                        borderAttrs,\n                        n * this.renderer.borderRenderer.ComponentsPerPrimitive,\n                        borderComponents,\n                        0,\n                        borderComponents.length);\n                }\n\n                this.renderer.UploadAttributes(scencilRectAttrs);\n                this.renderer.borderRenderer.UploadAttributes(borderAttrs);\n            }\n\n            OnExtend(extendedCapacity: number): void {\n                const stencilComponents = this.renderer.PrimitiveComponentsRange(0, this.renderer.TotalPrimitives);\n                const extendedLabelAttrs = Array.from(\n                    { length: extendedCapacity * this.renderer.ComponentsPerPrimitive },\n                    (_, n) => n < stencilComponents.length ? stencilComponents[n] : 0);\n\n                this.renderer.UploadAttributes(extendedLabelAttrs);\n\n\n                const borderComponents = this.renderer.borderRenderer.PrimitiveComponentsRange(0, this.renderer.borderRenderer.TotalPrimitives);\n                const extendedBorderAttrs = Array.from(\n                    { length: extendedCapacity * this.renderer.borderRenderer.ComponentsPerPrimitive },\n                    (_, n) => n < borderComponents.length ? borderComponents[n] : 0);\n\n                this.renderer.UploadAttributes(extendedBorderAttrs);\n            }\n        })(this);\n    }\n\n    Create(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        containerStyle: ContainerStyle,\n        lineHeight: number,\n        deleter: UIObservableTextListDeleter,\n        parent: UIObservablePositioningGroup | null = null): UITextList {\n\n        const textList = new UIObservableTextList(\n            position,\n            dimension,\n            zIndex,\n            text,\n            lineHeight,\n            containerStyle,\n            this.vertexAttributesTracker.Allocate(),\n            this.labelRenderer,\n            this.UIRenderer,\n            deleter,\n            parent);\n\n\n        if (parent !== null) {\n            parent.AppendChild(textList);\n        }\n\n        textList.Observable.Attach((component: UIObservableTextList) => this.UpdateAttributes(component))\n\n        this.UpdateAttributes(textList);\n\n        return textList;\n    }\n\n    Draw(): void {\n        this.gl.enable(this.gl.STENCIL_TEST);\n\n        this.gl.stencilFunc(\n            this.gl.ALWAYS,\n            1,\n            0xFF\n        );\n\n        this.gl.stencilOp(\n            this.gl.KEEP,\n            this.gl.KEEP,\n            this.gl.REPLACE\n        );\n\n        super.Draw();\n\n        this.gl.stencilFunc(\n            this.gl.EQUAL,\n            1,\n            0xFF\n        );\n\n        this.gl.stencilOp(\n            this.gl.KEEP,\n            this.gl.KEEP,\n            this.gl.KEEP\n        );\n\n        this.labelRenderer.Draw();\n\n        this.gl.clear(this.gl.STENCIL_BUFFER_BIT);\n        this.gl.disable(this.gl.STENCIL_TEST);\n\n        this.borderRenderer.Draw();\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n        this.labelRenderer.ViewProjection = mat;\n        this.borderRenderer.ViewProjection = mat;\n    }\n\n    get UIRenderer(): UICreator {\n        return this.uiRenderer;\n    }\n\n    set UIRenderer(renderer: UICreator) {\n        this.uiRenderer = renderer;\n    }\n\n    Dispose(): void {\n        this.borderRenderer.Dispose();\n\n        super.Dispose();\n    }\n\n    private UpdateAttributes(component: UIObservableTextList): void {\n        this.UpdateStencilAttributes(component);\n        this.UpdateBorderAttributes(component);\n    }\n\n    private UpdateStencilAttributes(component: UIObservableTextList): void {\n        let attrs: number[];\n        if (component.Visible) {\n            attrs = PrimitiveBuilder.AABBRectangle(\n                {\n                    x: component.AbsolutePosition.x + component.ContainerStyle.borderWidth,\n                    y: component.AbsolutePosition.y + component.ContainerStyle.borderWidth\n                },\n                {\n                    width: component.Dimension.width - 2 * component.ContainerStyle.borderWidth,\n                    height: component.Dimension.height - 2 * component.ContainerStyle.borderWidth\n                },\n                [\n                    [this.settings.ZFar - component.ZIndex - this.zFarIncluded + 0.1],\n                    component.ContainerStyle.fillColor\n                ]);\n        } else {\n            attrs = new Array(this.ComponentsPerPrimitive).fill(0);\n        }\n\n        this.UpdatePrimitiveComponents(attrs, component.Offset * this.ComponentsPerPrimitive);\n    }\n\n    private UpdateBorderAttributes(component: UIObservableTextList): void {\n        let attrs: number[];\n\n        if (component.Visible) {\n            attrs = PrimitiveBuilder.AABBFrame(\n                component.AbsolutePosition,\n                component.Dimension,\n                component.ContainerStyle.borderWidth,\n                [\n                    [this.settings.ZFar - component.ZIndex - this.zFarIncluded]\n                ]\n            );\n        } else {\n            attrs = new Array(this.borderRenderer.ComponentsPerPrimitive).fill(0);\n        }\n\n        this.borderRenderer.UpdatePrimitiveComponents(attrs, component.Offset * this.borderRenderer.ComponentsPerPrimitive);\n    }\n}\n\nInversify.bind(UITextListRenderer).toSelf().inTransientScope();\n\nexport type UITextListRendererFactory = (uiRenderer: UIRenderer) => UITextListRenderer;\n\nInversify\n    .bind<interfaces.Factory<UITextListRendererFactory>>(InjectionToken.UITextListRendererFactory)\n    .toFactory<UITextListRenderer, [UIRenderer]>(ctx => (uiRenderer: UIRenderer) => {\n        const instance = ctx.container.get(UITextListRenderer);\n        instance.UIRenderer = uiRenderer;\n\n        return instance;\n    });\n","import { inject, injectable } from \"inversify\";\n\nimport { ArrayHelper } from \"../ArrayHelper\";\nimport { Intersection } from \"../math/Intersection\";\nimport { Vec2 } from \"../Primitives\";\nimport { Mat4 } from \"../renderer/ShaderProgram\";\n\nimport { InputReceiver } from \"./InputReceiver\";\nimport { Dimension, UIAlert, UIAlertIconStyle, UIAlertStyle, UIAlertText } from \"./UIAlert/UIAlert\";\nimport { UIAlertRenderer } from \"./UIAlert/UIAlertRenderer\";\nimport { UIEditableTextList } from \"./UIEditableTextList/UIEditableTextList\";\nimport { UIEditableTextListRenderer, UIEditableTextListRendererFactory } from \"./UIEditableTextList/UIEditableTextListRenderer\";\nimport { UIButtonStyle, UIIconButton, UIIconStyle } from \"./UIIconButton/UIIconButton\";\nimport { UIIconButtonRenderer } from \"./UIIconButton/UIIconButtonRenderer\";\nimport { TouchCallback as IconButtonTouchCallback } from \"./UIIconButton/UIObservableIconButton\";\nimport { UILabel } from \"./UILabel/UILabel\";\nimport { UILabelRenderer } from \"./UILabel/UILabelRenderer\";\nimport { UIObservablePositioningGroup } from \"./UIObservablePositioningGroup\";\nimport { TouchCallback as TextButtonTouchCallback } from \"./UITextButton/UIObservableTextButton\";\nimport { UIObservableTextButton } from \"./UITextButton/UIObservableTextButton\";\nimport { UICaptionStyle, UITextButton } from \"./UITextButton/UITextButton\";\nimport { ContainerStyle, UITextList } from \"./UITextList/UITextList\";\nimport { UITextListRenderer, UITextListRendererFactory } from \"./UITextList/UITextListRenderer\";\n\nimport { MouseSelectEvent } from \"@/app/AppEventTransformer\";\nimport { InjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\n\nexport interface UICreator {\n    CreateIconButton(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        style: UIButtonStyle,\n        iconStyle: UIIconStyle,\n        touchCallback: IconButtonTouchCallback,\n        parent: UIObservablePositioningGroup | null): UIIconButton;\n\n    CreateTextButton(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        style: UIButtonStyle,\n        caption: UICaptionStyle,\n        touchCallback: TextButtonTouchCallback,\n        parent: UIObservablePositioningGroup | null): UITextButton;\n\n    CreateLabel(position: Vec2,\n        zIndex: number,\n        text: string,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null): UILabel;\n\n    CreateAlert(position: Vec2,\n        zIndex: number,\n        icon: UIAlertIconStyle,\n        text: UIAlertText,\n        style: UIAlertStyle,\n        parent: UIObservablePositioningGroup | null): UIAlert;\n\n    CreateTextList(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        containerStyle: ContainerStyle,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null): UITextList;\n\n    CreateEditableTextList(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        containerStyle: ContainerStyle,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null): UIEditableTextList;\n}\n\ninterface UITextListDescriptor<TRenderer, TComponent extends UITextList> {\n    renderer: TRenderer;\n    component: TComponent;\n}\n\n@injectable()\nexport class UIRenderer implements UICreator {\n    private viewProjection: Mat4 | Float32Array | null = null;\n\n    private uiTextLists: UITextListDescriptor<UITextListRenderer, UITextList>[] = [];\n\n    private uiEditableTextLists: UITextListDescriptor<UIEditableTextListRenderer, UIEditableTextList>[] = [];\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext,\n        @inject(UIIconButtonRenderer) private iconButtonRenderer: UIIconButtonRenderer,\n        @inject(UIAlertRenderer) private alertRenderer: UIAlertRenderer,\n        @inject(UILabelRenderer) private labelsRenderer: UILabelRenderer,\n        @inject(InjectionToken.UITextListRendererFactory) private uiTextListRendererFactory: UITextListRendererFactory,\n        @inject(InjectionToken.UIEditableTextListRendererFactory) private uiEditableTextListRendererFactory: UIEditableTextListRendererFactory) {\n        this.alertRenderer.UIRenderer = this;\n    }\n\n    CreateIconButton(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        style: UIButtonStyle,\n        iconStyle: UIIconStyle,\n        touchCallback: IconButtonTouchCallback,\n        parent: UIObservablePositioningGroup | null = null): UIIconButton {\n        return this.iconButtonRenderer.Create(position, dimension, zIndex, style, iconStyle, touchCallback, parent);\n    }\n\n    CreateTextButton(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        style: UIButtonStyle,\n        caption: UICaptionStyle,\n        touchCallback: TextButtonTouchCallback,\n        parent: UIObservablePositioningGroup | null = null): UITextButton {\n        return new UIObservableTextButton(position, dimension, zIndex, style, caption, touchCallback, this, parent);\n    }\n\n    CreateLabel(position: Vec2,\n        zIndex: number,\n        text: string,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null = null): UILabel {\n        return this.labelsRenderer.Create(position, zIndex, text, lineHeight, parent);\n    }\n\n    CreateAlert(position: Vec2,\n        zIndex: number,\n        icon: UIAlertIconStyle,\n        text: UIAlertText,\n        style: UIAlertStyle,\n        parent: UIObservablePositioningGroup | null = null): UIAlert {\n        return this.alertRenderer.Create(position, zIndex, icon, text, style, parent);\n    }\n\n    CreateTextList(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        containerStyle: ContainerStyle,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null = null): UITextList {\n        const renderer = this.uiTextListRendererFactory(this);\n\n        if (this.viewProjection !== null) {\n            renderer.ViewProjection = this.viewProjection;\n        }\n\n        const descriptor = { renderer } as UITextListDescriptor<UITextListRenderer, UITextList>;\n\n        const textList = renderer.Create(\n            position,\n            dimension,\n            zIndex,\n            text,\n            containerStyle,\n            lineHeight,\n            () => this.UIObservableTextListDeleter(descriptor),\n            parent);\n\n        descriptor.component = textList;\n\n        this.uiTextLists.push(descriptor);\n\n        return textList;\n    }\n\n    CreateEditableTextList(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        containerStyle: ContainerStyle,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null = null): UIEditableTextList {\n        const renderer = this.uiEditableTextListRendererFactory(this);\n\n        if (this.viewProjection !== null) {\n            renderer.ViewProjection = this.viewProjection;\n        }\n\n\n        const descriptor = { renderer } as UITextListDescriptor<UIEditableTextListRenderer, UIEditableTextList>;\n\n        const editableTextList = renderer.Create(\n            position,\n            dimension,\n            zIndex,\n            text,\n            containerStyle,\n            lineHeight,\n            () => this.UIObservableEditableTextListDeleter(descriptor),\n            parent);\n\n        descriptor.component = editableTextList;\n\n        this.uiEditableTextLists.push(descriptor);\n\n        return editableTextList;\n    }\n\n    Touch(e: MouseSelectEvent): InputReceiver | boolean {\n        const touchResult = this.TouchAlerts(e.offsetX, e.offsetY) ||\n            this.TouchButtons(e.offsetX, e.offsetY) ||\n            this.TouchLabels(e.offsetX, e.offsetY);\n\n        return touchResult || (this.TouchTextList(this.uiEditableTextLists, e.offsetX, e.offsetY) ?? false);\n    }\n\n    FindTextList(x: number, y: number): UITextList | null {\n        const textList = this.TouchTextList(this.uiTextLists, x, y);\n        const editableTextList = this.TouchTextList(this.uiEditableTextLists, x, y);\n\n        if (textList === null) {\n            return editableTextList;\n        }\n\n        if (editableTextList === null) {\n            return textList;\n        }\n\n        return textList.ZIndex > editableTextList.ZIndex ?\n            textList :\n            editableTextList;\n    }\n\n    private TouchButtons(x: number, y: number): boolean {\n        const intersected = this.iconButtonRenderer.IconButtons\n            .filter(btn => Intersection.AABBRectanglePoint(\n                { x: btn.AbsolutePosition.x, y: btn.AbsolutePosition.y, width: btn.Dimension.width, height: btn.Dimension.height },\n                { x, y }));\n\n        if (intersected.length === 0) {\n            return false;\n        }\n\n        ArrayHelper\n            .Max(intersected, (a: UIIconButton, b: UIIconButton) => a.ZIndex < b.ZIndex)\n            .Touch();\n\n        return true;\n    }\n\n    private TouchLabels(x: number, y: number): boolean {\n        const intersected = this.labelsRenderer.Labels\n            .filter(label => Intersection.AABBRectanglePoint(\n                { x: label.AbsolutePosition.x, y: label.AbsolutePosition.y, width: label.Dimension.width, height: label.Dimension.height },\n                { x, y }));\n\n\n        if (intersected.length === 0) {\n            return false;\n        }\n\n        return true;\n    }\n\n    private TouchAlerts(x: number, y: number): boolean {\n        const intersected = this.alertRenderer.Alerts\n            .filter(alert => Intersection.AABBRectanglePoint(\n                { x: alert.AbsolutePosition.x, y: alert.AbsolutePosition.y, width: alert.Dimension.width, height: alert.Dimension.height },\n                { x, y }));\n\n\n        if (intersected.length === 0) {\n            return false;\n        }\n\n        intersected[0].Destroy();\n\n        return true;\n    }\n\n    private TouchTextList<TRenderer, TComponent extends UITextList>(components: UITextListDescriptor<TRenderer, TComponent>[], x: number, y: number): TComponent | null {\n        const intersected = components\n            .filter(desc => desc.component.Visible && Intersection.AABBRectanglePoint(\n                {\n                    x: desc.component.AbsolutePosition.x,\n                    y: desc.component.AbsolutePosition.y,\n                    width: desc.component.Dimension.width,\n                    height: desc.component.Dimension.height\n                },\n                { x, y }));\n\n\n        if (intersected.length === 0) {\n            return null;\n        }\n\n        return ArrayHelper\n            .Max(\n                intersected,\n                (a: UITextListDescriptor<TRenderer, TComponent>, b: UITextListDescriptor<TRenderer, TComponent>) => a.component.ZIndex < b.component.ZIndex)\n            .component;\n    }\n\n    private UIObservableTextListDeleter(descriptor: UITextListDescriptor<UITextListRenderer, UITextList>): void {\n        this.uiTextLists.splice(this.uiTextLists.findIndex(x => x === descriptor), 1);\n    }\n\n    private UIObservableEditableTextListDeleter(descriptor: UITextListDescriptor<UIEditableTextListRenderer, UIEditableTextList>): void {\n        this.uiEditableTextLists.splice(this.uiEditableTextLists.findIndex(x => x === descriptor), 1);\n    }\n\n    Draw(): void {\n        this.alertRenderer.Draw();\n        this.iconButtonRenderer.Draw();\n        this.labelsRenderer.Draw();\n        this.uiTextLists.forEach(x => x.renderer.Draw());\n        this.uiEditableTextLists.forEach(x => x.renderer.Draw());\n    }\n\n    set ViewProjection(projection: Mat4 | Float32Array) {\n        this.viewProjection = projection;\n\n        this.iconButtonRenderer.ViewProjection = projection;\n        this.labelsRenderer.ViewProjection = projection;\n        this.alertRenderer.ViewProjection = projection;\n        this.uiTextLists.forEach(x => x.renderer.ViewProjection = projection);\n        this.uiEditableTextLists.forEach(x => x.renderer.ViewProjection = projection);\n    }\n}\n\nInversify.bind(UIRenderer).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { DebugControlsLayout } from \"./Layouts/DebugControlsLayout\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { PCDirection } from \"@/lib/befunge/CPU/CPU\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb } from \"@/lib/Primitives\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { HorizontalAnchor, UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\nexport interface PCDirectionCondition {\n    Direction?: PCDirection;\n}\n\nexport interface HeatmapToggleButtonState {\n    isShown: boolean;\n}\n\nexport enum DebugAction { RunNextBreakpoint, RunNextInstruction, Interrupt };\n\n@injectable()\nexport class DebugControls {\n    private static readonly DefaultButtonFillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n    private static readonly DefaultButtonOutlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n    private static readonly ToggleButtonOutlineColor: Rgb = [0, 0, 0];\n    private static readonly DefaultButtonIconColor: Rgb = [0.40784313725490196, 0.6235294117647059, 0.2196078431372549];\n    private static readonly DebugModeButtonIconColor: Rgb = [0.9411764705882353, 0.6392156862745098, 0.0392156862745098];\n    private static readonly BreakpointButtonIconColor: Rgb = [0.8980392156862745, 0.2235294117647059, 0.20784313725490197];\n    private static readonly ProfilerButtonIconColor: Rgb = [0.11764705882352941, 0.5647058823529412, 1];\n\n    private group: UIObservablePositioningGroup;\n\n    private executeButton: UIIconButton;\n\n    private debugButton: UIIconButton;\n    private debugMenuGroup: UIObservablePositioningGroup | null = null;\n\n    private breakpointMenuButton: UIIconButton;\n    private isBreakpointMenuOpen = false;\n    private breakpointMenuGroup: UIObservablePositioningGroup | null = null;\n\n    private heatmapButton: UIIconButton;\n\n    private readonly executeObservable = new ObservableController<void>();\n\n    private readonly debugObservable = new ObservableController<DebugAction>();\n\n    private readonly cellBreakpointObservable = new ObservableController<PCDirectionCondition>();\n    private readonly cellBreakpointDeleteObservable = new ObservableController<void>();\n\n    private isHeatmapShown = false;\n    private readonly heatmapObservable = new ObservableController<HeatmapToggleButtonState>();\n\n    private debugMode = false;\n\n    public DeactivateButton = false;\n\n    constructor(\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(DebugControlsLayout) private layout: DebugControlsLayout) {\n        this.group = new UIObservablePositioningGroup(\n            { x: 0, y: 60 },\n            { vertical: VerticalAnchor.Top, horizontal: HorizontalAnchor.Middle });\n\n        const margin = 10;\n        const buttonSideLength = 50;\n\n        this.executeButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: 0 },\n            { width: buttonSideLength, height: buttonSideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.Play, color: DebugControls.DefaultButtonIconColor },\n            _sender => this.executeObservable.Notify(),\n            this.group\n        );\n\n        this.debugButton = this.uiRenderer.CreateIconButton(\n            { x: buttonSideLength + margin, y: 0 },\n            { width: buttonSideLength, height: buttonSideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.PlayDebug, color: DebugControls.DefaultButtonIconColor },\n            _sender => this.debugObservable.Notify(DebugAction.RunNextBreakpoint),\n            this.group\n        );\n\n        this.breakpointMenuButton = this.uiRenderer.CreateIconButton(\n            { x: 2 * buttonSideLength + 2 * margin, y: 0 },\n            { width: buttonSideLength, height: buttonSideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.Breakpoint, color: DebugControls.BreakpointButtonIconColor },\n            _sender => this.ToggleBreakpointMenuButton(),\n            this.group\n        );\n\n        this.heatmapButton = this.uiRenderer.CreateIconButton(\n            { x: 3 * buttonSideLength + 3 * margin, y: 0 },\n            { width: buttonSideLength, height: buttonSideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.Heatmap, color: DebugControls.ProfilerButtonIconColor },\n            sender => this.ToggleHeatmap(sender),\n            this.group\n        );\n\n        this.layout.DebugGroup = this.group;\n    }\n\n    Resize(): void {\n        this.group.Resize();\n        this.breakpointMenuGroup?.Resize();\n        this.debugMenuGroup?.Resize();\n    }\n\n    ClickOnHeatmap(): void {\n        this.heatmapButton.Touch();\n    }\n\n    get DebugMode(): boolean {\n        return this.debugMode;\n    }\n\n    set DebugMode(mode: boolean) {\n        if (mode !== this.debugMode) {\n            this.debugButton.Icon = {\n                icon: UIIcon.PlayDebug,\n                color: mode ? DebugControls.DebugModeButtonIconColor : DebugControls.DefaultButtonIconColor\n            };\n\n            const margin = 10;\n            const sideLength = 50;\n\n            if (mode) {\n                this.debugMenuGroup = new UIObservablePositioningGroup(\n                    {\n                        x: this.debugButton.AbsolutePosition.x / this.group.Scale,\n                        y: this.group.Position.y + 2 * margin + 2 * sideLength\n                    },\n                    { vertical: VerticalAnchor.Top });\n\n                const executeNextInstructionButton = this.uiRenderer.CreateIconButton(\n                    { x: 0, y: margin + sideLength },\n                    { width: sideLength, height: sideLength },\n                    1,\n                    { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n                    { icon: UIIcon.DebugStepInto, color: DebugControls.DebugModeButtonIconColor },\n                    _sender => this.debugObservable.Notify(DebugAction.RunNextInstruction),\n                    this.debugMenuGroup);\n\n                const stopDebuggingButton = this.uiRenderer.CreateIconButton(\n                    { x: 0, y: 0 },\n                    { width: sideLength, height: sideLength },\n                    1,\n                    { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n                    { icon: UIIcon.Stop, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n                    _sender => this.debugObservable.Notify(DebugAction.Interrupt),\n                    this.debugMenuGroup);\n            } else {\n                this.debugMenuGroup?.Destroy();\n                this.debugMenuGroup = null;\n            }\n\n            this.executeButton.Disable = mode;\n            this.heatmapButton.Disable = mode;\n        }\n\n        this.debugMode = mode;\n    }\n\n    get IsHeatmapShown(): boolean {\n        return this.isHeatmapShown;\n    }\n\n    get Execute(): Observable<void> {\n        return this.executeObservable;\n    }\n\n    get Debug(): Observable<DebugAction> {\n        return this.debugObservable;\n    }\n\n    get CellBreakopint(): Observable<PCDirectionCondition> {\n        return this.cellBreakpointObservable;\n    }\n\n    get CellBreakpointDelete(): Observable<void> {\n        return this.cellBreakpointDeleteObservable;\n    }\n\n    get Heatmap(): Observable<HeatmapToggleButtonState> {\n        return this.heatmapObservable;\n    }\n\n    private ToggleBreakpointMenuButton(): void {\n        if (this.isBreakpointMenuOpen) {\n            this.CloseCellBreakpointDirectionMenu();\n        } else {\n            this.ShowCellBreakpointDirectionMenu();\n        }\n    }\n\n    private ShowCellBreakpointDirectionMenu(): void {\n        this.isBreakpointMenuOpen = true;\n\n        this.breakpointMenuButton.Icon = { icon: UIIcon.Breakpoint, color: [0.4588235294117647, 0.4588235294117647, 0.4588235294117647] };\n\n        const margin = 10;\n        const sideLength = 50;\n        const totalButtons = 5 + +this.DeactivateButton;\n        this.breakpointMenuGroup = new UIObservablePositioningGroup(\n            {\n                x: this.breakpointMenuButton.AbsolutePosition.x / this.breakpointMenuButton.Scale,\n                y: this.group.Position.y + totalButtons * margin + totalButtons * sideLength\n            },\n            { vertical: VerticalAnchor.Top });\n\n        const breakpointAnyDirectionButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: 0 },\n            { width: sideLength, height: sideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.ArrowThinAll, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n            _sender => this.NotifyWithPCLocationCondition({}),\n            this.breakpointMenuGroup);\n\n        const breakpointLeftDirectionButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: margin + sideLength },\n            { width: sideLength, height: sideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.ArrowThinLeft, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n            _sender => this.NotifyWithPCLocationCondition({ Direction: PCDirection.Left }),\n            this.breakpointMenuGroup);\n\n        const breakpointUpDirectionButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: 2 * margin + 2 * sideLength },\n            { width: sideLength, height: sideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.ArrowThinUp, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n            _sender => this.NotifyWithPCLocationCondition({ Direction: PCDirection.Up }),\n            this.breakpointMenuGroup);\n\n        const breakpointRightDirectionButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: 3 * margin + 3 * sideLength },\n            { width: sideLength, height: sideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.ArrowThinRight, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n            _sender => this.NotifyWithPCLocationCondition({ Direction: PCDirection.Right }),\n            this.breakpointMenuGroup);\n\n        const breakpointDownDirectionButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: 4 * margin + 4 * sideLength },\n            { width: sideLength, height: sideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.ArrowThinDown, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n            _sender => this.NotifyWithPCLocationCondition({ Direction: PCDirection.Down }),\n            this.breakpointMenuGroup);\n\n        if (this.DeactivateButton) {\n            const breakpointDeactivateButton = this.uiRenderer.CreateIconButton(\n                { x: 0, y: 5 * margin + 5 * sideLength },\n                { width: sideLength, height: sideLength },\n                1,\n                { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n                { icon: UIIcon.Delete, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n                _sender => this.NotifyWithCellBreakpointDeactivation(),\n                this.breakpointMenuGroup);\n        }\n    }\n\n    private NotifyWithPCLocationCondition(direction: PCDirectionCondition): void {\n        this.CloseCellBreakpointDirectionMenu();\n\n        this.cellBreakpointObservable.Notify(direction);\n    }\n\n    private NotifyWithCellBreakpointDeactivation(): void {\n        this.CloseCellBreakpointDirectionMenu();\n\n        this.cellBreakpointDeleteObservable.Notify();\n    }\n\n    private CloseCellBreakpointDirectionMenu(): void {\n        this.isBreakpointMenuOpen = false;\n\n        this.breakpointMenuButton.Icon = { icon: UIIcon.Breakpoint, color: DebugControls.BreakpointButtonIconColor };\n\n        this.breakpointMenuGroup?.Destroy();\n        this.breakpointMenuGroup = null;\n    }\n\n    private ToggleHeatmap(component: UIIconButton): void {\n        this.isHeatmapShown = !this.isHeatmapShown;\n\n        const feedback: HeatmapToggleButtonState = { isShown: this.isHeatmapShown };\n        this.heatmapObservable.Notify(feedback);\n\n        if (feedback.isShown === this.isHeatmapShown) {\n\n            const outlineColor = this.isHeatmapShown ?\n                DebugControls.ToggleButtonOutlineColor :\n                DebugControls.DefaultButtonOutlineColor;\n\n            component.Style = { ...component.Style, outlineColor };\n\n            if (this.isHeatmapShown) {\n                this.CloseCellBreakpointDirectionMenu();\n            }\n\n            this.executeButton.Disable = this.isHeatmapShown;\n            this.debugButton.Disable = this.isHeatmapShown;\n            this.breakpointMenuButton.Disable = this.isHeatmapShown;\n        }\n\n        this.isHeatmapShown = feedback.isShown;\n    }\n}\n\nInversify.bind(DebugControls).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { HeadlineControlsLayout } from \"./Layouts/HeadlineControlsLayout\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\nimport { Dimension } from \"@/lib/UI/UIComponent\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\n@injectable()\nexport class EditControls {\n    private group: UIObservablePositioningGroup;\n\n    private selectButton: UIIconButton;\n    private cutButton: UIIconButton;\n    private copyButton: UIIconButton;\n    private pasteButton: UIIconButton;\n    private deleteButton: UIIconButton;\n\n    private selectObservable = new ObservableController<void>();\n    private cutObservable = new ObservableController<void>();\n    private copyObservable = new ObservableController<void>();\n    private pasteObservable = new ObservableController<void>();\n    private deleteObservable = new ObservableController<void>();\n\n    constructor(\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(HeadlineControlsLayout) private layout: HeadlineControlsLayout) {\n        const fillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n        const outlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n        const buttonIconColor: Rgb = [0.17254901960784313, 0.24313725490196078, 0.3137254901960784];\n\n        const margin = 10;\n        const btnSideLength = 30;\n\n        this.group = new UIObservablePositioningGroup(\n            { x: 9 * margin + 6 * btnSideLength, y: margin + btnSideLength },\n            { vertical: VerticalAnchor.Top }\n        );\n\n        this.selectButton = this.uiRenderer.CreateIconButton({ x: 0, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Select, color: buttonIconColor },\n            _sender => this.selectObservable.Notify(),\n            this.group\n        );\n\n        this.cutButton = this.uiRenderer.CreateIconButton({ x: margin + btnSideLength, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Cut, color: buttonIconColor },\n            _sender => this.cutObservable.Notify(),\n            this.group\n        );\n\n        this.copyButton = this.uiRenderer.CreateIconButton({ x: 2 * margin + 2 * btnSideLength, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Copy, color: buttonIconColor },\n            _sender => this.copyObservable.Notify(),\n            this.group\n        );\n\n        this.pasteButton = this.uiRenderer.CreateIconButton({ x: 3 * margin + 3 * btnSideLength, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Paste, color: buttonIconColor },\n            _sender => this.pasteObservable.Notify(),\n            this.group\n        );\n\n        this.deleteButton = this.uiRenderer.CreateIconButton({ x: 4 * margin + 4 * btnSideLength, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.EditDelete, color: buttonIconColor },\n            _sender => this.deleteObservable.Notify(),\n            this.group\n        );\n\n        this.layout.Watch(this.group);\n    }\n\n    Resize(): void {\n        this.group.Resize();\n    }\n\n    get Disable(): boolean {\n        return this.selectButton.Disable;\n    }\n\n    set Disable(value: boolean) {\n        this.selectButton.Disable = value;\n        this.cutButton.Disable = value;\n        this.copyButton.Disable = value;\n        this.pasteButton.Disable = value;\n        this.deleteButton.Disable = value;\n    }\n\n    get SelectObservable(): Observable<void> {\n        return this.selectObservable;\n    }\n\n    get CutObservable(): Observable<void> {\n        return this.cutObservable;\n    }\n\n    get CopyObservable(): Observable<void> {\n        return this.copyObservable;\n    }\n\n    get PasteObservable(): Observable<void> {\n        return this.pasteObservable;\n    }\n\n    get DeleteObservable(): Observable<void> {\n        return this.deleteObservable;\n    }\n\n    get Position(): Vec2 {\n        return this.group.AbsolutePosition;\n    }\n\n    get Dimension(): Dimension {\n        return this.group.Dimension;\n    }\n}\n\nInversify.bind(EditControls).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { EditionDirection } from \"../CodeEditor/CodeEditorService\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\ninterface EditDirection {\n    group: UIObservablePositioningGroup;\n    left: UIIconButton;\n    up: UIIconButton;\n    right: UIIconButton;\n    down: UIIconButton;\n}\n\nexport interface EditDirectionControlsBoundaries {\n    lb: Vec2;\n    rt: Vec2;\n}\n\n@injectable()\nexport class EditDirectionControls {\n    private static CurrentDirectionInactiveIconColor: Rgb = [0.17254901960784313, 0.24313725490196078, 0.3137254901960784];\n    private static CurrentDirrectionActiveIconColor: Rgb = [0.1607843137254902, 0.5019607843137255, 0.7254901960784313];\n\n    private group: UIObservablePositioningGroup;\n    private editDirectionControls!: EditDirection;\n    private currentDirectionControl!: UIIconButton;\n\n    private editDirectionObservable = new ObservableController<EditionDirection>();\n\n    constructor(@inject(UIRenderer) private uiRenderer: UIRenderer) {\n        const buttonMargin = 5;\n        const [buttonWidth, btnHeight] = [37.5, 25];\n\n        const fillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n        const outlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n\n        this.group = new UIObservablePositioningGroup(\n            {\n                x: 10,\n                y: 2 * buttonWidth + 3 * buttonMargin + btnHeight + 50\n            },\n            { vertical: VerticalAnchor.Top });\n\n        this.editDirectionControls = {\n            group: this.group,\n            left: this.uiRenderer.CreateIconButton(\n                { x: 0, y: buttonWidth + buttonMargin },\n                { width: buttonWidth, height: btnHeight },\n                1,\n                { fillColor, outlineColor },\n                { icon: UIIcon.ArrowLeft, color: EditDirectionControls.CurrentDirectionInactiveIconColor },\n                sender => this.UpdateEditDirection(sender, EditionDirection.Left),\n                this.group),\n            up: this.uiRenderer.CreateIconButton(\n                { x: buttonWidth + buttonMargin / 2 - btnHeight / 2, y: buttonWidth + 2 * buttonMargin + btnHeight },\n                { width: btnHeight, height: buttonWidth },\n                1,\n                { fillColor, outlineColor },\n                { icon: UIIcon.ArrowUp, color: EditDirectionControls.CurrentDirectionInactiveIconColor },\n                sender => this.UpdateEditDirection(sender, EditionDirection.Up),\n                this.group),\n            right: this.uiRenderer.CreateIconButton(\n                { x: buttonWidth + buttonMargin, y: buttonWidth + buttonMargin },\n                { width: buttonWidth, height: btnHeight },\n                1,\n                { fillColor, outlineColor },\n                { icon: UIIcon.ArrowRight, color: EditDirectionControls.CurrentDirrectionActiveIconColor },\n                sender => this.UpdateEditDirection(sender, EditionDirection.Right),\n                this.group),\n            down: this.uiRenderer.CreateIconButton(\n                { x: buttonWidth + buttonMargin / 2 - btnHeight / 2, y: 0 },\n                { width: btnHeight, height: buttonWidth },\n                1,\n                { fillColor, outlineColor },\n                { icon: UIIcon.ArrowDown, color: EditDirectionControls.CurrentDirectionInactiveIconColor },\n                sender => this.UpdateEditDirection(sender, EditionDirection.Down),\n                this.group)\n        };\n\n        this.currentDirectionControl = this.editDirectionControls.right;\n    }\n\n    get EditDirectionObservable(): Observable<EditionDirection> {\n        return this.editDirectionObservable;\n    }\n\n    Resize(): void {\n        this.group.Resize();\n    }\n\n    ForceEditDirection(direction: EditionDirection): void {\n        this.currentDirectionControl.Icon = {\n            ...this.currentDirectionControl.Icon,\n            color: EditDirectionControls.CurrentDirectionInactiveIconColor\n        };\n\n        const control = direction === EditionDirection.Left ? this.editDirectionControls.left :\n            direction === EditionDirection.Up ? this.editDirectionControls.up :\n                direction === EditionDirection.Right ? this.editDirectionControls.right :\n                    this.editDirectionControls.down;\n\n        control.Icon = {\n            ...control.Icon,\n            color: EditDirectionControls.CurrentDirrectionActiveIconColor\n        };\n\n        this.currentDirectionControl = control;\n    }\n\n    private UpdateEditDirection(sender: UIIconButton, direction: EditionDirection): void {\n        if (sender === this.currentDirectionControl) {\n            return;\n        }\n\n        this.currentDirectionControl.Icon = {\n            ...this.currentDirectionControl.Icon,\n            color: EditDirectionControls.CurrentDirectionInactiveIconColor\n        };\n\n        sender.Icon = {\n            ...sender.Icon,\n            color: EditDirectionControls.CurrentDirrectionActiveIconColor\n        };\n\n        this.currentDirectionControl = sender;\n        this.editDirectionObservable.Notify(direction)\n    }\n\n    get Boundaries(): EditDirectionControlsBoundaries {\n        const dimension = this.group.Dimension;\n\n        return {\n            lb: this.group.AbsolutePosition,\n            rt: {\n                x: this.group.AbsolutePosition.x + dimension.width,\n                y: this.group.AbsolutePosition.y + dimension.height\n            }\n        };\n    }\n}\n\nInversify.bind(EditDirectionControls).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { HeadlineControlsLayout } from \"./Layouts/HeadlineControlsLayout\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb } from \"@/lib/Primitives\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\n@injectable()\nexport class FileControls {\n    private group: UIObservablePositioningGroup;\n\n    private openButton: UIIconButton;\n    private saveButton: UIIconButton;\n    private shareButton: UIIconButton;\n\n    private helpButton: UIIconButton;\n    private helpShowed = false;\n    private static readonly DefaultButtonOutlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n    private static readonly ToggleButtonOutlineColor: Rgb = [0, 0, 0];\n\n\n    private openFromDiskObservable = new ObservableController<void>();\n    private saveToDiskObservable = new ObservableController<void>();\n    private shareObservable = new ObservableController<void>();\n    private showHelpObservable = new ObservableController<void>();\n\n    constructor(\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(HeadlineControlsLayout) private layout: HeadlineControlsLayout) {\n        const fillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n        const openButtonIconColor: Rgb = [0.9411764705882353, 0.6392156862745098, 0.0392156862745098];\n        const saveButtonIconColor: Rgb = [0.08235294117647059, 0.396078431372549, 0.7529411764705882];\n        const helpButtonIconColor: Rgb = [0.17254901960784313, 0.24313725490196078, 0.3137254901960784];\n\n        const margin = 10;\n        const btnSideLength = 30;\n\n        this.group = new UIObservablePositioningGroup(\n            { x: margin, y: margin + btnSideLength },\n            { vertical: VerticalAnchor.Top });\n\n        this.openButton = this.uiRenderer.CreateIconButton({ x: 0, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor: FileControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.Open, color: openButtonIconColor },\n            _sender => this.openFromDiskObservable.Notify(),\n            this.group\n        );\n\n        this.saveButton = this.uiRenderer.CreateIconButton({ x: btnSideLength + margin, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor: FileControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.Save, color: saveButtonIconColor },\n            _sender => this.saveToDiskObservable.Notify(),\n            this.group\n        );\n        this.saveButton.Disable = true;\n\n        this.shareButton = this.uiRenderer.CreateIconButton({ x: 2 * btnSideLength + 2 * margin, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor: FileControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.Share, color: saveButtonIconColor },\n            _sender => this.shareObservable.Notify(),\n            this.group\n        );\n        this.shareButton.Disable = true;\n\n        this.helpButton = this.uiRenderer.CreateIconButton({ x: 3 * btnSideLength + 3 * margin, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor: FileControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.QuestionMark, color: helpButtonIconColor },\n            _sender => this.ToggleHelpButton(),\n            this.group\n        );\n\n        this.layout.Watch(this.group);\n    }\n\n    private ToggleHelpButton(): void {\n        this.helpButton.Style = {\n            ...this.helpButton.Style,\n            outlineColor: this.helpShowed ? FileControls.DefaultButtonOutlineColor : FileControls.ToggleButtonOutlineColor\n        };\n\n        this.helpShowed = !this.helpShowed;\n\n        this.showHelpObservable.Notify()\n    }\n\n    Resize(): void {\n        this.group.Resize();\n    }\n\n    get ShareDisabled(): boolean {\n        return this.shareButton.Disable;\n    }\n\n    set ShareDisabled(value: boolean) {\n        this.saveButton.Disable = value;\n        this.shareButton.Disable = value;\n    }\n\n    get OpenFromDiskDisabled(): boolean {\n        return this.openButton.Disable;\n    }\n\n    set OpenFromDiskDisabled(value: boolean) {\n        this.openButton.Disable = value;\n    }\n\n    get OpenFromDiskObservable(): Observable<void> {\n        return this.openFromDiskObservable;\n    }\n\n    get SaveToDiskObservable(): Observable<void> {\n        return this.saveToDiskObservable;\n    }\n\n    get ShareObservable(): Observable<void> {\n        return this.shareObservable;\n    }\n\n    get ShowHelpObservable(): Observable<void> {\n        return this.showHelpObservable;\n    }\n}\n\nInversify.bind(FileControls).toSelf().inSingletonScope();","import { injectable } from \"inversify\";\n\nimport { Command } from \"./Commands/Command\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\n\n@injectable()\nexport class AppHistory {\n    private history: Command[] = [];\n\n    private cursor = -1;\n\n    private updateObservable = new ObservableController<void>();\n\n    Push(command: Command): void {\n        if (this.CanRedo) {\n            this.history.splice(this.cursor + 1);\n        }\n\n        this.history.push(command);\n        this.cursor = this.history.length - 1;\n\n        this.updateObservable.Notify();\n    }\n\n    Undo(): void {\n        if (!this.CanUndo) {\n            return;\n        }\n\n        this.history[this.cursor--].Undo();\n\n        this.updateObservable.Notify();\n    }\n\n    Redo(): void {\n        if (!this.CanRedo) {\n            return;\n        }\n\n        this.history[++this.cursor].Apply();\n\n        this.updateObservable.Notify();\n    }\n\n    Reset(): void {\n        this.history.length = 0;\n        this.cursor = -1;\n\n        this.updateObservable.Notify();\n    }\n\n    get CanUndo(): boolean {\n        return this.cursor >= 0;\n    }\n\n    get CanRedo(): boolean {\n        return this.cursor < this.history.length - 1;\n    }\n\n    get UpdateObservable(): Observable<void> {\n        return this.updateObservable;\n    }\n}\n\nInversify.bind(AppHistory).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { AppHistory } from \"../History/AppHistory\";\n\nimport { HeadlineControlsLayout } from \"./Layouts/HeadlineControlsLayout\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb } from \"@/lib/Primitives\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\n@injectable()\nexport class HistoryControls {\n    private group: UIObservablePositioningGroup;\n\n    private undoButton: UIIconButton;\n    private redoButton: UIIconButton;\n\n    private undoObservable = new ObservableController<void>();\n\n    private redoObservable = new ObservableController<void>();\n\n    constructor(\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(AppHistory) private history: AppHistory,\n        @inject(HeadlineControlsLayout) private layout: HeadlineControlsLayout) {\n        const fillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n        const outlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n        const buttonIconColor: Rgb = [0.08235294117647059, 0.396078431372549, 0.7529411764705882];\n\n        const margin = 10;\n        const btnSideLength = 30;\n\n        this.group = new UIObservablePositioningGroup(\n            { x: 6 * margin + 4 * btnSideLength, y: margin + btnSideLength },\n            { vertical: VerticalAnchor.Top });\n\n        this.undoButton = this.uiRenderer.CreateIconButton({ x: 0, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Undo, color: buttonIconColor },\n            _sender => this.undoObservable.Notify(),\n            this.group\n        );\n        this.undoButton.Disable = true;\n\n        this.redoButton = this.uiRenderer.CreateIconButton({ x: btnSideLength + margin, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Redo, color: buttonIconColor },\n            _sender => this.redoObservable.Notify(),\n            this.group\n        );\n        this.redoButton.Disable = true;\n\n        this.history.UpdateObservable.Attach(() => this.UpdateButtonsAvailability());\n\n        this.layout.Watch(this.group)\n    }\n\n    Resize(): void {\n        this.group.Resize();\n    }\n\n    get CanUndo(): boolean {\n        return this.undoButton.Disable;\n    }\n\n    set CanUndo(value: boolean) {\n        if (this.undoButton.Disable !== value) {\n            this.undoButton.Disable = value;\n        }\n    }\n\n    get CanRedo(): boolean {\n        return this.redoButton.Disable;\n    }\n\n    set CanRedo(value: boolean) {\n        if (this.redoButton.Disable !== value) {\n            this.redoButton.Disable = value;\n        }\n    }\n\n    get UndoObservable(): Observable<void> {\n        return this.undoObservable;\n    }\n\n    get RedoObservable(): Observable<void> {\n        return this.redoObservable;\n    }\n\n    Lock(): void {\n        this.undoButton.Disable = true;\n        this.redoButton.Disable = true;\n    }\n\n    Unlock(): void {\n        this.UpdateButtonsAvailability();\n    }\n\n    private UpdateButtonsAvailability(): void {\n        this.undoButton.Disable = !this.history.CanUndo;\n        this.redoButton.Disable = !this.history.CanRedo;\n    }\n}\n\nInversify.bind(HistoryControls).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"../AppSettings\";\nimport { InjectionToken } from \"../InjectionToken\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { ExceptionTrap } from \"@/lib/ExceptionTrap\";\nimport { FontGlyphCollection, FontGlyphCollectionFactory } from \"@/lib/font/FontGlyphCollection\";\nimport { Rgb } from \"@/lib/Primitives\";\nimport { SelfBind } from \"@/lib/SelfBind\";\nimport { UIEditableTextList } from \"@/lib/UI/UIEditableTextList/UIEditableTextList\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\nimport { UITextList } from \"@/lib/UI/UITextList/UITextList\";\n\n@injectable()\nexport class IOControls {\n    private group!: UIObservablePositioningGroup;\n\n    private outputTextList: UITextList;\n    private inputEditableTextList: UIEditableTextList;\n\n    private inputButton: UIIconButton;\n    private outputButton: UIIconButton;\n\n    private fontGlyphCollection: FontGlyphCollection | null = null;\n\n    private readonly maxPanelWidth = 800;\n\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(InjectionToken.FontGlyphCollectionFactory) private fontGlyphCollectionFactory: FontGlyphCollectionFactory) {\n        const fillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n        const outlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n        const btnIconColor: Rgb = [0.17254901960784313, 0.24313725490196078, 0.3137254901960784];\n\n        const margin = 10;\n        const btnSideLength = 25;\n        const textListHeight = 100;\n\n        this.group = new UIObservablePositioningGroup({ x: 145, y: 10 }, { vertical: VerticalAnchor.Bottom });\n        this.inputButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: textListHeight + margin / 2 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Input, color: btnIconColor },\n            _sender => this.SwitchTab(true),\n            this.group);\n\n\n        this.outputButton = this.uiRenderer.CreateIconButton(\n            { x: btnSideLength + margin, y: textListHeight + margin / 2 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Output, color: btnIconColor },\n            _sender => this.SwitchTab(false),\n            this.group);\n        this.outputButton.Disable = true;\n\n        this.outputTextList = this.uiRenderer.CreateTextList(\n            { x: 0, y: 0 },\n            { width: this.maxPanelWidth, height: textListHeight },\n            1,\n            '',\n            { borderWidth: 2, fillColor: [0, 0, 0, 0] },\n            32,\n            this.group);\n\n        this.inputEditableTextList = this.uiRenderer.CreateEditableTextList(\n            { x: 0, y: 0 },\n            { width: this.maxPanelWidth, height: textListHeight },\n            1,\n            '',\n            { borderWidth: 2, fillColor: [0, 0, 0, 0] },\n            32,\n            this.group);\n        this.inputEditableTextList.Visible = false;\n    }\n\n    SwitchTab(inputTab: boolean): void {\n        if (this.inputButton.Disable === inputTab) {\n            return;\n        }\n\n        this.inputButton.Disable = inputTab;\n        this.outputButton.Disable = !inputTab;\n\n        this.inputEditableTextList.Visible = inputTab;\n        this.outputTextList.Visible = !inputTab;\n\n        if (this.outputTextList.Visible) {\n            this.outputTextList.ScrollToTop();\n        }\n    }\n\n    get Output(): string {\n        return this.outputTextList.Text;\n    }\n\n    set Output(text: string) {\n        this.outputTextList.Text = this.NewLineFormatter(text);\n\n        this.outputTextList.ScrollToTop();\n    }\n\n    get Input(): string {\n        return this.inputEditableTextList.Text;\n    }\n\n    set Input(text: string) {\n        this.inputEditableTextList.Text = text;;\n    }\n\n    Resize(): void {\n        this.inputEditableTextList.Dimension = {\n            width: this.PanelWidth,\n            height: this.inputEditableTextList.Dimension.height / this.inputEditableTextList.Scale\n        };\n\n        this.outputTextList.Dimension = {\n            width: this.PanelWidth,\n            height: this.inputEditableTextList.Dimension.height / this.inputEditableTextList.Scale\n        };\n\n        this.group.Resize();\n    }\n\n    get PanelWidth(): number {\n        const widthToFit = this.settings.ViewDimension.Width - this.group.AbsolutePosition.x;\n        return Math.min(this.maxPanelWidth, widthToFit) / this.group.Scale;\n    }\n\n    private NewLineFormatter(str: string): string {\n        const fontGlyphCollection = this.RetrieveFontGlyphCollection();\n\n        const strArr = [...str];\n        const padding = 20 * this.group.Scale;\n\n        for (let n = 0, width = padding; n < strArr.length; ++n) {\n            const symbol = strArr[n];\n\n            if (symbol === '\\n') {\n                width = padding;\n                continue;\n            }\n\n            const glyph = ExceptionTrap\n                .Try(SelfBind(fontGlyphCollection, 'Lookup'), symbol)\n                .CatchFn(SelfBind(fontGlyphCollection, 'Lookup'), '?');\n            if (width + glyph.width > this.outputTextList.Dimension.width) {\n                width = padding;\n                strArr.splice(n, 0, '\\n');\n            } else {\n                width += glyph.width;\n            }\n        }\n\n        return strArr.join('');\n    }\n\n    private RetrieveFontGlyphCollection(): FontGlyphCollection {\n        if (this.fontGlyphCollection !== null && this.fontGlyphCollection.LineHeight === this.outputTextList.LineHeight * this.outputTextList.Scale) {\n            return this.fontGlyphCollection;\n        }\n\n        this.fontGlyphCollection = this.fontGlyphCollectionFactory({ ASCIIRange: { Start: ' ', End: '~' }, Font: { Name: 'Roboto', Size: this.outputTextList.LineHeight * this.outputTextList.Scale } });\n\n        return this.fontGlyphCollection;\n    }\n}\n\nInversify.bind(IOControls).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"../AppSettings\";\nimport { InjectionToken } from \"../InjectionToken\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { ArrayHelper } from \"@/lib/ArrayHelper\";\nimport { ExceptionTrap } from \"@/lib/ExceptionTrap\";\nimport { FontGlyphCollectionFactory } from \"@/lib/font/FontGlyphCollection\";\nimport { Rgb } from \"@/lib/Primitives\";\nimport { SelfBind } from \"@/lib/SelfBind\";\nimport { HorizontalAnchor, UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\nimport { UITextList } from \"@/lib/UI/UITextList/UITextList\";\n\ninterface AutoWordWrapResult {\n    text: string;\n    instructionRange: [number, number][];\n}\n\ninterface InstructionDescription {\n    instruction: string;\n    description: string;\n}\n\n@injectable()\nexport class LanguageSyntaxHelpControls {\n    private group: UIObservablePositioningGroup;\n    private display: UITextList | null = null;\n    private lineHeight = 16;\n    private maxWidth = 1024;\n    private defaultTextColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n    private instructions: InstructionDescription[];\n    private helpString!: string;\n    private instructionPaddingEnd!: number;\n\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(InjectionToken.FontGlyphCollectionFactory) private fontGlyphCollectionFactory: FontGlyphCollectionFactory) {\n        this.group = new UIObservablePositioningGroup(\n            { x: 0, y: 0 },\n            { vertical: VerticalAnchor.Bottom, horizontal: HorizontalAnchor.Middle });\n\n        this.instructions = [\n            { instruction: '0-9', description: 'Push this number onto the stack.' },\n            { instruction: '+', description: 'Addition: Pop a and b, then push a+b.' },\n            { instruction: '-', description: 'Subtraction: Pop a and b, then push b-a.' },\n            { instruction: '*', description: 'Multiplication: Pop a and b, then push a*b.' },\n            { instruction: '/', description: 'Integer division: Pop a and b, then push b/a, rounded towards 0.' },\n            { instruction: '%', description: 'Modulo: Pop a and b, then push the remainder of the integer division of b/a.' },\n            { instruction: '!', description: 'Logical NOT: Pop a value. If the value is zero, push 1; otherwise, push zero.' },\n            { instruction: '`', description: 'Greater than: Pop a and b, then push 1 if b>a, otherwise zero.' },\n            { instruction: '>', description: 'Start moving right.' },\n            { instruction: '<', description: 'Start moving left.' },\n            { instruction: '^', description: 'Start moving up.' },\n            { instruction: 'v', description: 'Start moving down.' },\n            { instruction: '?', description: 'Start moving in a random cardinal direction.' },\n            { instruction: '_', description: 'Pop a value; move right if value=0, left otherwise.' },\n            { instruction: '|', description: 'Pop a value; move down if value=0, up otherwise.' },\n            { instruction: '\"', description: 'Start string mode: push each character\\'s ASCII value all the way up to the next \"' },\n            { instruction: ':', description: 'Duplicate value on top of the stack.' },\n            { instruction: '\\\\', description: 'Swap two values on top of the stack.' },\n            { instruction: '$', description: 'Pop value from the stack and discard it.' },\n            { instruction: '.', description: 'Pop value and output as an integer followed by a space.' },\n            { instruction: ',', description: 'Pop value and output as ASCII character.' },\n            { instruction: '#', description: 'Bridge: Skip next cell.' },\n            { instruction: 'p', description: 'A \"put\" call (a way to store a value for later use). Pop y, x, and v, then change the character at (x,y) in the program to the character with ASCII value v.' },\n            { instruction: 'g', description: 'A \"get\" call (a way to retrieve data in storage). Pop y and x, then push ASCII value of the character at that position in the program.' },\n            { instruction: '&', description: 'Ask user for a number and push it.' },\n            { instruction: '~', description: 'Ask user for a character and push its ASCII value.' },\n            { instruction: '@', description: 'End program.' },\n            { instruction: '\" \"', description: 'No-op. Does nothing' }\n        ];\n\n        this.BuildHelpString();\n    }\n\n    private BuildHelpString(): void {\n        this.instructionPaddingEnd = ArrayHelper\n            .Max(this.instructions, (a, b) => a.instruction.length < b.instruction.length)\n            .instruction.length;\n\n        this.helpString = this.instructions\n            .map(x => ` ${x.instruction.padEnd(this.instructionPaddingEnd)} ${x.description}`)\n            .join('\\n');\n    }\n\n    private NewLineFormatter(str: string): AutoWordWrapResult {\n        const fontGlyphCollection = this.fontGlyphCollectionFactory(\n            {\n                ASCIIRange: { Start: ' ', End: '~' },\n                Font: { Name: 'Roboto', Size: this.lineHeight * this.group.Scale }\n            });\n\n        const strArr = [...str];\n        const padding = 20 * this.group.Scale;\n\n        let instructionIdx = 1;\n        const instructionRange: [number, number][] = [[1, 1 + this.instructions[0].instruction.length]];\n\n        for (let n = 0, width = padding; n < strArr.length; ++n) {\n            const symbol = strArr[n];\n\n            if (symbol === '\\n') {\n                width = padding;\n                instructionRange.push([n + 2, n + 2 + this.instructions[instructionIdx++].instruction.length]);\n                continue;\n            }\n\n            const glyph = ExceptionTrap\n                .Try(SelfBind(fontGlyphCollection, 'Lookup'), symbol)\n                .CatchFn(SelfBind(fontGlyphCollection, 'Lookup'), '?');\n\n            if (width + glyph.width > this.display!.Dimension.width) {\n                width = padding;\n                strArr.splice(n, 0, '\\n', ...' '.repeat(this.instructionPaddingEnd + 2));\n            } else {\n                width += glyph.width;\n            }\n        }\n\n        return { text: strArr.join(''), instructionRange };\n    }\n\n    ToggleHelp(): void {\n        if (this.display === null) {\n            this.display = this.uiRenderer.CreateTextList(\n                { x: 0, y: 0 },\n                {\n                    width: Math.min(this.maxWidth, this.settings.ViewDimension.Width) / this.group.Scale,\n                    height: this.settings.ViewDimension.Height / this.group.Scale * 0.75\n                },\n                6,\n                '',\n                { borderWidth: 2, fillColor: [1, 1, 1, 1] },\n                this.lineHeight,\n                this.group);\n\n            const formatedHelp = this.NewLineFormatter(this.helpString);\n\n            this.display.Text = formatedHelp.text;\n            formatedHelp.instructionRange.forEach(x => this.display!.StyleRange(x[0], x[1], { color: [0.9058823529411765, 0.2980392156862745, 0.23529411764705882] }));\n        } else {\n            this.display.Destroy();\n            this.display = null;\n        }\n    }\n}\n\nInversify.bind(LanguageSyntaxHelpControls).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"../AppSettings\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Rgb } from \"@/lib/Primitives\";\nimport { UIAlert, UIAlertIconStyle, UIAlertStyle, UIAlertText } from \"@/lib/UI/UIAlert/UIAlert\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { HorizontalAnchor, UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\n@injectable()\nexport class SnackbarControls {\n    private group: UIObservablePositioningGroup;\n\n    private snackbar: UIAlert | null = null;\n\n    private contentColor: Rgb = [0.9, 0.9, 0.9];\n\n    private lineHeight = 24;\n\n    private hideTimer = -1;\n\n    constructor(\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(AppSettings) private settings: AppSettings) {\n        this.group = new UIObservablePositioningGroup(\n            { x: 0, y: 0 },\n            { vertical: VerticalAnchor.Bottom, horizontal: HorizontalAnchor.Middle });\n    }\n\n    Show(icon: UIAlertIconStyle, text: UIAlertText, style: UIAlertStyle, timeout: number): void {\n        if (this.snackbar !== null) {\n            this.Hide();\n        }\n\n        this.snackbar = this.uiRenderer.CreateAlert(\n            { x: 0, y: 0 },\n            1,\n            icon,\n            text,\n            style,\n            this.group);\n\n        this.LimitToViewportWidth();\n\n        this.hideTimer = setTimeout(() => this.Hide(), timeout);\n    }\n\n    private LimitToViewportWidth(): void {\n        const alertWidth = this.group.Dimension.width;\n        if (alertWidth > this.settings.ViewDimension.Width) {\n            const targetScale = this.settings.ViewDimension.Width / alertWidth;\n            this.group.Scale = targetScale;\n        }\n    }\n\n    ShowError(msg: string, timeout = 5000): void {\n        this.Show(\n            { icon: UIIcon.ExclamationCircle, color: this.contentColor },\n            { text: msg, lineHeight: this.lineHeight, color: this.contentColor },\n            { fillColor: [0.83, 0.18, 0.18] },\n            timeout\n        );\n    }\n\n    ShowWarning(msg: string, timeout = 5000): void {\n        this.Show(\n            { icon: UIIcon.ExclamationTriangle, color: this.contentColor },\n            { text: msg, lineHeight: this.lineHeight, color: this.contentColor },\n            { fillColor: [0.93, 0.42, 0.01] },\n            timeout\n        );\n    }\n\n    ShowInformation(msg: string, timeout = 5000): void {\n        this.Show(\n            { icon: UIIcon.ExclamationCircle, color: this.contentColor },\n            { text: msg, lineHeight: this.lineHeight, color: this.contentColor },\n            { fillColor: [0.1, 0.53, 0.82] },\n            timeout\n        );\n    }\n\n    ShowSuccess(msg: string, timeout = 5000): void {\n        this.Show(\n            { icon: UIIcon.ExclamationCircle, color: this.contentColor },\n            { text: msg, lineHeight: this.lineHeight, color: this.contentColor },\n            { fillColor: [0.18, 0.49, 0.2] },\n            timeout\n        );\n    }\n\n    Hide(): void {\n        this.snackbar?.Destroy();\n        this.snackbar = null;\n        clearTimeout(this.hideTimer);\n    }\n\n    Resize(): void {\n        this.group.Resize();\n    }\n}\n\nInversify.bind(SnackbarControls).toSelf().inSingletonScope();\n","export function EscapeString(str: string): string {\n    return [...str].map(x => Replacer(x)).join();\n}\n\nfunction Replacer(symbol: string): string {\n    if (symbol === '\\n') {\n        return '\\\\n';\n    } else if (symbol === '\\r') {\n        return '\\\\r';\n    } else {\n        return symbol;\n    }\n}\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"../AppSettings\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { EscapeString } from \"@/lib/font/EscapeString\";\nimport { UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\nimport { UITextList } from \"@/lib/UI/UITextList/UITextList\";\n\n@injectable()\nexport class StackControls {\n    private group: UIObservablePositioningGroup;\n\n    private stackTextList: UITextList;\n\n    constructor(\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(AppSettings) private settings: AppSettings) {\n        this.group = new UIObservablePositioningGroup(\n            {\n                x: 10,\n                y: 480\n            },\n            { vertical: VerticalAnchor.Top }\n        );\n\n        this.stackTextList = this.uiRenderer.CreateTextList(\n            { x: 0, y: 0 },\n            { width: 130, height: 300 },\n            1,\n            '',\n            { borderWidth: 2, fillColor: [0, 0, 0, 0] },\n            32,\n            this.group);\n\n        this.stackTextList.Visible = false;\n    }\n\n    ScrollToTop(): void {\n        this.stackTextList.ScrollToTop();\n    }\n\n    Resize(): void {\n        this.group.Resize();\n    }\n\n    set Stack(stack: number[]) {\n        this.stackTextList.Text = [...stack]\n            .reverse()\n            .map(x => `${x} (${EscapeString(String.fromCharCode(x))})`)\n            .join('\\n')\n    }\n\n    get Visible(): boolean {\n        return this.stackTextList.Visible;\n    }\n\n    set Visible(visible: boolean) {\n        this.stackTextList.Visible = visible;\n    }\n}\n\nInversify.bind(StackControls).toSelf().inSingletonScope();\n","export function EnumSize<T extends object>(e: T): number {\n    return Object.keys(e).length >> 1;\n}\n","import { inject, injectable } from \"inversify\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { EnumSize } from \"@/lib/EnumSize\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\nimport { Dimension } from \"@/lib/UI/UIComponent\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { HorizontalAnchor, UIObservablePositioningGroup } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\nimport { UITextButton } from \"@/lib/UI/UITextButton/UITextButton\";\n\nenum KeyboardShiftMode { Lovercase, Uppercase, Secondary };\n\ninterface KeyboardStateFetcher {\n    shift: () => KeyboardShiftMode;\n    ascii: () => boolean;\n}\n\nclass KeyboardButtonLayout {\n    private symbols: string[];\n\n    constructor(\n        private keyboardState: KeyboardStateFetcher,\n        primary: string,\n        secondary?: string) {\n        this.symbols = secondary === undefined ?\n            [primary] :\n            [secondary, primary];\n    }\n\n    get Caption(): string {\n        let primary = this.symbols[this.symbols.length - 1];\n        primary = this.IsUppercase ? primary.toUpperCase() : primary.toLowerCase();\n\n        if (this.keyboardState.shift() !== KeyboardShiftMode.Secondary && this.keyboardState.ascii()) {\n            primary = primary.charCodeAt(0).toString();\n        }\n\n        if (this.HasSecondary) {\n            let secondary = this.symbols[0];\n\n            if (this.keyboardState.shift() === KeyboardShiftMode.Secondary && this.keyboardState.ascii()) {\n                secondary = secondary.charCodeAt(0).toString();\n            }\n\n            return `${secondary}\\n${primary}`;\n        } else {\n            return primary;\n        }\n    }\n\n    get Symbol(): string {\n        const symbol = this.symbols[this.Index];\n\n        return this.IsUppercase ? symbol.toUpperCase() : symbol.toLowerCase();\n    }\n\n    get CaptionDelimiter(): number {\n        return this.keyboardState.shift() === KeyboardShiftMode.Secondary && this.keyboardState.ascii() ?\n            this.symbols[0].charCodeAt(0).toString().length :\n            this.symbols[0].length;\n    }\n\n    get HasSecondary(): boolean {\n        return this.symbols.length > 1;\n    }\n\n    private get Index(): number {\n        return +(this.keyboardState.shift() === KeyboardShiftMode.Lovercase ||\n            this.keyboardState.shift() === KeyboardShiftMode.Uppercase) % this.symbols.length;\n    }\n\n    private get IsUppercase(): boolean {\n        return this.keyboardState.shift() === KeyboardShiftMode.Uppercase;\n    }\n}\n\ntype ButtonDeleter = () => void;\n\ninterface SymbolButtonDescriptor {\n    button: UITextButton;\n    layout: KeyboardButtonLayout;\n}\n\n@injectable()\nexport class VirtualKeyboardControls {\n    private readonly fillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n    private readonly outlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n    private zIndex = 5;\n\n    private toggleKeyboardGroup: UIObservablePositioningGroup;\n    private toggleKeyboard = false;\n    private toggleKeyboardButton!: UIIconButton;\n    private shiftIconColor = {\n        lovercase: [0.17254901960784313, 0.24313725490196078, 0.3137254901960784] as Rgb,\n        uppercase: [0.08235294117647059, 0.396078431372549, 0.7529411764705882] as Rgb,\n        secondary: [0.5568627450980392, 0.26666666666666666, 0.6784313725490196] as Rgb\n    };\n\n    private buttonCaptionColor = {\n        inactive: [0.7411764705882353, 0.7411764705882353, 0.7411764705882353] as Rgb,\n        active: [0.17254901960784313, 0.24313725490196078, 0.3137254901960784] as Rgb\n    };\n\n    private asciiToggleOutlineColor = {\n        inactive: [0.4980392156862745, 0.5490196078431373, 0.5529411764705883] as Rgb,\n        active: [0, 0, 0] as Rgb\n    };\n\n    private buttonContentColor: Rgb = [0.17254901960784313, 0.24313725490196078, 0.3137254901960784];\n\n    private keyboardGroup: UIObservablePositioningGroup;\n    private symbolButtons: SymbolButtonDescriptor[] = [];\n    private buttonDimension = { width: 30, height: 60 };\n    private readonly symbolMargin = 5;\n\n    private spacebarButton!: UITextButton;\n\n    private buttonDeleter: ButtonDeleter[] = [];\n\n    private shiftWidth = 50;\n    private shiftMode = KeyboardShiftMode.Lovercase;\n\n    private asciiMode = false;\n\n    private digitsSymbolRow!: KeyboardButtonLayout[];\n    private firstSymbolRow!: KeyboardButtonLayout[];\n    private secondSymbolRow!: KeyboardButtonLayout[];\n    private thirdSymbolRow!: KeyboardButtonLayout[];\n\n    private observable = new ObservableController<string>();\n\n    constructor(@inject(UIRenderer) private uiRenderer: UIRenderer) {\n        this.toggleKeyboardGroup = new UIObservablePositioningGroup({ x: 10, y: 10 });\n\n        this.toggleKeyboardButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: 0 },\n            { width: 30, height: 30 },\n            this.zIndex,\n            { fillColor: this.fillColor, outlineColor: this.outlineColor },\n            { icon: UIIcon.Keyboard, color: this.shiftIconColor.lovercase },\n            (_sender: UIIconButton) => this.ToggleKeyboard(),\n            this.toggleKeyboardGroup);\n\n        this.keyboardGroup = new UIObservablePositioningGroup(\n            { x: 0, y: this.symbolMargin },\n            { horizontal: HorizontalAnchor.Middle });\n\n        this.SetupKeyboardLayouts();\n\n        this.observable.Attach(_symbol => this.TouchFeedback());\n    }\n\n    private SetupKeyboardLayouts(): void {\n        const keyboardStateFetcher = {\n            shift: () => this.shiftMode,\n            ascii: () => this.asciiMode\n        };\n\n        this.digitsSymbolRow = [\n            new KeyboardButtonLayout(keyboardStateFetcher, '1', '!'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '2', '?'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '3', ','),\n            new KeyboardButtonLayout(keyboardStateFetcher, '4', '.'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '5', '\\\\'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '6', '`'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '7'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '8'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '9'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '0')\n        ];\n\n        this.firstSymbolRow = [\n            new KeyboardButtonLayout(keyboardStateFetcher, 'q', '%'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'w', '^'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'e', '~'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'r', '|'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 't', '['),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'y', ']'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'u', '<'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'i', '>'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'o', '{'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'p', '}')\n        ];\n\n        this.secondSymbolRow = [\n            new KeyboardButtonLayout(keyboardStateFetcher, 'a', '@'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 's', '#'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'd', '&'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'f', '*'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'g', '-'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'h', '+'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'j', '='),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'k', '('),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'l', ')')\n        ];\n\n        this.thirdSymbolRow = [\n            new KeyboardButtonLayout(keyboardStateFetcher, 'z', '_'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'x', '$'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'c', '\"'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'v', '\\''),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'b', ':'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'n', ';'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'm', '/')\n        ];\n    }\n\n    private ToggleKeyboard(): void {\n        this.toggleKeyboard = !this.toggleKeyboard;\n\n        this.toggleKeyboardButton.Icon = {\n            icon: this.toggleKeyboardButton.Icon.icon,\n            color: this.toggleKeyboard ? this.shiftIconColor.uppercase : this.shiftIconColor.lovercase\n        };\n\n        this.toggleKeyboard ?\n            this.SpawnKeyboard() :\n            this.HideKeyboard();\n    }\n\n    private SpawnKeyboard(): void {\n        this.CreateSymbolRow({ x: 0, y: 4 * this.buttonDimension.height + 5 * this.symbolMargin },\n            this.digitsSymbolRow);\n\n        this.CreateSymbolRow(\n            { x: 0, y: 3 * this.buttonDimension.height + 4 * this.symbolMargin },\n            this.firstSymbolRow);\n\n        this.CreateSymbolRow(\n            { x: this.buttonDimension.width / 2, y: 2 * this.buttonDimension.height + 3 * this.symbolMargin },\n            this.secondSymbolRow);\n\n        this.CreateSymbolRow(\n            { x: this.shiftWidth + this.symbolMargin, y: this.buttonDimension.height + 2 * this.symbolMargin },\n            this.thirdSymbolRow);\n\n        this.CreateBottomRow();\n    }\n\n    private CreateSymbolRow(position: Vec2, layouts: KeyboardButtonLayout[]): void {\n        for (let n = 0; n < layouts.length; ++n) {\n            const layout = layouts[n];\n            const button = this.uiRenderer.CreateTextButton(\n                {\n                    x: position.x + (this.buttonDimension.width + this.symbolMargin) * n,\n                    y: position.y\n                },\n                {\n                    width: this.buttonDimension.width,\n                    height: this.buttonDimension.height\n                },\n                this.zIndex,\n                { fillColor: this.fillColor, outlineColor: this.outlineColor },\n                { text: layout.Caption, lineHeight: 16, color: this.buttonContentColor },\n                (_sender: UITextButton) => this.observable.Notify(layouts[n].Symbol),\n                this.keyboardGroup);\n\n            this.StyleButtonCaption(button, layout, true);\n\n            this.symbolButtons.push({ button, layout });\n            this.buttonDeleter.push(() => button.Destroy());\n        }\n    }\n\n    private CreateBottomRow(): void {\n        const shift = this.uiRenderer.CreateIconButton(\n            {\n                x: 0,\n                y: this.buttonDimension.height + 2 * this.symbolMargin\n            },\n            { width: this.shiftWidth, height: this.buttonDimension.height },\n            this.zIndex,\n            { fillColor: this.fillColor, outlineColor: this.outlineColor },\n            { icon: UIIcon.Shift, color: this.buttonContentColor },\n            (sender: UIIconButton) => this.ToggleShift(sender),\n            this.keyboardGroup);\n\n        this.buttonDeleter.push(() => shift.Destroy());\n\n\n        this.spacebarButton = this.uiRenderer.CreateTextButton(\n            {\n                x: this.shiftWidth + this.symbolMargin,\n                y: this.symbolMargin\n            },\n            {\n                width: this.thirdSymbolRow.length * this.buttonDimension.width + this.symbolMargin * (this.thirdSymbolRow.length - 1),\n                height: this.buttonDimension.height\n            },\n            this.zIndex,\n            { fillColor: this.fillColor, outlineColor: this.outlineColor },\n            { text: '', lineHeight: 16, color: this.buttonContentColor },\n            (_sender: UITextButton) => this.observable.Notify(' '),\n            this.keyboardGroup);\n\n        this.buttonDeleter.push(() => this.spacebarButton.Destroy());\n\n\n        const backspace = this.uiRenderer.CreateIconButton(\n            {\n                x: this.shiftWidth + this.thirdSymbolRow.length * this.buttonDimension.width + (this.thirdSymbolRow.length + 1) * this.symbolMargin,\n                y: this.buttonDimension.height + 2 * this.symbolMargin\n            },\n            { width: this.shiftWidth, height: this.buttonDimension.height },\n            this.zIndex,\n            { fillColor: this.fillColor, outlineColor: this.outlineColor },\n            { icon: UIIcon.Backspace, color: this.buttonContentColor },\n            (_sender: UIIconButton) => this.observable.Notify('Backspace'),\n            this.keyboardGroup);\n\n        this.buttonDeleter.push(() => backspace.Destroy());\n\n\n        const asciiCodes = this.uiRenderer.CreateTextButton(\n            {\n                x: 0,\n                y: this.symbolMargin\n            },\n            { width: this.shiftWidth, height: this.buttonDimension.height },\n            this.zIndex,\n            { fillColor: this.fillColor, outlineColor: this.outlineColor },\n            { text: 'ASCII', lineHeight: 16, color: this.buttonContentColor },\n            (sender: UITextButton) => this.ToggleASCII(sender),\n            this.keyboardGroup);\n\n        this.buttonDeleter.push(() => asciiCodes.Destroy());\n\n\n        const enter = this.uiRenderer.CreateIconButton(\n            {\n                x: this.shiftWidth + this.thirdSymbolRow.length * this.buttonDimension.width + (this.thirdSymbolRow.length + 1) * this.symbolMargin,\n                y: this.symbolMargin\n            },\n            { width: this.shiftWidth, height: this.buttonDimension.height },\n            this.zIndex,\n            { fillColor: this.fillColor, outlineColor: this.outlineColor },\n            { icon: UIIcon.Enter, color: this.buttonContentColor },\n            (_sender: UIIconButton) => this.observable.Notify('Enter'),\n            this.keyboardGroup);\n\n        this.buttonDeleter.push(() => enter.Destroy());\n    }\n\n    private ToggleShift(sender: UIIconButton): void {\n        this.TouchFeedback();\n\n        this.shiftMode = (this.shiftMode + 1) % EnumSize(KeyboardShiftMode);\n\n        const color = [\n            this.shiftIconColor.lovercase,\n            this.shiftIconColor.uppercase,\n            this.shiftIconColor.secondary\n        ][this.shiftMode];\n\n        sender.Icon = { ...sender.Icon, color };\n\n        this.UpdateSymbolButtonsCaptions();\n    }\n\n    private ToggleASCII(sender: UITextButton): void {\n        this.TouchFeedback();\n\n        this.asciiMode = !this.asciiMode;\n\n        this.spacebarButton.Caption = {\n            ...this.spacebarButton.Caption,\n            text: this.asciiMode ? ' '.charCodeAt(0).toString() : ''\n        };\n\n\n        sender.Style = {\n            ...sender.Style,\n            outlineColor: this.asciiToggleOutlineColor[this.asciiMode ? 'active' : 'inactive']\n        };\n\n        this.UpdateSymbolButtonsCaptions();\n    }\n\n    private UpdateSymbolButtonsCaptions(): void {\n        this.symbolButtons.forEach(descriptor => {\n            const { button, layout } = descriptor;\n\n            button.Caption = { ...button.Caption, text: layout.Caption };\n\n            switch (this.shiftMode) {\n                case KeyboardShiftMode.Lovercase:\n                case KeyboardShiftMode.Uppercase:\n                    this.StyleButtonCaption(button, layout, true);\n                    break;\n                case KeyboardShiftMode.Secondary:\n                    this.StyleButtonCaption(button, layout, false);\n                    break;\n            }\n        });\n    }\n\n    private StyleButtonCaption(button: UITextButton, layout: KeyboardButtonLayout, primary: boolean): void {\n        if (layout.HasSecondary) {\n            const [primaryColor, secondaryColor] = primary ?\n                [this.buttonCaptionColor.inactive, this.buttonCaptionColor.active] :\n                [this.buttonCaptionColor.active, this.buttonCaptionColor.inactive];\n\n            button.StyleCaptionRange(0, layout.CaptionDelimiter, { color: primaryColor });\n            button.StyleCaptionRange(layout.CaptionDelimiter + 1, button.Caption.text.length, { color: secondaryColor });\n        } else {\n            button.StyleCaptionRange(0, button.Caption.text.length, { color: this.buttonCaptionColor.active });\n        }\n    }\n\n    private HideKeyboard(): void {\n        this.buttonDeleter.forEach(destroy => destroy());\n        this.buttonDeleter.length = 0;\n\n        this.symbolButtons.length = 0;\n\n        this.shiftMode = KeyboardShiftMode.Lovercase;\n    }\n\n    private TouchFeedback(): void {\n        navigator.vibrate(30);\n    }\n\n    get Observable(): Observable<string> {\n        return this.observable;\n    }\n\n    get AbsolutePosition(): Vec2 {\n        return this.keyboardGroup.AbsolutePosition;\n    }\n\n    get Dimension(): Dimension {\n        return this.keyboardGroup.Dimension;\n    }\n\n    Resize(): void {\n        this.toggleKeyboardGroup.Resize();\n        this.keyboardGroup.Resize();\n    }\n}\n\nInversify.bind(VirtualKeyboardControls).toSelf().inSingletonScope();\n","import { mat4 } from \"gl-matrix\";\nimport { inject, injectable } from \"inversify\";\n\nimport { MouseSelectEvent } from \"../AppEventTransformer\";\nimport { AppSettings } from \"../AppSettings\";\nimport { InjectionToken } from \"../InjectionToken\";\n\nimport { DebugControls } from \"./DebugControls\";\nimport { EditControls } from \"./EditControls\";\nimport { EditDirectionControls } from \"./EditDirectionControls\";\nimport { FileControls } from \"./FileControls\";\nimport { HistoryControls } from \"./HistoryControls\";\nimport { IOControls } from \"./IOControls\";\nimport { LanguageSyntaxHelpControls } from \"./LanguageSyntaxHelpControls\";\nimport { SnackbarControls } from \"./SnackbarControls\";\nimport { StackControls } from \"./StackControls\";\nimport { VirtualKeyboardControls } from \"./VirtualKeyboardControls\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Intersection } from \"@/lib/math/Intersection\";\nimport { InputReceiver } from \"@/lib/UI/InputReceiver\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\nexport interface ScrollEvent {\n    startX: number;\n    startY: number;\n    scroll: number;\n    units: 'px' | 'row';\n}\n\n@injectable()\nexport class OverlayService {\n    private settings: AppSettings;\n\n    private stickyProjection!: mat4;\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext,\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(SnackbarControls) private snackbarControls: SnackbarControls,\n        @inject(FileControls) private fileControls: FileControls,\n        @inject(LanguageSyntaxHelpControls) private languageSyntaxHelpControls: LanguageSyntaxHelpControls,\n        @inject(HistoryControls) private historyControls: HistoryControls,\n        @inject(EditControls) private editControls: EditControls,\n        @inject(EditDirectionControls) private editDirectionControls: EditDirectionControls,\n        @inject(DebugControls) private debugControls: DebugControls,\n        @inject(StackControls) private stackControls: StackControls,\n        @inject(VirtualKeyboardControls) private virtualKeyboardControls: VirtualKeyboardControls,\n        @inject(IOControls) private ioControls: IOControls) {\n        this.settings = Inversify.get(AppSettings);\n\n        this.BuildStickyProjection();\n    }\n\n    get EditDirectionControls(): EditDirectionControls {\n        return this.editDirectionControls;\n    }\n\n    get DebugControls(): DebugControls {\n        return this.debugControls;\n    }\n\n    get IOControls(): IOControls {\n        return this.ioControls;\n    }\n\n    get Snackbar(): SnackbarControls {\n        return this.snackbarControls;\n    }\n\n    get FileControls(): FileControls {\n        return this.fileControls;\n    }\n\n    get LanguageSyntaxHelpControls(): LanguageSyntaxHelpControls {\n        return this.languageSyntaxHelpControls;\n    }\n\n    get HistoryControls(): HistoryControls {\n        return this.historyControls;\n    }\n\n    get EditControls(): EditControls {\n        return this.editControls;\n    }\n\n    get StackControls(): StackControls {\n        return this.stackControls;\n    }\n\n    get VirtualKeyboardControls(): VirtualKeyboardControls {\n        return this.virtualKeyboardControls;\n    }\n\n    Resize(): void {\n        this.BuildStickyProjection();\n\n        this.uiRenderer.ViewProjection = this.stickyProjection;\n\n        this.editDirectionControls.Resize();\n        this.debugControls.Resize();\n        this.fileControls.Resize();\n        this.snackbarControls.Resize();\n        this.historyControls.Resize();\n        this.editControls.Resize();\n        this.stackControls.Resize();\n        this.virtualKeyboardControls.Resize();\n        this.ioControls.Resize();\n    }\n\n    Touch(e: MouseSelectEvent): InputReceiver | boolean {\n        const x = e.offsetX;\n        const y = this.gl.canvas.height - e.offsetY;\n\n        const isKeyboardTouched = Intersection.AABBRectanglePoint(\n            {\n                x: this.virtualKeyboardControls.AbsolutePosition.x,\n                y: this.virtualKeyboardControls.AbsolutePosition.y,\n                width: this.virtualKeyboardControls.Dimension.width,\n                height: this.virtualKeyboardControls.Dimension.height\n            },\n            { x, y });\n\n        return this.uiRenderer.Touch({ offsetX: x, offsetY: y }) || isKeyboardTouched;\n    }\n\n    Scroll(e: ScrollEvent): boolean {\n        e.startY = this.gl.canvas.height - e.startY;\n\n        const textList = this.uiRenderer.FindTextList(e.startX, e.startY);\n\n        if (textList === null) {\n            return false;\n        }\n\n        if (e.units === 'px') {\n            textList.ScrollAligned(e.scroll);\n        } else if (e.units === 'row') {\n            textList.ScrollAligned(e.scroll * textList.LineHeight);\n        }\n\n        return true;\n    }\n\n    Draw(): void {\n        this.uiRenderer.Draw();\n    }\n\n    private BuildStickyProjection(): void {\n        this.stickyProjection = mat4.ortho(\n            mat4.create(),\n            0, this.gl.canvas.width,\n            0, this.gl.canvas.height,\n            -this.settings.ZNear, -this.settings.ZFar);\n    }\n}\n\nInversify.bind(OverlayService).toSelf().inSingletonScope();\n","import { injectable } from \"inversify\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Memory, Pointer } from \"@/lib/befunge/memory/Memory\";\nimport { MemoryLimit } from \"@/lib/befunge/memory/MemoryLimit\";\nimport { PointerArithmetics } from \"@/lib/befunge/memory/PointerArithmetics\";\n\n@injectable()\nexport class SourceCodeMemory implements Memory {\n    private nonEmptyCells = 0;\n\n    private target!: Memory;\n\n    Initialize<T extends new (...args: any[]) => Memory>(ctr: T, ...args: ConstructorParameters<T>): void {\n        this.nonEmptyCells = 0;\n        this.target = new ctr(...args);\n    }\n\n    Read(ptr: Pointer): number {\n        return this.target.Read(ptr);\n    }\n\n    Write(ptr: Pointer, value: number): void {\n        const emptyValue = ' '.charCodeAt(0);\n        const actual = this.target.Read(ptr);\n\n        if (actual !== value) {\n            if (actual === emptyValue) {\n                ++this.nonEmptyCells;\n            } else if (value === emptyValue) {\n                --this.nonEmptyCells;\n            }\n        }\n\n        this.target.Write(ptr, value);\n    }\n\n    Resize(limit: MemoryLimit): void {\n        this.target.Resize(limit);\n    }\n\n    Clone(): Memory {\n        return this.target.Clone();\n    }\n\n    get Empty(): boolean {\n        return this.nonEmptyCells === 0;\n    }\n\n    get PointerArithmetics(): PointerArithmetics {\n        return this.target.PointerArithmetics;\n    }\n\n    get Target(): Memory {\n        return this.target;\n    }\n}\n\nInversify.bind(SourceCodeMemory).toSelf().inSingletonScope();\n","import { Mat4 } from \"@/lib/renderer/ShaderProgram\";\n\nexport interface CodeEditorExtension {\n    Draw(): void;\n\n    Unload(): void;\n\n    set ViewProjection(mat: Mat4 | Float32Array);\n};\n\nexport class EmptyExtension implements CodeEditorExtension {\n    Draw(): void { }\n\n    Unload(): void { }\n\n    set ViewProjection(mat: Mat4 | Float32Array) { }\n}\n","import { inject, injectable, named } from \"inversify\";\n\nimport { UILabelRendererTargetName } from \"../InjectionToken\";\n\nimport { CodeEditorRenderer } from \"./CodeEditorRenderer\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { UILabel } from \"@/lib/UI/UILabel/UILabel\";\nimport { UILabelRenderer } from \"@/lib/UI/UILabel/UILabelRenderer\";\n\nexport enum TooltipPosition { LeftBottom, LeftTop, RightTop, RightBottom };\n\nexport type TooltipReleaser = () => void;\n\ninterface Tooltip {\n    column: number;\n    row: number;\n    position: TooltipPosition;\n    instance: UILabel\n}\n\n@injectable()\nexport class CodeEditorTooltipService {\n    private readonly tooltips: Tooltip[] = [];\n\n    constructor(\n        @inject(CodeEditorRenderer) private codeEditorRenderer: CodeEditorRenderer,\n        @inject(UILabelRenderer) @named(UILabelRendererTargetName.Perspective) private perspectiveLabelRenderer: UILabelRenderer) { }\n\n    Tooltip(column: number, row: number, text: string, position: TooltipPosition): TooltipReleaser {\n        this.ValidateLocation(column, row);\n\n        const tooltipIdx = this.FindIndex(column, row, position);\n\n        if (tooltipIdx !== -1) {\n            if (text === '') {\n                this.ReleaseTooltip(tooltipIdx);\n            } else {\n                this.tooltips[tooltipIdx].instance.Text = text;\n            }\n\n            return this.BuildReleaser(column, row, position);\n        }\n\n        const cellSize = 10;\n        const margin = 0.5;\n\n        const instance = this.perspectiveLabelRenderer.Create(\n            { x: 0, y: 0 },\n            499.7,\n            text,\n            8,\n            null);\n\n        instance.Scale = 0.2;\n\n        queueMicrotask(() => {\n            let x = 0, y = 0;\n            switch (position) {\n                case TooltipPosition.LeftBottom:\n                    x = margin + column * cellSize;\n                    y = margin + (this.codeEditorRenderer.Dimension.Rows - row - 1) * cellSize;\n                    break;\n                case TooltipPosition.LeftTop:\n                    x = margin + column * cellSize;\n                    y = (this.codeEditorRenderer.Dimension.Rows - row - 1) * cellSize + cellSize - instance.Dimension.height - margin;\n                    break;\n                case TooltipPosition.RightTop:\n                    x = column * cellSize + cellSize - instance.Dimension.width - margin;\n                    y = (this.codeEditorRenderer.Dimension.Rows - row - 1) * cellSize + cellSize - instance.Dimension.height - margin;\n                    break;\n                case TooltipPosition.RightBottom:\n                    x = column * cellSize + cellSize - instance.Dimension.width - margin;\n                    y = margin + (this.codeEditorRenderer.Dimension.Rows - row - 1) * cellSize;\n                    break;\n            }\n\n            instance.Position = { x, y };\n        });\n\n        this.tooltips.push({ column, row, position, instance });\n\n        return this.BuildReleaser(column, row, position);\n    }\n\n    ReleaseAll(): void {\n        while (this.tooltips.length > 0) {\n            this.ReleaseTooltip(this.tooltips.length - 1);\n        }\n    }\n\n    private ValidateLocation(column: number, row: number): void {\n        const dimension = this.codeEditorRenderer.Dimension;\n        if (!this.codeEditorRenderer.IsValidLocation(column, row)) {\n            throw new Error(`Invalid location ${column}:${row}. Valid column: [0, ${dimension.Columns}); row: [0, ${dimension.Rows})`);\n        }\n    }\n\n    private FindIndex(column: number, row: number, position: TooltipPosition): number {\n        return this.tooltips.findIndex(x => x.column === column && x.row === row && x.position === position);\n    }\n\n    private BuildReleaser(column: number, row: number, position: TooltipPosition): TooltipReleaser {\n        return () => {\n            const idx = this.FindIndex(column, row, position);\n\n            if (idx !== -1) {\n                this.ReleaseTooltip(idx);\n            }\n        };\n    }\n\n    private ReleaseTooltip(idx: number): void {\n        this.tooltips[idx].instance.Destroy();\n        this.tooltips.splice(idx, 1);\n    }\n}\n\nInversify.bind(CodeEditorTooltipService).toSelf().inSingletonScope();\n","export interface Index2D {\n    column: number;\n    row: number;\n}\n\nexport class Array2D<T> {\n    private data!: T[];\n\n    private constructor(\n        private readonly width: number,\n        private readonly height: number,\n        private provider?: () => T) {\n        if (provider) {\n            this.Initialize();\n        }\n    }\n\n    static WithConstructor<T>(width: number, height: number, constructor: new () => T): Array2D<T> {\n        return new Array2D<T>(width, height, () => new constructor());\n    }\n\n    static WithProvider<T>(width: number, height: number, provider: () => T): Array2D<T> {\n        return new Array2D<T>(width, height, provider);\n    }\n\n    Get(pos: Index2D): T {\n        return this.data[this.CoordsToIndex(pos)];\n    }\n\n    Set(pos: Index2D, value: T): void {\n        this.data[this.CoordsToIndex(pos)] = value;\n    }\n\n    Update(pos: Index2D, updater: (value: T) => T): void {\n        const idx = this.CoordsToIndex(pos);\n\n        this.data[idx] = updater(this.data[idx]);\n    }\n\n    Map<TRet>(fn: (value: T, idx: Index2D, arr: Array2D<T>) => TRet): Array2D<TRet> {\n        const mapped = new Array2D<TRet>(this.width, this.height);\n\n        mapped.data = this.data.map((value: T, idx: number) => fn(value, this.IndexToCoord(idx), this));\n\n        return mapped;\n    }\n\n    ForEach(fn: (value: T, idx: Index2D, arr: Array2D<T>) => void): void {\n        this.data.forEach((value: T, idx: number) => fn(value, this.IndexToCoord(idx), this));\n    }\n\n    Every(fn: (value: T, idx: Index2D, arr: Array2D<T>) => boolean): boolean {\n        return this.data.every((value: T, idx: number) => fn(value, this.IndexToCoord(idx), this))\n    }\n\n    Equals(arr: Array2D<T>): boolean {\n        if (arr.width !== this.width || arr.height !== this.height) {\n            return false;\n        }\n\n        return this.Every((value, index) => value === arr.Get(index));\n    }\n\n    get RawRef(): T[] {\n        return this.data;\n    }\n\n    private Initialize(): void {\n        this.data = Array.from({ length: this.width * this.height }, () => this.provider!());\n    }\n\n    private CoordsToIndex(pos: Index2D): number {\n        return pos.row * this.width + pos.column;\n    }\n\n    private IndexToCoord(index: number): Index2D {\n        const row = Math.floor(index / this.width);\n        const column = index - row * this.width;\n\n        return { column, row };\n    }\n}\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { AppSettings } from \"../AppSettings\";\nimport { AppHistory } from \"../History/AppHistory\";\nimport type { EditCellCommandFactory } from \"../History/Commands/EditCellCommand/EditCellCommand\";\nimport { MoveNextAction as CellMoveNextAction } from \"../History/Commands/EditCellCommand/PostActions/MoveNextAction\";\nimport type { EditCellsRegionCommandFactory } from \"../History/Commands/EditCellsRegionCommand/EditCellsRegionCommand\";\nimport { MoveNextAction as RegionMoveNextAction } from \"../History/Commands/EditCellsRegionCommand/PostActions/MoveNextAction\";\nimport { StayLeftTopAction } from \"../History/Commands/EditCellsRegionCommand/PostActions/StayLeftTopAction\";\nimport { AppCommandInjectionToken, EditCellCommandPostAction, EditCellsRegionCommandPostAction } from \"../InjectionToken\";\nimport { SourceCodeMemory } from \"../SourceCodeMemory\";\n\nimport { CodeEditorRenderer } from \"./CodeEditorRenderer\";\nimport { EditionDirection } from \"./CodeEditorService\";\nimport { CodeEditorTooltipService, TooltipPosition, TooltipReleaser } from \"./CodeEditorTooltipService\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Array2D } from \"@/lib/containers/Array2D\";\nimport { MathUtil } from \"@/lib/math/MathUtil\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\"\n\nexport interface EditableRegion {\n    lt: Vec2;\n    rb: Vec2\n}\n\nexport interface RegionDimension {\n    width: number;\n    height: number;\n}\n\n@injectable()\nexport class EditableTarget {\n    private readonly editableCellStyle: Rgb;\n\n    private editableRegion: EditableRegion = {\n        lt: { x: 0, y: 0 },\n        rb: { x: 0, y: 0 }\n    };\n\n    private editionDirection: EditionDirection = EditionDirection.Right;\n\n    private tooltipReleaser: TooltipReleaser[] = [];\n\n    constructor(\n        @inject(AppSettings) settings: AppSettings,\n        @inject(SourceCodeMemory) private editorSourceCode: SourceCodeMemory,\n        @inject(CodeEditorRenderer) private codeEditorRenderer: CodeEditorRenderer,\n        @inject(CodeEditorTooltipService) private tooltipService: CodeEditorTooltipService,\n        @inject(AppCommandInjectionToken.EditCellCommandFactory) private editCellCommandFactory: EditCellCommandFactory,\n        @inject(EditCellCommandPostAction.MoveNext) private cellMoveNextPostActionFactory: interfaces.AutoFactory<CellMoveNextAction>,\n        @inject(AppCommandInjectionToken.EditCellsRegionFactory) private editCellsRegionCommandFactory: EditCellsRegionCommandFactory,\n        @inject(EditCellsRegionCommandPostAction.MoveNext) private regionMoveNextPostActionFactory: interfaces.AutoFactory<RegionMoveNextAction>,\n        @inject(EditCellsRegionCommandPostAction.StayLeftTop) private regionStayLeftTopPostActionFactory: interfaces.AutoFactory<StayLeftTopAction>,\n        @inject(AppHistory) private history: AppHistory) {\n        this.editableCellStyle = settings.Visual.editableCellStyle;\n        if (this.IsSingleCell) {\n            this.codeEditorRenderer.Select(this.editableRegion.lt.x, this.editableRegion.lt.y, this.editableCellStyle);\n        } else {\n            this.codeEditorRenderer.SelectRegion(this.editableRegion.lt, this.editableRegion.rb, this.editableCellStyle);\n        }\n    }\n\n    CellInput(keyCode: string): void {\n        this.IsSingleCell ? this.CellInputSingle(keyCode) : this.CellInputRegion(keyCode);\n    }\n\n    private CellInputSingle(keyCode: string): void {\n        const oldValue = String.fromCharCode(this.editorSourceCode.Read(this.editableRegion.lt));\n\n        const command = keyCode === 'Backspace' ?\n            this.editCellCommandFactory(\n                this.editableRegion.lt,\n                oldValue,\n                ' ',\n                this.ReversedDirection(this.editionDirection),\n                this.cellMoveNextPostActionFactory()) :\n            this.editCellCommandFactory(\n                this.editableRegion.lt,\n                oldValue,\n                keyCode,\n                this.editionDirection,\n                this.cellMoveNextPostActionFactory());\n\n        command.Apply();\n\n        if (!(keyCode === String.fromCharCode(this.editorSourceCode.Read(this.editableRegion.lt)) ||\n            keyCode === 'Backspace' && oldValue === ' ')) {\n            this.history.Push(command);\n        }\n    }\n\n    private CellInputRegion(keyCode: string): void {\n        const dimension = this.RegionDimension;\n\n        const oldValue = Array2D.WithProvider(dimension.width, dimension.height, () => 0);\n        for (let y = this.editableRegion.lt.y; y <= this.editableRegion.rb.y; ++y) {\n            for (let x = this.editableRegion.lt.x; x <= this.editableRegion.rb.x; ++x) {\n                oldValue.Set({ column: x - this.editableRegion.lt.x, row: y - this.editableRegion.lt.y }, this.editorSourceCode.Read({ x: x, y: y }));\n            }\n        }\n\n        const command = keyCode === 'Backspace' ?\n            this.editCellsRegionCommandFactory(\n                this.editableRegion,\n                oldValue,\n                Array2D.WithProvider(dimension.width, dimension.height, () => ' '.charCodeAt(0)),\n                this.ReversedDirection(this.editionDirection),\n                this.regionMoveNextPostActionFactory()) :\n            this.editCellsRegionCommandFactory(\n                this.editableRegion,\n                oldValue,\n                Array2D.WithProvider(dimension.width, dimension.height, () => keyCode.charCodeAt(0)),\n                this.editionDirection,\n                this.regionMoveNextPostActionFactory());\n\n        command.Apply();\n\n        if (!(keyCode === 'Backspace' && oldValue.Every(x => String.fromCharCode(x) === ' ') ||\n            oldValue.Every(x => String.fromCharCode(x) === keyCode))) {\n            this.history.Push(command);\n        }\n    }\n\n    private ReversedDirection(direction: EditionDirection): EditionDirection {\n        switch (direction) {\n            case EditionDirection.Left:\n                return EditionDirection.Right;\n            case EditionDirection.Right:\n                return EditionDirection.Left;\n            case EditionDirection.Up:\n                return EditionDirection.Down;\n            case EditionDirection.Down:\n                return EditionDirection.Up\n        }\n    }\n\n    Select(cell: Vec2): void {\n        if (!this.IsLocationValid(cell)) {\n            return;\n        }\n\n        this.ShowTooltips([cell]);\n        this.Unselect();\n\n        this.editableRegion.lt.x = cell.x;\n        this.editableRegion.lt.y = cell.y;\n        this.editableRegion.rb.x = cell.x;\n        this.editableRegion.rb.y = cell.y;\n\n        this.codeEditorRenderer.Select(this.editableRegion.lt.x, this.editableRegion.lt.y, this.editableCellStyle);\n    }\n\n    SelectRegion(p0: Vec2, p1: Vec2): void {\n        if (!(this.IsLocationValid(p0) && this.IsLocationValid(p1))) {\n            return;\n        }\n\n        this.ShowTooltips([p0, p1]);\n        this.Unselect();\n\n        const normalized = MathUtil.Extremum([p0, p1]);\n        const region = { lt: normalized.min, rb: normalized.max };\n\n        this.editableRegion.lt = { ...region.lt };\n        this.editableRegion.rb = { ...region.rb };\n\n        this.codeEditorRenderer.SelectRegion(region.lt, region.rb, this.editableCellStyle);\n    }\n\n    private IsLocationValid(point: Vec2): boolean {\n        return point.x >= 0 && point.y >= 0 && point.x < this.codeEditorRenderer.Dimension.Columns && point.y < this.codeEditorRenderer.Dimension.Rows;\n    }\n\n    private Unselect(): void {\n        this.IsSingleCell ?\n            this.codeEditorRenderer.Unselect(this.editableRegion.lt.x, this.editableRegion.lt.y) :\n            this.codeEditorRenderer.UnselectRegion(this.editableRegion.lt, this.editableRegion.rb);\n    }\n\n    Focus(): void {\n        this.codeEditorRenderer.SelectRegion(this.editableRegion.lt, this.editableRegion.rb, this.editableCellStyle);\n    }\n\n    Blur(): void {\n        this.codeEditorRenderer.UnselectRegion(this.editableRegion.lt, this.editableRegion.rb);\n    }\n\n    ContentString(): string {\n        let sourceCode = '';\n        for (let y = this.editableRegion.lt.y; y <= this.editableRegion.rb.y; ++y) {\n            for (let x = this.editableRegion.lt.x; x <= this.editableRegion.rb.x; ++x) {\n                sourceCode += String.fromCharCode(this.editorSourceCode.Read({ x: x, y: y }));\n            }\n\n            sourceCode += '\\n';\n        }\n\n        return sourceCode.slice(0, -1);\n    }\n\n    InsertSourceCode(sourceCode: string): boolean {\n        const linesOfCode = sourceCode.split(/\\r?\\n/);\n\n        let fragmentWidth = 0;\n        const fragmentHeight = linesOfCode.length;\n        for (let y = 0; y < linesOfCode.length; ++y) {\n            const line = linesOfCode[y];\n            if (line.length > fragmentWidth) {\n                fragmentWidth = line.length;\n            }\n        }\n\n        if (!this.IsLocationValid({\n            x: this.editableRegion.lt.x + fragmentWidth - 1,\n            y: this.editableRegion.lt.y + fragmentHeight - 1\n        })) {\n            return false;\n        }\n\n        const newValue = Array2D.WithProvider(fragmentWidth, fragmentHeight, () => 32);\n        for (let row = 0; row < linesOfCode.length; ++row) {\n            const line = linesOfCode[row];\n            for (let column = 0; column < line.length; ++column) {\n                newValue.Set({ column, row }, line[column].charCodeAt(0));\n            }\n        }\n\n        const oldValue = Array2D.WithProvider(fragmentWidth, fragmentHeight, () => 0);\n        for (let y = this.editableRegion.lt.y; y < this.editableRegion.lt.y + fragmentHeight; ++y) {\n            for (let x = this.editableRegion.lt.x; x < this.editableRegion.lt.x + fragmentWidth; ++x) {\n                oldValue.Set({ column: x - this.editableRegion.lt.x, row: y - this.editableRegion.lt.y }, this.editorSourceCode.Read({ x, y }));\n            }\n        }\n\n        const command = this.editCellsRegionCommandFactory(\n            this.editableRegion,\n            oldValue,\n            newValue,\n            this.editionDirection,\n            this.regionMoveNextPostActionFactory());\n\n        command.Apply();\n\n        if (!newValue.Equals(oldValue)) {\n            this.history.Push(command);\n        }\n\n        return true;\n    }\n\n    Clear(): void {\n        const oldValue = Array2D.WithProvider(this.RegionDimension.width, this.RegionDimension.height, () => 0);\n        for (let y = this.editableRegion.lt.y; y <= this.editableRegion.rb.y; ++y) {\n            for (let x = this.editableRegion.lt.x; x <= this.editableRegion.rb.x; ++x) {\n                oldValue.Set({ column: x - this.editableRegion.lt.x, row: y - this.editableRegion.lt.y }, this.editorSourceCode.Read({ x, y }));\n            }\n        }\n\n        const command = this.editCellsRegionCommandFactory(\n            this.editableRegion,\n            oldValue,\n            Array2D.WithProvider(this.RegionDimension.width, this.RegionDimension.height, () => 32),\n            this.editionDirection,\n            this.regionStayLeftTopPostActionFactory());\n\n        command.Apply();\n\n        if (!oldValue.Every(x => x === 32)) {\n            this.history.Push(command);\n        }\n    }\n\n    get IsSingleCell(): boolean {\n        return this.editableRegion.lt.x === this.editableRegion.rb.x &&\n            this.editableRegion.lt.y === this.editableRegion.rb.y;\n    }\n\n    get RegionDimension(): RegionDimension {\n        return {\n            width: this.editableRegion.rb.x - this.editableRegion.lt.x + 1,\n            height: this.editableRegion.rb.y - this.editableRegion.lt.y + 1\n        };\n    }\n\n    get Target(): EditableRegion {\n        return this.editableRegion;\n    }\n\n    get EditionDirection(): EditionDirection {\n        return this.editionDirection;\n    }\n\n    set EditionDirection(direction: EditionDirection) {\n        this.editionDirection = direction;\n    }\n\n    private ShowTooltips(locations: Vec2[]): void {\n        this.tooltipReleaser.forEach(x => x());\n        this.tooltipReleaser.length = 0;\n\n        locations\n            .forEach(loc => this.tooltipReleaser.push(this.tooltipService.Tooltip(loc.x, loc.y, this.FormatCellLocation(loc), TooltipPosition.RightBottom)));\n    }\n\n    private FormatCellLocation(location: Vec2): string {\n        return `${location.x}:${location.y}`;\n    }\n}\n\nInversify.bind(EditableTarget).toSelf().inSingletonScope();\n","import { vec3 } from \"gl-matrix\";\nimport { inject, injectable } from \"inversify\";\n\nimport { MouseSelectEvent } from \"../AppEventTransformer\";\nimport { InjectionToken } from \"../InjectionToken\";\nimport { OverlayService } from \"../Overlay/OverlayService\";\nimport { SourceCodeMemory } from \"../SourceCodeMemory\";\n\nimport { CodeEditorExtension, EmptyExtension } from \"./CodeEditorExtension\";\nimport { CodeEditorRenderer } from \"./CodeEditorRenderer\";\nimport { CodeEditorTooltipService, TooltipPosition, TooltipReleaser } from \"./CodeEditorTooltipService\";\nimport { EditableTarget } from \"./EditableTarget\";\nimport { EditorGridDimension } from \"./EditorGridRenderer\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Pointer } from \"@/lib/befunge/memory/Memory\";\nimport { AsyncExceptionTrap } from \"@/lib/ExceptionTrap\";\nimport { Intersection } from \"@/lib/math/Intersection\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\nimport { Camera } from \"@/lib/renderer/Camera\";\nimport { Mat4 } from \"@/lib/renderer/ShaderProgram\";\nimport { SelfBind } from \"@/lib/SelfBind\";\nimport { MyInputEvent } from \"@/lib/UI/InputReceiver\";\n\nexport enum EditionDirection { Left, Up, Right, Down };\n\n\nexport interface EditableCellRect {\n    lb: vec3;\n    rt: vec3;\n}\n\ninterface TouchBehavior {\n    Touch(cell: Vec2): TouchBehavior;\n    get PivotTouch(): Vec2;\n}\n\nclass SelectCellBehaiver implements TouchBehavior {\n    constructor(\n        private editableCell: EditableTarget,\n        private pivotTouch: Vec2) { }\n\n    Touch(cell: Vec2): TouchBehavior {\n        this.editableCell.Select(cell);\n\n        this.pivotTouch = cell;\n\n        return this;\n    }\n\n    get PivotTouch(): Vec2 {\n        return this.pivotTouch;\n    }\n}\n\nclass SelectCellsRegion implements TouchBehavior {\n    constructor(\n        private editableCell: EditableTarget,\n        private pivotTouch: Vec2) { }\n\n    Touch(cell: Vec2): TouchBehavior {\n        this.editableCell.SelectRegion(this.pivotTouch, cell);\n\n        return new SelectCellBehaiver(this.editableCell, this.pivotTouch);\n    }\n\n    get PivotTouch(): Vec2 {\n        return this.pivotTouch;\n    }\n}\n\n@injectable()\nexport class CodeEditorService {\n    private editDirectionObservable = new ObservableController<EditionDirection>();\n\n    private editableCellLostObservale = new ObservableController<void>();\n\n    private extension: CodeEditorExtension = new EmptyExtension();\n\n    private touchBehavior: TouchBehavior;\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext,\n        @inject(OverlayService) private overlay: OverlayService,\n        @inject(EditableTarget) private editableCell: EditableTarget,\n        @inject(CodeEditorRenderer) private codeEditorRenderer: CodeEditorRenderer,\n        @inject(SourceCodeMemory) private editorSourceCode: SourceCodeMemory,\n        @inject(CodeEditorTooltipService) private tooltipService: CodeEditorTooltipService) {\n        this.touchBehavior = new SelectCellBehaiver(this.editableCell, { x: 0, y: 0 });\n        this.overlay.EditControls.SelectObservable.Attach(() => this.OnSetEditableRegion());\n        this.overlay.EditControls.CutObservable.Attach(() => this.OnCut());\n        this.overlay.EditControls.CopyObservable.Attach(() => this.OnCopyEditableRegion());\n        this.overlay.EditControls.PasteObservable.Attach(() => this.OnPaste());\n        this.overlay.EditControls.DeleteObservable.Attach(() => this.OnDelete());\n        this.editableCell.Select({ x: 0, y: 0 });\n    }\n\n    get EditDirectionObservable(): Observable<EditionDirection> {\n        return this.editDirectionObservable;\n    }\n\n    get EditableCellLostObservable(): Observable<void> {\n        return this.editableCellLostObservale;\n    }\n\n    get EditableCellDirection(): EditionDirection {\n        return this.editableCell.EditionDirection;\n    }\n\n    set EditableCellDirection(direction: EditionDirection) {\n        this.editableCell.EditionDirection = direction;\n\n        this.editDirectionObservable.Notify(direction);\n    }\n\n    LoadExtension(extension: CodeEditorExtension): void {\n        this.extension.Unload();\n\n        this.extension = extension;\n        this.extension.ViewProjection = this.codeEditorRenderer.ViewProjection;\n    }\n\n    UnloadExtension(): void {\n        this.extension.Unload();\n\n        this.extension = new EmptyExtension();\n    }\n\n    EditCell(symbol: string, column: number, row: number): void {\n        this.editorSourceCode.Write({ x: column, y: row }, symbol.charCodeAt(0));\n        this.codeEditorRenderer.Symbol(symbol, column, row);\n    }\n\n    Select(column: number, row: number, style: Rgb): void {\n        this.codeEditorRenderer.Select(column, row, style);\n    }\n\n    SelectRegion(p0: Vec2, p1: Vec2, color: Rgb): void {\n        this.codeEditorRenderer.SelectRegion(p0, p1, color);\n    }\n\n    Unselect(column: number, row: number): void {\n        this.codeEditorRenderer.Unselect(column, row);\n    }\n\n    UnselectRegion(p0: Vec2, p1: Vec2): void {\n        this.codeEditorRenderer.UnselectRegion(p0, p1);\n    }\n\n    Tooltip(column: number, row: number, text: string, position: TooltipPosition): TooltipReleaser {\n        return this.tooltipService.Tooltip(column, row, text, position);\n    }\n\n    Touch(e: MouseSelectEvent): void {\n        const posNear = Camera.Unproject({ x: e.offsetX, y: e.offsetY, z: 0 }, this.ViewProjection, this.gl.canvas);\n        const posFar = Camera.Unproject({ x: e.offsetX, y: e.offsetY, z: 1 }, this.ViewProjection, this.gl.canvas);\n\n        const intersection = Intersection.PlaneLine(\n            { a: 0, b: 0, c: 1, d: 0 },\n            { a: [posNear[0], posNear[1], posNear[2]], b: [posFar[0], posFar[1], posFar[2]] });\n\n        const x = Math.floor(intersection[0] / this.codeEditorRenderer.CellSize);\n        const y = this.codeEditorRenderer.Dimension.Rows - Math.floor(intersection[1] / this.codeEditorRenderer.CellSize) - 1;\n\n        const nextBehaivor = this.touchBehavior.Touch({ x, y });\n\n        if (nextBehaivor !== this.touchBehavior) {\n            this.touchBehavior = nextBehaivor;\n        }\n    }\n\n    Focus(): void {\n        this.editableCell.Focus();\n    }\n\n    Blur(): void {\n        this.editableCell.Blur();\n    }\n\n    SetEditableCell(location: Pointer): void {\n        this.editableCell.Select(location);\n\n        if (!this.IsEditableCellVisible) {\n            this.editableCellLostObservale.Notify();\n        }\n    }\n\n    SetEditableRegion(p0: Vec2, p1: Vec2): void {\n        this.editableCell.SelectRegion(p0, p1);\n    }\n\n    CellInput(e: MyInputEvent): void {\n        this.editableCell.CellInput(e.key);\n    }\n\n    Clear(): void {\n        this.codeEditorRenderer.Clear();\n    }\n\n    Draw(): void {\n        this.codeEditorRenderer.Draw();\n\n        this.extension.Draw();\n    }\n\n    get Dimension(): EditorGridDimension {\n        return this.codeEditorRenderer.Dimension;\n    }\n\n    get ViewProjection() {\n        return this.codeEditorRenderer.ViewProjection;\n    }\n\n    set ViewProjection(proj: Mat4 | Float32Array) {\n        this.codeEditorRenderer.ViewProjection = proj;\n        this.extension.ViewProjection = proj;\n    }\n\n    get EditableCell(): Vec2 {\n        return this.editableCell.Target.lt;\n    }\n\n    get EditableCellRect(): EditableCellRect {\n        const lb: vec3 = [\n            this.EditableCell.x * this.codeEditorRenderer.CellSize,\n            (this.codeEditorRenderer.Dimension.Rows - this.EditableCell.y - 1) * this.codeEditorRenderer.CellSize,\n            0.02];\n\n        const rt: vec3 = [\n            (this.EditableCell.x + 1) * this.codeEditorRenderer.CellSize,\n            (this.codeEditorRenderer.Dimension.Rows - this.EditableCell.y) * this.codeEditorRenderer.CellSize,\n            0.02];\n\n        return { lb, rt };\n    }\n\n    get IsEditableCellVisible(): boolean {\n        const lb: vec3 = [\n            this.editableCell.Target.lt.x * this.codeEditorRenderer.CellSize,\n            (this.codeEditorRenderer.Dimension.Rows - this.editableCell.Target.lt.y - 1) * this.codeEditorRenderer.CellSize,\n            0.02];\n\n        const lbNDC = vec3.transformMat4(vec3.create(), lb, this.ViewProjection);\n\n        if (lbNDC[0] < -1 || lbNDC[1] < -1) {\n            return false;\n        }\n\n        const rt: vec3 = [\n            (this.editableCell.Target.lt.x + 1) * this.codeEditorRenderer.CellSize,\n            (this.codeEditorRenderer.Dimension.Rows - this.editableCell.Target.lt.y) * this.codeEditorRenderer.CellSize,\n            0.02];\n\n        const rtNDC = vec3.transformMat4(vec3.create(), rt, this.ViewProjection);\n\n        if (rtNDC[0] > 1 || rtNDC[1] > 1) {\n            return false;\n        }\n\n        return true;\n    }\n\n    get CellSize(): number {\n        return this.codeEditorRenderer.CellSize;\n    }\n\n    private OnSetEditableRegion(): void {\n        if ((this.editableCell.Target.lt.x === this.touchBehavior.PivotTouch.x || this.editableCell.Target.rb.x === this.touchBehavior.PivotTouch.x) &&\n            (this.editableCell.Target.lt.y === this.touchBehavior.PivotTouch.y || this.editableCell.Target.rb.y === this.touchBehavior.PivotTouch.y)) {\n            this.touchBehavior = new SelectCellsRegion(this.editableCell, this.touchBehavior.PivotTouch);\n        } else {\n            this.touchBehavior = new SelectCellsRegion(this.editableCell, this.editableCell.Target.lt);\n        }\n    }\n\n    private OnCut(): void {\n        navigator.clipboard.writeText(this.editableCell.ContentString());\n\n        this.editableCell.Clear();\n    }\n\n    private OnCopyEditableRegion(): void {\n        navigator.clipboard.writeText(this.editableCell.ContentString());\n    }\n\n    private async OnPaste(): Promise<void> {\n        const data = await AsyncExceptionTrap\n            .Try(SelfBind(navigator.clipboard, 'readText'))\n            .CatchValue('');\n\n        if (data.length === 0) {\n            return;\n        }\n\n        if (!this.editableCell.InsertSourceCode(data)) {\n            this.overlay.Snackbar.ShowWarning('Not enough space to insert the fragment')\n        }\n    }\n\n    private OnDelete(): void {\n        this.editableCell.Clear();\n    }\n}\n\nInversify.bind(CodeEditorService).toSelf().inSingletonScope();\n","import { Instruction } from '../instructions/Instruction';\nimport { IOPort } from '../IOPort';\nimport { Memory, Pointer } from '../memory/Memory';\n\nimport { CPU, IllegalInstructionException, PCDirection } from './CPU';\n\nexport class CPUImpl implements CPU {\n  private pcDirection = PCDirection.Right;\n  private pcLocation: Pointer = { x: 0, y: 0 };\n  private stack: number[] = [];\n  private isStringMode = false;\n  private isHalted = false;\n\n  private instructionSet: Instruction[] = Array.from({ length: 128 });\n\n  constructor(\n    private memory: Memory,\n    private io: IOPort,\n    instructions: Instruction[]\n  ) {\n    instructions.forEach(\n      inst => (this.instructionSet[inst.Code.charCodeAt(0)] = inst)\n    );\n  }\n\n  get Stack(): number[] {\n    return this.stack;\n  }\n\n  get PC(): { Location: Pointer; Direction: PCDirection } {\n    return { Location: this.pcLocation, Direction: this.pcDirection };\n  }\n\n  get NextInstructionCode(): string {\n    return String.fromCharCode(this.memory.Read(this.pcLocation));\n  }\n\n  StackPush(value: number): void {\n    this.stack.push(value);\n  }\n\n  StackPop(): number {\n    if (this.stack.length === 0) {\n      return 0;\n    } else {\n      const ret = this.stack[this.stack.length - 1];\n\n      this.stack.pop();\n\n      return ret;\n    }\n  }\n\n  StackDuplicate(): void {\n    if (this.stack.length >= 1) {\n      this.stack.push(this.stack[this.stack.length - 1]);\n    } else {\n      this.stack.push(0, 0);\n    }\n  }\n\n  StackSwap(): void {\n    if (this.stack.length >= 2) {\n      const last = this.stack[this.stack.length - 1];\n      this.stack[this.stack.length - 1] = this.stack[this.stack.length - 2];\n      this.stack[this.stack.length - 2] = last;\n    } else {\n      this.stack.push(\n        ...Array.from({ length: 2 - this.stack.length }, () => 0)\n      );\n    }\n  }\n\n  PCDirection(dir: PCDirection): void {\n    this.pcDirection = dir;\n  }\n\n  ExecuteNext(): void {\n    const instruction = this.memory.Read(this.pcLocation);\n\n    if (this.isStringMode && instruction !== '\"'.charCodeAt(0)) {\n      this.stack.push(instruction);\n    } else if (this.KnownInstruction(instruction)) {\n      this.instructionSet[instruction].Execute(this);\n    } else {\n      throw new IllegalInstructionException(this.pcLocation, instruction, String.fromCharCode(instruction))\n    }\n\n    this.SkipNext();\n  }\n\n  SkipNext(): void {\n    this.pcLocation = this.memory.PointerArithmetics.Move(\n      this.pcLocation,\n      this.pcDirection\n    );\n  }\n\n  StringModeToggle(): void {\n    this.isStringMode = !this.isStringMode;\n  }\n\n  ReadMemory(ptr: Pointer): number {\n    return this.memory.Read(ptr);\n  }\n\n  WriteMemory(ptr: Pointer, value: number): void {\n    this.memory.Write(ptr, value);\n  }\n\n  WriteIO(symbol: string): void {\n    this.io.OutputWrite(symbol);\n  }\n\n  ReadCharacter(): string {\n    return this.io.InputReadCharacter();\n  }\n\n  ReadNumber(): number {\n    return this.io.InputReadNumber();\n  }\n\n  Halt(): void {\n    this.isHalted = true;\n  }\n\n  get IsHalted(): boolean {\n    return this.isHalted;\n  }\n\n  private KnownInstruction(instruction: number): boolean {\n    return this.instructionSet[instruction] !== undefined;\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Add implements Instruction {\n  get Code(): string {\n    return '+';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(cpu.StackPop() + cpu.StackPop());\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Bridge implements Instruction {\n  get Code(): string {\n    return '#';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.SkipNext();\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Divide implements Instruction {\n  get Code(): string {\n    return '/';\n  }\n\n  Execute(cpu: CPU): void {\n    const a = cpu.StackPop();\n    const b = cpu.StackPop();\n\n    cpu.StackPush(Math.trunc(b / a));\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class EndProgramm implements Instruction {\n  get Code(): string {\n    return '@';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.Halt();\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class GreatherThan implements Instruction {\n  get Code(): string {\n    return '`';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(+(cpu.StackPop() < cpu.StackPop()));\n  }\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class HoriontalIf implements Instruction {\n  get Code(): string {\n    return '_';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(\n      cpu.StackPop() === 0 ? PCDirection.Right : PCDirection.Left\n    );\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class InputASCII implements Instruction {\n  get Code(): string {\n    return '~';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(cpu.ReadCharacter().charCodeAt(0));\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class InputInteger implements Instruction {\n  get Code(): string {\n    return '&';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(cpu.ReadNumber());\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class MemoryRead implements Instruction {\n  get Code(): string {\n    return 'g';\n  }\n\n  Execute(cpu: CPU): void {\n    const y = cpu.StackPop();\n    const x = cpu.StackPop();\n\n    cpu.StackPush(cpu.ReadMemory({ x: x, y: y }));\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class MemoryWrite implements Instruction {\n  get Code(): string {\n    return 'p';\n  }\n\n  Execute(cpu: CPU): void {\n    const y = cpu.StackPop();\n    const x = cpu.StackPop();\n    const value = cpu.StackPop();\n\n    cpu.WriteMemory({ x: x, y: y }, value);\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Modulo implements Instruction {\n  get Code(): string {\n    return '%';\n  }\n\n  Execute(cpu: CPU): void {\n    const a = cpu.StackPop();\n    const b = cpu.StackPop();\n\n    cpu.StackPush(b % a);\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Multiply implements Instruction {\n  get Code(): string {\n    return '*';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(cpu.StackPop() * cpu.StackPop());\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Negation implements Instruction {\n  get Code(): string {\n    return '!';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(+(cpu.StackPop() === 0));\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class NoOperation implements Instruction {\n  get Code(): string {\n    return ' ';\n  }\n  Execute(_cpu: CPU): void {}\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PCDirectionDown implements Instruction {\n  get Code(): string {\n    return 'v';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(PCDirection.Down);\n  }\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PCDirectionLeft implements Instruction {\n  get Code(): string {\n    return '<';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(PCDirection.Left);\n  }\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PCDirectionRandom implements Instruction {\n  get Code(): string {\n    return '?';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(\n      Math.floor((Math.random() * Object.keys(PCDirection).length) >> 1)\n    );\n  }\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PCDirectionRight implements Instruction {\n  get Code(): string {\n    return '>';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(PCDirection.Right);\n  }\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PCDirectionUp implements Instruction {\n  get Code(): string {\n    return '^';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(PCDirection.Up);\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class StackPop implements Instruction {\n  get Code(): string {\n    return '$';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPop();\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PrintASCII implements Instruction {\n  get Code(): string {\n    return ',';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.WriteIO(String.fromCharCode(cpu.StackPop()));\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PrintInteger implements Instruction {\n  get Code(): string {\n    return '.';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.WriteIO(cpu.StackPop().toString() + ' ');\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class StackDuplicate implements Instruction {\n  get Code(): string {\n    return ':';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackDuplicate();\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class StackPushDigit implements Instruction {\n  constructor(private digit: number) {}\n\n  get Code(): string {\n    return this.digit.toString();\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(this.digit);\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class StackSwap implements Instruction {\n  get Code(): string {\n    return '\\\\';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackSwap();\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Subtract implements Instruction {\n  get Code(): string {\n    return '-';\n  }\n  Execute(cpu: CPU): void {\n    const a = cpu.StackPop();\n    const b = cpu.StackPop();\n    cpu.StackPush(b - a);\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class ToggleStringMode implements Instruction {\n  get Code(): string {\n    return '\"';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StringModeToggle();\n  }\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class VerticalIf implements Instruction {\n  get Code(): string {\n    return '|';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(cpu.StackPop() === 0 ? PCDirection.Down : PCDirection.Up);\n  }\n}\n","export class IOPort {\n  private input: string[] = [];\n\n  private output: string[] = [];\n\n  InputWrite(data: string): void {\n    this.input.push(...data);\n  }\n\n  InputReadCharacter(): string {\n    if (this.input.length === 0) {\n      throw new Error('Failed to read from IO port');\n    }\n\n    return this.input.shift()!;\n  }\n\n  InputReadNumber(): number {\n    let nonSpaceIdx = this.input.findIndex(x => x !== ' ');\n\n    if (['-', '+'].includes(this.input[nonSpaceIdx])) {\n      ++nonSpaceIdx;\n    }\n\n    let numberEnd = nonSpaceIdx;\n\n    for (\n      let char = this.input[numberEnd];\n      numberEnd < this.input.length && char >= '0' && char <= '9';\n      char = this.input[++numberEnd]);\n\n\n    if (numberEnd === nonSpaceIdx) {\n      throw new Error('Failed to read number from IO port');\n    }\n\n    return Number.parseInt(this.input.splice(0, numberEnd).join(''));\n  }\n\n  get HasInput(): boolean {\n    return this.input.length > 0;\n  }\n\n  OutputWrite(data: string): void {\n    this.output.push(...data);\n  }\n\n  OutputRead(): string {\n    if (this.output.length === 0) {\n      throw new Error('Failed to read from IO port');\n    }\n\n    return this.output.shift()!;\n  }\n\n  get HasOutput(): boolean {\n    return this.output.length > 0;\n  }\n}\n","import { CPU } from './CPU/CPU';\nimport { CPUImpl } from './CPU/CPUImpl';\nimport { Debugger } from './Debugger';\nimport {\n  Add,\n  Bridge,\n  Divide,\n  EndProgramm,\n  GreatherThan,\n  HoriontalIf,\n  InputASCII,\n  InputInteger,\n  MemoryWrite,\n  Modulo,\n  Multiply,\n  Negation,\n  PCDirectionDown,\n  PCDirectionLeft,\n  PCDirectionRandom,\n  PCDirectionRight,\n  PCDirectionUp,\n  PrintASCII,\n  PrintInteger,\n  StackDuplicate,\n  StackPop,\n  StackPushDigit,\n  StackSwap,\n  Subtract,\n  ToggleStringMode,\n  VerticalIf,\n  MemoryRead,\n  NoOperation\n} from './instructions';\nimport { Instruction } from './instructions/Instruction';\nimport { IOPort } from './IOPort';\nimport { Memory, Pointer } from './memory/Memory';\nimport { MemoryLimit } from './memory/MemoryLimit';\nimport { Profiler } from './Profiler';\n\nexport type MemoryWriteInterceptor = (ptr: Pointer, value: number) => void;\nexport type MemoryInterceptorReleaser = () => void;\n\nclass MemoryWriteInstructionInterceptor implements Instruction {\n  constructor(\n    private origin: MemoryWrite,\n    private interceptor: MemoryWriteInterceptor) { }\n\n  get Code(): string {\n    return this.origin.Code;\n  }\n\n  Execute(cpu: CPU): void {\n    const [value, x, y] = cpu.Stack.slice(-3);\n\n    this.interceptor({ x: x, y: y }, value);\n\n    this.origin.Execute(cpu);\n  }\n}\n\nexport class Befunge {\n  private io: IOPort;\n\n  private cpu: CPU;\n\n  private instructionsExecuted = 0;\n\n  private memoryWriteInterceptors: MemoryWriteInterceptor[] = [];\n\n  constructor(private memoryLimit: MemoryLimit, private memory: Memory) {\n    this.io = new IOPort();\n    this.cpu = new CPUImpl(this.memory, this.io, [\n      new Add(),\n      new Subtract(),\n      new Multiply(),\n      new Divide(),\n      new Modulo(),\n      new Negation(),\n      new GreatherThan(),\n      new PCDirectionRight(),\n      new PCDirectionLeft(),\n      new PCDirectionDown(),\n      new PCDirectionUp(),\n      new PCDirectionRandom(),\n      new HoriontalIf(),\n      new VerticalIf(),\n      new ToggleStringMode(),\n      new StackDuplicate(),\n      new StackSwap(),\n      new StackPop(),\n      new PrintInteger(),\n      new PrintASCII(),\n      new Bridge(),\n      new MemoryWriteInstructionInterceptor(\n        new MemoryWrite(),\n        (ptr: Pointer, value: number) => this.OnMemoryWrite(ptr, value)),\n      new MemoryRead(),\n      new InputInteger(),\n      new InputASCII(),\n      new EndProgramm(),\n      new NoOperation(),\n      ...[0, 1, 2, 3, 4, 5, 6, 7, 8, 9].map(d => new StackPushDigit(d))\n    ]);\n  }\n\n  LoadExecutable(code: string): void {\n    if (this.IsMemoryLimitDynamic) {\n      const memoryRequirements = Befunge.ExecutableMemoryLimit(code);\n\n      if (\n        memoryRequirements.Width > this.memoryLimit.Width ||\n        memoryRequirements.Height > this.memoryLimit.Height\n      ) {\n        this.memory.Resize(memoryRequirements);\n      }\n    }\n\n    const ptr: Pointer = { x: 0, y: 0 };\n\n    for (const symbol of code) {\n      if (symbol === '\\n') {\n        ptr.x = 0;\n        ++ptr.y;\n      } else {\n        this.memory.Write(ptr, symbol.charCodeAt(0));\n        ++ptr.x;\n      }\n    }\n  }\n\n  SetInput(input: string): void {\n    this.io.InputWrite(input);\n  }\n\n  /**\n   * Execute code loaded by `LoadExecutable`.\n   * Second call to `Run` or `RunFor` with same instance is forbidden, you should create new instance to each execution\n   */\n  Run(): void {\n    while (!this.cpu.IsHalted) {\n      this.cpu.ExecuteNext();\n    }\n  }\n\n  /**\n   * Execute code loaded by `LoadExecutable` until end or timeout.\n   * Second call to `Run` or `RunFor` with same instance is forbidden, you should create new instance to each execution\n   * @param timeout timeout\n   * @returns true if the program successfully finished, false if it terminated due to the timeout\n   */\n  RunFor(timeout: number): boolean {\n    const startTime = Date.now();\n    const instructionsSkipPerTimeoutCheck = 100000;\n\n    for (this.instructionsExecuted = 0;\n      !this.cpu.IsHalted && (this.instructionsExecuted % instructionsSkipPerTimeoutCheck !== 0 || Date.now() - startTime < timeout);\n      ++this.instructionsExecuted) {\n      this.cpu.ExecuteNext();\n    }\n\n    return this.IsHalted;\n  }\n\n  RunNext(): void {\n    this.cpu.ExecuteNext();\n  }\n\n  CollectOutput(): string {\n    let output = '';\n\n    while (this.io.HasOutput) {\n      output += this.io.OutputRead();\n    }\n\n    return output;\n  }\n\n  CollectOutputUntil(maxLength: number): string {\n    let output = '';\n\n    for (let readed = 0; this.io.HasOutput && readed < maxLength; ++readed) {\n      output += this.io.OutputRead();\n    }\n\n    return output;\n  }\n\n  AttachDebugger(d: Debugger): void {\n    d.AttachCPU(this.cpu);\n  }\n\n  AttachProfiler(profiler: Profiler): void {\n    profiler.AttachCPU(this.cpu);\n  }\n\n  AddMemoryWriteInterceptor(interceptor: MemoryWriteInterceptor): MemoryInterceptorReleaser {\n    this.memoryWriteInterceptors.push(interceptor);\n\n    return () => {\n      const rmIdx = this.memoryWriteInterceptors.indexOf(interceptor);\n\n      if (rmIdx !== -1) {\n        this.memoryWriteInterceptors.splice(rmIdx, 1);\n      }\n    };\n  }\n\n  private OnMemoryWrite(ptr: Pointer, value: number): void {\n    this.memoryWriteInterceptors.forEach(fn => fn(ptr, value));\n  }\n\n  get NextInstruction() {\n    return this.cpu.NextInstructionCode;\n  }\n\n  get IsHalted(): boolean {\n    return this.cpu.IsHalted;\n  }\n\n  get InstructionsExecuted(): number {\n    return this.instructionsExecuted;\n  }\n\n  get IP(): Pointer {\n    return this.cpu.PC.Location;\n  }\n\n  private get IsMemoryLimitDynamic(): boolean {\n    return (\n      this.memoryLimit.Width === Number.POSITIVE_INFINITY ||\n      this.memoryLimit.Height === Number.POSITIVE_INFINITY\n    );\n  }\n\n  private static ExecutableMemoryLimit(code: string): MemoryLimit {\n    let maxRowLength = 0;\n    let maxColumnLength = 0;\n    let rowLength = 0;\n\n    for (const instruction of code) {\n      if (instruction === '\\n') {\n        if (maxRowLength < rowLength) {\n          maxRowLength = rowLength;\n        }\n\n        rowLength = 0;\n        ++maxColumnLength;\n      } else {\n        ++rowLength;\n      }\n    }\n\n    return { Width: maxRowLength, Height: maxColumnLength };\n  }\n}\n","import { CPU, PCDirection } from './CPU/CPU';\nimport { Pointer } from './memory/Memory';\n\nexport type BreakpointReleaser = () => void;\n\nexport interface PcLocationCondition {\n  Location: Pointer;\n  Direction?: PCDirection;\n}\n\ninterface StackCondition {\n  Size?: ValueCondition;\n  Value?: ValueCondition;\n}\n\ninterface ValueCondition {\n  Condition: ComparsionCondition;\n  Value: number;\n}\n\nexport enum ComparsionCondition {\n  Less,\n  LessEqual,\n  Greater,\n  GreaterEqual,\n  Equal\n}\n\nexport interface BreakpointCondition {\n  PC?: PcLocationCondition;\n  Stack?: StackCondition;\n}\n\nexport class Debugger {\n  private target: CPU | null = null;\n\n  private pcLocationBrk = new Map<number, Map<number, BreakpointCondition[]>>();\n  private stackBrk: BreakpointCondition[] = [];\n\n  private noDebug = false;\n\n  AttachCPU(cpu: CPU): void {\n    this.target = cpu;\n  }\n\n  get IsHalted(): boolean {\n    return this.target?.IsHalted ?? true;\n  }\n\n  RunNext(): BreakpointCondition[] {\n    if (!this.target?.IsHalted) {\n      if (this.noDebug) {\n        this.noDebug = false;\n      } else {\n        const triggered = this.BreakpointsCheck();\n\n        if (triggered.length > 0) {\n          this.noDebug = true;\n          return triggered;\n        }\n      }\n\n      this.target?.ExecuteNext();\n    }\n\n    return [];\n  }\n\n  RunFor(timeout: number): BreakpointCondition[] | null {\n    const startTime = Date.now();\n    const instructionsSkipPerTimeoutCheck = 100000;\n\n    let breakpoints: BreakpointCondition[] = [];\n\n    for (let instructionsExecuted = 0;\n      !this.target?.IsHalted &&\n      breakpoints.length === 0 &&\n      (instructionsExecuted % instructionsSkipPerTimeoutCheck !== 0 || Date.now() - startTime < timeout);\n      ++instructionsExecuted) {\n      breakpoints = this.RunNext();\n    }\n\n    return breakpoints.length > 0 ? breakpoints : null;\n  }\n\n  SetBreakpoint(brk: BreakpointCondition): BreakpointReleaser {\n    if (brk.PC) {\n      let column = this.pcLocationBrk.get(brk.PC.Location.x);\n\n      if (!column) {\n        column = new Map<number, BreakpointCondition[]>();\n        column.set(brk.PC.Location.y, []);\n\n        this.pcLocationBrk.set(brk.PC.Location.x, column);\n      }\n\n      let row = column.get(brk.PC.Location.y);\n\n      if (row === undefined) {\n        row = [];\n        column.set(brk.PC.Location.y, row);\n      }\n\n      row.push(brk);\n    }\n\n    if (brk.Stack && (brk.Stack.Size || brk.Stack.Value)) {\n      this.stackBrk.push(brk);\n    }\n\n    return () => this.BreakpointReleaser(brk);\n  }\n\n  get PCBreakpoints(): PcLocationCondition[] {\n    return [...this.pcLocationBrk.values()]\n      .flatMap(x => [...x.values()])\n      .flatMap(x => [...x])\n      .map(x => x.PC!);\n  }\n\n  get Stack(): number[] {\n    return this.target?.Stack ?? [];\n  }\n\n  private BreakpointReleaser(brk: BreakpointCondition): void {\n    if (brk.PC) {\n      const column = this.pcLocationBrk.get(brk.PC.Location.x);\n      const brks = column?.get(brk.PC.Location.y);\n\n      if (brks) {\n        if (brks.length === 1) {\n          column?.delete(brk.PC.Location.y);\n        } else {\n          const toRemove = brks.indexOf(brk);\n\n          if (toRemove >= 0) {\n            brks.splice(toRemove, 1);\n          }\n        }\n      }\n    }\n\n    if (brk.Stack) {\n      const toRemove = this.stackBrk.indexOf(brk);\n\n      if (toRemove >= 0) {\n        this.stackBrk.splice(toRemove, 1);\n      }\n    }\n  }\n\n  private BreakpointsCheck(): BreakpointCondition[] {\n    return [...this.BreakpointCheckPC(), ...this.BreakpointCheckStack()];\n  }\n\n  private BreakpointCheckPC(): BreakpointCondition[] {\n    if (this.target === null) {\n      return [];\n    }\n\n    const column = this.pcLocationBrk.get(this.target.PC.Location.x);\n\n    if (!column) {\n      return [];\n    }\n\n    const brks = column.get(this.target.PC.Location.y);\n\n    return (\n      brks?.filter(brk => {\n        if (brk) {\n          if (brk.PC?.Direction === undefined) {\n            return true;\n          } else {\n            return brk.PC.Direction === this.target!.PC.Direction;\n          }\n        } else {\n          return false;\n        }\n      }) ?? []\n    );\n  }\n\n  private BreakpointCheckStack(): BreakpointCondition[] {\n    if (this.target === null) {\n      return [];\n    }\n\n    return this.stackBrk.filter(brk => {\n      if (brk.Stack?.Size?.Value !== this.target?.Stack.length) {\n        return false;\n      }\n\n      if (brk.Stack?.Value) {\n        if (this.target?.Stack.length === 0) {\n          return false;\n        }\n\n        const top = this.target!.Stack[this.target!.Stack.length - 1];\n\n        switch (brk.Stack.Value.Condition) {\n          case ComparsionCondition.Equal:\n            return brk.Stack.Value.Value === top;\n          case ComparsionCondition.Less:\n            return brk.Stack.Value.Value < top;\n          case ComparsionCondition.LessEqual:\n            return brk.Stack.Value.Value <= top;\n          case ComparsionCondition.Greater:\n            return brk.Stack.Value.Value > top;\n          case ComparsionCondition.GreaterEqual:\n            return brk.Stack.Value.Value >= top;\n        }\n      }\n\n      return true;\n    });\n  }\n}\n","import { ArrayHelper } from \"../ArrayHelper\";\nimport { Array2D, Index2D } from \"../containers/Array2D\";\nimport { EnumSize } from \"../EnumSize\";\n\nimport { CPU, PCDirection } from \"./CPU/CPU\";\nimport { MemoryLimit } from \"./memory/MemoryLimit\";\n\nexport class CellHitsFlow {\n    private stats: Array2D<number>;\n\n    constructor() {\n        const directionsCount = EnumSize(PCDirection);\n        this.stats = Array2D.WithProvider(directionsCount, directionsCount, () => 0);\n    }\n\n    Update(index: Index2D, updater: (value: number) => number): void {\n        this.stats.Update(index, updater);\n    }\n\n    get Max(): number {\n        return ArrayHelper.Max(this.stats.RawRef, (a, b) => a < b)\n    }\n\n    get Total(): number {\n        let totalHits = 0;\n        this.stats.ForEach(x => totalHits += x);\n\n        return totalHits;\n    }\n\n    Normalized(max: number): number[] {\n        return this.stats.Map(x => x / max).RawRef;\n    }\n}\n\nexport class Profiler {\n    private target: CPU | null = null;\n\n    constructor(private memoryLimit: MemoryLimit) { }\n\n    AttachCPU(cpu: CPU): void {\n        this.target = cpu;\n    }\n\n    CellHeatmapFor(timeout: number): Array2D<CellHitsFlow> | null {\n        if (this.target === null) {\n            throw new Error('Attempting to gather heatmap without attached any cpu. Call AttachCPU first.');\n        }\n\n        const startTime = Date.now();\n        const instructionsSkipPerTimeoutCheck = 100000;\n\n        const heatmap = Array2D.WithProvider(\n            this.memoryLimit.Width,\n            this.memoryLimit.Height,\n            () => new CellHitsFlow());\n\n        for (let instructionsExecuted = 0;\n            !this.target.IsHalted && (instructionsExecuted % instructionsSkipPerTimeoutCheck !== 0 || Date.now() - startTime < timeout);\n            ++instructionsExecuted) {\n\n            const hitsFlow = heatmap.Get({\n                column: this.target.PC.Location.x,\n                row: this.target.PC.Location.y\n            });\n\n            const from = this.target.PC.Direction;\n\n            this.target.ExecuteNext();\n\n            const to = this.target.PC.Direction;\n\n            hitsFlow.Update({\n                column: from,\n                row: to\n            }, x => x + 1);\n        }\n\n\n        return this.target.IsHalted ? heatmap : null;\n    }\n}\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"./AppSettings\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Befunge } from \"@/lib/befunge/Befunge\";\nimport { Debugger } from \"@/lib/befunge/Debugger\";\nimport { Memory } from \"@/lib/befunge/memory/Memory\";\nimport { MemoryLimit } from \"@/lib/befunge/memory/MemoryLimit\";\nimport { Profiler } from \"@/lib/befunge/Profiler\";\n\n@injectable()\nexport class BefungeToolbox {\n    private interpreter!: Befunge;\n    private debugger!: Debugger;\n    private profiler!: Profiler;\n\n    constructor(@inject(AppSettings) private settings: AppSettings) { }\n\n    get Interpreter(): Befunge {\n        return this.interpreter;\n    }\n\n    get Debugger(): Debugger {\n        return this.debugger;\n    }\n\n    get Profiler(): Profiler {\n        return this.profiler;\n    }\n\n    Reset(memoryLimit: MemoryLimit, memory: Memory): void {\n        this.interpreter = new Befunge(memoryLimit, memory);\n\n        this.debugger = new Debugger();\n        this.interpreter.AttachDebugger(this.debugger);\n\n        this.profiler = new Profiler(this.settings.MemoryLimit);\n        this.interpreter.AttachProfiler(this.profiler);\n    }\n}\n\nInversify.bind(BefungeToolbox).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"../AppSettings\";\nimport { BefungeToolbox } from \"../BefungeToolbox\";\nimport { CodeEditorService } from \"../CodeEditor/CodeEditorService\";\nimport { TooltipPosition, TooltipReleaser } from \"../CodeEditor/CodeEditorTooltipService\";\nimport { EditableTarget } from \"../CodeEditor/EditableTarget\";\nimport { DebugAction, PCDirectionCondition } from \"../Overlay/DebugControls\";\nimport { OverlayService } from \"../Overlay/OverlayService\";\nimport { SourceCodeMemory } from \"../SourceCodeMemory\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { BreakpointCondition, BreakpointReleaser, PcLocationCondition } from \"@/lib/befunge/Debugger\";\nimport { Pointer } from \"@/lib/befunge/memory/Memory\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\n\ninterface CellBreakpointController extends PcLocationCondition {\n    releaser: BreakpointReleaser | null;\n}\n\n@injectable()\nexport class DebuggingService {\n    private debugMode = false;\n    private breakpoints: CellBreakpointController[] = [];\n    private activeCellBreakpoints: PcLocationCondition[] = [];\n    private activeBreakpointColor: Rgb = [0.8980392156862745, 0.2235294117647059, 0.20784313725490197];\n    private inactiveBreakpointColor: Rgb = [0.9764705882352941, 0.6588235294117647, 0.1450980392156863];\n    private memoryWritesTooltipsReleasers: TooltipReleaser[] = [];\n\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(OverlayService) private overlay: OverlayService,\n        @inject(CodeEditorService) private codeEditor: CodeEditorService,\n        @inject(BefungeToolbox) private befungeToolbox: BefungeToolbox,\n        @inject(SourceCodeMemory) private editorSourceCode: SourceCodeMemory,\n        @inject(EditableTarget) private editableCell: EditableTarget\n    ) {\n        this.overlay.DebugControls.Debug.Attach((action: DebugAction) => this.DebugCodeAction(action));\n        this.overlay.DebugControls.CellBreakopint.Attach((cond: PCDirectionCondition) => this.OnCellBreakpointAction(cond));\n        this.overlay.DebugControls.CellBreakpointDelete.Attach(() => this.OnCellBreakpointDelete());\n    }\n\n    OnSelect(prevEditableCell: Vec2): void {\n        const hasBrk = this.breakpoints\n            .some(brk => brk.Location.x === this.codeEditor.EditableCell.x && brk.Location.y === this.codeEditor.EditableCell.y);\n\n        this.overlay.DebugControls.DeactivateButton = hasBrk;\n\n        if (prevEditableCell.x !== this.codeEditor.EditableCell.x || prevEditableCell.y !== this.codeEditor.EditableCell.y) {\n            if (this.activeCellBreakpoints.some(brk => brk.Location.x === prevEditableCell.x && brk.Location.y === prevEditableCell.y)) {\n                this.codeEditor.Select(prevEditableCell.x, prevEditableCell.y, this.activeBreakpointColor);\n            } else if (this.breakpoints.some(brk => brk.Location.x === prevEditableCell.x && brk.Location.y === prevEditableCell.y)) {\n                this.codeEditor.Select(prevEditableCell.x, prevEditableCell.y, this.inactiveBreakpointColor);\n            }\n        }\n    }\n\n    OnCellInput(prevEditableCell: Vec2): void {\n        if (this.breakpoints.some(brk => brk.Location.x === prevEditableCell.x && brk.Location.y === prevEditableCell.y)) {\n            this.codeEditor.Select(prevEditableCell.x, prevEditableCell.y, this.inactiveBreakpointColor);\n        }\n    }\n\n    private RunNext(action: DebugAction): void {\n        if (!this.DebugMode) {\n            this.befungeToolbox.Reset(this.settings.MemoryLimit, this.editorSourceCode.Clone());\n            this.befungeToolbox.Interpreter.SetInput(this.overlay.IOControls.Input);\n            this.befungeToolbox.Interpreter.AddMemoryWriteInterceptor((ptr: Pointer, value: number) => this.OnMemoryWrite(ptr, value));\n\n            this.UploadBreakpointsToDebugger();\n\n            this.DebugMode = true;\n            this.overlay.DebugControls.DebugMode = true;\n\n            this.overlay.IOControls.Output = '';\n        }\n\n        const debug = this.befungeToolbox.Debugger;\n        const interpreter = this.befungeToolbox.Interpreter;\n\n\n        this.activeCellBreakpoints.forEach(brk => {\n            if (this.editableCell.IsSingleCell &&\n                brk.Location.x === this.codeEditor.EditableCell.x &&\n                brk.Location.y === this.codeEditor.EditableCell.y) {\n                this.codeEditor.Select(brk.Location.x, brk.Location.y, this.settings.Visual.editableCellStyle);\n            } else {\n                this.codeEditor.Unselect(brk.Location.x, brk.Location.y);\n            }\n        });\n\n\n        let executionResult: BreakpointCondition[] | null;\n        try {\n            if (action === DebugAction.RunNextBreakpoint) {\n                executionResult = debug.RunFor(this.settings.ExecutionTimeout);\n            } else if (action === DebugAction.RunNextInstruction) {\n                executionResult = debug.RunNext();\n                if (executionResult.length > 0) {\n                    executionResult = debug.RunNext();\n                }\n            } else {\n                throw new Error('Unexpected debug action');\n            }\n        } catch (e) {\n            if (e instanceof Error) {\n                this.overlay.Snackbar.ShowError(e.message)\n            }\n\n            this.Interrupt();\n            return;\n        }\n\n\n        let breakpoints: BreakpointCondition[] = [];\n\n        if (executionResult === null) {\n            if (!debug.IsHalted) {\n                this.overlay.Snackbar.ShowWarning('Terminated due timeout');\n\n                this.overlay.StackControls.Stack = [];\n            }\n\n            this.DebugMode = false;\n            this.overlay.DebugControls.DebugMode = false;\n            this.activeCellBreakpoints = [];\n\n            this.HideMemoryWriteTooltips();\n        } else {\n            breakpoints = executionResult;\n        }\n\n        if (action === DebugAction.RunNextBreakpoint && breakpoints.length > 0) {\n            this.RestoreCellBreakpointsSelection();\n\n            this.activeCellBreakpoints = [];\n            for (const brk of breakpoints) {\n                if (brk.PC) {\n                    this.activeCellBreakpoints.push(brk.PC);\n                    this.codeEditor.Select(brk.PC.Location.x, brk.PC.Location.y, this.activeBreakpointColor);\n                }\n            }\n\n            this.overlay.StackControls.Stack = debug.Stack;\n            this.overlay.StackControls.ScrollToTop();\n            this.overlay.IOControls.Output += interpreter.CollectOutputUntil(this.settings.MaxOutputLength);\n        } else {\n            this.RestoreCellBreakpointsSelection();\n\n            this.activeCellBreakpoints = [{ Location: { x: interpreter.IP.x, y: interpreter.IP.y } }];\n\n            this.codeEditor.Select(interpreter.IP.x, interpreter.IP.y, this.activeBreakpointColor);\n\n            this.overlay.StackControls.Stack = debug.Stack;\n            this.overlay.StackControls.ScrollToTop();\n            this.overlay.IOControls.Output += interpreter.CollectOutputUntil(this.settings.MaxOutputLength);\n        }\n\n        if (debug.IsHalted) {\n            this.DebugMode = false;\n            this.overlay.DebugControls.DebugMode = false;\n\n            this.activeCellBreakpoints.forEach(brk => this.codeEditor.Unselect(brk.Location.x, brk.Location.y));\n            this.activeCellBreakpoints = [];\n\n            this.overlay.IOControls.Output += interpreter.CollectOutputUntil(this.settings.MaxOutputLength);\n\n            this.RestoreCellBreakpointsSelection();\n\n            this.HideMemoryWriteTooltips();\n\n            this.overlay.Snackbar.ShowSuccess(`Completed`);\n\n            this.overlay.StackControls.Stack = [];\n        }\n    }\n\n    private Interrupt(): void {\n        this.DebugMode = false;\n        this.overlay.DebugControls.DebugMode = false;\n\n        this.activeCellBreakpoints.forEach(brk => this.codeEditor.Unselect(brk.Location.x, brk.Location.y));\n        this.activeCellBreakpoints = [];\n\n        this.RestoreCellBreakpointsSelection();\n\n\n        this.HideMemoryWriteTooltips();\n\n        this.overlay.StackControls.Stack = [];\n    }\n\n    private get DebugMode(): boolean {\n        return this.debugMode;\n    }\n\n    private set DebugMode(debug: boolean) {\n        this.debugMode = debug;\n\n        this.overlay.StackControls.Visible = debug;\n        this.overlay.EditControls.Disable = debug;\n    }\n\n    private DebugCodeAction(action: DebugAction): void {\n        if (action === DebugAction.RunNextBreakpoint && this.breakpoints.length === 0 && !this.debugMode) {\n            this.RunNext(DebugAction.RunNextInstruction);\n        } else if (action === DebugAction.Interrupt) {\n            this.Interrupt();\n        } else {\n            this.RunNext(action);\n        }\n    }\n\n    private UploadBreakpointsToDebugger(): void {\n        this.breakpoints.forEach(brk => {\n            brk.releaser = this.SetCellBreakpoint(brk);\n        });\n    }\n\n    private SetCellBreakpoint(brk: PcLocationCondition): BreakpointReleaser {\n        const releaser = this.befungeToolbox.Debugger.SetBreakpoint({ PC: brk });\n\n        this.codeEditor.Select(brk.Location.x, brk.Location.y, this.inactiveBreakpointColor);\n\n        return () => {\n            releaser();\n            this.codeEditor.Unselect(brk.Location.x, brk.Location.y);\n        };\n    }\n\n    private OnCellBreakpointAction(cond: PCDirectionCondition): void {\n        const existIdx = this.breakpoints\n            .findIndex(brk => brk.Location.x === this.codeEditor.EditableCell.x && brk.Location.y === this.codeEditor.EditableCell.y);\n\n        const condition: PcLocationCondition = {\n            Location: { ...this.codeEditor.EditableCell },\n            ...cond\n        };\n\n        if (existIdx === -1) {\n            const releaser = this.DebugMode ? this.SetCellBreakpoint(condition) : null;\n            this.breakpoints.push({ ...condition, releaser });\n\n            this.codeEditor.Select(condition.Location.x, condition.Location.y, this.inactiveBreakpointColor);\n\n            this.overlay.DebugControls.DeactivateButton = true;\n        } else {\n            const releaser = this.DebugMode ? this.SetCellBreakpoint(condition) : null;\n            this.breakpoints[existIdx] = { ...condition, releaser };\n        }\n    }\n\n    private OnCellBreakpointDelete(): void {\n        const existIdx = this.breakpoints\n            .findIndex(brk => brk.Location.x === this.codeEditor.EditableCell.x && brk.Location.y === this.codeEditor.EditableCell.y);\n\n        if (existIdx !== -1) {\n            const brkRemove = this.breakpoints[existIdx];\n\n            if (brkRemove.releaser !== null) {\n                brkRemove.releaser();\n            }\n\n            this.breakpoints.splice(existIdx, 1);\n\n            this.codeEditor.Select(brkRemove.Location.x, brkRemove.Location.y, [0.21568627450980393, 0.2784313725490196, 0.30980392156862746]);\n\n            this.overlay.DebugControls.DeactivateButton = false;\n        }\n    }\n\n    private RestoreCellBreakpointsSelection(): void {\n        for (const brk of this.befungeToolbox.Debugger.PCBreakpoints) {\n            this.codeEditor.Select(brk.Location.x, brk.Location.y, this.inactiveBreakpointColor);\n        }\n    }\n\n    private OnMemoryWrite(ptr: Pointer, value: number): void {\n        const releaser = this.codeEditor.Tooltip(\n            ptr.x,\n            ptr.y,\n            `${value.toString()}(${String.fromCharCode(value)})`,\n            TooltipPosition.RightTop);\n\n        this.memoryWritesTooltipsReleasers.push(releaser);\n    }\n\n    private HideMemoryWriteTooltips(): void {\n        this.memoryWritesTooltipsReleasers.forEach(x => x());\n    }\n}\n\nInversify.bind(DebuggingService).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"../AppSettings\";\nimport { BefungeToolbox } from \"../BefungeToolbox\";\nimport { OverlayService } from \"../Overlay/OverlayService\";\nimport { SourceCodeMemory } from \"../SourceCodeMemory\";\n\nimport { Inversify } from \"@/Inversify\";\n\n@injectable()\nexport class ExecutionService {\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(OverlayService) private overlay: OverlayService,\n        @inject(BefungeToolbox) private befungeToolbox: BefungeToolbox,\n        @inject(SourceCodeMemory) private editorSourceCode: SourceCodeMemory\n    ) {\n        this.overlay.DebugControls.Execute.Attach(() => this.Execute());\n    }\n\n    private Execute(): void {\n        this.befungeToolbox.Reset(this.settings.MemoryLimit, this.editorSourceCode.Clone());\n\n        this.befungeToolbox.Interpreter.SetInput(this.overlay.IOControls.Input);\n\n        try {\n            if (this.befungeToolbox.Interpreter.RunFor(this.settings.ExecutionTimeout)) {\n                this.overlay.Snackbar.ShowSuccess(`Ok\\nInstructions executed: ${this.befungeToolbox.Interpreter.InstructionsExecuted}`, 1000);\n                this.overlay.IOControls.SwitchTab(false);\n            } else {\n                this.overlay.Snackbar.ShowWarning('Terminated due timeout');\n            }\n\n            this.overlay.IOControls.Output = this.befungeToolbox.Interpreter.CollectOutputUntil(this.settings.MaxOutputLength);\n        } catch (e) {\n            if (e instanceof Error) {\n                this.overlay.Snackbar.ShowError(e.message)\n            }\n        }\n    }\n}\n\nInversify.bind(ExecutionService).toSelf().inSingletonScope();\n","export default \"#version 300 es\\nprecision highp float;\\nprecision highp int;\\n\\nconst float PI = 3.1415926535897932384626433832795f;\\nconst float circleRadius = 0.03f;\\nconst float sector = 1.f / 3.f;\\nconst float subsector = 1.f / 9.f;\\n\\nconst float lowSpeed = 1.f / 5.f;\\nconst float mediumSpeed = 1.f / 2.f;\\nconst float highSpeed = 1.f;\\nconst float speed[4] = float[](0.f, lowSpeed, mediumSpeed, highSpeed);\\n\\nin vec2 v_uvCoord;\\nin vec4 v_color;\\n/*\\n* Each 2 bits describe frequency of hits flow in an direction.\\n* RR, DR, LR, UR,\\n* RD, DD, LD, UD,\\n* RL, DL, LL, UL,\\n* RU, DU, LU, UU\\n*/\\nflat in uint v_hitsFlow;\\n\\nuniform float u_time;\\n\\nout vec4 out_color;\\n\\nvoid main() {\\n    if(v_color.a == 0.0f) {\\n        discard;\\n    }\\n\\n    float columnWidth = 1.f / 32.f;\\n    uint bitIdx = uint(floor(v_uvCoord.x / columnWidth));\\n    float bit = float(v_hitsFlow >> bitIdx & uint(1));\\n    out_color = vec4(bit, 0, 0, 0.9f);\\n\\n    uint rightRight = v_hitsFlow & uint(3);\\n    uint downRight = v_hitsFlow >> 2 & uint(3);\\n    uint leftRight = v_hitsFlow >> 4 & uint(3);\\n    uint upRight = v_hitsFlow >> 6 & uint(3);\\n    uint rightDown = v_hitsFlow >> 8 & uint(3);\\n    uint downDown = v_hitsFlow >> 10 & uint(3);\\n    uint leftDown = v_hitsFlow >> 12 & uint(3);\\n    uint upDown = v_hitsFlow >> 14 & uint(3);\\n    uint rightLeft = v_hitsFlow >> 16 & uint(3);\\n    uint downLeft = v_hitsFlow >> 18 & uint(3);\\n    uint leftLeft = v_hitsFlow >> 20 & uint(3);\\n    uint upLeft = v_hitsFlow >> 22 & uint(3);\\n    uint rightUp = v_hitsFlow >> 24 & uint(3);\\n    uint downUp = v_hitsFlow >> 26 & uint(3);\\n    uint leftUp = v_hitsFlow >> 28 & uint(3);\\n    uint upUp = v_hitsFlow >> 30 & uint(3);\\n\\n    out_color = v_color;\\n\\n    if(rightRight > uint(0)) {\\n        float x = fract(u_time * speed[rightRight] / sector);\\n        float y = 1.5f * sector;\\n\\n        if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n            out_color = vec4(1, 1, 1, v_color.a);\\n            return;\\n        }\\n    }\\n\\n    if(downRight > uint(0)) {\\n        {\\n            float x = 1.5f * sector;\\n            float y = mod(1.0f - fract(u_time * speed[downRight]), sector) + 2.0f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float t = mod(u_time * speed[downRight] * 0.5f * PI / sector, 0.5f * PI) + PI;\\n            float x = cos(t) * sector / 2.f;\\n            float y = sin(t) * sector / 2.f;\\n\\n            x += 2.f * sector;\\n            y += 2.f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float x = mod(fract(u_time * speed[downRight]), sector) + 2.0f * sector;\\n            float y = 1.5f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n    }\\n\\n    if(leftRight > uint(0)) {\\n        float x = fract(u_time * speed[leftRight] / sector);\\n        float y = 1.5f * sector;\\n\\n        if(x < 1.5f * sector) {\\n            if(distance(vec2(1.f - x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        } else {\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n    }\\n\\n    if(upRight > uint(0)) {\\n        {\\n            float x = 1.5f * sector;\\n            float y = mod(fract(u_time * speed[upRight]), sector);\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float t = 0.5f * PI - mod(u_time * speed[upRight] * 0.5f * PI / sector, 0.5f * PI) + 0.5f * PI;\\n            float x = cos(t) * sector / 2.f;\\n            float y = sin(t) * sector / 2.f;\\n\\n            x += 2.f * sector;\\n            y += sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float x = mod(fract(u_time * speed[upRight]), sector) + 2.0f * sector;\\n            float y = 1.5f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n    }\\n\\n    if(rightDown > uint(0)) {\\n        {\\n            float x = mod(fract(u_time * speed[rightDown]), sector);\\n            float y = 1.5f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float t = 0.5f * PI - mod(u_time * speed[rightDown] * 0.5f * PI / sector, 0.5f * PI);\\n            float x = cos(t) * sector / 2.f;\\n            float y = sin(t) * sector / 2.f;\\n\\n            x += sector;\\n            y += sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float x = 1.5f * sector;\\n            float y = mod(1.0f - fract(u_time * speed[rightDown]), sector);\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n    }\\n\\n    if(downDown > uint(0)) {\\n        float x = 1.5f * sector;\\n        float y = fract(1.f - u_time * speed[downDown] / sector);\\n\\n        if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n            out_color = vec4(1, 1, 1, v_color.a);\\n            return;\\n        }\\n    }\\n\\n    if(leftDown > uint(0)) {\\n        {\\n            float x = mod(1.f - fract(u_time * speed[leftDown]), sector) + 2.0f * sector;\\n            float y = 1.5f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float t = mod(u_time * speed[leftDown] * 0.5f * PI / sector, 0.5f * PI) + 0.5f * PI;\\n            float x = cos(t) * sector / 2.f;\\n            float y = sin(t) * sector / 2.f;\\n\\n            x += 2.f * sector;\\n            y += sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float x = 1.5f * sector;\\n            float y = mod(1.0f - fract(u_time * speed[leftDown]), sector);\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n    }\\n\\n    if(upDown > uint(0)) {\\n        float x = 1.5f * sector;\\n        float y = fract(u_time * speed[upDown] / sector);\\n\\n        if(y < 1.5f * sector) {\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        } else {\\n            if(distance(vec2(x, 1.f - y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n    }\\n\\n    if(rightLeft > uint(0)) {\\n        float x = fract(u_time * speed[rightLeft] / sector);\\n        float y = 1.5f * sector;\\n\\n        if(x < 1.5f * sector) {\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        } else {\\n            if(distance(vec2(1.5f * sector - (x - 1.5f * sector), y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n    }\\n\\n    if(downLeft > uint(0)) {\\n        {\\n            float x = 1.5f * sector;\\n            float y = mod(1.0f - fract(u_time * speed[downLeft]), sector) + 2.0f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float t = 0.5f * PI - mod(u_time * speed[downLeft] * 0.5f * PI / sector, 0.5f * PI) + 1.5f * PI;\\n            float x = cos(t) * sector / 2.f;\\n            float y = sin(t) * sector / 2.f;\\n\\n            x += sector;\\n            y += 2.f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float x = mod(1.f - fract(u_time * speed[downLeft]), sector);\\n            float y = 1.5f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n    }\\n\\n    if(leftLeft > uint(0)) {\\n        float x = 1.f - fract(u_time * speed[leftLeft] / sector);\\n        float y = 1.5f * sector;\\n\\n        if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n            out_color = vec4(1, 1, 1, v_color.a);\\n            return;\\n        }\\n    }\\n\\n    if(upLeft > uint(0)) {\\n        {\\n            float x = 1.5f * sector;\\n            float y = mod(fract(u_time * speed[upLeft]), sector);\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float t = mod(u_time * speed[upLeft] * 0.5f * PI / sector, 0.5f * PI);\\n            float x = cos(t) * sector / 2.f;\\n            float y = sin(t) * sector / 2.f;\\n\\n            x += sector;\\n            y += sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float x = mod(1.f - fract(u_time * speed[upLeft]), sector);\\n            float y = 1.5f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n    }\\n\\n    if(rightUp > uint(0)) {\\n        {\\n            float x = 1.5f * sector;\\n            float y = mod(fract(u_time * speed[rightUp]), sector) + 2.0f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float t = mod(u_time * speed[rightUp] * 0.5f * PI / sector, 0.5f * PI) + 1.5f * PI;\\n            float x = cos(t) * sector / 2.f;\\n            float y = sin(t) * sector / 2.f;\\n\\n            x += sector;\\n            y += 2.f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float x = mod(fract(u_time * speed[rightUp]), sector);\\n            float y = 1.5f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n    }\\n\\n    if(downUp > uint(0)) {\\n        float x = 1.5f * sector;\\n        float y = fract(u_time * speed[downUp] / sector);\\n\\n        if(y < 1.5f * sector) {\\n            if(distance(vec2(x, 1.f - y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        } else {\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n    }\\n\\n    if(leftUp > uint(0)) {\\n        {\\n            float x = 1.5f * sector;\\n            float y = mod(fract(u_time * speed[leftUp]), sector) + 2.0f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float t = 0.5f * PI - mod(u_time * speed[leftUp] * 0.5f * PI / sector, 0.5f * PI) + PI;\\n            float x = cos(t) * sector / 2.f;\\n            float y = sin(t) * sector / 2.f;\\n\\n            x += 2.f * sector;\\n            y += 2.f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n        {\\n            float x = mod(1.0f - fract(u_time * speed[leftUp]), sector) + 2.0f * sector;\\n            float y = 1.5f * sector;\\n\\n            if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n                out_color = vec4(1, 1, 1, v_color.a);\\n                return;\\n            }\\n        }\\n    }\\n\\n    if(upUp > uint(0)) {\\n        float x = 1.5f * sector;\\n        float y = fract(u_time * speed[upUp] / sector);\\n\\n        if(distance(vec2(x, y), v_uvCoord) <= circleRadius) {\\n            out_color = vec4(1, 1, 1, v_color.a);\\n            return;\\n        }\\n    }\\n}\\n\"","export default \"#version 300 es\\nprecision highp float;\\nprecision highp int;\\n\\nin vec2 a_vertex;\\nin vec2 a_uvCoord;\\nin vec4 a_color;\\nin uint a_hitsFlow;\\n\\nout vec2 v_uvCoord;\\nout vec4 v_color;\\nflat out uint v_hitsFlow;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() {\\n  gl_Position = u_viewProject * vec4(a_vertex, 0.1f, 1.0f);\\n\\n  v_uvCoord = a_uvCoord;\\n  v_color = a_color;\\n  v_hitsFlow = a_hitsFlow;\\n}\\n\"","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { AppSettings } from \"../../AppSettings\";\nimport { InjectionToken } from \"../../InjectionToken\";\n\nimport FHeatmapGrid from './HeatmapGrid.frag';\nimport VHeatmapGrid from './HeatmapGrid.vert';\n\nimport { Inversify } from \"@/Inversify\";\nimport { Array2D } from \"@/lib/containers/Array2D\";\nimport { Rgba, Vec2 } from \"@/lib/Primitives\";\nimport { PrimitiveBuilder } from \"@/lib/renderer/PrimitiveBuilder\";\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from \"@/lib/renderer/ShaderProgram\";\nimport { UV } from \"@/lib/renderer/TextureAtlas\";\n\n\nexport class HeatmapGridRenderer extends PrimitivesRenderer {\n    private readonly startTime = Date.now() / 1000;\n\n    constructor(gl: WebGL2RenderingContext, attributes: number[]) {\n        super(gl,\n            { fragment: FHeatmapGrid, vertex: VHeatmapGrid },\n            [{\n                name: 'a_vertex',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_uvCoord',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_color',\n                size: 4,\n                type: gl.FLOAT,\n                normalized: false\n            },\n            {\n                name: 'a_hitsFlow',\n                size: 1,\n                type: gl.UNSIGNED_INT\n            }],\n            { indicesPerPrimitive: 6, basePrimitiveType: gl.TRIANGLES });\n\n        this.UploadAttributes(attributes);\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n\n    Draw(): void {\n        this.shader.SetUniform1f('u_time', Date.now() / 1000 - this.startTime);\n        super.Draw();\n    }\n}\ninterface HeatmapCellAttributes {\n    color: Rgba;\n    hitsFlow: number;\n}\n\nexport type HeatmapRenderInfo = Array2D<HeatmapCellAttributes>;\n\n@injectable()\nclass HeatmapGridRendererBuilder {\n    public readonly CellSize = 10;\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext,\n        @inject(AppSettings) private settings: AppSettings\n    ) { }\n\n    Build(heatmap: HeatmapRenderInfo): HeatmapGridRenderer {\n        const vertexList: number[] = [];\n        for (let row = 0; row < this.settings.MemoryLimit.Height; ++row) {\n            for (let column = 0; column < this.settings.MemoryLimit.Width; ++column) {\n                const attributes = heatmap.Get({ column, row: this.settings.MemoryLimit.Height - row - 1 });\n\n                const cell = this.BuildCell(\n                    { x: column * this.CellSize, y: row * this.CellSize },\n                    {\n                        A: { x: 0, y: 0 },\n                        B: { x: 1, y: 1 }\n                    },\n                    attributes.color,\n                    attributes.hitsFlow);\n\n                vertexList.push(...cell);\n            }\n        }\n\n        return new HeatmapGridRenderer(this.gl, vertexList);\n    }\n\n    private BuildCell(\n        position: Vec2,\n        uvCoord: UV,\n        color: Rgba,\n        hitsFlow: number\n    ): number[] {\n        return PrimitiveBuilder.AABBRectangle(\n            position,\n            { width: this.CellSize, height: this.CellSize },\n            [\n                {\n                    LeftBottom: [uvCoord.A.x, uvCoord.A.y],\n                    LeftTop: [uvCoord.A.x, uvCoord.B.y],\n                    RightTop: [uvCoord.B.x, uvCoord.B.y],\n                    RightBottom: [uvCoord.B.x, uvCoord.A.y]\n                },\n                color,\n                [hitsFlow]\n            ]\n        );\n    }\n}\n\nInversify.bind(HeatmapGridRendererBuilder).toSelf().inRequestScope();\n\nexport type HeatMapGridFactory = (heatmap: HeatmapRenderInfo) => HeatmapGridRenderer;\n\nInversify\n    .bind<interfaces.Factory<HeatMapGridFactory>>(InjectionToken.HeatmapGridRendererFactory)\n    .toFactory<HeatmapGridRenderer, [HeatmapRenderInfo]>(ctx => (data: HeatmapRenderInfo) => ctx.container.get(HeatmapGridRendererBuilder).Build(data));\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { HeatMapGridFactory, HeatmapGridRenderer, HeatmapRenderInfo } from \"./HeatMapGridRenderer\";\n\nimport { AppSettings } from \"@/app/AppSettings\";\nimport { CodeEditorExtension } from \"@/app/CodeEditor/CodeEditorExtension\";\nimport { CodeEditorService } from \"@/app/CodeEditor/CodeEditorService\";\nimport { TooltipPosition, TooltipReleaser } from \"@/app/CodeEditor/CodeEditorTooltipService\";\nimport { InjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { CellHitsFlow } from \"@/lib/befunge/Profiler\";\nimport { Array2D } from \"@/lib/containers/Array2D\";\nimport { Rgb, Rgba } from \"@/lib/Primitives\";\nimport { Mat4 } from \"@/lib/renderer/ShaderProgram\";\n\ntype HeatmapHitStats = Array2D<CellHitsFlow>;\n\nclass HeatmapExtension implements CodeEditorExtension {\n    constructor(\n        private heatmapGridRenderer: HeatmapGridRenderer,\n        private tooltipReleasers: TooltipReleaser[]) { }\n\n    Draw(): void {\n        this.heatmapGridRenderer.Draw();\n    }\n\n    Unload(): void {\n        this.heatmapGridRenderer.Dispose();\n        this.tooltipReleasers.forEach(release => release());\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.heatmapGridRenderer.ViewProjection = mat;\n    }\n}\n\n@injectable()\nexport class HeatmapExtensionBuilder {\n    private readonly lowHitsColor: Rgb = [0, 0.5568627450980392, 1];\n    private readonly highHitsColor: Rgb = [1, 0, 0];\n\n    private hitsColorsDiff!: Rgb;\n\n    private maxHits = Number.NEGATIVE_INFINITY;\n\n    private heatmap!: HeatmapHitStats;\n\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(CodeEditorService) private codeEditor: CodeEditorService,\n        @inject(InjectionToken.HeatmapGridRendererFactory) private heatmapGridRendererFactory: HeatMapGridFactory\n    ) { }\n\n    Build(heatmap: HeatmapHitStats): HeatmapExtension {\n        this.heatmap = heatmap;\n\n        this.Setup();\n\n        const releasers = this.DrawHitsOnCell();\n\n        const max = this.MaxHits(this.heatmap);\n        const renderInfo: HeatmapRenderInfo = this.heatmap\n            .Map(x => ({ color: this.HitsToColor(x.Total), hitsFlow: this.PackHitsFlow(x.Normalized(max)) }));\n\n        const renderer = this.heatmapGridRendererFactory(renderInfo);\n\n        return new HeatmapExtension(renderer, releasers)\n    }\n\n    private MaxHits(stats: HeatmapHitStats): number {\n        let max = 0;\n\n        stats.ForEach(x => max = Math.max(max, x.Max));\n\n        return max;\n    }\n\n    private HitsToColor(hits: number): Rgba {\n        if (hits === 0) {\n            return [1, 1, 1, 0];\n        }\n\n        const t = hits / this.maxHits;\n\n        return [\n            this.lowHitsColor[0] + this.hitsColorsDiff[0] * t,\n            this.lowHitsColor[1] + this.hitsColorsDiff[1] * t,\n            this.lowHitsColor[2] + this.hitsColorsDiff[2] * t,\n            0.8\n        ]\n    }\n\n    private PackHitsFlow(normalizedHitsFlow: number[]): number {\n        return normalizedHitsFlow.reduce((packed, x, n) => {\n            if (x >= 0.66) {\n                return packed | 3 << 2 * n;\n            } else if (x >= 0.33) {\n                return packed | 2 << 2 * n;\n            } else if (x > 0) {\n                return packed | 1 << 2 * n;\n            }\n\n            return packed;\n        }, 0);\n    }\n\n    private Setup(): void {\n        this.heatmap.ForEach(x => this.maxHits = Math.max(this.maxHits, x.Total));\n\n        this.hitsColorsDiff = [\n            this.highHitsColor[0] - this.lowHitsColor[0],\n            this.highHitsColor[1] - this.lowHitsColor[1],\n            this.highHitsColor[2] - this.lowHitsColor[2]\n        ];\n    }\n\n    private DrawHitsOnCell(): TooltipReleaser[] {\n        const releasers: TooltipReleaser[] = [];\n\n        for (let row = 0; row < this.settings.MemoryLimit.Height; ++row) {\n            for (let column = 0; column < this.settings.MemoryLimit.Width; ++column) {\n                const hits = this.heatmap.Get({ column, row });\n                if (hits.Total > 0) {\n                    const releaser = this.codeEditor.Tooltip(column, row, hits.Total.toString(), TooltipPosition.LeftBottom);\n                    releasers.push(releaser);\n                }\n            }\n        }\n\n        return releasers;\n    }\n}\n\nInversify.bind(HeatmapExtensionBuilder).toSelf().inTransientScope();\n\nexport type HeatmapExtensionFactory = (heatmap: HeatmapHitStats) => HeatmapExtension;\n\nInversify\n    .bind<interfaces.Factory<HeatmapExtensionFactory>>(InjectionToken.HeatmapExtensionFactory)\n    .toFactory<HeatmapExtension, [HeatmapHitStats]>(ctx => (stats: HeatmapHitStats) => ctx.container.get(HeatmapExtensionBuilder).Build(stats));\n","import { inject, injectable } from \"inversify\";\n\nimport { HeatmapExtensionFactory } from \"../AnalysisTools/Heatmap/HeatmapExtension\";\nimport { AppSettings } from \"../AppSettings\";\nimport { BefungeToolbox } from \"../BefungeToolbox\";\nimport { CodeEditorService } from \"../CodeEditor/CodeEditorService\";\nimport { InjectionToken } from \"../InjectionToken\";\nimport { HeatmapToggleButtonState } from \"../Overlay/DebugControls\";\nimport { OverlayService } from \"../Overlay/OverlayService\";\nimport { SourceCodeMemory } from \"../SourceCodeMemory\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { ObservablePriority } from \"@/lib/Observable\";\n\n@injectable()\nexport class ProfillingService {\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(SourceCodeMemory) private editorSourceCode: SourceCodeMemory,\n        @inject(BefungeToolbox) private befungeToolbox: BefungeToolbox,\n        @inject(CodeEditorService) private codeEditor: CodeEditorService,\n        @inject(OverlayService) private overlay: OverlayService,\n        @inject(InjectionToken.HeatmapExtensionFactory) private heatmapExtensionFactory: HeatmapExtensionFactory\n    ) {\n        this.overlay.DebugControls.Heatmap.Attach(\n            (shown: HeatmapToggleButtonState) => this.ToggleHeatmap(shown),\n            { priority: ObservablePriority.High });\n    }\n\n    private ToggleHeatmap(feedback: HeatmapToggleButtonState): void {\n        feedback.isShown ? this.BuildHeatmap(feedback) : this.HideHeatmap();\n    }\n\n    private BuildHeatmap(feedback: HeatmapToggleButtonState): void {\n        this.befungeToolbox.Reset(this.settings.MemoryLimit, this.editorSourceCode.Clone());\n\n        this.befungeToolbox.Interpreter.SetInput(this.overlay.IOControls.Input);\n\n        try {\n            const heatmap = this.befungeToolbox.Profiler.CellHeatmapFor(1000);\n\n            if (heatmap === null) {\n                this.overlay.Snackbar.ShowWarning('Terminated due timeout');\n\n                feedback.isShown = false;\n            } else {\n                const extension = this.heatmapExtensionFactory(heatmap);\n\n                this.codeEditor.LoadExtension(extension);\n            }\n        } catch (e) {\n            if (e instanceof Error) {\n                this.overlay.Snackbar.ShowError(e.message)\n            }\n\n            feedback.isShown = false;\n        }\n    }\n\n    private HideHeatmap(): void {\n        this.codeEditor.UnloadExtension();\n    }\n}\n\nInversify.bind(ProfillingService).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { DebuggingService } from \"./DebuggingService\";\nimport { ExecutionService } from \"./ExecutionService\";\nimport { ProfillingService } from \"./ProfilingService\";\n\nimport { Inversify } from \"@/Inversify\";\n\n@injectable()\nexport class CodeExecutionService {\n    constructor(\n        @inject(ExecutionService) private executionService: ExecutionService,\n        @inject(DebuggingService) private debuggingService: DebuggingService,\n        @inject(ProfillingService) private profillingService: ProfillingService\n    ) { }\n\n    get Execution(): ExecutionService {\n        return this.executionService;\n    }\n\n    get Debugging(): DebuggingService {\n        return this.debuggingService;\n    }\n\n    get Profilling(): ProfillingService {\n        return this.profillingService;\n    }\n}\n\nInversify.bind(CodeExecutionService).toSelf().inSingletonScope();\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { CodeEditorService } from \"./CodeEditor/CodeEditorService\";\nimport { CodeExecutionService } from \"./CodeExecution/CodeExecutionService\";\nimport { InjectionToken } from \"./InjectionToken\";\nimport { OverlayService } from \"./Overlay/OverlayService\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { InputReceiver, MyInputEvent } from \"@/lib/UI/InputReceiver\";\n\n@injectable()\nexport class CodeEditorServiceInputReceiver implements InputReceiver {\n    private onVanish = new ObservableController<void>();\n\n    constructor(\n        @inject(CodeEditorService) private codeEditor: CodeEditorService,\n        @inject(OverlayService) private overlay: OverlayService,\n        @inject(CodeExecutionService) private codeExecutionService: CodeExecutionService) { }\n\n    OnInput(e: MyInputEvent): void {\n        const keyCode = e.key.charCodeAt(0);\n\n        if (e.key.length === 1 && keyCode >= ' '.charCodeAt(0) && keyCode <= '~'.charCodeAt(0) || e.key === 'Backspace') {\n            if (this.overlay.DebugControls.DebugMode) {\n                this.overlay.Snackbar.ShowInformation('Editing is disabled during the debugging');\n            } else if (this.overlay.DebugControls.IsHeatmapShown) {\n                this.overlay.Snackbar.ShowInformation('Editing is disabled while heatmap is active');\n            } else {\n                const prevEditableCell = { ...this.codeEditor.EditableCell };\n\n                this.codeEditor.CellInput(e);\n\n                this.codeExecutionService.Debugging.OnCellInput(prevEditableCell);\n            }\n        }\n    }\n\n    Focus(): void {\n        this.codeEditor.Focus();\n    }\n\n    Blur(): void {\n        this.codeEditor.Blur();\n    }\n\n    get OnVanish(): Observable<void> {\n        return this.onVanish;\n    }\n}\n\nInversify.bind(CodeEditorServiceInputReceiver).toSelf().inRequestScope();\n\nexport type CodeEditorServiceInputReceiverFactory = () => CodeEditorServiceInputReceiver;\n\nInversify\n    .bind<interfaces.Factory<CodeEditorServiceInputReceiver>>(InjectionToken.CodeEditorServiceInputReceiverFactory)\n    .toFactory<CodeEditorServiceInputReceiver>(ctx => () => ctx.container.get(CodeEditorServiceInputReceiver));\n","import { vec2 } from \"gl-matrix\";\n\nimport { CameraService } from \"../CameraService\";\n\nimport { Effect } from \"@/lib/effect/Effect\";\nimport { Camera, Viewport } from \"@/lib/renderer/Camera\";\n\nexport class SmoothCameraMove implements Effect {\n    private isDone = false;\n\n    private progress = 0;\n\n    private duration = 400;\n\n    constructor(\n        private camera: CameraService,\n        private destination: vec2,\n        private viewport: Viewport\n    ) { }\n\n    get IsDone(): boolean {\n        return this.isDone;\n    }\n\n    Draw(elapsed: number): void {\n        let fract = elapsed / this.duration;\n\n        this.progress += fract;\n\n        if (this.progress > 1) {\n            fract -= this.progress - 1;\n        }\n\n        const movement = vec2.mul(vec2.create(), this.destination, vec2.fromValues(fract, fract));\n\n        const delta = Camera.UnprojectMovement(\n            { x: movement[0], y: -movement[1] },\n            { a: 0, b: 0, c: 1, d: 0 },\n            this.camera.ViewProjection,\n            this.viewport);\n\n        this.camera.Translate({\n            x: delta.x,\n            y: delta.y\n        });\n\n        if (this.progress >= 1) {\n            this.isDone = true;\n        }\n    }\n}\n","import { ZCameraBoundary } from \"../AppSettings\";\nimport { CameraService } from \"../CameraService\";\n\nimport { Effect } from \"@/lib/effect/Effect\";\n\nexport class SmoothCameraZoom implements Effect {\n    private progress = 0;\n\n    private duration = 100;\n\n    private distance = 50;\n\n    private isDone = false;\n\n    constructor(\n        private direction: 'in' | 'out',\n        private camera: CameraService,\n        private boundary: ZCameraBoundary) {\n    }\n\n    get IsDone(): boolean {\n        return this.isDone;\n    }\n\n    Draw(elapsed: number): void {\n        const fract = elapsed / this.duration;\n\n        this.progress += fract;\n\n        const delta = this.distance * fract * (this.direction === 'in' ? -1 : 1);\n\n        const z = this.camera.Position.z + delta;\n\n        if (z >= this.boundary.max || z <= this.boundary.min) {\n            this.isDone = true;\n            return;\n        }\n\n        this.camera.Translate({ z: delta });\n\n        if (this.progress >= 1) {\n            this.isDone = true;\n        }\n    }\n}\n","export class DecodingErrorException extends Error {\n    constructor() { super('Failed to decode shared url') }\n}\n\nexport class BefungeSourceCodeCodec {\n    static Encode(decoded: string): string {\n        return btoa(decoded);\n    }\n\n    static Decode(encoded: string): string {\n        try {\n            return atob(encoded);\n        } catch (e) {\n            if (e instanceof DOMException) {\n                switch (e.name) {\n                    case 'InvalidCharacterError':\n                        throw new DecodingErrorException();\n                }\n            }\n\n            throw e;\n        }\n    }\n}\n","import { PCDirection } from '../CPU/CPU';\n\nimport { Pointer } from './Memory';\nimport { MemoryLimit } from './MemoryLimit';\nimport { PointerArithmetics } from './PointerArithmetics';\n\nexport class ModuloPointerArithmetics implements PointerArithmetics {\n  constructor(private memoryLimit: MemoryLimit) {}\n\n  Move(ptr: Pointer, dir: PCDirection): Pointer {\n    switch (dir) {\n      case PCDirection.Right:\n        return { x: (ptr.x + 1) % this.memoryLimit.Width, y: ptr.y };\n      case PCDirection.Left:\n        return {\n          x: ptr.x === 0 ? this.memoryLimit.Width - 1 : ptr.x - 1,\n          y: ptr.y\n        };\n      case PCDirection.Down:\n        return { x: ptr.x, y: (ptr.y + 1) % this.memoryLimit.Height };\n      case PCDirection.Up:\n        return {\n          x: ptr.x,\n          y: ptr.y === 0 ? this.memoryLimit.Height - 1 : ptr.y - 1\n        };\n    }\n  }\n}\n","import { Memory, Pointer } from './Memory';\nimport { MemoryLimit } from './MemoryLimit';\nimport { ModuloPointerArithmetics } from './ModuloPointerArithmetics';\nimport { PointerArithmetics } from './PointerArithmetics';\n\nexport class ArrayMemory implements Memory {\n  private pointerArithmetics: PointerArithmetics;\n  private memory: Uint8Array;\n\n  constructor(private limit: MemoryLimit) {\n    this.pointerArithmetics = new ModuloPointerArithmetics(limit);\n    this.memory = new Uint8Array(limit.Width * limit.Height);\n\n    const emptyValue = ' '.charCodeAt(0);\n\n    for (let n = 0; n < this.memory.length; ++n) {\n      this.memory[n] = emptyValue;\n    }\n  }\n\n  get PointerArithmetics(): PointerArithmetics {\n    return this.pointerArithmetics;\n  }\n\n  Read(ptr: Pointer): number {\n    if (this.IsPointerOutOfBound(ptr)) {\n      return 0;\n    }\n\n    return this.memory[this.PointerToIndex(ptr)];\n  }\n\n  Write(ptr: Pointer, value: number): void {\n    if (this.IsPointerOutOfBound(ptr)) {\n      return;\n    }\n\n    this.memory[this.PointerToIndex(ptr)] = value;\n  }\n\n  Resize(limit: MemoryLimit): void {\n    const resized = new ArrayMemory(limit);\n\n    this.CopyMemoryTo(resized);\n\n    this.memory = resized.memory;\n    this.limit = limit;\n  }\n\n  Clone(): Memory {\n    const copy = new ArrayMemory(this.limit);\n\n    copy.memory.set(this.memory);\n\n    return copy;\n  }\n\n  private PointerToIndex(ptr: Pointer): number {\n    return ptr.y * this.limit.Width + ptr.x;\n  }\n\n  private IsPointerOutOfBound(ptr: Pointer): boolean {\n    return ptr.x >= this.limit.Width || ptr.y >= this.limit.Height;\n  }\n\n  private CopyMemoryTo(dst: ArrayMemory): void {\n    const copyingWidth = Math.min(this.limit.Width, dst.limit.Width);\n    const copyingHeight = Math.min(this.limit.Height, dst.limit.Height);\n\n    for (let x = 0; x < copyingWidth; ++x) {\n      for (let y = 0; y < copyingHeight; ++y) {\n        const ptr: Pointer = { x: x, y: y };\n\n        dst.Write(ptr, this.Read(ptr));\n      }\n    }\n  }\n}\n","\nexport interface IllegalInstruction {\n    value: number;\n    offset: number;\n}\n\nexport class SourceCodeValidityAnalyser {\n    private static readonly validSymbols = SourceCodeValidityAnalyser.ValidSymbols();\n\n    private sourceCode: string[];\n\n    private sourceCodeLength: number;\n\n    constructor(src: string) {\n        this.sourceCode = [...src].reverse();\n        this.sourceCodeLength = this.sourceCode.length;\n    }\n\n    NextIllegalInstruction(): IllegalInstruction | null {\n        if (this.sourceCode.length === 0) {\n            return null;\n        }\n\n        const illegalInstructionIdx = this.sourceCode\n            .findLastIndex(x => !SourceCodeValidityAnalyser.validSymbols.includes(x.charCodeAt(0)));\n\n        if (illegalInstructionIdx === -1) {\n            this.sourceCode = [];\n\n            return null;\n        }\n\n        const value = this.sourceCode[illegalInstructionIdx].charCodeAt(0);\n\n        this.sourceCode.length = illegalInstructionIdx;\n\n        return { value, offset: this.sourceCodeLength - illegalInstructionIdx + 1 };\n    }\n\n    private static ValidSymbols(): number[] {\n        const start = ' '.charCodeAt(0);\n        const end = '~'.charCodeAt(0);\n\n        return [10, 13, ...Array.from({ length: end - start + 1 }, (_x, n) => n + start)];\n    }\n}\n","export class AbortOperationException extends Error { }\n\nexport interface FileStorage {\n    Open(): Promise<string>;\n    Save(content: string): Promise<void>;\n}\n","import { injectable } from \"inversify\";\n\nimport { Effect } from \"./Effect\";\n\nimport { Inversify } from \"@/Inversify\";\n\nexport enum RegistrationCollisionResolver { Add, Replace, Skip }\n\nexport interface RegistrationPolicy<T> {\n    id: T;\n    rule: RegistrationCollisionResolver;\n}\n\ninterface EffectItem {\n    effect: Effect;\n    policy: RegistrationPolicy<unknown>;\n}\n\n@injectable()\nexport class EffectRunner {\n    private defaultPolicy: RegistrationPolicy<any>;\n    private effects: EffectItem[] = [];\n\n    constructor() {\n        this.defaultPolicy = { id: Symbol('Default policy id'), rule: RegistrationCollisionResolver.Add };\n    }\n\n    Register<T>(effect: Effect, policy: RegistrationPolicy<T> = this.defaultPolicy): void {\n        const item = this.effects.findLast(x => x.policy.id === policy.id);\n\n        if (item === undefined || item.policy.rule === RegistrationCollisionResolver.Add) {\n            this.effects.push({ effect, policy });\n        } else if (item.policy.rule === RegistrationCollisionResolver.Replace) {\n            item.effect = effect;\n        }\n    }\n\n    Draw(elapsed: number): boolean {\n        for (let n = 0; n < this.effects.length; ++n) {\n            const item = this.effects[n];\n\n            if (item.effect.IsDone) {\n                this.effects.splice(n--, 1);\n            } else {\n                item.effect.Draw(elapsed);\n            }\n        }\n\n        return this.effects.length > 0;\n    }\n}\n\nInversify.bind(EffectRunner).toSelf().inSingletonScope();\n","import { Observable } from \"../Observable\";\n\nexport interface MyInputEvent {\n    key: string;\n}\n\nexport interface InputReceiver {\n    OnVanish: Observable<void>;\n    OnInput(e: MyInputEvent): void;\n    Focus(): void;\n    Blur(): void;\n}\n\nexport function IsInputReceiver(x: any): x is InputReceiver {\n    return typeof x === 'object' && 'OnInput' in x;\n}\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { Command } from \"../Command\";\n\nimport { PostAction } from \"./PostActions/PostAction\";\n\nimport { CodeEditorService, EditionDirection } from \"@/app/CodeEditor/CodeEditorService\";\nimport { AppCommandInjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { Pointer } from \"@/lib/befunge/memory/Memory\";\n\n\n@injectable()\nexport class EditCellCommand implements Command {\n    private location: Pointer = { x: -1, y: -1 };\n\n    private oldValue = '';\n\n    private newValue = '';\n\n    private editDirection = EditionDirection.Right;\n\n    private postAction!: PostAction;\n\n    constructor(@inject(CodeEditorService) private codeEditorService: CodeEditorService) { }\n\n    Initialize(...args: Parameters<EditCellCommandFactory>): void {\n        [{ ...this.location }, this.oldValue, this.newValue, this.editDirection, this.postAction] = args;\n    }\n\n    Apply(): void {\n        this.codeEditorService.EditCell(this.newValue, this.location.x, this.location.y);\n\n        this.postAction.Apply(this);\n    }\n\n    Undo(): void {\n        this.codeEditorService.EditCell(this.oldValue, this.location.x, this.location.y);\n\n        this.codeEditorService.SetEditableCell(this.location);\n        this.codeEditorService.EditableCellDirection = this.editDirection;\n    }\n\n    get Location(): Pointer {\n        return this.location;\n    }\n\n    get OldValue(): string {\n        return this.oldValue;\n    }\n\n    get NewValue(): string {\n        return this.newValue;\n    }\n\n    get EditDirection(): EditionDirection {\n        return this.editDirection;\n    }\n}\n\nInversify.bind(EditCellCommand).toSelf().inTransientScope();\n\nexport type EditCellCommandFactory = (location: Pointer, oldValue: string, newValue: string, editDirection: EditionDirection, postAction: PostAction) => Command;\n\nInversify\n    .bind<interfaces.Factory<EditCellCommand>>(AppCommandInjectionToken.EditCellCommandFactory)\n    .toFactory<EditCellCommand, Parameters<EditCellCommandFactory>>(ctx => (location: Pointer, oldValue: string, newValue: string, editDirection: EditionDirection, postAction: PostAction) => {\n        const instance = ctx.container.get(EditCellCommand);\n        instance.Initialize(location, oldValue, newValue, editDirection, postAction);\n\n        return instance;\n    });\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { EditCellCommand } from \"../EditCellCommand\";\n\nimport { PostAction } from \"./PostAction\";\n\nimport { CodeEditorService, EditionDirection } from \"@/app/CodeEditor/CodeEditorService\";\nimport { EditCellCommandPostAction } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { Pointer } from \"@/lib/befunge/memory/Memory\";\n\n@injectable()\nexport class MoveNextAction implements PostAction {\n    constructor(@inject(CodeEditorService) private codeEditorService: CodeEditorService) { }\n\n    Apply(target: EditCellCommand): void {\n        const codeFlowEditDirection = this.FollowCodeFlowHelper(target);\n        if (target.EditDirection !== codeFlowEditDirection) {\n            this.codeEditorService.EditableCellDirection = codeFlowEditDirection;\n        }\n\n        this.codeEditorService.SetEditableCell(this.GetNextEditableCell(target, codeFlowEditDirection));\n    }\n\n    private GetNextEditableCell(target: EditCellCommand, overriddenDirection: EditionDirection): Pointer {\n        const nextEditableCell: Pointer = { ...target.Location };\n\n        switch (overriddenDirection) {\n            case EditionDirection.Left:\n                nextEditableCell.x = target.Location.x === 0 ?\n                    this.codeEditorService.Dimension.Columns - 1 :\n                    target.Location.x - 1;\n                break;\n            case EditionDirection.Up:\n                nextEditableCell.y = target.Location.y === 0 ?\n                    this.codeEditorService.Dimension.Rows - 1 :\n                    target.Location.y - 1;\n                break;\n            case EditionDirection.Right:\n                nextEditableCell.x = target.Location.x === this.codeEditorService.Dimension.Columns - 1 ?\n                    0 :\n                    target.Location.x + 1;\n                break;\n            case EditionDirection.Down:\n                nextEditableCell.y = target.Location.y === this.codeEditorService.Dimension.Rows - 1 ?\n                    0 :\n                    target.Location.y + 1;\n                break;\n        }\n\n        return nextEditableCell;\n    }\n\n    private FollowCodeFlowHelper(target: EditCellCommand): EditionDirection {\n        if (target.NewValue === '<') {\n            return EditionDirection.Left;\n        } else if (target.NewValue === '^') {\n            return EditionDirection.Up;\n        } else if (target.NewValue === '>') {\n            return EditionDirection.Right;\n        } else if (target.NewValue === 'v') {\n            return EditionDirection.Down;\n        }\n\n        return target.EditDirection;\n    }\n}\n\nInversify.bind(MoveNextAction).toSelf().inTransientScope();\n\nInversify\n    .bind<interfaces.Factory<MoveNextAction>>(EditCellCommandPostAction.MoveNext)\n    .toAutoFactory(MoveNextAction);\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { Command } from \"../Command\";\n\nimport { PostAction } from \"./PostActions/PostAction\";\n\nimport { CodeEditorService, EditionDirection } from \"@/app/CodeEditor/CodeEditorService\";\nimport { EditableRegion } from \"@/app/CodeEditor/EditableTarget\";\nimport { AppCommandInjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { Array2D } from \"@/lib/containers/Array2D\";\nimport { MathUtil } from \"@/lib/math/MathUtil\";\n\nexport type PostActionEditablePosition = 'next' | 'left_top' | 'right_bottom';\n\n@injectable()\nexport class EditCellsRegionCommand implements Command {\n    private region: EditableRegion = {\n        lt: { x: -1, y: -1 },\n        rb: { x: -1, y: -1 }\n    };\n\n    private oldValue!: Array2D<number>;\n\n    private newValue!: Array2D<number>;\n\n    private editDirection = EditionDirection.Right;\n\n    private postAction!: PostAction;\n\n    constructor(@inject(CodeEditorService) private codeEditorService: CodeEditorService) { }\n\n    Initialize(...args: Parameters<EditCellsRegionCommandFactory>): void {\n        const region = MathUtil.Extremum([args[0].lt, args[0].rb]);\n        this.region.lt = region.min;\n        this.region.rb = region.max;\n\n        [, this.oldValue, this.newValue, this.editDirection, this.postAction] = args;\n    }\n\n    Apply(): void {\n        this.newValue\n            .ForEach((x, idx) => this.codeEditorService.EditCell(String.fromCharCode(x), this.region.lt.x + idx.column, this.region.lt.y + idx.row));\n\n        this.postAction.Apply(this);\n    }\n\n    Undo(): void {\n        this.oldValue\n            .ForEach((x, idx) => this.codeEditorService.EditCell(String.fromCharCode(x), this.region.lt.x + idx.column, this.region.lt.y + idx.row));\n\n        this.codeEditorService.SetEditableCell(this.region.lt);\n        this.codeEditorService.EditableCellDirection = this.editDirection;\n    }\n\n    get Region(): EditableRegion {\n        return this.region;\n    }\n\n    get EditDirection(): EditionDirection {\n        return this.editDirection;\n    }\n}\n\nInversify.bind(EditCellsRegionCommand).toSelf().inTransientScope();\n\nexport type EditCellsRegionCommandFactory = (region: EditableRegion, oldValue: Array2D<number>, newValue: Array2D<number>, editDirection: EditionDirection, postAction: PostAction) => Command;\n\nInversify\n    .bind<interfaces.Factory<EditCellsRegionCommand>>(AppCommandInjectionToken.EditCellsRegionFactory)\n    .toFactory<EditCellsRegionCommand, Parameters<EditCellsRegionCommandFactory>>(ctx => (region: EditableRegion, oldValue: Array2D<number>, newValue: Array2D<number>, editDirection: EditionDirection, postAction: PostAction) => {\n        const instance = ctx.container.get(EditCellsRegionCommand);\n        instance.Initialize(region, oldValue, newValue, editDirection, postAction);\n\n        return instance;\n    });\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport type { EditCellsRegionCommand } from \"../EditCellsRegionCommand\";\n\nimport { PostAction } from \"./PostAction\";\n\nimport { CodeEditorService, EditionDirection } from \"@/app/CodeEditor/CodeEditorService\";\nimport { EditCellsRegionCommandPostAction } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { Pointer } from \"@/lib/befunge/memory/Memory\";\n\n@injectable()\nexport class MoveNextAction implements PostAction {\n    constructor(@inject(CodeEditorService) private codeEditorService: CodeEditorService) { }\n\n    Apply(target: EditCellsRegionCommand): void {\n        this.codeEditorService.SetEditableCell(this.GetNextEditableCell(target));\n    }\n\n    private GetNextEditableCell(target: EditCellsRegionCommand): Pointer {\n        switch (target.EditDirection) {\n            case EditionDirection.Left:\n                {\n                    const x = target.Region.lt.x === 0 ?\n                        this.codeEditorService.Dimension.Columns - 1 :\n                        target.Region.lt.x - 1;\n\n                    return { x, y: target.Region.lt.y };\n                }\n            case EditionDirection.Up:\n                {\n                    const y = target.Region.lt.y === 0 ?\n                        this.codeEditorService.Dimension.Rows - 1 :\n                        target.Region.lt.y - 1;\n\n                    return { x: target.Region.lt.x, y };\n                }\n            case EditionDirection.Right:\n                {\n                    const x = target.Region.rb.x === this.codeEditorService.Dimension.Columns - 1 ?\n                        0 :\n                        target.Region.rb.x + 1;\n\n                    return { x, y: target.Region.rb.y };\n                }\n            case EditionDirection.Down:\n                {\n                    const y = target.Region.rb.y === this.codeEditorService.Dimension.Rows - 1 ?\n                        0 :\n                        target.Region.rb.y + 1;\n\n                    return { x: target.Region.rb.x, y };\n                }\n        }\n    }\n}\n\nInversify.bind(MoveNextAction).toSelf().inTransientScope();\n\nInversify\n    .bind<interfaces.Factory<MoveNextAction>>(EditCellsRegionCommandPostAction.MoveNext)\n    .toAutoFactory(MoveNextAction);\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport type { EditCellsRegionCommand } from \"../EditCellsRegionCommand\";\n\nimport { PostAction } from \"./PostAction\";\n\nimport { CodeEditorService } from \"@/app/CodeEditor/CodeEditorService\";\nimport { EditCellsRegionCommandPostAction } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\n\n@injectable()\nexport class StayLeftTopAction implements PostAction {\n    constructor(@inject(CodeEditorService) private codeEditorService: CodeEditorService) { }\n\n    Apply(target: EditCellsRegionCommand): void {\n        this.codeEditorService.SetEditableCell(target.Region.lt);\n    }\n}\n\nInversify.bind(StayLeftTopAction).toSelf().inTransientScope();\n\nInversify\n    .bind<interfaces.Factory<StayLeftTopAction>>(EditCellsRegionCommandPostAction.StayLeftTop)\n    .toAutoFactory(StayLeftTopAction);\n","import { vec2, vec3 } from 'gl-matrix';\nimport { inject, injectable, named } from 'inversify';\n\nimport { AppEventTransformer, MouseMovementEvent, MouseSelectEvent } from './AppEventTransformer';\nimport { AppSettings } from './AppSettings';\nimport { AppSettingsCodec, ShareableAppSettings } from './AppSettingsCodec';\nimport { CameraService } from './CameraService';\nimport { CodeEditorService } from './CodeEditor/CodeEditorService';\nimport { CodeEditorServiceInputReceiverFactory } from './CodeEditorServiceInputReceiver';\nimport { CodeExecutionService } from './CodeExecution/CodeExecutionService';\nimport { SmoothCameraMove } from './Effects/SmoothCameraMove';\nimport { SmoothCameraZoom } from './Effects/SmoothCameraZoom';\nimport { AppHistory } from './History/AppHistory';\nimport { InjectionToken, UILabelRendererTargetName } from './InjectionToken';\nimport { HeatmapToggleButtonState } from './Overlay/DebugControls';\nimport { OverlayService } from './Overlay/OverlayService';\nimport { SnackbarControls } from './Overlay/SnackbarControls';\nimport { SourceCodeMemory } from './SourceCodeMemory';\n\nimport { Inversify } from '@/Inversify';\nimport { BefungeSourceCodeCodec } from '@/lib/befunge/BefungeSourceCodeCodec';\nimport { ArrayMemory } from '@/lib/befunge/memory/ArrayMemory';\nimport { SourceCodeValidityAnalyser } from '@/lib/befunge/SourceCodeValidityAnalyser';\nimport { AsyncConstructable, AsyncConstructorActivator } from '@/lib/DI/AsyncConstructorActivator';\nimport { AbortOperationException, FileStorage } from '@/lib/DOM/FileStorage/FileStorage';\nimport { EffectRunner, RegistrationCollisionResolver } from '@/lib/effect/EffectRunner';\nimport { Intersection } from '@/lib/math/Intersection';\nimport { MathUtil } from '@/lib/math/MathUtil';\nimport { Transformation } from '@/lib/math/Transformation';\nimport { ObserverDetacher } from '@/lib/Observable';\nimport { Vec2 } from '@/lib/Primitives';\nimport { Camera } from '@/lib/renderer/Camera';\nimport { InputReceiver, IsInputReceiver, MyInputEvent } from '@/lib/UI/InputReceiver';\nimport { UILabelRenderer } from '@/lib/UI/UILabel/UILabelRenderer';\nimport './History/Commands';\nimport router from '@/router';\n\n@injectable()\nexport class AppService extends AppEventTransformer implements AsyncConstructable {\n    private isRunning = true;\n\n    private touchZoomStartZ = 0;\n\n    private inFocusOnVanishReleaser: ObserverDetacher;\n    private inFocus: InputReceiver;\n\n    private lastFrameTime = Date.now();\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext,\n        @inject(InjectionToken.FileStorage) private fileStorage: FileStorage,\n        @inject(CameraService) private camera: CameraService,\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(EffectRunner) private effectRunner: EffectRunner,\n        @inject(OverlayService) private overlay: OverlayService,\n        @inject(CodeEditorService) private codeEditor: CodeEditorService,\n        @inject(SourceCodeMemory) private editorSourceCode: SourceCodeMemory,\n        @inject(AppHistory) private history: AppHistory,\n        @inject(CodeExecutionService) private codeExecutionService: CodeExecutionService,\n        @inject(UILabelRenderer) @named(UILabelRendererTargetName.Perspective) private perspectiveLabelRenderer: UILabelRenderer,\n        @inject(InjectionToken.CodeEditorServiceInputReceiverFactory) private codeEditorServiceInputReceiverFactory: CodeEditorServiceInputReceiverFactory) {\n        super();\n\n        this.camera.MoveTo(\n            {\n                x: 0,\n                y: 0,\n                z: this.settings.ZCameraBoundary.min + (this.settings.ZCameraBoundary.max - this.settings.ZCameraBoundary.min) * 0.75\n            });\n\n        gl.clearColor(1, 1, 1, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n\n\n        this.codeEditor.ViewProjection = this.camera.ViewProjection;\n        this.FocusCameraAtEditor();\n\n        this.editorSourceCode.Initialize(ArrayMemory, this.settings.MemoryLimit);\n\n        this.inFocus = this.codeEditorServiceInputReceiverFactory();\n        this.inFocus.Focus();\n        this.inFocusOnVanishReleaser = this.inFocus.OnVanish.Attach(() => 0);\n    }\n\n    async AsyncConstructor(): Promise<void> {\n        this.overlay.EditDirectionControls.EditDirectionObservable.Attach(dir => this.codeEditor.EditableCellDirection = dir);\n        this.codeEditor.EditDirectionObservable.Attach(dir => this.overlay.EditDirectionControls.ForceEditDirection(dir));\n        this.codeEditor.EditableCellLostObservable.Attach(() => this.FollowEditableCell());\n\n        this.overlay.FileControls.OpenFromDiskObservable.Attach(() => this.OpenFileFromDisk());\n        this.overlay.FileControls.SaveToDiskObservable.Attach(() => this.SaveSourceToDisk());\n        this.overlay.FileControls.ShareObservable.Attach(() => this.ShareSourceCode());\n        this.overlay.FileControls.ShowHelpObservable.Attach(() => this.overlay.LanguageSyntaxHelpControls.ToggleHelp());\n\n        this.overlay.HistoryControls.UndoObservable.Attach(() => this.history.Undo());\n        this.overlay.HistoryControls.RedoObservable.Attach(() => this.history.Redo());\n\n        this.overlay.DebugControls.Heatmap.Attach(feedback => this.ControlsResponseToHeatmapActivation(feedback));\n\n        this.history.UpdateObservable.Attach(() => this.OnSourceCodeChanged());\n\n        this.overlay.VirtualKeyboardControls.Observable.Attach((key: string) => this.inFocus.OnInput({ key }));\n\n        this.Start();\n    }\n\n    Resize(): void {\n        this.settings.ViewDimension = { Width: this.gl.canvas.width, Height: this.gl.canvas.height };\n        this.settings.AspectRatio = this.gl.canvas.width / this.gl.canvas.height;\n\n        this.camera.Resize();\n\n        this.overlay.Resize();\n\n        this.codeEditor.ViewProjection = this.camera.ViewProjection;\n        this.perspectiveLabelRenderer.ViewProjection = this.camera.ViewProjection;\n    }\n\n    OnPan(e: MouseMovementEvent): void {\n        if (!this.overlay.Scroll({\n            startX: e.startX,\n            startY: e.startY,\n            scroll: -e.movementY / window.devicePixelRatio,\n            units: 'px'\n        })) {\n            const delta = Camera.UnprojectMovement(\n                { x: e.movementX, y: e.movementY },\n                { a: 0, b: 0, c: 1, d: 0 },\n                this.camera.ViewProjection,\n                this.gl.canvas);\n\n            this.camera.Translate({ x: delta.x, y: delta.y });\n\n            this.codeEditor.ViewProjection = this.camera.ViewProjection;\n            this.perspectiveLabelRenderer.ViewProjection = this.camera.ViewProjection;\n        }\n    }\n\n    OnSelect(e: MouseSelectEvent): void {\n        const touchResult = this.overlay.Touch(e);\n\n        if (touchResult === false) {\n            this.SwitchFocus(this.codeEditorServiceInputReceiverFactory());\n            const prevEditableCell = { ...this.codeEditor.EditableCell };\n\n            this.codeEditor.Touch(e);\n\n            this.codeExecutionService.Debugging.OnSelect(prevEditableCell);\n        } else if (IsInputReceiver(touchResult)) {\n            this.SwitchFocus(touchResult);\n        }\n    }\n\n    OnWheel(e: WheelEvent): void {\n        if (!this.overlay.Scroll({\n            startX: e.offsetX,\n            startY: e.offsetY,\n            scroll: Math.sign(e.deltaY),\n            units: 'row'\n        })) {\n            const smoothCameraZoomEffect = new SmoothCameraZoom(\n                e.deltaY < 0 ? 'in' : 'out',\n                this.camera,\n                this.settings.ZCameraBoundary);\n\n            this.effectRunner.Register(\n                smoothCameraZoomEffect,\n                { id: 'camera_zoom', rule: RegistrationCollisionResolver.Replace });\n        }\n    }\n\n    OnTouchZoomStart(): void {\n        this.touchZoomStartZ = this.camera.Position.z;\n    }\n\n    OnTouchZoom(zoom: number): void {\n        this.camera.MoveTo({\n            z: MathUtil.Clamp(this.touchZoomStartZ * zoom, this.settings.ZCameraBoundary.min, this.settings.ZCameraBoundary.max)\n        });\n\n        this.codeEditor.ViewProjection = this.camera.ViewProjection;\n        this.perspectiveLabelRenderer.ViewProjection = this.camera.ViewProjection;\n    }\n\n    OnKeyDown(e: MyInputEvent): void {\n        this.inFocus.OnInput(e);\n    }\n\n    public Dispose(): void {\n        this.isRunning = false;\n    }\n\n    private Start(): void {\n        requestAnimationFrame(() => this.DrawFrame(Date.now() - this.lastFrameTime));\n    }\n\n    private DrawFrame(elapsed: number): void {\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT | this.gl.STENCIL_BUFFER_BIT);\n\n        if (this.effectRunner.Draw(elapsed)) {\n            this.codeEditor.ViewProjection = this.camera.ViewProjection;\n            this.perspectiveLabelRenderer.ViewProjection = this.camera.ViewProjection;\n        }\n\n        this.codeEditor.Draw();\n        this.perspectiveLabelRenderer.Draw();\n\n        this.gl.clear(this.gl.DEPTH_BUFFER_BIT);\n\n        this.overlay.Draw();\n\n        if (this.isRunning) {\n            const now = Date.now();\n            const elapsed = now - this.lastFrameTime;\n            requestAnimationFrame(() => this.DrawFrame(elapsed))\n            this.lastFrameTime = now;\n        }\n    }\n\n    private async OpenFileFromDisk(): Promise<void> {\n        let sourceCode = '';\n\n        try {\n            sourceCode = await this.fileStorage.Open();\n        } catch (e) {\n            if (e instanceof AbortOperationException) {\n                return;\n            } else if (e instanceof Error) {\n                this.overlay.Snackbar.ShowError(e.message);\n            }\n\n            return;\n        }\n\n        const validator = new SourceCodeValidityAnalyser(sourceCode);\n\n        const firstProblem = validator.NextIllegalInstruction();\n\n        if (firstProblem !== null) {\n            let remainingProblems = 0;\n\n            for (; validator.NextIllegalInstruction(); ++remainingProblems);\n\n            let problemMsg = `File contains illegal symbol '${firstProblem.value}' at ${firstProblem.offset}`;\n\n            if (remainingProblems > 0) {\n                problemMsg += ` and ${remainingProblems} more`;\n            }\n\n            this.overlay.Snackbar\n                .ShowError(problemMsg);\n\n            return;\n        }\n\n        this.LoadSourceCodeToEditor(sourceCode);\n\n        this.history.Reset();\n        router.replace({ name: 'CodeEditor' });\n\n        this.FocusCameraAtEditor();\n    }\n\n    private async SaveSourceToDisk(): Promise<void> {\n        try {\n            await this.fileStorage.Save(this.SourceCodeString());\n        } catch (e) {\n            if (e instanceof AbortOperationException) {\n                return;\n            } else if (e instanceof Error) {\n                this.overlay.Snackbar.ShowError(e.message)\n            }\n\n            return;\n        }\n    }\n\n    private SourceCodeString(): string {\n        let sourceString = '';\n        for (let y = 0; y < this.settings.MemoryLimit.Height; ++y) {\n            let line = '';\n\n            for (let x = 0; x < this.settings.MemoryLimit.Width; ++x) {\n                line += String.fromCharCode(this.editorSourceCode.Read({ x, y }));\n            }\n\n            sourceString += line.trimEnd() + '\\n';\n        }\n\n        return sourceString;\n    }\n\n    private ShareSourceCode(): void {\n        const source_code = BefungeSourceCodeCodec.Encode(this.SourceCodeString());\n\n        const shareableSettings = this.ShareableSettings();\n        const settings = shareableSettings ? AppSettingsCodec.Encode(shareableSettings) : '';\n\n        router.replace({ name: 'Share', params: { source_code, settings } });\n    }\n\n    private ShareableSettings(): ShareableAppSettings | null {\n        const settings: ShareableAppSettings = {};\n\n        if (this.overlay.DebugControls.IsHeatmapShown) {\n            settings.heatmap = true;\n        }\n\n        if (this.overlay.IOControls.Input.length > 0) {\n            settings.input = this.overlay.IOControls.Input;\n        }\n\n        return Object.keys(settings).length > 0 ? settings : null;\n    }\n\n    LoadSourceCodeToEditor(sourceCode: string): void {\n        this.ResetSourceCodeEditor();\n\n        const linesOfCode = sourceCode.split(/\\r?\\n/);\n\n        for (let row = 0; row < linesOfCode.length; ++row) {\n            const line = linesOfCode[row];\n            for (let column = 0; column < line.length; ++column) {\n                this.codeEditor.EditCell(line[column], column, row);\n            }\n        }\n\n        this.overlay.FileControls.ShareDisabled = this.editorSourceCode.Empty;\n    }\n\n    LoadSettings(settings: ShareableAppSettings): void {\n        if (settings.input !== undefined) {\n            this.overlay.IOControls.Input = settings.input;\n        }\n\n        if (settings.heatmap !== undefined) {\n            this.overlay.DebugControls.ClickOnHeatmap();\n        }\n    }\n\n    private OnSourceCodeChanged(): void {\n        this.overlay.FileControls.ShareDisabled = this.editorSourceCode.Empty;\n    }\n\n    get Snackbar(): SnackbarControls {\n        return this.overlay.Snackbar;\n    }\n\n    private FollowEditableCell(): void {\n        const cellRect = this.codeEditor.EditableCellRect;\n        const lbNDC = vec3.transformMat4(vec3.create(), cellRect.lb, this.camera.ViewProjection);\n        const rtNDC = vec3.transformMat4(vec3.create(), cellRect.rt, this.camera.ViewProjection);\n\n        const ndcDiagonal = vec3.sub(vec3.create(), rtNDC, lbNDC);\n        const ndcStickToEdgeMovement = Transformation.MoveRectangleToPlaceInsideRectangle(\n            { lb: { x: lbNDC[0], y: lbNDC[1] }, rt: { x: rtNDC[0], y: rtNDC[1] } },\n            { lb: { x: -1, y: -1 }, rt: { x: 1, y: 1 } });\n\n        const finalMovement = vec2.fromValues(ndcStickToEdgeMovement.x, ndcStickToEdgeMovement.y);\n\n        if (ndcStickToEdgeMovement.x > 0) {\n            const ndcDistanceToLeft = ndcDiagonal[0] * this.codeEditor.EditableCell.x;\n            finalMovement[0] += Math.min(ndcDistanceToLeft, 1);\n        } else if (ndcStickToEdgeMovement.x < 0) {\n            const ndcDistanceToRight = ndcDiagonal[0] * (this.settings.MemoryLimit.Width - this.codeEditor.EditableCell.x - 1);\n            finalMovement[0] -= Math.min(ndcDistanceToRight, 1);\n        }\n\n        if (ndcStickToEdgeMovement.y > 0) {\n            const ndcDistanceToBottom = ndcDiagonal[1] * (this.settings.MemoryLimit.Height - this.codeEditor.EditableCell.y - 1);\n            finalMovement[1] += Math.min(ndcDistanceToBottom, 1);\n        } else if (ndcStickToEdgeMovement.y < 0) {\n            const ndcDistanceToTop = ndcDiagonal[1] * this.codeEditor.EditableCell.y;\n            finalMovement[1] -= Math.min(ndcDistanceToTop, 1);\n        }\n\n\n        const movement: vec2 = [\n            finalMovement[0] * this.gl.canvas.width / 2,\n            finalMovement[1] * this.gl.canvas.height / 2\n        ];\n\n        const effect = new SmoothCameraMove(\n            this.camera,\n            movement,\n            this.gl.canvas);\n\n        this.effectRunner.Register(\n            effect,\n            { id: 'follow_editable_cell', rule: RegistrationCollisionResolver.Replace });\n    }\n\n    private ResetSourceCodeEditor(): void {\n        this.editorSourceCode.Initialize(ArrayMemory, this.settings.MemoryLimit);\n        this.codeEditor.Clear();\n    }\n\n    private SwitchFocus(component: InputReceiver): void {\n        this.inFocus.Blur();\n        this.inFocusOnVanishReleaser();\n\n        this.inFocus = component;\n        this.inFocus.Focus();\n        this.inFocus.OnVanish.Attach(() => this.SwitchFocus(this.codeEditorServiceInputReceiverFactory()));\n    }\n\n    private ControlsResponseToHeatmapActivation(feedback: HeatmapToggleButtonState): void {\n        this.overlay.FileControls.OpenFromDiskDisabled = feedback.isShown;\n\n        feedback.isShown ?\n            this.overlay.HistoryControls.Lock() :\n            this.overlay.HistoryControls.Unlock();\n\n        this.overlay.EditControls.Disable = feedback.isShown;\n    }\n\n    private FocusCameraAtEditor(): void {\n        const uiLeftTopEditorGridPosition = this.overlay.EditDirectionControls.Boundaries.rt;\n        const margin = 10;\n        const wndLeftTopEditorGridPosition: Vec2 = {\n            x: uiLeftTopEditorGridPosition.x + margin,\n            y: this.settings.ViewDimension.Height - uiLeftTopEditorGridPosition.y\n        };\n\n        const posNear = Camera.Unproject({ ...wndLeftTopEditorGridPosition, z: 0 }, this.camera.ViewProjection, this.gl.canvas);\n        const posFar = Camera.Unproject({ ...wndLeftTopEditorGridPosition, z: 1 }, this.camera.ViewProjection, this.gl.canvas);\n\n        const intersection = Intersection.PlaneLine(\n            { a: 0, b: 0, c: 1, d: 0 },\n            { a: [posNear[0], posNear[1], posNear[2]], b: [posFar[0], posFar[1], posFar[2]] });\n\n        intersection[1] -= this.settings.MemoryLimit.Height * this.codeEditor.CellSize;\n\n        this.camera.Translate({\n            x: -intersection[0],\n            y: -intersection[1]\n        });\n\n        this.codeEditor.ViewProjection = this.camera.ViewProjection;\n        this.perspectiveLabelRenderer.ViewProjection = this.camera.ViewProjection;\n    }\n}\n\nInversify.bind(AppService).toSelf().inSingletonScope().onActivation(AsyncConstructorActivator);\n","export async function WaitEvent<TEvent extends Event>(target: HTMLElement, event: string): Promise<TEvent> {\n    return new Promise<TEvent>(resolve => target.addEventListener(event, e => resolve(e as TEvent), { once: true }));\n}\n","import { injectable } from \"inversify\";\n\nimport { WaitEvent } from \"../EventWaiter\";\n\nimport { FileStorage } from \"./FileStorage\";\n\n@injectable()\nexport class DOMEmulatedFileStorage implements FileStorage {\n    private openedFilename = 'befunge.txt';\n\n    async Open(): Promise<string> {\n        const input = document.createElement('input');\n\n        input.type = 'file';\n        const onChange = WaitEvent(input, 'change');\n\n        input.click();\n\n        const onChangeResult = await onChange;\n\n        const target = onChangeResult.target as HTMLInputElement | null;\n\n        if ((target?.files?.length ?? 0) === 0) {\n            throw new Error('Failed to load file');\n        }\n\n        this.openedFilename = target!.files![0].name;\n\n        return target!.files![0].text();\n    }\n\n    async Save(content: string): Promise<void> {\n        const blob = new Blob([content], { type: 'text/plain' });\n\n        const url = window.URL.createObjectURL(blob);\n\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = this.openedFilename;\n\n        a.click();\n\n        window.URL.revokeObjectURL(url);\n    }\n}\n","import { injectable } from \"inversify\";\n\nimport { AbortOperationException, FileStorage } from \"./FileStorage\";\n\n@injectable()\nexport class FilePickerApiDiskStorage implements FileStorage {\n    private openedFilename = 'befunge.txt';\n\n    async Open(): Promise<string> {\n        try {\n            const [fileHandle] = await window.showOpenFilePicker({ multiple: false });\n\n            if (fileHandle.kind !== \"file\") {\n                throw new AbortOperationException();\n            }\n            this.openedFilename = fileHandle.name;\n            const file = await fileHandle.getFile();\n\n            return file.text();\n        } catch (e) {\n            if (e instanceof DOMException) {\n                switch (e.name) {\n                    case 'AbortError':\n                        throw new AbortOperationException();\n                }\n            }\n\n            throw e;\n        }\n    }\n\n    async Save(content: string): Promise<void> {\n        try {\n            const fileHandle = await window.showSaveFilePicker({ suggestedName: this.openedFilename });\n\n            const stream = await fileHandle.createWritable();\n\n            await stream.write(content);\n\n            await stream.close();\n        } catch (e) {\n            if (e instanceof DOMException) {\n                switch (e.name) {\n                    case 'AbortError':\n                        throw new AbortOperationException();\n                }\n            }\n\n            throw e;\n        }\n    }\n}\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"./AppSettings\";\nimport { InjectionToken } from \"./InjectionToken\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { AsyncConstructable, AsyncConstructorActivator } from \"@/lib/DI/AsyncConstructorActivator\";\nimport { DOMEmulatedFileStorage } from \"@/lib/DOM/FileStorage/DOMEmulatedFileStorage\";\nimport { FilePickerApiDiskStorage } from \"@/lib/DOM/FileStorage/FilePickerApiFileStorage\";\nimport { FileStorage } from \"@/lib/DOM/FileStorage/FileStorage\";\nimport { FontAtlas, FontAtlasBuilder } from \"@/lib/font/FontAtlasBuilder\";\nimport { NotNull } from \"@/lib/NotNull\";\nimport { UIIconAtlas } from \"@/lib/UI/UIIcon\";\n\n@injectable()\nexport class GlobalDependencies implements AsyncConstructable {\n    constructor(@inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext) { }\n\n    async AsyncConstructor(): Promise<void> {\n        Inversify.get(AppSettings).ViewDimension = { Width: this.gl.canvas.width, Height: this.gl.canvas.height };\n\n        await this.SetupGlobalDependencies();\n    }\n\n    private async SetupGlobalDependencies(): Promise<void> {\n        Inversify\n            .bind<FontAtlas>(InjectionToken.FontAtlas)\n            .toConstantValue(FontAtlasBuilder.Build({ ASCIIRange: { Start: ' ', End: '~' }, Font: { Name: 'Roboto', Size: 72 } }));\n\n        Inversify\n            .bind<WebGLTexture>(InjectionToken.FontAtlasTexture)\n            .toConstantValue(this.BuildTexture(Inversify.get<FontAtlas>(InjectionToken.FontAtlas).Image));\n\n        Inversify\n            .bind<UIIconAtlas>(InjectionToken.IconAtlas)\n            .toConstantValue(await Inversify.getAsync(UIIconAtlas));\n\n        Inversify\n            .bind<WebGLTexture>(InjectionToken.IconAtlasTexture)\n            .toConstantValue(this.BuildTexture(Inversify.get<UIIconAtlas>(InjectionToken.IconAtlas).Image));\n\n        Inversify\n            .bind<FileStorage>(InjectionToken.FileStorage)\n            .to(this.IsPickerApiAvailable ? FilePickerApiDiskStorage : DOMEmulatedFileStorage)\n            .inSingletonScope();\n    }\n\n    private get IsPickerApiAvailable(): boolean {\n        return window.showOpenFilePicker !== undefined &&\n            window.showSaveFilePicker !== undefined;\n    }\n\n    private BuildTexture(data: TexImageSource): WebGLTexture {\n        const texture = this.gl.createTexture() ?? NotNull('Failed to create texture');\n\n        this.gl.activeTexture(this.gl.TEXTURE0);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n\n        this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, data);\n\n        return texture;\n    }\n}\n\nInversify.bind(GlobalDependencies).toSelf().inSingletonScope().onActivation(AsyncConstructorActivator);\n","import { defineComponent as _defineComponent } from 'vue'\nimport { normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { computed, onMounted, onBeforeUnmount, ref } from 'vue';\n\ninterface Emits {\n  (e: 'contextReady', context: WebGL2RenderingContext): void;\n  (e: 'resize'): void\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'WebglCanvas',\n  props: {\n  width: { type: Number },\n  height: { type: Number }\n},\n  emits: [\"contextReady\", \"resize\"],\n  setup(__props, { emit }) {\n\nconst props = __props;\n\n\n\n\n\nconst innerWidth = ref(0);\nconst innerHeight = ref(0);\n\nconst canvas = ref<HTMLCanvasElement>();\nlet context: WebGL2RenderingContext | null = null;\n\nconst isPropsUsed = computed(\n  () => !(props.width === undefined && props.height === undefined)\n);\n\nconst width = computed(() => props.width ?? innerWidth.value);\nconst height = computed(() => props.height ?? innerHeight.value);\nconst widthCss = computed(() => isPropsUsed.value ? SizingToCss(width.value) : '100%');\nconst heightCss = computed(() => isPropsUsed.value ? SizingToCss(height.value) : '100%');\n\nonMounted(() => {\n  if (isPropsUsed.value) {\n    UpdateViewport();\n  } else {\n    OnResize();\n    window.addEventListener('resize', OnResize);\n  }\n\n  SetupContext();\n});\n\nonBeforeUnmount(() => {\n  if (!isPropsUsed.value) {\n    window.removeEventListener('resize', OnResize);\n  }\n});\n\nfunction UpdateViewport(): void {\n  if (canvas.value) {\n    canvas.value.width = width.value;\n    canvas.value.height = height.value;\n\n    context?.viewport(0, 0, width.value, height.value);\n  }\n}\n\nfunction OnResize(): void {\n  innerWidth.value = (canvas.value?.clientWidth ?? 0) * window.devicePixelRatio;\n  innerHeight.value = (canvas.value?.clientHeight ?? 0) * window.devicePixelRatio;\n\n  UpdateViewport();\n\n  emit('resize');\n}\n\nfunction SetupContext(): void {\n  if (canvas.value === undefined) {\n    console.error('Canvas element not found');\n    return;\n  }\n\n  context = canvas.value.getContext('webgl2', { stencil: true });\n\n  if (context === null) {\n    console.error(\"Can't initialize webgl2 context\");\n    return;\n  }\n\n  context.enable(context.CULL_FACE);\n\n  context.enable(context.DEPTH_TEST);\n\n  context.enable(context.BLEND);\n  context.blendFunc(context.SRC_ALPHA, context.ONE_MINUS_SRC_ALPHA);\n\n  emit('contextReady', context);\n}\n\nfunction SizingToCss(value: number): string {\n  return `${value}px`;\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"canvas\", {\n    ref_key: \"canvas\",\n    ref: canvas,\n    style: _normalizeStyle({ width: widthCss.value, height: heightCss.value })\n  }, null, 4))\n}\n}\n\n})","import script from \"./WebglCanvas.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WebglCanvas.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./WebglCanvas.vue?vue&type=style&index=0&id=3248c29e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3248c29e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { onBeforeUnmount } from 'vue';\n\nimport { AppService } from './AppService';\nimport { AppSettingsCodec } from './AppSettingsCodec';\nimport { GlobalDependencies } from './GlobalDependencies';\nimport { InjectionToken } from './InjectionToken';\n\nimport { Inversify } from '@/Inversify';\nimport { BefungeSourceCodeCodec } from '@/lib/befunge/BefungeSourceCodeCodec';\nimport Webgl2Canvas from '@/lib/VueComponents/WebglCanvas.vue';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'CodeEditor',\n  props: {\n  source_code: { required: false, type: String, default: '' },\n  settings: { required: false, type: String, default: '' }\n},\n  setup(__props) {\n\nconst props = __props;\n\nlet service!: AppService;\n\n\n\nonBeforeUnmount(() => service.Dispose());\n\nasync function OnContextReady(context: WebGL2RenderingContext): Promise<void> {\n  Inversify\n    .bind<WebGL2RenderingContext>(InjectionToken.WebGLRenderingContext)\n    .toConstantValue(context);\n\n  await Inversify.getAsync(GlobalDependencies);\n\n  service = await Inversify.getAsync(AppService);\n  service.Resize();\n\n  OnSharedCode();\n}\n\nfunction OnResize(): void {\n  service?.Resize();\n}\n\nfunction OnMouseMove(e: MouseEvent): void {\n  service?.OnMouseMove(e);\n}\n\nfunction OnMouseDown(e: MouseEvent): void {\n  service?.OnMouseDown(e);\n}\n\nfunction OnMouseUp(e: MouseEvent): void {\n  service?.OnMouseUp(e);\n}\n\nfunction OnWheel(e: WheelEvent): void {\n  service?.OnWheel(e);\n}\n\nfunction OnKeyDown(e: KeyboardEvent): void {\n  service?.OnKeyDown(e);\n}\n\nfunction OnTouchMove(e: TouchEvent): void {\n  service?.OnTouchMove(e);\n}\n\nfunction OnTouchStart(e: TouchEvent): void {\n  service?.OnTouchStart(e);\n}\n\nfunction OnTouchEnd(e: TouchEvent): void {\n  service?.OnTouchEnd(e);\n}\n\nfunction OnSharedCode() {\n  if (props.source_code.length > 0) {\n    try {\n      const sourceCode = BefungeSourceCodeCodec.Decode(props.source_code);\n      service.LoadSourceCodeToEditor(sourceCode);\n\n      if (props.settings.length > 0) {\n        const settings = AppSettingsCodec.Decode(props.settings);\n        service.LoadSettings(settings);\n      }\n    } catch (e) {\n      if (e instanceof Error) {\n        service.Snackbar.ShowError(e.message);\n      }\n    }\n  }\n};\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(Webgl2Canvas, {\n    autofocus: \"\",\n    tabindex: \"0\",\n    onContextReady: OnContextReady,\n    onResize: OnResize,\n    onMousemove: OnMouseMove,\n    onMousedown: OnMouseDown,\n    onMouseup: OnMouseUp,\n    onWheelPassive: OnWheel,\n    onKeydown: OnKeyDown,\n    onTouchmove: OnTouchMove,\n    onTouchstart: OnTouchStart,\n    onTouchend: OnTouchEnd\n  }))\n}\n}\n\n})","import script from \"./CodeEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CodeEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router';\n\nimport CodeEditor from '@/app/CodeEditor.vue';\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: '/',\n    name: 'CodeEditor',\n    props: true,\n    component: CodeEditor\n  },\n  {\n    path: '/share/:source_code/:settings?',\n    name: 'Share',\n    props: true,\n    component: CodeEditor\n  }\n];\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\n\nexport default router;\n","import { createStore } from 'vuex';\n\nexport default createStore({\n  state: {},\n  getters: {},\n  mutations: {},\n  actions: {},\n  modules: {}\n});\n","import 'reflect-metadata';\n\nimport { createApp } from 'vue';\n\nimport '@fontsource/roboto/500.css';\n\nimport App from './App.vue';\nimport './registerServiceWorker';\nimport router from './router';\nimport store from './store';\n\nasync function Main(): Promise<void> {\n    // Explicitly load the font otherwise it not be visible for the background canvas that used for generating a bitmap font\n    const roboto = new FontFace('Roboto', `url(${process.env.BASE_URL}fonts/roboto-latin-500-normal.3170fd9a.woff2)`);\n    await roboto.load();\n\n    createApp(App).use(store).use(router).mount('#app');\n}\n\nMain();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkbefunge\"] = self[\"webpackChunkbefunge\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(7690); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createBlock","_component_router_view","script","__exports__","render","register","ready","console","log","registered","cached","updatefound","updated","offline","error","MouseButtons","MathUtil","static","value","min","max","Math","x","y","tolerance","Number","EPSILON","abs","points","length","Error","n","p","p0","p1","sqrt","SqrDistance","pow","OnSelectStrategy","constructor","releaseTimeout","maxDistance","_defineProperty","OnMouseDown","e","this","mouseDownStart","Date","now","lastMouseDownPosition","offsetX","offsetY","OnMouseUp","distance","vec2","elapsedTime","isSelect","IsSelect","TouchPan","pan","OnTouchStart","touch","targetTouches","touchPrev","id","identifier","pageX","pageY","OnTouchMove","item","startX","window","devicePixelRatio","startY","movementX","movementY","TouchZoom","zoomStart","zoomProgress","UpdateTrace","OnTouchEnd","forEach","prevTouch","prev","find","every","trace","preventDefault","map","dist0","Distance","dist1","AppEventTransformer","touchPan","OnPan","touchZoom","OnTouchZoomStart","zoom","OnTouchZoom","OnMouseMove","buttons","Left","selectStrategy","OnSelect","__decorate","injectable","InjectionToken","WebGLRenderingContext","Symbol","FontAtlas","IconAtlas","FontAtlasTexture","IconAtlasTexture","FontGlyphCollectionFactory","HeatmapGridRendererFactory","HeatmapExtensionFactory","UITextListRendererFactory","CodeEditorServiceInputReceiverFactory","UIEditableTextListRendererFactory","FileStorage","UILabelRendererTargetName","Perspective","Unique","AppCommandInjectionToken","EditCellCommandFactory","EditCellsRegionFactory","EditCellCommandPostAction","MoveNext","EditCellsRegionCommandPostAction","StayLeftTop","Inversify","Container","AppSettings","gl","PI","Width","Height","editableCellStyle","AspectRatio","canvas","width","height","DevicePixelRatio","__param","inject","WebGL2RenderingContext","_a","Object","bind","toSelf","inSingletonScope","DecodingException","AppSettingsCodec","settings","btoa","JSON","stringify","encoded","parse","atob","PropsValidation","DOMException","name","SyntaxError","assertions","NotNull","msg","startSymbolCode","Columns","Rows","GlyphCount","Image","LookupUV","symbol","symbolCode","charCodeAt","glyphIdx","column","row","floor","glyphWidth","glyphHeight","leftTop","A","B","FontAtlasBuilderImpl","Build","options","startCode","ASCIIRange","Start","endCode","End","glyphCount","columnCount","ceil","rowCount","glyphCellSize","GlyphCellSize","SetupCanvas","FillCanvasWithGlyphs","context","getImageData","document","createElement","getContext","font","Font","Size","Name","fillStyle","col","halfGlyphCellSize","cellCenter","String","fromCharCode","drawPosition","CenteredToBaseLine","fillText","pos","metrics","measureText","actualBoundingBoxAscent","actualBoundingBoxDescent","FontAtlasBuilder","PrimitiveBuilder","position","dimension","attributes","leftBottom","rightTop","rightBottom","attr","Array","isArray","push","LeftBottom","LeftTop","RightTop","RightBottom","borderWidth","borderTop","AABBRectangle","borderRight","borderBottom","borderLeft","ArrayHelper","array","comparator","dest","destStart","src","srcStart","ShaderProgram","Map","instance","createProgram","Attach","type","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","err","getShaderInfoLog","deleteShader","attachShader","async","url","fetch","text","Link","linkProgram","getProgramParameter","LINK_STATUS","deleteProgram","Use","useProgram","SetUniform3fv","uniform3fv","GetUniformLocation","SetUniform2fv","uniform2fv","SetUniform4fv","uniform4fv","SetUniform1f","uniform1f","SetUniform1i","uniform1i","SetUniform2iv","uniform2iv","SetUniformMatrix4fv","uniformMatrix4fv","GetAttributeLocation","loc","getAttribLocation","Dispose","uniformCache","get","getUniformLocation","set","TypeSizeResolver","Sizes","BYTE","Int8Array","BYTES_PER_ELEMENT","SHORT","Int16Array","UNSIGNED_BYTE","Uint8Array","UNSIGNED_SHORT","Uint16Array","FLOAT","Float32Array","HALF_FLOAT","INT","Int32Array","UNSIGNED_INT","Uint32Array","INT_2_10_10_10_REV","UNSIGNED_INT_2_10_10_10_REV","PrimitivesRenderer","primitiveDescription","ArrayBuffer","Setup","SetupAttributes","UploadAttributes","vertexCount","componentsPerVertex","vertexData","stride","vertexStart","attrDescIdx","offset","byteOffset","size","Resolve","attrInfo","target","slice","bindBuffer","ARRAY_BUFFER","vbo","bufferData","DYNAMIC_DRAW","UpdatePrimitiveComponents","vertexDataOffsetStart","attributeOffset","modifiedData","bufferSubData","PrimitiveComponents","index","PrimitiveComponentsRange","primitiveStartIdx","primitivesCount","ComponentsPerPrimitive","fill","vertexIdx","attrIdx","indicesPerPrimitive","Copy","TotalPrimitives","ComponentsPerVertex","Draw","bindVertexArray","vao","drawArrays","basePrimitiveType","deleteBuffer","deleteVertexArray","createBuffer","createVertexArray","FRAGMENT_SHADER","fragment","VERTEX_SHADER","vertex","reduce","acc","location","enableVertexAttribArray","IsIntegerAttributesType","vertexAttribIPointer","vertexAttribPointer","normalized","IntegerTypes","includes","unmanaged","EditorGridRenderer","fontAtlas","fontAtlasTexture","super","FGrid","VGrid","TRIANGLES","SetupRenderer","ResizeGrid","vertexList","MemoryLimit","cell","BuildCell","CellSize","cellIdx","cellAttrs","symbolUV","UVStartOffset","bindTexture","TEXTURE_2D","color","uv","ViewProjection","mat","Dimension","_b","_c","_d","WebGLTexture","EditorGridCellsOutlineRenderer","gridRenderer","FCellsOutline","VCellsOutline","editorOutline","AABBFrame","gridOutlineWidth","gridOutlineColor","rowAttrs","outlineWidth","cellOutlineColor","colAttrs","SelectionRenderer","_class","editorGridRenderer","FSelection","VSelection","SelectionRenderer_1","IndicesPerPrimitive","Select","SelectRegion","region","Extremum","FlipY","OutOfGrid","selectionIdx","selected","findIndex","r","a","b","colorOffset","attrs","colorStart","point","Unselect","UnselectRegion","splice","CodeEditorRenderer","editorGridCellsOutlineRenderer","selectionRenderer","viewProjection","Clear","IsValidLocation","Transformation","movable","destination","betweenByX","Between","lb","rt","betweenByY","distanceToTop","distanceToBottom","distanceToLeft","distanceToRight","corners","DistanceDiff","closest","Min","diff","leftToRight","rightToLeft","bottomToTop","topToBottom","intersectByX","intersectByY","Intersection","plane","line","d0","vec3","c","d","d1","t","intersection","rectangle","aTopRight","bTopRight","Camera","viewport","vec","z","v","vec4","invertViewProj","mat4","movement","posNear0","Unproject","posFar0","intersection0","PlaneLine","posNear1","posFar1","intersection1","delta","CameraService","codeEditorRenderer","UpdateProjection","UpdateViewProjection","MoveTo","undefined","camera","MaintainCodeEditorVisible","Translate","Position","Resize","projection","Fovy","ZNear","ZFar","view","cellSize","lbNDC","rtNDC","ndcCompensation","ShortestMoveForIntersection","screenCompensation","ViewDimension","worldCompensation","UnprojectMovement","HeadlineControlsLayout","POSITIVE_INFINITY","Watch","component","Observable","ComponentUpdated","components","AbsolutePosition","absolutePosition","Scale","skipUpdates","margin","targetScale","scale","MaintainPositionDimension","relativeExtremum","absoluteExtremum","flatMap","MapComponent","DebugControlsLayout","headlineLayout","DebugGroup","group","debugGroup","DebugGroupUpdated","queueMicrotask","RecalculatePosition","debugGroupDimension","RangeRange","verticalPosition","IllegalInstructionException","Where","Opcode","PCDirection","ObservablePriority","Low","NEGATIVE_INFINITY","Normal","High","ObservableController","observer","priority","descriptor","observers","MaintainSorted","DetachAll","Notify","sender","o","temp","AsyncConstructorActivator","_context","constructable","AsyncConstructor","RectangleRowPacker","Add","rectangles","Pack","idealArea","maxWidth","rect","estimatedWidth","sort","pack","maxHeightInRow","items","TextureAtlas","ClonePackage","NormalizePackage","found","UndefinedUV","TextureAtlasBuilder","filename","images","packer","img","packed","CreateImage","drawImage","image","Promise","resolve","reject","onload","onerror","UIIcon","UIIconAtlas","BuildAtlas","ArrowLeft","atlas","ArrowRight","aspectRatio","ExtractAspectRatio","ArrowUp","ArrowDown","ArrowThinLeft","ArrowThinRight","ArrowThinDown","ArrowThinUp","Undo","Redo","iconExtras","builder","icons","Empty","Debugger","Open","Save","Play","PlayDebug","DebugStepInto","ExclamationCircle","ExclamationTriangle","QuestionMark","CheckCircle","Breakpoint","ArrowThinAll","Delete","Stop","Heatmap","Settings","Cut","Paste","EditDelete","Share","Input","Output","Keyboard","Shift","Backspace","Enter","icon","HorizontalAnchor","VerticalAnchor","onActivation","UIObservablePositioningGroup","anchor","vertical","Bottom","horizontal","observable","AppendChild","childs","updateNeeded","UpdateChilds","CalculateDimension","RemoveChild","removeIdx","indexOf","HorizontalPositionRespectAnchor","VerticalPositionRespectAnchor","MaintainExtremum","Destroy","extremum","viewWidth","Right","Middle","viewHeight","Top","UIObservableAlert","zIndex","style","Offset","deleter","parent","parentDetacher","isDestroyed","Uninitialize","parentPosition","ZIndex","Icon","Text","Style","IsDestroyed","MemoryPoolTracker","capacity","NoFree","pool","from","_","nextFree","Allocate","HasFreeSlot","freeSlot","InUse","slot","growthFactor","OnExtend","Capacity","Free","shrinkFactor","OnShrink","GatherInUseIndices","Shrink","inUse","UIAlertIconRenderer","FUIALertIcon","VUIAlertIcon","UIAlertRenderer","alertIcon","iconAtlas","iconAtlasTexture","FUIAlertPanel","VUIAlertPanel","vertexAttributesTracker","renderer","initialCapacity","inUseIndices","panelAttrs","alertIconComponents","panelComponents","alerts","alert","idx","extendedCapacity","extendedPanelAttrs","alertIconsComponents","extendedAlertIconAttrs","Create","alertText","uiRenderer","CreateLabel","panelContentZOffset","lineHeight","StyleRange","iconSideLength","iconMargin","UpdateComponent","UIRenderer","Alerts","label","LabelPosition","LineHeight","UpdateAttributes","ExtractPanelAttributes","emptyAttrs","ExtractIconAttributes","zFarIncluded","fillColor","sideLength","AlertIconSideLength","iconUV","toDestroyIdx","_e","UIObservableEditableTextList","containerStyle","textList","CreateTextList","begin","end","OnVanish","onVanish","OnInput","keyCode","key","toDelete","ContainerStyle","Visible","visible","onUpdate","HasFocus","hasFocus","Focus","Blur","ScrollToTop","ScrollAligned","UIEditableTextListRenderer","FEditableTextListCursor","VEditableTextListCursor","inTransientScope","toFactory","ctx","container","UIObservableIconButton","iconStyle","touchCallback","Destroyed","destroyed","Disable","disabled","originIconStyle","DisabledIconColor","Touch","UninitializedTag","UIButtonOutlineRenderer","FUIIconButtonOutline","VUIIconButtonOutline","UIIconButtonRenderer","FUIIconButton","VUIIconButton","outline","buttonAttrs","buttonOutlineAttrs","buttonComponents","buttonOutlineComponents","iconButtons","btn","extendedButtonAttrs","extendedOutlineAttrs","button","TouchProxy","origin","alreadyTouchedIdx","touchStart","animation","originFillColor","timestamp","TouchAnimation","lightingDuration","darkeningDuration","brightFactor","notFinished","finished","anim","elapsed","lightingProgress","bright","darkeningProgress","IconButtons","UpdateContentAttributes","ResetOutlineAttributes","UpdateOutlineAttributes","ExtractContentAttributes","ExtractOutlineAttributes","IsUndefinedUV","ExtractContentAttributesWide","ExtractContentAttributesTall","iconWidth","segmentWidth","leftSegmentAttributes","iconAttributes","rightSegmentAttributes","iconHeight","segmentHeight","bottomSegmentAttributes","topSegmentAttributes","outlineColor","UpdatedProperty","UIObservableLabel","glyphAllocator","symbolsStyle","ResizeSymbolStyles","AdjustPoolMemory","DeferredNotify","changedProperties","ReplaceOffset","old","offsets","UpdateTextDimension","Offsets","ChangedProperties","PrintableTextLength","split","filter","char","NonPrintableSymbols","PrintableOffsetLength","NonPrintableOffset","ExtendPoolMemory","extraMemoryNeeded","ShrinkPoolMemory","excessOffsets","released","AddExtraNonPrintableOffsets","RemoveExcessNonPrintableOffsets","AdjustNonPrintableOffsets","extraNonPrintableOffsets","removed","charIdx","offsetStartIdx","nonPrintableOffsetIdx","ExtendSymbolStyles","DefaultSymbolStyle","ShrinkSymbolStyles","CatchBlock","fn","args","CatchFn","CatchValue","ExceptionTrap","AsyncCatchBlock","AsyncExceptionTrap","FontGlyphCollection","library","Lookup","blueprint","FontGlyphCollectionBuilderImpl","BuildBlueprints","lib","atlasUV","extraHeight","AtlasCellToGlyphUV","baselineOffset","fontBoundingBoxDescent","glyph","relA","relB","uvWidth","uvHeight","SelfBind","method","inRequestScope","UILabelRenderer","UILabelRenderer_1","fontTexture","fontGlyphCollectionFactory","FUILabel","VUILabel","labelAttrs","oldOffset","labels","delete","extendedLabelAttrs","Labels","Set","values","AllocateGlyph","GlyphFree","OnlyPositionChanged","fontGlyphCollection","lines","SplitString","minBaseOffset","MinBaseOffset","world","xOffset","startIdx","glyphBlueprint","LookupGlyph","comp","maxBaselineOffsetSymbol","Try","str","lineStart","whenTargetIsDefault","whenTargetNamed","UIObservableTextButton","caption","CreateIconButton","TouchAdapter","aboveButton","CaptionPosition","Caption","_sender","StyleCaptionRange","UIObservableTextList","labelRenderer","ScheduleUpdateScrollControlsPresence","scroll","BorderWidth","scrollControls","scrollTopButton","scrollBottomButton","IsContentOverflow","MinScroll","UpdateScrollControlsPresence","CreateTopScrollButton","CreateBottomScrollButton","ScrollButtonX","ScrollBottomButtonY","ScrollTopButtonY","scrollButtonDimension","scrollButtonStyle","scrollButtonIconColor","_component","MaxScroll","Clamp","UpdateScrollButtonDisability","UITextListBorderRenderer","FTextListBorder","VTextListBorder","UITextListRenderer","FUITextListStencil","VUITextListStencil","borderRenderer","scencilRectAttrs","borderAttrs","stencilComponents","borderComponents","extendedBorderAttrs","enable","STENCIL_TEST","stencilFunc","ALWAYS","stencilOp","KEEP","REPLACE","EQUAL","clear","STENCIL_BUFFER_BIT","disable","UpdateStencilAttributes","UpdateBorderAttributes","named","iconButtonRenderer","alertRenderer","labelsRenderer","uiTextListRendererFactory","uiEditableTextListRendererFactory","CreateTextButton","CreateAlert","UIObservableTextListDeleter","uiTextLists","CreateEditableTextList","editableTextList","UIObservableEditableTextListDeleter","uiEditableTextLists","touchResult","TouchAlerts","TouchButtons","TouchLabels","TouchTextList","FindTextList","intersected","AABBRectanglePoint","Max","desc","_f","DebugAction","DebugControls","layout","buttonSideLength","executeButton","DebugControls_1","DefaultButtonFillColor","DefaultButtonOutlineColor","DefaultButtonIconColor","executeObservable","debugButton","debugObservable","RunNextBreakpoint","breakpointMenuButton","BreakpointButtonIconColor","ToggleBreakpointMenuButton","heatmapButton","ProfilerButtonIconColor","ToggleHeatmap","breakpointMenuGroup","debugMenuGroup","ClickOnHeatmap","DebugMode","debugMode","mode","DebugModeButtonIconColor","RunNextInstruction","Interrupt","IsHeatmapShown","isHeatmapShown","Execute","Debug","CellBreakopint","cellBreakpointObservable","CellBreakpointDelete","cellBreakpointDeleteObservable","heatmapObservable","isBreakpointMenuOpen","CloseCellBreakpointDirectionMenu","ShowCellBreakpointDirectionMenu","totalButtons","DeactivateButton","NotifyWithPCLocationCondition","Direction","Up","Down","NotifyWithCellBreakpointDeactivation","direction","feedback","isShown","ToggleButtonOutlineColor","EditControls","buttonIconColor","btnSideLength","selectButton","selectObservable","cutButton","cutObservable","copyButton","copyObservable","pasteButton","pasteObservable","deleteButton","deleteObservable","SelectObservable","CutObservable","CopyObservable","PasteObservable","DeleteObservable","EditDirectionControls","buttonMargin","buttonWidth","btnHeight","editDirectionControls","left","EditDirectionControls_1","CurrentDirectionInactiveIconColor","UpdateEditDirection","EditionDirection","up","right","CurrentDirrectionActiveIconColor","down","currentDirectionControl","EditDirectionObservable","editDirectionObservable","ForceEditDirection","control","Boundaries","FileControls","openButtonIconColor","saveButtonIconColor","helpButtonIconColor","openButton","FileControls_1","openFromDiskObservable","saveButton","saveToDiskObservable","shareButton","shareObservable","helpButton","ToggleHelpButton","helpShowed","showHelpObservable","ShareDisabled","OpenFromDiskDisabled","OpenFromDiskObservable","SaveToDiskObservable","ShareObservable","ShowHelpObservable","AppHistory","Push","command","CanRedo","history","cursor","updateObservable","CanUndo","Apply","Reset","UpdateObservable","HistoryControls","undoButton","undoObservable","redoButton","redoObservable","UpdateButtonsAvailability","UndoObservable","RedoObservable","Lock","Unlock","IOControls","btnIconColor","textListHeight","inputButton","SwitchTab","outputButton","outputTextList","maxPanelWidth","inputEditableTextList","inputTab","NewLineFormatter","PanelWidth","widthToFit","RetrieveFontGlyphCollection","strArr","padding","join","LanguageSyntaxHelpControls","instructions","instruction","description","BuildHelpString","instructionPaddingEnd","helpString","padEnd","instructionIdx","instructionRange","display","repeat","ToggleHelp","formatedHelp","SnackbarControls","Show","timeout","snackbar","Hide","LimitToViewportWidth","hideTimer","setTimeout","alertWidth","ShowError","contentColor","ShowWarning","ShowInformation","ShowSuccess","clearTimeout","EscapeString","Replacer","StackControls","stackTextList","Stack","stack","reverse","EnumSize","keys","KeyboardShiftMode","KeyboardButtonLayout","keyboardState","primary","secondary","symbols","IsUppercase","toUpperCase","toLowerCase","shift","Secondary","ascii","toString","HasSecondary","Index","CaptionDelimiter","Lovercase","Uppercase","VirtualKeyboardControls","lovercase","uppercase","inactive","active","toggleKeyboardGroup","toggleKeyboardButton","shiftIconColor","ToggleKeyboard","keyboardGroup","symbolMargin","SetupKeyboardLayouts","_symbol","TouchFeedback","keyboardStateFetcher","shiftMode","asciiMode","digitsSymbolRow","firstSymbolRow","secondSymbolRow","thirdSymbolRow","toggleKeyboard","SpawnKeyboard","HideKeyboard","CreateSymbolRow","buttonDimension","shiftWidth","CreateBottomRow","layouts","buttonContentColor","StyleButtonCaption","symbolButtons","buttonDeleter","ToggleShift","spacebarButton","backspace","asciiCodes","ToggleASCII","enter","UpdateSymbolButtonsCaptions","asciiToggleOutlineColor","primaryColor","secondaryColor","buttonCaptionColor","destroy","navigator","vibrate","OverlayService","snackbarControls","fileControls","languageSyntaxHelpControls","historyControls","editControls","debugControls","stackControls","virtualKeyboardControls","ioControls","BuildStickyProjection","Snackbar","stickyProjection","isKeyboardTouched","Scroll","units","_g","_h","_j","_k","_l","_m","SourceCodeMemory","Initialize","ctr","nonEmptyCells","Read","ptr","Write","emptyValue","actual","limit","Clone","PointerArithmetics","Target","EmptyExtension","Unload","TooltipPosition","CodeEditorTooltipService","perspectiveLabelRenderer","Tooltip","ValidateLocation","tooltipIdx","FindIndex","ReleaseTooltip","tooltips","BuildReleaser","ReleaseAll","Array2D","provider","Get","data","CoordsToIndex","Update","updater","mapped","IndexToCoord","ForEach","Every","Equals","arr","RawRef","EditableTarget","editorSourceCode","tooltipService","editCellCommandFactory","cellMoveNextPostActionFactory","editCellsRegionCommandFactory","regionMoveNextPostActionFactory","regionStayLeftTopPostActionFactory","lt","rb","Visual","IsSingleCell","editableRegion","CellInput","CellInputSingle","CellInputRegion","oldValue","ReversedDirection","editionDirection","RegionDimension","WithProvider","IsLocationValid","ShowTooltips","ContentString","sourceCode","InsertSourceCode","linesOfCode","fragmentWidth","fragmentHeight","newValue","locations","tooltipReleaser","FormatCellLocation","interfaces","AutoFactory","SelectCellBehaiver","editableCell","pivotTouch","PivotTouch","SelectCellsRegion","CodeEditorService","overlay","touchBehavior","OnSetEditableRegion","OnCut","OnCopyEditableRegion","OnPaste","OnDelete","EditableCellLostObservable","editableCellLostObservale","EditableCellDirection","LoadExtension","extension","UnloadExtension","EditCell","posNear","posFar","nextBehaivor","SetEditableCell","IsEditableCellVisible","SetEditableRegion","proj","EditableCell","EditableCellRect","clipboard","writeText","CPUImpl","memory","io","inst","instructionSet","Code","PC","Location","pcLocation","pcDirection","NextInstructionCode","StackPush","StackPop","ret","pop","StackDuplicate","StackSwap","last","dir","ExecuteNext","isStringMode","KnownInstruction","SkipNext","Move","StringModeToggle","ReadMemory","WriteMemory","WriteIO","OutputWrite","ReadCharacter","InputReadCharacter","ReadNumber","InputReadNumber","Halt","isHalted","IsHalted","cpu","Bridge","Divide","trunc","EndProgramm","GreatherThan","HoriontalIf","InputASCII","InputInteger","MemoryRead","MemoryWrite","Modulo","Multiply","Negation","NoOperation","_cpu","PCDirectionDown","PCDirectionLeft","PCDirectionRandom","random","PCDirectionRight","PCDirectionUp","PrintASCII","PrintInteger","StackPushDigit","digit","Subtract","ToggleStringMode","VerticalIf","IOPort","InputWrite","input","nonSpaceIdx","numberEnd","parseInt","HasInput","output","OutputRead","HasOutput","MemoryWriteInstructionInterceptor","interceptor","Befunge","memoryLimit","OnMemoryWrite","LoadExecutable","code","IsMemoryLimitDynamic","memoryRequirements","ExecutableMemoryLimit","SetInput","Run","RunFor","startTime","instructionsSkipPerTimeoutCheck","instructionsExecuted","RunNext","CollectOutput","CollectOutputUntil","maxLength","readed","AttachDebugger","AttachCPU","AttachProfiler","profiler","AddMemoryWriteInterceptor","memoryWriteInterceptors","rmIdx","NextInstruction","InstructionsExecuted","IP","maxRowLength","maxColumnLength","rowLength","ComparsionCondition","noDebug","triggered","BreakpointsCheck","breakpoints","SetBreakpoint","brk","pcLocationBrk","Value","stackBrk","BreakpointReleaser","PCBreakpoints","brks","toRemove","BreakpointCheckPC","BreakpointCheckStack","top","Condition","Equal","Less","LessEqual","Greater","GreaterEqual","CellHitsFlow","directionsCount","stats","Total","totalHits","Normalized","Profiler","CellHeatmapFor","heatmap","hitsFlow","to","BefungeToolbox","Interpreter","interpreter","debugger","DebuggingService","codeEditor","befungeToolbox","action","DebugCodeAction","cond","OnCellBreakpointAction","OnCellBreakpointDelete","prevEditableCell","hasBrk","some","activeCellBreakpoints","activeBreakpointColor","inactiveBreakpointColor","OnCellInput","UploadBreakpointsToDebugger","debug","executionResult","ExecutionTimeout","message","HideMemoryWriteTooltips","RestoreCellBreakpointsSelection","MaxOutputLength","releaser","SetCellBreakpoint","existIdx","condition","brkRemove","memoryWritesTooltipsReleasers","ExecutionService","HeatmapGridRenderer","FHeatmapGrid","VHeatmapGrid","HeatmapGridRendererBuilder","uvCoord","HeatmapExtension","heatmapGridRenderer","tooltipReleasers","release","HeatmapExtensionBuilder","heatmapGridRendererFactory","releasers","DrawHitsOnCell","MaxHits","renderInfo","HitsToColor","PackHitsFlow","hits","maxHits","lowHitsColor","hitsColorsDiff","normalizedHitsFlow","highHitsColor","HeatMapGridFactory","ProfillingService","heatmapExtensionFactory","shown","BuildHeatmap","HideHeatmap","CodeExecutionService","executionService","debuggingService","profillingService","Execution","Debugging","Profilling","CodeEditorServiceInputReceiver","codeExecutionService","SmoothCameraMove","IsDone","isDone","fract","duration","progress","SmoothCameraZoom","boundary","DecodingErrorException","BefungeSourceCodeCodec","decoded","ModuloPointerArithmetics","ArrayMemory","pointerArithmetics","IsPointerOutOfBound","PointerToIndex","resized","CopyMemoryTo","copy","dst","copyingWidth","copyingHeight","SourceCodeValidityAnalyser","sourceCodeLength","NextIllegalInstruction","illegalInstructionIdx","findLastIndex","validSymbols","start","_x","ValidSymbols","AbortOperationException","RegistrationCollisionResolver","EffectRunner","defaultPolicy","rule","Register","effect","policy","effects","findLast","Replace","IsInputReceiver","EditCellCommand","codeEditorService","editDirection","postAction","OldValue","NewValue","EditDirection","MoveNextAction","codeFlowEditDirection","FollowCodeFlowHelper","GetNextEditableCell","overriddenDirection","nextEditableCell","toAutoFactory","EditCellsRegionCommand","Region","StayLeftTopAction","AppService","fileStorage","effectRunner","codeEditorServiceInputReceiverFactory","ZCameraBoundary","clearColor","COLOR_BUFFER_BIT","FocusCameraAtEditor","inFocus","inFocusOnVanishReleaser","FollowEditableCell","OpenFileFromDisk","SaveSourceToDisk","ShareSourceCode","ControlsResponseToHeatmapActivation","OnSourceCodeChanged","SwitchFocus","OnWheel","sign","deltaY","smoothCameraZoomEffect","touchZoomStartZ","OnKeyDown","isRunning","requestAnimationFrame","DrawFrame","lastFrameTime","DEPTH_BUFFER_BIT","validator","firstProblem","remainingProblems","problemMsg","LoadSourceCodeToEditor","router","replace","SourceCodeString","sourceString","trimEnd","source_code","Encode","shareableSettings","ShareableSettings","params","ResetSourceCodeEditor","LoadSettings","cellRect","ndcDiagonal","ndcStickToEdgeMovement","MoveRectangleToPlaceInsideRectangle","finalMovement","ndcDistanceToLeft","ndcDistanceToRight","ndcDistanceToBottom","ndcDistanceToTop","uiLeftTopEditorGridPosition","wndLeftTopEditorGridPosition","WaitEvent","event","addEventListener","once","DOMEmulatedFileStorage","onChange","click","onChangeResult","files","openedFilename","content","blob","Blob","URL","createObjectURL","href","download","revokeObjectURL","FilePickerApiDiskStorage","fileHandle","showOpenFilePicker","multiple","kind","file","getFile","showSaveFilePicker","suggestedName","stream","createWritable","write","close","GlobalDependencies","SetupGlobalDependencies","toConstantValue","BuildTexture","getAsync","IsPickerApiAvailable","texture","createTexture","activeTexture","TEXTURE0","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","texImage2D","RGBA","_defineComponent","__name","props","emits","setup","__props","emit","innerWidth","ref","innerHeight","isPropsUsed","computed","widthCss","SizingToCss","heightCss","UpdateViewport","OnResize","clientWidth","clientHeight","SetupContext","stencil","CULL_FACE","DEPTH_TEST","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","onMounted","onBeforeUnmount","removeEventListener","_ctx","_cache","_openBlock","_createElementBlock","ref_key","_normalizeStyle","required","default","service","OnContextReady","OnSharedCode","Decode","Webgl2Canvas","autofocus","tabindex","onContextReady","onResize","onMousemove","onMousedown","onMouseup","onWheelPassive","onKeydown","onTouchmove","onTouchstart","onTouchend","routes","path","CodeEditor","createRouter","createWebHistory","process","createStore","state","getters","mutations","actions","modules","Main","roboto","FontFace","load","createApp","App","use","store","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","notFulfilled","Infinity","i","fulfilled","j","getter","__esModule","definition","defineProperty","enumerable","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}