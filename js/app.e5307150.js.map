{"version":3,"file":"js/app.e5307150.js","mappings":"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","sources":["webpack://befunge/./src/App.vue","webpack://befunge/./src/App.vue?7ccd","webpack://befunge/./src/registerServiceWorker.ts","webpack://befunge/./src/lib/DOM/MouseButtons.ts","webpack://befunge/./src/lib/math/MathUtil.ts","webpack://befunge/./src/app/AppEventTransformer.ts","webpack://befunge/./src/app/InjectionToken.ts","webpack://befunge/./src/Inversify.ts","webpack://befunge/./src/app/AppSettings.ts","webpack://befunge/./src/app/CodeEditor/CellsOutline.frag","webpack://befunge/./src/app/CodeEditor/CellsOutline.vert","webpack://befunge/./src/app/CodeEditor/Grid.frag","webpack://befunge/./src/app/CodeEditor/Grid.vert","webpack://befunge/./src/lib/EnumSize.ts","webpack://befunge/./src/lib/NotNull.ts","webpack://befunge/./src/lib/font/FontAtlasBuilder.ts","webpack://befunge/./src/lib/renderer/PrimitiveBuilder.ts","webpack://befunge/./src/lib/renderer/ShaderProgram.ts","webpack://befunge/./src/lib/renderer/TypeSizeResolver.ts","webpack://befunge/./src/lib/renderer/PrimitivesRenderer.ts","webpack://befunge/./src/app/CodeEditor/EditorGridRenderer.ts","webpack://befunge/./src/app/CodeEditor/EditorGridCellsOutlineRenderer.ts","webpack://befunge/./src/app/CodeEditor/Selection.frag","webpack://befunge/./src/app/CodeEditor/SelectionRenderer.ts","webpack://befunge/./src/app/CodeEditor/Selection.vert","webpack://befunge/./src/app/CodeEditor/CodeEditorRenderer.ts","webpack://befunge/./src/lib/ArrayHelper.ts","webpack://befunge/./src/lib/math/Transformation.ts","webpack://befunge/./src/lib/math/Intersection.ts","webpack://befunge/./src/lib/renderer/Camera.ts","webpack://befunge/./src/app/CameraService.ts","webpack://befunge/./src/app/Overlay/Layouts/HeadlineControlsLayout.ts","webpack://befunge/./src/app/Overlay/Layouts/DebugControlsLayout.ts","webpack://befunge/./src/lib/befunge/CPU/CPU.ts","webpack://befunge/./src/lib/Observable.ts","webpack://befunge/./src/lib/DI/AsyncConstructorActivator.ts","webpack://befunge/./src/lib/math/RectanglePacker.ts","webpack://befunge/./src/lib/renderer/TextureAtlas.ts","webpack://befunge/./src/lib/UI/UIIcon.ts","webpack://befunge/./src/lib/UI/UIObservablePositioningGroup.ts","webpack://befunge/./src/lib/UI/UIAlert/UIALertIcon.frag","webpack://befunge/./src/lib/UI/UIAlert/UIAlertIcon.vert","webpack://befunge/./src/lib/UI/UIAlert/UIALertPanel.frag","webpack://befunge/./src/lib/UI/UIAlert/UIAlertPanel.vert","webpack://befunge/./src/lib/UI/UIAlert/UIObservableAlert.ts","webpack://befunge/./src/lib/MemoryPoolTracker.ts","webpack://befunge/./src/lib/UI/UIAlert/UIAlertRenderer.ts","webpack://befunge/./src/lib/UI/UIEditableTextList/UIEditableTextListCursor.frag","webpack://befunge/./src/lib/UI/UIEditableTextList/UIEditableTextListCursor.vert","webpack://befunge/./src/lib/UI/UIEditableTextList/UIObservableEditableTextList.ts","webpack://befunge/./src/lib/UI/UIEditableTextList/UIEditableTextListRenderer.ts","webpack://befunge/./src/lib/UI/UIIconButton/UIIconButton.frag","webpack://befunge/./src/lib/UI/UIIconButton/UIIconButton.vert","webpack://befunge/./src/lib/UI/UIIconButton/UIIconButtonOutline.frag","webpack://befunge/./src/lib/UI/UIIconButton/UIIconButtonOutline.vert","webpack://befunge/./src/lib/UI/UIIconButton/UIObservableIconButton.ts","webpack://befunge/./src/lib/UI/UIIconButton/UIIconButtonRenderer.ts","webpack://befunge/./src/lib/UI/UILabel/UILabel.frag","webpack://befunge/./src/lib/UI/UILabel/UILabel.vert","webpack://befunge/./src/lib/UI/UILabel/UIObservableLabel.ts","webpack://befunge/./src/lib/ExceptionTrap.ts","webpack://befunge/./src/lib/font/FontGlyphCollection.ts","webpack://befunge/./src/lib/SelfBind.ts","webpack://befunge/./src/lib/UI/UILabel/UILabelRenderer.ts","webpack://befunge/./src/lib/UI/UITextButton/UIObservableTextButton.ts","webpack://befunge/./src/lib/UI/UITextList/UIObservableTextList.ts","webpack://befunge/./src/lib/UI/UITextList/UITextListBorder.frag","webpack://befunge/./src/lib/UI/UITextList/UITextListRenderer.ts","webpack://befunge/./src/lib/UI/UITextList/UITextListBorder.vert","webpack://befunge/./src/lib/UI/UITextList/UITextListStencil.frag","webpack://befunge/./src/lib/UI/UITextList/UITextListStencil.vert","webpack://befunge/./src/lib/UI/UIRenderer.ts","webpack://befunge/./src/app/Overlay/DebugControls.ts","webpack://befunge/./src/app/Overlay/EditControls.ts","webpack://befunge/./src/app/Overlay/EditDirectionControls.ts","webpack://befunge/./src/app/Overlay/FileControls.ts","webpack://befunge/./src/app/History/AppHistory.ts","webpack://befunge/./src/app/Overlay/HistoryControls.ts","webpack://befunge/./src/app/Overlay/IOControls.ts","webpack://befunge/./src/app/Overlay/SnackbarControls.ts","webpack://befunge/./src/lib/font/EscapeString.ts","webpack://befunge/./src/app/Overlay/StackControls.ts","webpack://befunge/./src/app/Overlay/VirtualKeyboardControls.ts","webpack://befunge/./src/app/Overlay/OverlayService.ts","webpack://befunge/./src/app/SourceCodeMemory.ts","webpack://befunge/./src/app/CodeEditor/CodeEditorExtension.ts","webpack://befunge/./src/app/CodeEditor/CodeEditorTooltipService.ts","webpack://befunge/./src/lib/containers/Array2D.ts","webpack://befunge/./src/app/CodeEditor/EditableTarget.ts","webpack://befunge/./src/app/CodeEditor/CodeEditorService.ts","webpack://befunge/./src/lib/befunge/CPU/CPUImpl.ts","webpack://befunge/./src/lib/befunge/instructions/Add.ts","webpack://befunge/./src/lib/befunge/instructions/Bridge.ts","webpack://befunge/./src/lib/befunge/instructions/Divide.ts","webpack://befunge/./src/lib/befunge/instructions/EndProgram.ts","webpack://befunge/./src/lib/befunge/instructions/GreatherThan.ts","webpack://befunge/./src/lib/befunge/instructions/HorizontalIf.ts","webpack://befunge/./src/lib/befunge/instructions/InputASCII.ts","webpack://befunge/./src/lib/befunge/instructions/InputInteger.ts","webpack://befunge/./src/lib/befunge/instructions/MemoryRead.ts","webpack://befunge/./src/lib/befunge/instructions/MemoryWrite.ts","webpack://befunge/./src/lib/befunge/instructions/Modulo.ts","webpack://befunge/./src/lib/befunge/instructions/Multiply.ts","webpack://befunge/./src/lib/befunge/instructions/Negation.ts","webpack://befunge/./src/lib/befunge/instructions/NoOperation.ts","webpack://befunge/./src/lib/befunge/instructions/PCDirectionDown.ts","webpack://befunge/./src/lib/befunge/instructions/PCDirectionLeft.ts","webpack://befunge/./src/lib/befunge/instructions/PCDirectionRandom.ts","webpack://befunge/./src/lib/befunge/instructions/PCDirectionRight.ts","webpack://befunge/./src/lib/befunge/instructions/PCDirectionUp.ts","webpack://befunge/./src/lib/befunge/instructions/StackPop.ts","webpack://befunge/./src/lib/befunge/instructions/PrintASCII.ts","webpack://befunge/./src/lib/befunge/instructions/PrintInteger.ts","webpack://befunge/./src/lib/befunge/instructions/StackDuplicate.ts","webpack://befunge/./src/lib/befunge/instructions/StackPushDigit.ts","webpack://befunge/./src/lib/befunge/instructions/StackSwap.ts","webpack://befunge/./src/lib/befunge/instructions/Subtract.ts","webpack://befunge/./src/lib/befunge/instructions/ToggleStringMode.ts","webpack://befunge/./src/lib/befunge/instructions/VerticalIf.ts","webpack://befunge/./src/lib/befunge/IOPort.ts","webpack://befunge/./src/lib/befunge/Befunge.ts","webpack://befunge/./src/lib/befunge/Debugger.ts","webpack://befunge/./src/lib/befunge/Profiler.ts","webpack://befunge/./src/app/BefungeToolbox.ts","webpack://befunge/./src/app/CodeExecution/DebuggingService.ts","webpack://befunge/./src/app/CodeExecution/ExecutionService.ts","webpack://befunge/./src/app/AnalysisTools/Heatmap/HeatmapGrid.frag","webpack://befunge/./src/app/AnalysisTools/Heatmap/HeatMapGridRenderer.ts","webpack://befunge/./src/app/AnalysisTools/Heatmap/HeatmapGrid.vert","webpack://befunge/./src/app/AnalysisTools/Heatmap/HeatmapExtension.ts","webpack://befunge/./src/app/CodeExecution/ProfilingService.ts","webpack://befunge/./src/app/CodeExecution/CodeExecutionService.ts","webpack://befunge/./src/app/CodeEditorServiceInputReceiver.ts","webpack://befunge/./src/app/DebugRenderer.frag","webpack://befunge/./src/app/DebugRenderer.vert","webpack://befunge/./src/app/DebugRenderer.ts","webpack://befunge/./src/app/Effects/SmoothCameraMove.ts","webpack://befunge/./src/app/Effects/SmoothCameraZoom.ts","webpack://befunge/./src/lib/befunge/BefungeSourceCodeCodec.ts","webpack://befunge/./src/lib/befunge/memory/ModuloPointerArithmetics.ts","webpack://befunge/./src/lib/befunge/memory/ArrayMemory.ts","webpack://befunge/./src/lib/befunge/SourceCodeValidityAnalyser.ts","webpack://befunge/./src/lib/effect/EffectRunner.ts","webpack://befunge/./src/lib/UI/InputReceiver.ts","webpack://befunge/./src/app/History/Commands/EditCellCommand/EditCellCommand.ts","webpack://befunge/./src/app/History/Commands/EditCellCommand/PostActions/MoveNextAction.ts","webpack://befunge/./src/app/History/Commands/EditCellsRegionCommand/EditCellsRegionCommand.ts","webpack://befunge/./src/app/History/Commands/EditCellsRegionCommand/PostActions/MoveNextAction.ts","webpack://befunge/./src/app/History/Commands/EditCellsRegionCommand/PostActions/StayLeftTopAction.ts","webpack://befunge/./src/app/AppService.ts","webpack://befunge/./src/app/GlobalDependencies.ts","webpack://befunge/./src/lib/VueComponents/WebglCanvas.vue?8f8a","webpack://befunge/./src/lib/VueComponents/WebglCanvas.vue","webpack://befunge/./src/app/CodeEditor.vue?f59c","webpack://befunge/./src/app/CodeEditor.vue","webpack://befunge/./src/router/index.ts","webpack://befunge/./src/store/index.ts","webpack://befunge/./src/main.ts","webpack://befunge/webpack/bootstrap","webpack://befunge/webpack/runtime/chunk loaded","webpack://befunge/webpack/runtime/compat get default export","webpack://befunge/webpack/runtime/define property getters","webpack://befunge/webpack/runtime/global","webpack://befunge/webpack/runtime/hasOwnProperty shorthand","webpack://befunge/webpack/runtime/make namespace object","webpack://befunge/webpack/runtime/jsonp chunk loading","webpack://befunge/webpack/startup"],"sourcesContent":["<template>\n  <router-view />\n</template>\n\n<style>\n#app {\n  font-family: Roboto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  height: 100%;\n}\n\nnav {\n  padding: 30px;\n}\n\nnav a {\n  font-weight: bold;\n  color: #2c3e50;\n}\n\nnav a.router-link-exact-active {\n  color: #42b983;\n}\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=4fb952e8\"\nconst script = {}\n\nimport \"./App.vue?vue&type=style&index=0&id=4fb952e8&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker';\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready() {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n          'For more details, visit https://goo.gl/AFskqB'\n      );\n    },\n    registered() {\n      console.log('Service worker has been registered.');\n    },\n    cached() {\n      console.log('Content has been cached for offline use.');\n    },\n    updatefound() {\n      console.log('New content is downloading.');\n    },\n    updated() {\n      console.log('New content is available; please refresh.');\n    },\n    offline() {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    },\n    error(error) {\n      console.error('Error during service worker registration:', error);\n    }\n  });\n}\n","export enum MouseButtons {\n  Nope = 0,\n  Left = 1,\n  Right = 2,\n  Wheel = 4,\n  BrowserBack = 8,\n  BrowserForward = 16\n}\n","import { Vec2 } from \"../Primitives\";\n\ninterface ExtremumResult {\n    min: Vec2;\n    max: Vec2;\n}\n\nexport class MathUtil {\n    static Clamp(value: number, min: number, max: number): number {\n        return Math.max(Math.min(value, max), min);\n    }\n\n    static Between(value: number, min: number, max: number): boolean {\n        return value >= min && value <= max;\n    }\n\n    static Equal(x: number, y: number, tolerance = Number.EPSILON) {\n        return Math.abs(x - y) < tolerance;\n    }\n\n    static Extremum(points: Vec2[]): ExtremumResult {\n        if (points.length === 0) {\n            throw new Error('Empty points array');\n        }\n\n        const min = { ...points[0] };\n        const max = { ...points[0] };\n\n        for (let n = 1; n < points.length; ++n) {\n            const p = points[n];\n\n            if (p.x < min.x) {\n                min.x = p.x;\n            }\n\n            if (p.x > max.x) {\n                max.x = p.x;\n            }\n\n            if (p.y < min.y) {\n                min.y = p.y;\n            }\n\n            if (p.y > max.y) {\n                max.y = p.y;\n            }\n        }\n\n        return { min, max };\n    }\n\n    static Distance(p0: Vec2, p1: Vec2): number {\n        return Math.sqrt(MathUtil.SqrDistance(p0, p1));\n    }\n\n    public static SqrDistance(p0: Vec2, p1: Vec2): number {\n        return Math.pow(p0.x - p1.x, 2) + Math.pow(p0.y - p1.y, 2);\n    }\n}\n","import { vec2 } from \"gl-matrix\";\nimport { injectable } from \"inversify\";\n\nimport { MouseButtons } from \"@/lib/DOM/MouseButtons\";\nimport { MathUtil } from \"@/lib/math/MathUtil\";\nimport { Vec2 } from \"@/lib/Primitives\";\n\nclass OnSelectStrategy {\n    private mouseDownStart = 0;\n    private lastMouseDownPosition: Vec2 = { x: 0, y: 0 };\n\n    private isSelect = false;\n\n    constructor(\n        private releaseTimeout: number,\n        private maxDistance: number) { }\n\n    OnMouseDown(e: MouseEvent): void {\n        this.mouseDownStart = Date.now();\n        this.lastMouseDownPosition.x = e.offsetX;\n        this.lastMouseDownPosition.y = e.offsetY;\n    }\n\n    OnMouseUp(e: MouseEvent): void {\n        const distance = vec2.dist(\n            [this.lastMouseDownPosition.x, this.lastMouseDownPosition.y],\n            [e.offsetX, e.offsetY]);\n\n        const elapsedTime = Date.now() - this.mouseDownStart;\n\n        this.isSelect = distance <= this.maxDistance && elapsedTime <= this.releaseTimeout;\n    }\n\n    get IsSelect(): boolean {\n        return this.isSelect;\n    }\n}\n\nexport interface MouseMovementEvent {\n    movementX: number;\n    movementY: number;\n}\n\nexport interface MouseSelectEvent {\n    offsetX: number;\n    offsetY: number;\n}\n\ninterface TouchTrace {\n    id: number;\n    x: number;\n    y: number;\n}\n\ntype MoveCameraFn = (e: MouseMovementEvent) => void;\n\nclass TouchPan {\n    private touchPrev!: TouchTrace;\n\n    constructor(private moveCamera: MoveCameraFn) { }\n\n    OnTouchStart(e: TouchEvent): void {\n        const touch = e.targetTouches[0];\n        this.touchPrev = {\n            id: touch.identifier,\n            x: touch.pageX,\n            y: touch.pageY\n        };\n    }\n\n    OnTouchMove(e: TouchEvent): void {\n        if (e.targetTouches.item(0)?.identifier !== this.touchPrev.id) {\n            return;\n        }\n\n        const touch = e.targetTouches[0];\n\n        this.moveCamera({\n            movementX: (touch.pageX - this.touchPrev.x) * window.devicePixelRatio,\n            movementY: (touch.pageY - this.touchPrev.y) * window.devicePixelRatio\n        });\n\n        this.touchPrev.x = touch.pageX;\n        this.touchPrev.y = touch.pageY;\n    }\n}\n\ntype ZoomStartFn = () => void;\n\ntype ZoomProgressFn = (zoom: number) => void;\n\nexport class TouchZoom {\n    private readonly prev: TouchTrace[] = [\n        { id: -1, x: 0, y: 0 },\n        { id: -1, x: 0, y: 0 }\n    ];\n\n    constructor(\n        private zoomStart: ZoomStartFn,\n        private zoomProgress: ZoomProgressFn\n    ) { }\n\n    public OnTouchStart(e: TouchEvent): void {\n        if (e.targetTouches.length !== 2) {\n            return;\n        }\n\n        this.zoomStart();\n\n        this.UpdateTrace(e);\n    }\n\n    public OnTouchEnd(e: TouchEvent): void {\n        [...e.targetTouches].forEach(touch => {\n            const prevTouch = this.prev.find(x => x.id === touch.identifier);\n\n            if (prevTouch) {\n                prevTouch.id = -1;\n            }\n        });\n    }\n\n    public OnTouchMove(e: TouchEvent): void {\n        if (\n            e.targetTouches.length !== 2 ||\n            !this.prev.every(trace => trace.id !== -1)\n        ) {\n            return;\n        }\n\n        e.preventDefault();\n\n        const [p0, p1] = (\n            e.targetTouches[0].identifier === this.prev[0].id\n                ? [e.targetTouches[0], e.targetTouches[1]]\n                : [e.targetTouches[1], e.targetTouches[0]]\n        ).map(touch => ({ x: touch.pageX, y: touch.pageY }));\n\n        const dist0 = MathUtil.Distance(this.prev[0], this.prev[1]);\n        const dist1 = MathUtil.Distance(p0, p1);\n\n        this.zoomProgress(dist0 / dist1);\n    }\n\n    private UpdateTrace(e: TouchEvent): void {\n        for (let n = 0; n < e.targetTouches.length; ++n) {\n            this.prev[n].id = e.targetTouches[n].identifier;\n            this.prev[n].x = e.targetTouches[n].pageX;\n            this.prev[n].y = e.targetTouches[n].pageY;\n        }\n    }\n}\n\n@injectable()\nexport abstract class AppEventTransformer {\n    private readonly selectStrategy = new OnSelectStrategy(250, 3);\n\n    private touchPan: TouchPan;\n    private touchZoom: TouchZoom;\n\n    constructor() {\n        this.touchPan = new TouchPan((e: MouseMovementEvent) => this.OnCameraMove(e));\n        this.touchZoom = new TouchZoom(\n            () => this.OnTouchZoomStart(),\n            (zoom: number) => this.OnTouchZoom(zoom)\n        );\n    }\n\n    OnMouseMove(e: MouseEvent): void {\n        if (e.buttons & MouseButtons.Left) {\n            this.OnCameraMove({\n                movementX: e.movementX * window.devicePixelRatio,\n                movementY: e.movementY * window.devicePixelRatio\n            });\n        }\n    }\n\n    OnMouseDown(e: MouseEvent): void {\n        this.selectStrategy.OnMouseDown(e);\n    }\n\n    OnMouseUp(e: MouseEvent): void {\n        this.selectStrategy.OnMouseUp(e);\n\n        if (this.selectStrategy.IsSelect) {\n            this.OnSelect({\n                offsetX: e.offsetX * window.devicePixelRatio,\n                offsetY: e.offsetY * window.devicePixelRatio\n            });\n        }\n    }\n\n    OnWheel(e: WheelEvent): void {\n        this.OnStepZoom(e);\n    }\n\n    OnTouchStart(e: TouchEvent): void {\n        this.touchPan.OnTouchStart(e);\n        this.touchZoom.OnTouchStart(e);\n    }\n\n    OnTouchMove(e: TouchEvent): void {\n        this.touchPan.OnTouchMove(e);\n        this.touchZoom.OnTouchMove(e);\n    }\n\n    OnTouchEnd(e: TouchEvent): void {\n        this.touchZoom.OnTouchEnd(e);\n    }\n\n    abstract OnCameraMove(e: MouseMovementEvent): void;\n\n    abstract OnSelect(e: MouseSelectEvent): void;\n\n    abstract OnStepZoom(e: WheelEvent): void;\n\n    abstract OnTouchZoomStart(): void;\n\n    abstract OnTouchZoom(zoom: number): void;\n}\n","export const InjectionToken = {\n    WebGLRenderingContext: Symbol('webgl2 rendering context'),\n    FontAtlas: Symbol('Font atlas'),\n    IconAtlas: Symbol('Icon atlas'),\n    FontAtlasTexture: Symbol('Font texture'),\n    IconAtlasTexture: Symbol('Icon texture'),\n    FontGlyphCollectionFactory: Symbol('Font glyph collection factory'),\n    HeatmapGridRendererFactory: Symbol('Heatmap grid renderer factory'),\n    HeatmapExtensionFactory: Symbol('Heatmap extension factory'),\n    UITextListRendererFactory: Symbol('UITetList renderer factory'),\n    CodeEditorServiceInputReceiverFactory: Symbol('CodeEditorServiceInputReceiver factory'),\n    UIEditableTextListRendererFactory: Symbol('UIEditableTextListRenderer factory')\n};\n\n\nexport const UILabelRendererTargetName = {\n    Perspective: Symbol('UILabel perspective renderer'),\n    Unique: Symbol('UILabel unique')\n}\n\nexport const AppCommandInjectionToken = {\n    EditCellCommandFactory: Symbol('EditCellCommand factory'),\n    EditCellsRegionFactory: Symbol('EditCellsRegion factory')\n};\n\nexport const EditCellCommandPostAction = {\n    MoveNext: Symbol('MoveNext post action')\n};\n\nexport const EditCellsRegionCommandPostAction = {\n    MoveNext: Symbol('MoveNext post action'),\n    StayLeftTop: Symbol('StayLeftTop post action')\n};\n","import { Container } from \"inversify\";\n\nconst Inversify = new Container();\n\nexport { Inversify };\n","import { inject, injectable } from \"inversify\";\n\nimport { InjectionToken } from \"./InjectionToken\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { MemoryLimit } from \"@/lib/befunge/memory/MemoryLimit\";\n\ninterface Dimension {\n    Width: number;\n    Height: number;\n}\n\nexport interface ZCameraBoundary {\n    min: number;\n    max: number;\n}\n\n@injectable()\nexport class AppSettings {\n    constructor(@inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext) {\n        this.AspectRatio = this.gl.canvas.width / this.gl.canvas.height;\n    }\n\n    public readonly ZNear = 1;\n\n    public readonly ZFar = 500;\n\n    public readonly Fovy = 60 / 180 * Math.PI;\n\n    public readonly ZCameraBoundary: ZCameraBoundary = { min: 50, max: 250 };\n\n    public AspectRatio = 1;\n\n    public get DevicePixelRatio(): number {\n        return window.devicePixelRatio;\n    }\n\n    public ViewDimension: Dimension = { Width: 800, Height: 600 };\n\n    public ExecutionTimeout = 1000;\n\n    public MaxOutputLength = 1000;\n\n    public MemoryLimit: MemoryLimit = { Width: 80, Height: 25 };\n}\n\nInversify.bind(AppSettings).toSelf().inSingletonScope();\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 v_color;\\n\\nout vec4 out_color;\\n\\n\\nvoid main() \\n{\\n      out_color = vec4(v_color, 1);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec2 a_vertex;\\nin vec3 a_color;\\n\\nout vec3 v_color;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position = u_viewProject * vec4(a_vertex, 0.01, 1.0);\\n\\n  v_color = a_color;\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec2 v_glyph;\\nin vec3 v_color;\\n\\nout vec4 out_color;\\n\\nuniform sampler2D u_glyph;\\n\\nvoid main() \\n{\\n      vec4 text_color = texture(u_glyph, v_glyph);\\n \\n      out_color = vec4(v_color - text_color.xyz, text_color.w);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec4 a_vertex;\\nin vec3 a_color;\\nin vec2 a_glyph;\\n\\nout vec2 v_glyph;\\nout vec3 v_color;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position = u_viewProject * a_vertex;\\n\\n  v_glyph = a_glyph;\\n  v_color = a_color;\\n}\\n\"","export function EnumSize<T extends object>(e: T): number {\n    return Object.keys(e).length >> 1;\n}\n","export function NotNull(msg: string): never {\n  throw new Error(msg);\n}\n","import { NotNull } from \"../NotNull\";\nimport { Vec2 } from \"../Primitives\";\n\ninterface AtlasFontOptions {\n    Name: string;\n    Size: number;\n}\n\ninterface AtlasOptions {\n    ASCIIRange: { Start: string, End: string },\n    Font: AtlasFontOptions\n}\n\ninterface UV {\n    A: Vec2;\n    B: Vec2;\n}\n\nexport class FontAtlas {\n    constructor(\n        private readonly startSymbolCode: number,\n        public readonly Columns: number,\n        public readonly Rows: number,\n        public readonly GlyphCount: number,\n        public readonly Image: ImageData) { }\n\n    LookupUV(symbol: string): UV {\n        if (symbol.length === 0) {\n            throw new Error(\"Symbol can't be empty string\");\n        }\n\n        const symbolCode = symbol.charCodeAt(0);\n        const glyphIdx = symbolCode - this.startSymbolCode;\n\n        if (glyphIdx < 0 || glyphIdx >= this.GlyphCount) {\n            throw new Error(\"The font atlas doesn't contain glyph for given symbol\");\n        }\n\n        const column = glyphIdx % this.Columns;\n        const row = Math.floor(glyphIdx / this.Columns);\n\n        const glyphWidth = 1 / this.Columns;\n        const glyphHeight = 1 / this.Rows;\n\n        const leftTop: Vec2 = {\n            x: glyphWidth * column,\n            y: glyphHeight * row\n        };\n\n        return {\n            A: leftTop,\n            B: { x: leftTop.x + glyphWidth, y: leftTop.y + glyphHeight }\n        };\n    }\n}\n\nclass FontAtlasBuilderImpl {\n    private options!: AtlasOptions;\n    private context!: CanvasRenderingContext2D;\n\n    Build(options: AtlasOptions): FontAtlas {\n        this.options = options;\n\n        const startCode = options.ASCIIRange.Start.charCodeAt(0);\n        const endCode = options.ASCIIRange.End.charCodeAt(0);\n\n        if (startCode > endCode) {\n            throw new Error('options.ASCIIRange.Start symbol must precede options.ASCIIRange.End');\n        }\n\n        const glyphCount = endCode - startCode + 1;\n        const columnCount = Math.ceil(Math.sqrt(glyphCount));\n        const rowCount = Math.ceil(glyphCount / columnCount);\n        const glyphCellSize = this.GlyphCellSize();\n\n        const canvas = this.SetupCanvas(columnCount * glyphCellSize, rowCount * glyphCellSize);\n        this.FillCanvasWithGlyphs(glyphCount, columnCount);\n\n        return new FontAtlas(\n            startCode,\n            columnCount,\n            rowCount,\n            glyphCount,\n            this.context.getImageData(0, 0, canvas.width, canvas.height)\n        );\n    }\n\n    private SetupCanvas(width: number, height: number): HTMLCanvasElement {\n        const canvas = document.createElement('canvas');\n\n        canvas.width = width;\n        canvas.height = height;\n\n        const context = canvas.getContext('2d') ?? NotNull('Failed to get context');\n        context.font = `${this.options.Font.Size}px ${this.options.Font.Name}`;\n        context.fillStyle = '#000';\n\n        this.context = context;\n\n        return canvas;\n    }\n\n    private FillCanvasWithGlyphs(glyphCount: number, columnCount: number): void {\n        for (let n = 0; n < glyphCount; ++n) {\n            const col = n % columnCount;\n            const row = Math.floor(n / columnCount);\n\n            const glyphCellSize = this.GlyphCellSize();\n            const halfGlyphCellSize = glyphCellSize / 2;\n            const cellCenter: Vec2 = { x: col * glyphCellSize + halfGlyphCellSize, y: row * glyphCellSize + halfGlyphCellSize };\n            const symbol = String.fromCharCode(this.options.ASCIIRange.Start.charCodeAt(0) + n);\n\n            const drawPosition = this.CenteredToBaseLine(cellCenter, symbol);\n\n            this.context.fillText(symbol, drawPosition.x, drawPosition.y);\n        }\n    }\n\n    private GlyphCellSize(): number {\n        return Math.ceil(this.options.Font.Size / 10) * 10;\n    }\n\n    private CenteredToBaseLine(pos: Vec2, symbol: string): Vec2 {\n        const metrics = this.context.measureText(symbol);\n\n        const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n\n        return {\n            x: pos.x - metrics.width / 2,\n            y: pos.y - metrics.actualBoundingBoxDescent + height / 2\n        };\n    }\n}\n\nexport class FontAtlasBuilder {\n    static Build(options: AtlasOptions): FontAtlas {\n        return new FontAtlasBuilderImpl().Build(options);\n    }\n}\n","import { Vec2 } from \"../Primitives\";\n\ninterface Dimension {\n    width: number;\n    height: number;\n}\n\ninterface ObjectAttribute {\n    LeftBottom: number[];\n    LeftTop: number[];\n    RightTop: number[];\n    RightBottom: number[];\n}\n\ntype Attribute = number[] | ObjectAttribute;\n\nexport class PrimitiveBuilder {\n    static AABBRectangle(\n        position: Vec2,\n        dimension: Dimension,\n        attributes: Attribute[]\n    ): number[] {\n        const leftBottom = [position.x, position.y];\n        const leftTop = [position.x, position.y + dimension.height];\n        const rightTop = [position.x + dimension.width, position.y + dimension.height];\n        const rightBottom = [position.x + dimension.width, position.y];\n\n        for (const attr of attributes) {\n            if (Array.isArray(attr)) {\n                leftBottom.push(...attr);\n                leftTop.push(...attr);\n                rightTop.push(...attr);\n                rightBottom.push(...attr);\n            } else {\n                leftBottom.push(...attr.LeftBottom);\n                leftTop.push(...attr.LeftTop);\n                rightTop.push(...attr.RightTop);\n                rightBottom.push(...attr.RightBottom);\n            }\n        }\n\n        return [\n            ...leftBottom,\n            ...rightTop,\n            ...leftTop,\n            ...leftBottom,\n            ...rightBottom,\n            ...rightTop\n        ];\n    }\n\n    static AABBFrame(\n        position: Vec2,\n        dimension: Dimension,\n        borderWidth: number,\n        attributes: Attribute[]): number[] {\n        const borderTop = PrimitiveBuilder.AABBRectangle(\n            { x: position.x, y: position.y + dimension.height - borderWidth },\n            { width: dimension.width, height: borderWidth },\n            attributes\n        );\n\n        const borderRight = PrimitiveBuilder.AABBRectangle(\n            { x: position.x + dimension.width - borderWidth, y: position.y },\n            { width: borderWidth, height: dimension.height - borderWidth },\n            attributes\n        );\n\n        const borderBottom = PrimitiveBuilder.AABBRectangle(\n            { x: position.x, y: position.y },\n            { width: dimension.width - borderWidth, height: borderWidth },\n            attributes\n        );\n\n        const borderLeft = PrimitiveBuilder.AABBRectangle(\n            { x: position.x, y: position.y + borderWidth },\n            { width: borderWidth, height: dimension.height - 2 * borderWidth },\n            attributes\n        );\n\n        return [\n            ...borderTop,\n            ...borderRight,\n            ...borderBottom,\n            ...borderLeft\n        ];\n    }\n}\n","import { NotNull } from '../NotNull';\n\nexport type Mat4 = [\n  number, number, number, number,\n  number, number, number, number,\n  number, number, number, number,\n  number, number, number, number];\n\nexport class ShaderProgram {\n  private uniformCache: Map<string, WebGLUniformLocation> = new Map();\n  protected instance: WebGLProgram;\n  public constructor(protected gl: WebGL2RenderingContext) {\n    if (!gl) throw new Error('Invalid webgl2 context');\n\n    this.instance =\n      gl.createProgram() ?? NotNull(\"Can't create shader program\");\n  }\n\n  public Attach(type: number, source: string) {\n    const shader = this.gl.createShader(type);\n    if (shader === null) throw new Error('Failed to create shader');\n\n    this.gl.shaderSource(shader, source);\n    this.gl.compileShader(shader);\n\n    if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n      const err = new Error(\n        this.gl.getShaderInfoLog(shader) ?? 'Failed to compile shader'\n      );\n      this.gl.deleteShader(shader);\n      throw err;\n    }\n\n    this.gl.attachShader(this.instance, shader);\n  }\n\n  public async AttachFromUrl(type: number, url: string) {\n    this.Attach(type, await (await fetch(url)).text());\n  }\n\n  public Link() {\n    this.gl.linkProgram(this.instance);\n    if (!this.gl.getProgramParameter(this.instance, this.gl.LINK_STATUS)) {\n      const err = new Error(\n        this.gl.getProgramParameter(this.instance, this.gl.LINK_STATUS) ??\n        'Failed to link shader'\n      );\n      this.gl.deleteProgram(this.instance);\n      throw err;\n    }\n  }\n\n  public Use() {\n    this.gl.useProgram(this.instance);\n  }\n\n  public SetUniform3fv(name: string, value: number[]) {\n    this.gl.uniform3fv(this.GetUniformLocation(name), value);\n  }\n\n  public SetUniform2fv(name: string, value: number[]) {\n    this.gl.uniform2fv(this.GetUniformLocation(name), value);\n  }\n\n  public SetUniform4fv(name: string, value: number[]) {\n    this.gl.uniform4fv(this.GetUniformLocation(name), value);\n  }\n\n  public SetUniform1f(name: string, value: number) {\n    this.gl.uniform1f(this.GetUniformLocation(name), value);\n  }\n\n  public SetUniform1i(name: string, value: number) {\n    this.gl.uniform1i(this.GetUniformLocation(name), value);\n  }\n\n  public SetUniform2iv(name: string, value: number[]) {\n    this.gl.uniform2iv(this.GetUniformLocation(name), value);\n  }\n\n  public SetUniformMatrix4fv(name: string, value: Mat4 | Float32Array) {\n    this.gl.uniformMatrix4fv(this.GetUniformLocation(name), false, value);\n  }\n\n  public GetAttributeLocation(name: string) {\n    this.Use();\n\n    const loc = this.gl.getAttribLocation(this.instance, name);\n\n    if (loc === -1) throw new Error(`Failed to locate attribute '${name}'`);\n\n    return loc;\n  }\n\n  Dispose(): void {\n    this.gl.deleteProgram(this.instance);\n  }\n\n  private GetUniformLocation(name: string) {\n    this.Use();\n\n    let loc = this.uniformCache.get(name) ?? null;\n\n    if (loc === null) {\n      loc = this.gl.getUniformLocation(this.instance, name);\n\n      if (loc === null) throw new Error(`Failed to locate uniform '${name}'`);\n\n      this.uniformCache.set(name, loc);\n    }\n\n    return loc;\n  }\n}\n","type SupportedTypes<T extends readonly (readonly [GLenum, number])[]> =\n  T[number][0];\n\nexport class TypeSizeResolver {\n  private static readonly Sizes = [\n    [window.WebGL2RenderingContext.BYTE, Int8Array.BYTES_PER_ELEMENT] as const,\n    [\n      window.WebGL2RenderingContext.SHORT,\n      Int16Array.BYTES_PER_ELEMENT\n    ] as const,\n    [\n      window.WebGL2RenderingContext.UNSIGNED_BYTE,\n      Uint8Array.BYTES_PER_ELEMENT\n    ] as const,\n    [\n      window.WebGL2RenderingContext.UNSIGNED_SHORT,\n      Uint16Array.BYTES_PER_ELEMENT\n    ] as const,\n    [\n      window.WebGL2RenderingContext.FLOAT,\n      Float32Array.BYTES_PER_ELEMENT\n    ] as const,\n    [window.WebGL2RenderingContext.HALF_FLOAT, 2] as const,\n    [window.WebGL2RenderingContext.INT, Int32Array.BYTES_PER_ELEMENT] as const,\n    [\n      window.WebGL2RenderingContext.UNSIGNED_INT,\n      Uint32Array.BYTES_PER_ELEMENT\n    ] as const,\n    [\n      window.WebGL2RenderingContext.INT_2_10_10_10_REV,\n      Int32Array.BYTES_PER_ELEMENT\n    ] as const,\n    [\n      window.WebGL2RenderingContext.UNSIGNED_INT_2_10_10_10_REV,\n      Int32Array.BYTES_PER_ELEMENT\n    ] as const\n  ] as const;\n\n  public static Resolve(\n    type: SupportedTypes<typeof TypeSizeResolver.Sizes>\n  ): number {\n    return (\n      TypeSizeResolver.Sizes.find(x => x[0] === type) as [GLenum, number]\n    )[1];\n  }\n}\n","\nimport { injectable, unmanaged } from 'inversify';\n\nimport { NotNull } from '../NotNull';\n\nimport { ShaderProgram } from './ShaderProgram';\nimport { TypeSizeResolver } from './TypeSizeResolver';\n\ninterface ShaderProgramSource {\n  vertex: string;\n  fragment: string;\n}\n\ntype AttributeType =\n  | typeof WebGL2RenderingContext.BYTE\n  | typeof WebGL2RenderingContext.SHORT\n  | typeof WebGL2RenderingContext.UNSIGNED_BYTE\n  | typeof WebGL2RenderingContext.UNSIGNED_SHORT\n  | typeof WebGL2RenderingContext.FLOAT\n  | typeof WebGL2RenderingContext.HALF_FLOAT\n  | typeof WebGL2RenderingContext.INT\n  | typeof WebGL2RenderingContext.UNSIGNED_INT\n  | typeof WebGL2RenderingContext.INT_2_10_10_10_REV\n  | typeof WebGL2RenderingContext.UNSIGNED_INT_2_10_10_10_REV;\n\ntype BasePrimitiveType =\n  | typeof WebGL2RenderingContext.POINTS\n  | typeof WebGL2RenderingContext.LINES\n  | typeof WebGL2RenderingContext.LINE_LOOP\n  | typeof WebGL2RenderingContext.LINE_STRIP\n  | typeof WebGL2RenderingContext.TRIANGLES\n  | typeof WebGL2RenderingContext.TRIANGLE_STRIP\n  | typeof WebGL2RenderingContext.TRIANGLE_FAN;\n\ninterface AttributeDescription {\n  name: string;\n  size: GLint;\n  type: AttributeType;\n  normalized: GLboolean;\n  stride: GLsizei;\n  offset: GLintptr; // TODO Make property optional and automatic calculate at runtime\n}\n\ninterface PrimitiveDescription {\n  indicesPerPrimitive: number;\n  basePrimitiveType: BasePrimitiveType;\n}\n\nexport interface DataDescriptor {\n  buffer: Float32Array;\n  offset: number;\n}\n\n\n@injectable()\nexport class PrimitivesRenderer {\n  protected vbo!: WebGLBuffer;\n  private vao!: WebGLVertexArrayObject;\n  protected shader!: ShaderProgram;\n\n  protected attributes: Float32Array = new Float32Array();\n\n  private componentsPerAttributeSet = 0;\n  private attributeSetCount = 0;\n\n  constructor(\n    @unmanaged() protected readonly gl: WebGL2RenderingContext,\n    @unmanaged() shaderSource: ShaderProgramSource,\n    @unmanaged() attributes: AttributeDescription[],\n    @unmanaged() private readonly primitiveDescription: PrimitiveDescription\n  ) {\n    this.Setup(shaderSource);\n    this.SetupAttributes(attributes);\n  }\n\n  public UploadAttributes(attrib: number[]): void {\n    this.attributes = new Float32Array(attrib);\n\n    this.attributeSetCount =\n      this.attributes.length / this.componentsPerAttributeSet;\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vbo);\n    this.gl.bufferData(\n      this.gl.ARRAY_BUFFER,\n      this.attributes,\n      this.gl.DYNAMIC_DRAW\n    );\n  }\n\n  public UpdateComponentAttributes(attriutes: number[], offset: number): void {\n    this.attributes.set(attriutes, offset);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vbo);\n    this.gl.bufferSubData(\n      this.gl.ARRAY_BUFFER,\n      TypeSizeResolver.Resolve(this.gl.FLOAT) * offset,\n      this.attributes,\n      offset,\n      attriutes.length);\n  }\n\n  public PrimitiveAttributes(index: number): DataDescriptor {\n    return {\n      buffer: this.attributes,\n      offset:\n        index *\n        this.componentsPerAttributeSet *\n        this.primitiveDescription.indicesPerPrimitive\n    };\n  }\n\n  public Draw(): void {\n    this.shader.Use();\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vbo);\n    this.gl.bindVertexArray(this.vao);\n    this.gl.drawArrays(\n      this.primitiveDescription.basePrimitiveType,\n      0,\n      this.attributeSetCount\n    );\n  }\n\n  Dispose(): void {\n    this.gl.deleteBuffer(this.vbo);\n    this.gl.deleteVertexArray(this.vao);\n\n    this.shader.Dispose();\n  }\n\n  private Setup(shaderSource: ShaderProgramSource): void {\n    this.vbo = this.gl.createBuffer() ?? NotNull('Failed to create vbo');\n    this.vao = this.gl.createVertexArray() ?? NotNull('Failed to create vao');\n\n    this.shader = new ShaderProgram(this.gl);\n    this.shader.Attach(this.gl.FRAGMENT_SHADER, shaderSource.fragment);\n    this.shader.Attach(this.gl.VERTEX_SHADER, shaderSource.vertex);\n    this.shader.Link();\n    this.shader.Use();\n  }\n\n  private SetupAttributes(attributes: AttributeDescription[]): void {\n    if (attributes.length === 0) {\n      throw new Error(\"Attributes description can't be empty\");\n    }\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vbo);\n\n    this.gl.bindVertexArray(this.vao);\n\n    const stride = attributes.reduce(\n      (stride, attr) =>\n        stride + attr.size * TypeSizeResolver.Resolve(attr.type),\n      0\n    );\n\n    this.componentsPerAttributeSet =\n      stride / TypeSizeResolver.Resolve(attributes[0].type);\n\n    for (\n      let n = 0, offset = 0;\n      n < attributes.length;\n      offset +=\n      attributes[n].size * TypeSizeResolver.Resolve(attributes[n].type),\n      ++n\n    ) {\n      const attr = attributes[n];\n\n      const location = this.shader.GetAttributeLocation(attr.name);\n      this.gl.enableVertexAttribArray(location);\n      this.gl.vertexAttribPointer(\n        location,\n        attr.size,\n        attr.type,\n        attr.normalized,\n        stride,\n        offset\n      );\n    }\n\n    this.gl.bindVertexArray(null);\n  }\n}\n","\nimport { inject, injectable } from 'inversify';\n\nimport { AppSettings } from '../AppSettings';\nimport { InjectionToken } from '../InjectionToken';\n\nimport FGrid from './Grid.frag';\nimport VGrid from './Grid.vert';\n\nimport { Inversify } from '@/Inversify';\nimport { EnumSize } from '@/lib/EnumSize';\nimport { FontAtlas } from '@/lib/font/FontAtlasBuilder';\nimport { Rgb, Rgba, Vec2 } from '@/lib/Primitives';\nimport { PrimitiveBuilder } from '@/lib/renderer/PrimitiveBuilder';\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from '@/lib/renderer/ShaderProgram';\nimport { TypeSizeResolver } from '@/lib/renderer/TypeSizeResolver';\n\n\nenum CodeCellComponent { X, Y, R, G, B, Ux, Uy };\n\nexport interface EditorGridDimension {\n    Columns: number;\n    Rows: number;\n}\n\n@injectable()\nexport class EditorGridRenderer extends PrimitivesRenderer {\n    public readonly CellSize = 10;\n\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext,\n        @inject(InjectionToken.FontAtlas) private fontAtlas: FontAtlas,\n        @inject(InjectionToken.FontAtlasTexture) private fontAtlasTexture: WebGLTexture) {\n        const floatSize = TypeSizeResolver.Resolve(gl.FLOAT);\n        const gridStride = floatSize * EnumSize(CodeCellComponent);\n\n        super(gl,\n            { fragment: FGrid, vertex: VGrid },\n            [{\n                name: 'a_vertex',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false,\n                stride: gridStride,\n                offset: 0\n            },\n            {\n                name: 'a_color',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride: gridStride,\n                offset: 2 * floatSize\n            },\n            {\n                name: 'a_glyph',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false,\n                stride: gridStride,\n                offset: 2 * floatSize + 3 * floatSize\n            }],\n            { indicesPerPrimitive: 6, basePrimitiveType: gl.TRIANGLES });\n\n        this.SetupRenderer();\n    }\n\n    ResizeGrid(): void {\n\n        const vertexList: number[] = [];\n        for (let row = 0; row < this.settings.MemoryLimit.Height; ++row) {\n            for (let col = 0; col < this.settings.MemoryLimit.Width; ++col) {\n                const cell = this.BuildCell(\n                    { x: col * this.CellSize, y: row * this.CellSize },\n                    [0, 0.592156862745098, 0.6549019607843137],\n                    ' ');\n\n                vertexList.push(...cell);\n            }\n        }\n\n        this.UploadAttributes(vertexList);\n    }\n\n    Symbol(symbol: string, column: number, row: number): void {\n        row = this.settings.MemoryLimit.Height - row - 1;\n\n        const cellAttrs = this.PrimitiveAttributes(row * this.settings.MemoryLimit.Width + column);\n        const symbolUV = this.fontAtlas.LookupUV(symbol);\n\n        const UVOffset = 5;\n        const UVStartOffset = cellAttrs.offset + UVOffset;\n\n        // Left bottom\n        cellAttrs.buffer[UVStartOffset] = symbolUV.A.x;\n        cellAttrs.buffer[UVStartOffset + 1] = symbolUV.B.y;\n\n        const stride = EnumSize(CodeCellComponent);\n\n        // Right top\n        cellAttrs.buffer[UVStartOffset + stride] = symbolUV.B.x;\n        cellAttrs.buffer[UVStartOffset + stride + 1] = symbolUV.A.y;\n\n        // Left top\n        cellAttrs.buffer[UVStartOffset + 2 * stride] = symbolUV.A.x;\n        cellAttrs.buffer[UVStartOffset + 2 * stride + 1] = symbolUV.A.y;\n\n        // Left bottom\n        cellAttrs.buffer[UVStartOffset + 3 * stride] = symbolUV.A.x;\n        cellAttrs.buffer[UVStartOffset + 3 * stride + 1] = symbolUV.B.y;\n\n        // Right bottom\n        cellAttrs.buffer[UVStartOffset + 4 * stride] = symbolUV.B.x;\n        cellAttrs.buffer[UVStartOffset + 4 * stride + 1] = symbolUV.B.y;\n\n        // Right top\n        cellAttrs.buffer[UVStartOffset + 5 * stride] = symbolUV.B.x;\n        cellAttrs.buffer[UVStartOffset + 5 * stride + 1] = symbolUV.A.y;\n\n        const floatSize = TypeSizeResolver.Resolve(this.gl.FLOAT);\n\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vbo);\n        this.gl.bufferSubData(this.gl.ARRAY_BUFFER, floatSize * UVStartOffset, this.attributes, UVStartOffset, 5 * stride + 2);\n    }\n\n    Draw(): void {\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this.fontAtlasTexture);\n\n        super.Draw();\n    }\n\n    private BuildCell(\n        position: Vec2,\n        color: Rgb | Rgba,\n        symbol: string\n    ): number[] {\n        const uv = this.fontAtlas.LookupUV(symbol);\n\n        return PrimitiveBuilder.AABBRectangle(\n            position,\n            { width: this.CellSize, height: this.CellSize },\n            [\n                color,\n                {\n                    LeftBottom: [uv.A.x, uv.B.y],\n                    LeftTop: [uv.A.x, uv.A.y],\n                    RightTop: [uv.B.x, uv.A.y],\n                    RightBottom: [uv.B.x, uv.B.y]\n                }\n            ]\n        );\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n\n    get Dimension(): EditorGridDimension {\n        return {\n            Columns: this.settings.MemoryLimit.Width,\n            Rows: this.settings.MemoryLimit.Height\n        };\n    }\n\n    private SetupRenderer(): void {\n        this.ResizeGrid();\n    }\n}\n\nInversify.bind(EditorGridRenderer).toSelf().inSingletonScope();\n","import { inject, injectable } from 'inversify';\n\nimport { InjectionToken } from '../InjectionToken';\n\nimport FCellsOutline from './CellsOutline.frag';\nimport VCellsOutline from './CellsOutline.vert';\nimport { EditorGridRenderer } from \"./EditorGridRenderer\";\n\nimport { Inversify } from '@/Inversify';\nimport { EnumSize } from '@/lib/EnumSize';\nimport { Rgb } from '@/lib/Primitives';\nimport { PrimitiveBuilder } from '@/lib/renderer/PrimitiveBuilder';\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from '@/lib/renderer/ShaderProgram';\nimport { TypeSizeResolver } from '@/lib/renderer/TypeSizeResolver';\n\nenum CodeCellOutlineComponent { X, Y, R, G, B };\n\n@injectable()\nexport class EditorGridCellsOutlineRenderer extends PrimitivesRenderer {\n    private readonly outlineWidth = 0.2;\n    private readonly cellOutlineColor: Rgb = [0.5647058823529412, 0.6431372549019608, 0.6823529411764706];\n\n    private gridOutlineWidth = 0.5;\n    private readonly gridOutlineColor: Rgb = [0.20392156862745098, 0.596078431372549, 0.8588235294117647];\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) protected gl: WebGL2RenderingContext,\n        @inject(EditorGridRenderer) private gridRenderer: EditorGridRenderer) {\n        const floatSize = TypeSizeResolver.Resolve(gl.FLOAT);\n        const gridStride = floatSize * EnumSize(CodeCellOutlineComponent);\n\n        super(\n            gl,\n            { fragment: FCellsOutline, vertex: VCellsOutline },\n            [{\n                name: 'a_vertex',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false,\n                stride: gridStride,\n                offset: 0\n            },\n            {\n                name: 'a_color',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride: gridStride,\n                offset: 2 * floatSize\n            }],\n            { indicesPerPrimitive: 6, basePrimitiveType: gl.TRIANGLES }\n        );\n\n        this.SetupRenderer();\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n\n    private SetupRenderer(): void {\n        const vertexList: number[] = [];\n\n        const editorOutline = PrimitiveBuilder.AABBFrame(\n            { x: 0, y: 0 },\n            {\n                width: this.gridRenderer.Dimension.Columns * this.gridRenderer.CellSize,\n                height: this.gridRenderer.Dimension.Rows * this.gridRenderer.CellSize\n            },\n            this.gridOutlineWidth,\n            [this.gridOutlineColor]);\n\n        vertexList.push(...editorOutline);\n\n        for (let row = 1; row < this.gridRenderer.Dimension.Rows; ++row) {\n            const rowAttrs = PrimitiveBuilder.AABBRectangle(\n                { x: 0, y: row * this.gridRenderer.CellSize },\n                {\n                    width: this.gridRenderer.Dimension.Columns * this.gridRenderer.CellSize,\n                    height: this.outlineWidth\n                },\n                [this.cellOutlineColor]);\n\n            vertexList.push(...rowAttrs);\n        }\n\n        for (let col = 1; col < this.gridRenderer.Dimension.Columns; ++col) {\n            const colAttrs = PrimitiveBuilder.AABBRectangle(\n                { x: col * this.gridRenderer.CellSize, y: 0 },\n                {\n                    width: this.outlineWidth,\n                    height: this.gridRenderer.Dimension.Rows * this.gridRenderer.CellSize\n                },\n                [this.cellOutlineColor]);\n\n            vertexList.push(...colAttrs);\n        }\n\n        this.UploadAttributes(vertexList);\n    }\n}\n\nInversify.bind(EditorGridCellsOutlineRenderer).toSelf().inSingletonScope();\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec2 v_glyph;\\nin vec3 v_color;\\n\\nout vec4 out_color;\\n\\nvoid main() \\n{ \\n      out_color = vec4(v_color, 1);\\n}\\n\"","import { inject, injectable } from 'inversify';\n\nimport { InjectionToken } from '../InjectionToken';\n\nimport { EditorGridRenderer } from './EditorGridRenderer';\nimport FSelection from './Selection.frag';\nimport VSelection from './Selection.vert';\n\nimport { Inversify } from '@/Inversify';\nimport { EnumSize } from '@/lib/EnumSize';\nimport { MathUtil } from '@/lib/math/MathUtil';\nimport { Rgb, Vec2 } from '@/lib/Primitives';\nimport { PrimitiveBuilder } from '@/lib/renderer/PrimitiveBuilder';\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from '@/lib/renderer/ShaderProgram';\nimport { TypeSizeResolver } from \"@/lib/renderer/TypeSizeResolver\";\n\nenum SelectionComponent { X, Y, R, G, B };\n\ninterface SelectionBoundaryPoint {\n    x: number;\n    y: number;\n}\n\ninterface Selection {\n    a: SelectionBoundaryPoint;\n    b: SelectionBoundaryPoint;\n}\n\n@injectable()\nexport class SelectionRenderer extends PrimitivesRenderer {\n    private static readonly IndicesPerPrimitive = 24;\n\n    private readonly selected: Selection[] = [];\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext,\n        @inject(EditorGridRenderer) private editorGridRenderer: EditorGridRenderer) {\n        const floatSize = TypeSizeResolver.Resolve(gl.FLOAT);\n\n        const selectionStride = floatSize * EnumSize(SelectionComponent);\n\n        super(\n            gl,\n            { fragment: FSelection, vertex: VSelection },\n            [\n                {\n                    name: 'a_vertex',\n                    size: 2,\n                    type: gl.FLOAT,\n                    normalized: false,\n                    stride: selectionStride,\n                    offset: 0\n                },\n                {\n                    name: 'a_color',\n                    size: 3,\n                    type: gl.FLOAT,\n                    normalized: false,\n                    stride: selectionStride,\n                    offset: 2 * floatSize\n                }\n            ],\n            { indicesPerPrimitive: SelectionRenderer.IndicesPerPrimitive, basePrimitiveType: gl.TRIANGLES });\n    }\n\n    Select(x: number, y: number, color: Rgb): void {\n        this.SelectRegion({ x, y }, { x, y }, color);\n    }\n\n    SelectRegion(p0: Vec2, p1: Vec2, color: Rgb): void {\n        const region = MathUtil.Extremum([this.FlipY(p0), this.FlipY(p1)]);\n\n        if (this.OutOfGrid(region.min) || this.OutOfGrid(region.max)) {\n            return;\n        }\n\n        const selectionIdx = this.selected\n            .findIndex(r => r.a.x === region.min.x && r.a.y === region.min.y && r.b.x === region.max.x && r.b.y === region.max.y);\n\n        if (selectionIdx !== -1) {\n            const colorOffset = 2;\n            const attrs = this.PrimitiveAttributes(selectionIdx);\n\n            const floatSize = TypeSizeResolver.Resolve(this.gl.FLOAT);\n            const componentsPerVertex = EnumSize(SelectionComponent);\n\n            for (let n = 0; n < SelectionRenderer.IndicesPerPrimitive; ++n) {\n                const colorStart = attrs.offset + colorOffset + n * componentsPerVertex;\n\n                attrs.buffer[colorStart] = color[0];\n                attrs.buffer[colorStart + 1] = color[1];\n                attrs.buffer[colorStart + 2] = color[2];\n            }\n\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vbo);\n            this.gl.bufferSubData(this.gl.ARRAY_BUFFER,\n                floatSize * (attrs.offset + colorOffset),\n                this.attributes,\n                attrs.offset + colorOffset,\n                (SelectionRenderer.IndicesPerPrimitive - 1) * componentsPerVertex + 3);\n        } else {\n            this.selected.push({ a: region.min, b: region.max });\n\n            const selection = PrimitiveBuilder.AABBFrame(\n                {\n                    x: region.min.x * this.editorGridRenderer.CellSize,\n                    y: region.min.y * this.editorGridRenderer.CellSize\n                },\n                {\n                    width: (region.max.x - region.min.x + 1) * this.editorGridRenderer.CellSize,\n                    height: (region.max.y - region.min.y + 1) * this.editorGridRenderer.CellSize\n                },\n                0.5,\n                [color]);\n\n            this.UploadAttributes([...this.attributes, ...selection]);\n        }\n    }\n\n    private OutOfGrid(p: Vec2): boolean {\n        return p.x < 0 || p.x >= this.editorGridRenderer.Dimension.Columns ||\n            p.y < 0 || p.y >= this.editorGridRenderer.Dimension.Rows;\n    }\n\n    private FlipY(point: Vec2): Vec2 {\n        return {\n            x: point.x,\n            y: this.editorGridRenderer.Dimension.Rows - point.y - 1\n        }\n    }\n\n    Unselect(x: number, y: number): void {\n        this.UnselectRegion({ x, y }, { x, y });\n    }\n\n    UnselectRegion(p0: Vec2, p1: Vec2): void {\n        const region = MathUtil.Extremum([this.FlipY(p0), this.FlipY(p1)]);\n\n        const selectionIdx = this.selected\n            .findIndex(r => r.a.x === region.min.x && r.a.y === region.min.y && r.b.x === region.max.x && r.b.y === region.max.y);\n\n        if (selectionIdx === -1) {\n            return;\n        }\n\n        const attrs = this.PrimitiveAttributes(selectionIdx);\n\n        const copy = [...this.attributes];\n\n        copy.splice(attrs.offset, EnumSize(SelectionComponent) * SelectionRenderer.IndicesPerPrimitive);\n        this.UploadAttributes(copy);\n\n        this.selected.splice(selectionIdx, 1);\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n}\n\nInversify.bind(SelectionRenderer).toSelf().inSingletonScope();","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec2 a_vertex;\\nin vec3 a_color;\\n\\nout vec3 v_color;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position = u_viewProject * vec4(a_vertex, 0.02, 1.0);\\n  v_color = a_color;\\n}\\n\"","import { inject, injectable } from \"inversify\";\n\nimport { EditorGridCellsOutlineRenderer } from \"./EditorGridCellsOutlineRenderer\";\nimport { EditorGridDimension, EditorGridRenderer } from \"./EditorGridRenderer\";\nimport { SelectionRenderer } from \"./SelectionRenderer\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\nimport { Mat4 } from \"@/lib/renderer/ShaderProgram\";\n\n@injectable()\nexport class CodeEditorRenderer {\n    private viewProjection!: Mat4 | Float32Array;\n\n    constructor(\n        @inject(EditorGridRenderer) private editorGridRenderer: EditorGridRenderer,\n        @inject(EditorGridCellsOutlineRenderer) private editorGridCellsOutlineRenderer: EditorGridCellsOutlineRenderer,\n        @inject(SelectionRenderer) private selectionRenderer: SelectionRenderer) { }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.viewProjection = mat;\n\n        this.editorGridRenderer.ViewProjection = mat;\n        this.editorGridCellsOutlineRenderer.ViewProjection = mat;\n        this.selectionRenderer.ViewProjection = mat;\n    }\n\n    get ViewProjection(): Mat4 | Float32Array {\n        return this.viewProjection;\n    }\n\n    Symbol(symbol: string, column: number, row: number): void {\n        this.editorGridRenderer.Symbol(symbol, column, row);\n    }\n\n    Select(column: number, row: number, color: Rgb): void {\n        this.selectionRenderer.Select(column, row, color);\n    }\n\n    SelectRegion(p0: Vec2, p1: Vec2, color: Rgb): void {\n        this.selectionRenderer.SelectRegion(p0, p1, color);\n    }\n\n    Unselect(column: number, row: number): void {\n        this.selectionRenderer.Unselect(column, row);\n    }\n\n    UnselectRegion(p0: Vec2, p1: Vec2): void {\n        this.selectionRenderer.UnselectRegion(p0, p1);\n    }\n\n    Draw(): void {\n        this.editorGridRenderer.Draw();\n        this.editorGridCellsOutlineRenderer.Draw();\n        this.selectionRenderer.Draw();\n    }\n\n    Clear(): void {\n        for (let row = 0; row < this.Dimension.Rows; ++row) {\n            for (let column = 0; column < this.Dimension.Columns; ++column) {\n                this.Symbol(' ', column, row);\n            }\n        }\n    }\n\n    get Dimension(): EditorGridDimension {\n        return this.editorGridRenderer.Dimension;\n    }\n\n    get CellSize(): number {\n        return this.editorGridRenderer.CellSize;\n    }\n}\n\nInversify.bind(CodeEditorRenderer).toSelf().inSingletonScope();\n","type Comparator<T> = (a: T, b: T) => boolean;\n\nexport class ArrayHelper {\n    static Max<T>(array: T[], comparator: Comparator<T>): T {\n        if (array.length === 1) {\n            return array[0];\n        }\n\n        let max = array[0];\n        for (let n = 1; n < array.length; ++n) {\n            if (comparator(max, array[n])) {\n                max = array[n];\n            }\n        }\n\n        return max;\n    }\n\n    static Min<T>(array: T[], comparator: Comparator<T>): T {\n        if (array.length === 1) {\n            return array[0];\n        }\n\n        let min = array[0];\n        for (let n = 1; n < array.length; ++n) {\n            if (comparator(array[n], min)) {\n                min = array[n];\n            }\n        }\n\n        return min;\n    }\n}\n","import { vec2 } from \"gl-matrix\";\n\nimport { ArrayHelper } from \"../ArrayHelper\";\nimport { Vec2 } from \"../Primitives\";\n\nimport { MathUtil } from \"./MathUtil\";\n\nexport interface Rectangle {\n    lb: Vec2;\n    rt: Vec2;\n}\n\ninterface DistanceDiffResult {\n    distance: number;\n    diff: vec2;\n}\n\nexport class Transformation {\n    static MoveRectangleToPlaceInsideRectangle(movable: Rectangle, destination: Rectangle): Vec2 {\n        const betweenByX = MathUtil.Between(movable.lb.x, destination.lb.x, destination.rt.x) &&\n            MathUtil.Between(movable.rt.x, destination.lb.x, destination.rt.x);\n\n        const betweenByY = MathUtil.Between(movable.lb.y, destination.lb.y, destination.rt.y) &&\n            MathUtil.Between(movable.rt.y, destination.lb.y, destination.rt.y);\n\n        if (betweenByX && betweenByY) return { x: 0, y: 0 };\n\n        if (betweenByX) {\n            const distanceToTop = Math.abs(movable.rt.y - destination.rt.y);\n            const distanceToBottom = Math.abs(movable.lb.y - destination.lb.y);\n            return {\n                x: 0,\n                y: distanceToTop < distanceToBottom ? -distanceToTop : distanceToBottom\n            };\n        }\n\n        if (betweenByY) {\n            const distanceToLeft = Math.abs(movable.lb.x - destination.lb.x);\n            const distanceToRight = Math.abs(movable.rt.x - destination.rt.x);\n            return {\n                x: distanceToLeft < distanceToRight ? distanceToLeft : -distanceToRight,\n                y: 0\n            };\n        }\n\n        const corners = [\n            Transformation.DistanceDiff(\n                vec2.fromValues(movable.lb.x, movable.lb.y),\n                vec2.fromValues(destination.lb.x, destination.lb.y)),\n            Transformation.DistanceDiff(\n                vec2.fromValues(movable.lb.x, movable.rt.y),\n                vec2.fromValues(destination.lb.x, destination.rt.y)),\n            Transformation.DistanceDiff(\n                vec2.fromValues(movable.rt.x, movable.rt.y),\n                vec2.fromValues(destination.rt.x, destination.rt.y)),\n            Transformation.DistanceDiff(\n                vec2.fromValues(movable.rt.x, movable.lb.y),\n                vec2.fromValues(destination.rt.x, destination.lb.y))\n        ];\n\n        const closest = ArrayHelper.Min(corners, (a, b) => a.distance < b.distance);\n\n        return { x: closest.diff[0], y: closest.diff[1] };\n    }\n\n    static ShortestMoveForIntersection(movable: Rectangle, destination: Rectangle): Vec2 {\n        const leftToRight = destination.rt.x - movable.lb.x;\n        const rightToLeft = destination.lb.x - movable.rt.x;\n\n        const bottomToTop = destination.rt.y - movable.lb.y;\n        const topToBottom = destination.lb.y - movable.rt.y;\n\n        const intersectByX = !(leftToRight < 0 || rightToLeft > 0);\n        const intersectByY = !(bottomToTop < 0 || topToBottom > 0);\n\n        if (intersectByX && intersectByY) {\n            return { x: 0, y: 0 };\n        }\n\n        const x = leftToRight < 0 ?\n            leftToRight :\n            rightToLeft > 0 ?\n                rightToLeft :\n                0;\n\n        const y = bottomToTop < 0 ?\n            bottomToTop :\n            topToBottom > 0 ?\n                topToBottom :\n                0;\n\n\n        return { x, y };\n    }\n\n    private static DistanceDiff(a: vec2, b: vec2): DistanceDiffResult {\n        return {\n            distance: vec2.distance(a, b),\n            diff: vec2.sub(vec2.create(), b, a)\n        };\n    }\n}\n","import { vec3 } from 'gl-matrix';\n\nimport { Vec2 } from '../Primitives';\n\nexport interface Plane {\n    a: number;\n    b: number;\n    c: number;\n    d: number\n}\n\nexport type Vec3 = [number, number, number];\n\nexport interface Line {\n    a: Vec3;\n    b: Vec3;\n}\n\n// (x, y) represents left bottom corner\nexport interface Rectangle {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\n\nexport interface Range {\n    min: number;\n    max: number;\n}\n\nexport class Intersection {\n    static PlaneLine(plane: Plane, line: Line): Vec3 {\n        const d0 = vec3.dot([plane.a, plane.b, plane.c], line.a) + plane.d;\n        const d1 = vec3.dot([plane.a, plane.b, plane.c], line.b) + plane.d;\n        const t = -d0 / (d1 - d0);\n        const intersection = vec3.add(vec3.create(), line.a, vec3.scale(vec3.create(), vec3.sub(vec3.create(), line.b, line.a), t));\n\n        return [intersection[0], intersection[1], intersection[2]];\n    }\n\n    static AABBRectanglePoint(rectangle: Rectangle, point: Vec2): boolean {\n        return (\n            point.x <= rectangle.x + rectangle.width &&\n            point.x >= rectangle.x &&\n            point.y <= rectangle.y + rectangle.height &&\n            point.y >= rectangle.y\n        );\n    }\n\n    static RectangleRectangle(a: Rectangle, b: Rectangle): boolean {\n        const aTopRight: Vec2 = { x: a.x + a.width, y: a.y + a.height };\n        const bTopRight: Vec2 = { x: b.x + b.width, y: b.y + b.height };\n\n        return a.x < bTopRight.x && aTopRight.x > b.x &&\n            a.y < bTopRight.y && aTopRight.y > b.y;\n    }\n\n    static RangeRange(a: Range, b: Range): boolean {\n        return a.min < b.max && a.max > b.min;\n    }\n}\n","import { vec2, vec3, vec4, mat4 } from 'gl-matrix';\n\nimport { Intersection, Plane } from '../math/Intersection';\nimport { Vec2 } from '../Primitives';\n\nexport interface WndCoord {\n    x: number;\n    y: number;\n    z: number;\n}\n\nexport interface Viewport {\n    width: number;\n    height: number;\n}\n\nexport class Camera {\n    static Unproject(position: WndCoord, viewProjection: mat4, viewport: Viewport): vec4 {\n        const vec = vec3.fromValues(position.x, position.y, position.z);\n\n        const v = vec4.fromValues(\n            2 * vec[0] / viewport.width - 1,\n            1 - 2 * vec[1] / viewport.height,\n            2 * vec[2] - 1,\n            1\n        );\n\n        const invertViewProj = mat4.invert(mat4.create(), viewProjection);\n\n        const pos = vec4.transformMat4(vec4.create(), v, invertViewProj);\n\n        pos[3] = 1 / pos[3];\n        pos[0] *= pos[3];\n        pos[1] *= pos[3];\n        pos[2] *= pos[3];\n\n        return pos;\n    }\n\n    static UnprojectMovement(movement: Vec2, plane: Plane, viewProjection: mat4, viewport: Viewport): Vec2 {\n        const posNear0 = Camera.Unproject({ x: 0, y: 0, z: 0 }, viewProjection, viewport);\n        const posFar0 = Camera.Unproject({ x: 0, y: 0, z: 1 }, viewProjection, viewport);\n\n        const intersection0 = Intersection.PlaneLine(\n            plane,\n            { a: [posNear0[0], posNear0[1], posNear0[2]], b: [posFar0[0], posFar0[1], posFar0[2]] });\n\n        const posNear1 = Camera.Unproject({ x: movement.x, y: movement.y, z: 0 }, viewProjection, viewport);\n        const posFar1 = Camera.Unproject({ x: movement.x, y: movement.y, z: 1 }, viewProjection, viewport);\n\n        const intersection1 = Intersection.PlaneLine(\n            plane,\n            { a: [posNear1[0], posNear1[1], posNear1[2]], b: [posFar1[0], posFar1[1], posFar1[2]] });\n\n        const delta = vec2.sub(\n            vec2.create(),\n            vec2.fromValues(intersection0[0], intersection0[1]),\n            vec2.fromValues(intersection1[0], intersection1[1]));\n\n        return { x: delta[0], y: delta[1] };\n    }\n}\n","import { mat4, vec3 } from \"gl-matrix\";\nimport { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"./AppSettings\";\nimport { CodeEditorRenderer } from \"./CodeEditor/CodeEditorRenderer\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Transformation } from \"@/lib/math/Transformation\";\nimport { Vec3 } from \"@/lib/Primitives\";\nimport { Camera } from \"@/lib/renderer/Camera\";\n\n@injectable()\nexport class CameraService {\n    private camera: mat4 = mat4.create();\n    private projection: mat4 = mat4.create();\n    private viewProjection: mat4 = mat4.create();\n\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(CodeEditorRenderer) private codeEditorRenderer: CodeEditorRenderer) {\n        this.UpdateProjection();\n        this.UpdateViewProjection();\n    }\n\n    MoveTo(position: Partial<Vec3>): void {\n        position.x !== undefined && (this.camera[12] = position.x);\n        position.y !== undefined && (this.camera[13] = position.y);\n        position.z !== undefined && (this.camera[14] = position.z);\n\n        this.UpdateViewProjection();\n        this.MaintainCodeEditorVisible();\n    }\n\n    Translate(delta: Partial<Vec3>): void {\n        mat4.translate(\n            this.camera,\n            this.camera,\n            [\n                delta.x ?? 0,\n                delta.y ?? 0,\n                delta.z ?? 0\n            ]);\n\n        this.UpdateViewProjection();\n        this.MaintainCodeEditorVisible();\n    }\n\n    get Position(): Vec3 {\n        return {\n            x: this.camera[12],\n            y: this.camera[13],\n            z: this.camera[14]\n        };\n    }\n\n    get ViewProjection(): mat4 {\n        return this.viewProjection;\n    }\n\n    Resize(): void {\n        this.UpdateProjection();\n        this.UpdateViewProjection();\n    }\n\n    private UpdateProjection(): void {\n        mat4.perspective(\n            this.projection,\n            this.settings.Fovy,\n            this.settings.AspectRatio,\n            this.settings.ZNear,\n            this.settings.ZFar);\n    }\n\n    private UpdateViewProjection(): void {\n        const view = mat4.invert(mat4.create(), this.camera);\n        mat4.mul(this.viewProjection, this.projection, view);\n    }\n\n    private MaintainCodeEditorVisible(): void {\n        const cellSize = this.codeEditorRenderer.CellSize;\n        const lbNDC = vec3.transformMat4(vec3.create(), [cellSize, cellSize, 0], this.viewProjection);\n        const rtNDC = vec3.transformMat4(\n            vec3.create(),\n            [\n                (this.settings.MemoryLimit.Width - 1) * cellSize,\n                (this.settings.MemoryLimit.Height - 1) * cellSize,\n                0\n            ],\n            this.viewProjection);\n\n        const ndcCompensation = Transformation.ShortestMoveForIntersection(\n            { lb: { x: lbNDC[0], y: lbNDC[1] }, rt: { x: rtNDC[0], y: rtNDC[1] } },\n            { lb: { x: -1, y: -1 }, rt: { x: 1, y: 1 } });\n\n        if (ndcCompensation.x === 0 && ndcCompensation.y === 0) {\n            return;\n        }\n\n        const screenCompensation = {\n            x: ndcCompensation.x * this.settings.ViewDimension.Width / 2,\n            y: ndcCompensation.y * this.settings.ViewDimension.Height / 2\n        };\n\n        const worldCompensation = Camera.UnprojectMovement(\n            { x: screenCompensation.x, y: -screenCompensation.y },\n            { a: 0, b: 0, c: 1, d: 0 },\n            this.ViewProjection,\n            {\n                width: this.settings.ViewDimension.Width,\n                height: this.settings.ViewDimension.Height\n            });\n\n        mat4.translate(\n            this.camera,\n            this.camera,\n            [\n                worldCompensation.x,\n                worldCompensation.y,\n                0\n            ]);\n\n        this.UpdateViewProjection();\n    }\n}\n\nInversify.bind(CameraService).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"@/app/AppSettings\";\nimport { Inversify } from \"@/Inversify\";\nimport { MathUtil } from \"@/lib/math/MathUtil\";\nimport { Vec2 } from \"@/lib/Primitives\";\nimport { Dimension, UIComponent } from \"@/lib/UI/UIComponent\";\n\n@injectable()\nexport class HeadlineControlsLayout {\n    private skipUpdates = false;\n\n    private components: UIComponent[] = [];\n\n    private position: Vec2 = { x: Number.POSITIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n\n    private absolutePosition: Vec2 = { x: Number.POSITIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n\n    private dimension: Dimension = { width: 0, height: 0 };\n\n    constructor(@inject(AppSettings) private settings: AppSettings) { }\n\n    Watch(component: UIComponent): void {\n        component.Observable.Attach(component => this.ComponentUpdated(component));\n\n        this.components.push(component);\n        this.ComponentUpdated(component);\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    get AbsolutePosition(): Vec2 {\n        return this.absolutePosition;\n    }\n\n    get Dimension(): Dimension {\n        return this.dimension;\n    }\n\n    get Scale(): number {\n        return this.settings.DevicePixelRatio;\n    }\n\n    private ComponentUpdated(component: UIComponent): void {\n        if (!this.skipUpdates && (component.Scale / this.settings.DevicePixelRatio < 1 || component.AbsolutePosition.x + component.Dimension.width > this.settings.ViewDimension.Width)) {\n            const margin = 10;\n            const targetScale = this.settings.ViewDimension.Width / (component.Position.x + component.Dimension.width / component.Scale + margin);\n            const scale = Math.min(targetScale / this.settings.DevicePixelRatio - Number.EPSILON, 1);\n\n            this.skipUpdates = true;\n            this.components.forEach(x => x.Scale = scale);\n            this.skipUpdates = false;\n        }\n\n        this.MaintainPositionDimension();\n    }\n\n    private MaintainPositionDimension(): void {\n        const relativeExtremum = MathUtil\n            .Extremum(this.components.map(x => ({ ...x.Position })));\n\n        this.position.x = relativeExtremum.min.x;\n        this.position.y = relativeExtremum.min.y;\n\n\n        const absoluteExtremum = MathUtil\n            .Extremum(this.components.flatMap(x => this.MapComponent(x)));\n\n        this.absolutePosition.x = absoluteExtremum.min.x;\n        this.absolutePosition.y = absoluteExtremum.min.y;\n\n        this.dimension.width = absoluteExtremum.max.x - absoluteExtremum.min.x;\n        this.dimension.height = absoluteExtremum.max.y - absoluteExtremum.min.y;\n    }\n\n    private MapComponent(component: UIComponent): Vec2[] {\n        const dimension = component.Dimension;\n\n        return [\n            component.AbsolutePosition,\n            {\n                x: component.AbsolutePosition.x + dimension.width,\n                y: component.AbsolutePosition.y + dimension.height\n            }\n        ];\n    }\n}\n\nInversify.bind(HeadlineControlsLayout).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { HeadlineControlsLayout } from \"./HeadlineControlsLayout\";\n\nimport { AppSettings } from \"@/app/AppSettings\";\nimport { Inversify } from \"@/Inversify\";\nimport { Intersection } from \"@/lib/math/Intersection\";\nimport { UIComponent } from \"@/lib/UI/UIComponent\";\n\n@injectable()\nexport class DebugControlsLayout {\n    private skipUpdates = false;\n\n    private debugGroup!: UIComponent;\n\n    private readonly verticalPosition = 60;\n\n    constructor(\n        @inject(HeadlineControlsLayout) private headlineLayout: HeadlineControlsLayout,\n        @inject(AppSettings) private settings: AppSettings) { }\n\n    set DebugGroup(group: UIComponent) {\n        this.debugGroup = group;\n\n        group.Observable.Attach(() => this.DebugGroupUpdated());\n    }\n\n    DebugGroupUpdated(): void {\n        if (this.skipUpdates) {\n            return;\n        }\n\n        queueMicrotask(() => this.RecalculatePosition());\n    }\n\n    private RecalculatePosition(): void {\n        const debugGroupDimension = this.debugGroup.Dimension;\n\n        if (Intersection.RangeRange(\n            { min: this.debugGroup.AbsolutePosition.x, max: this.debugGroup.AbsolutePosition.x + debugGroupDimension.width },\n            { min: this.headlineLayout.AbsolutePosition.x, max: this.headlineLayout.AbsolutePosition.x + this.headlineLayout.Dimension.width })) {\n\n            const margin = 10;\n\n            this.skipUpdates = true;\n\n            this.debugGroup.Position = {\n                x: this.debugGroup.Position.x,\n                y: (this.settings.ViewDimension.Height - this.headlineLayout.AbsolutePosition.y) / this.headlineLayout.Scale + debugGroupDimension.height / this.debugGroup.Scale + margin\n            };\n\n            this.skipUpdates = false;\n        } else {\n            this.skipUpdates = true;\n\n            this.debugGroup.Position = {\n                x: this.debugGroup.Position.x,\n                y: this.verticalPosition\n            };\n\n            this.skipUpdates = false;\n        }\n    }\n}\n\nInversify.bind(DebugControlsLayout).toSelf().inSingletonScope();\n","import { Pointer } from '../memory/Memory';\n\nexport class IllegalInstructionException extends Error {\n  constructor(\n    public readonly Where: Pointer,\n    public readonly Opcode: number,\n    public readonly Symbol: string) {\n    super(`An illegal instruction was executed.\\nWith opcode ${Opcode}(${Symbol}) at location ${Where.x}:${Where.y}`);\n  }\n}\n\nexport enum PCDirection {\n  Right,\n  Down,\n  Left,\n  Up\n}\n\nexport interface CPU {\n  StackPush(value: number): void;\n  StackPop(): number;\n  StackDuplicate(): void;\n  StackSwap(): void;\n\n  PCDirection(dir: PCDirection): void;\n  ExecuteNext(): void;\n  SkipNext(): void;\n\n  StringModeToggle(): void;\n\n  ReadMemory(ptr: Pointer): number;\n  WriteMemory(ptr: Pointer, value: number): void;\n\n  WriteIO(symbol: string): void;\n  ReadCharacter(): string;\n  ReadNumber(): number;\n\n  Halt(): void;\n\n  get IsHalted(): boolean;\n\n  get NextInstructionCode(): string;\n\n  get PC(): { Location: Pointer; Direction: PCDirection };\n\n  get Stack(): number[];\n}\n","export type Observer<T> = (target: T) => void;\n\nexport type ObserverDetacher = () => void;\n\ninterface ObserverDescriptor<T> {\n    id: symbol;\n    priority: number;\n    observer: Observer<T>;\n}\n\ninterface AttachOptions {\n    priority: number;\n}\n\nexport const ObservablePriority = {\n    Low: Number.NEGATIVE_INFINITY,\n    Normal: 0,\n    High: Number.POSITIVE_INFINITY\n}\n\nexport interface Observable<T> {\n    Attach(observer: Observer<T>, options?: AttachOptions): ObserverDetacher;\n}\n\nexport class ObservableController<T> implements Observable<T> {\n    private observers: ObserverDescriptor<T>[] = [];\n\n    Attach(observer: Observer<T>, options: AttachOptions = { priority: ObservablePriority.Normal }): ObserverDetacher {\n        const descriptor: ObserverDescriptor<T> = {\n            id: Symbol(),\n            priority: options.priority,\n            observer\n        };\n\n        this.observers.push(descriptor);\n\n        this.MaintainSorted();\n\n        return () => this.observers.splice(this.observers.findIndex(x => x.id === descriptor.id), 1);\n    }\n\n    DetachAll(): void {\n        this.observers = [];\n    }\n\n    Notify(sender: T): void {\n        this.observers.forEach(o => o.observer(sender));\n    }\n\n    private MaintainSorted(): void {\n        for (let n = this.observers.length - 1;\n            n > 0 && this.observers[n].priority > this.observers[n - 1].priority;\n            --n) {\n            const temp = this.observers[n - 1];\n            this.observers[n - 1] = this.observers[n];\n            this.observers[n] = temp;\n        }\n    }\n}\n","import { interfaces } from \"inversify\";\n\nexport interface AsyncConstructable {\n    AsyncConstructor(): Promise<void>;\n}\n\nexport async function AsyncConstructorActivator<T extends AsyncConstructable>(_context: interfaces.Context, constructable: T): Promise<T> {\n    await constructable.AsyncConstructor();\n    return constructable;\n}\n","import { Vec2 } from \"../Primitives\";\n\nexport interface Rectangle {\n    width: number;\n    height: number;\n}\n\ninterface PackageItem<TRectangle extends Rectangle> {\n    target: TRectangle;\n    position: Vec2;\n}\n\ninterface Dimension {\n    width: number;\n    height: number;\n}\n\nexport interface Package<TRectangle extends Rectangle> {\n    items: PackageItem<TRectangle>[];\n    dimension: Dimension;\n}\n\nexport class RectangleRowPacker<TRectangle extends Rectangle> {\n    private rectangles: TRectangle[] = [];\n\n    Add(rectangle: TRectangle): void {\n        this.rectangles.push(rectangle);\n    }\n\n    Pack(): Package<TRectangle> {\n        let idealArea = 0;\n        let maxWidth = 0;\n        for (const rect of this.rectangles) {\n            idealArea += rect.width * rect.height;\n            maxWidth = Math.max(maxWidth, rect.width);\n        }\n\n        const estimatedWidth = Math.max(Math.ceil(Math.sqrt(idealArea)), maxWidth);\n\n        this.rectangles.sort((a, b) => b.height - a.height);\n\n        const pack: PackageItem<TRectangle>[] = [];\n        let maxHeightInRow = 0;\n        let x = 0, y = 0;\n        for (const rect of this.rectangles) {\n            if (x + rect.width > estimatedWidth) {\n                x = 0;\n                y += maxHeightInRow;\n                maxHeightInRow = 0;\n            }\n\n            pack.push({ target: rect, position: { x, y } });\n\n            maxHeightInRow = Math.max(maxHeightInRow, rect.height);\n            x += rect.width;\n        }\n\n        return { items: pack, dimension: { width: estimatedWidth, height: y + maxHeightInRow } };\n    }\n}\n\n/* class RectanglePacker<TRectangle extends Rectangle> {\n    private rectangles: Rectangle[] = [];\n\n    Add(rectangle: Rectangle): void {\n        this.rectangles.push(rectangle.Clone());\n    }\n\n    Pack(): void {\n        const roughtArea = this.RoughlyPackedArea();\n\n        console.log(roughtArea);\n    }\n\n    private RoughlyPackedArea(): number {\n        const totalWidthFromLeft = Array.from({ length: this.rectangles.length + 1 }, () => ({ width: 0, maxHeight: 0 }));\n\n        for (let n = 0; n < this.rectangles.length; ++n) {\n            const rect = this.rectangles[n];\n\n            totalWidthFromLeft[n + 1].width = totalWidthFromLeft[n].width + rect.Width;\n            totalWidthFromLeft[n + 1].maxHeight = Math.max(totalWidthFromLeft[n].maxHeight, rect.Height);\n        }\n\n        totalWidthFromLeft[totalWidthFromLeft.length - 1].width = 0;\n        totalWidthFromLeft[totalWidthFromLeft.length - 1].maxHeight = 0;\n\n        for (let n = this.rectangles.length - 1; n >= 0; --n) {\n            const rect = this.rectangles[n];\n\n            const nonRotatedHeight = Math.max(totalWidthFromLeft[n].maxHeight, rect.Height, totalWidthFromLeft[n + 1].maxHeight);\n            const nonRotatedWidth = totalWidthFromLeft[n].width + rect.Width + totalWidthFromLeft[n + 1].width;\n            const nonRotatedArea = nonRotatedWidth * nonRotatedHeight;\n\n            const rotatedHeight = Math.max(totalWidthFromLeft[n].maxHeight, rect.Width, totalWidthFromLeft[n + 1].maxHeight);\n            const rotatedWidth = totalWidthFromLeft[n].width + rect.Height + totalWidthFromLeft[n + 1].width;\n            const rotatedArea = rotatedWidth * rotatedHeight;\n\n            //console.log(`${nonRotatedWidth} * ${nonRotatedHeight} = ${nonRotatedArea}`, `${rotatedWidth} * ${rotatedHeight} = ${rotatedArea}`);\n            if (rotatedArea < nonRotatedArea) {\n                const w = rect.Width;\n                rect.Width = rect.Height;\n                rect.Height = w;\n\n                if (n > 0 && totalWidthFromLeft[n - 1].maxHeight < rect.Height) {\n                    totalWidthFromLeft[n - 1].maxHeight = rect.Height;\n                }\n            }\n\n            totalWidthFromLeft[n].width = rect.Width + totalWidthFromLeft[n + 1].width;\n            totalWidthFromLeft[n].maxHeight = Math.max(rect.Height, totalWidthFromLeft[n + 1].maxHeight);\n            //console.log(JSON.stringify(totalWidthFromLeft));\n        }\n\n        let totalWidth = 0;\n        let maxHeight = 0;\n\n        for (const rect of this.rectangles) {\n            totalWidth += rect.Width;\n            maxHeight = Math.max(maxHeight, rect.Height);\n        }\n\n        return totalWidth * maxHeight;\n    }\n} */\n","import { Package, RectangleRowPacker } from \"../math/RectanglePacker\";\nimport { NotNull } from \"../NotNull\";\nimport { Vec2 } from \"../Primitives\";\n\ninterface Dimension {\n    width: number;\n    height: number;\n}\n\nexport interface UV {\n    A: Vec2;\n    B: Vec2;\n}\n\ninterface ImageToPack<TId> {\n    id: TId;\n    filename: string;\n    width: number;\n    height: number;\n}\n\nexport class TextureAtlas<TId> {\n    protected static readonly UndefinedUV = { A: { x: -1, y: -1 }, B: { x: -1, y: -1 } };\n\n    protected pack!: Package<ImageToPack<TId>>;\n\n    constructor(public readonly Image: ImageData, pack: Package<ImageToPack<TId>>) {\n        this.ClonePackage(pack);\n        this.NormalizePackage();\n    }\n\n    LookupUV(id: TId): UV {\n        const found = this.pack.items.find(x => x.target.id === id);\n\n        if (found === undefined) {\n            return TextureAtlas.UndefinedUV;\n        }\n\n        return {\n            A: { x: found.position.x, y: found.position.y },\n            B: { x: found.position.x + found.target.width, y: found.position.y + found.target.height }\n        };\n    }\n\n    static IsUndefinedUV(uv: UV): boolean {\n        return uv === TextureAtlas.UndefinedUV;\n    }\n\n    private ClonePackage(pack: Package<ImageToPack<TId>>): void {\n        this.pack = {\n            dimension: { ...pack.dimension },\n            items: pack.items.map(x => ({ position: { ...x.position }, target: { ...x.target } }))\n        };\n    }\n\n    private NormalizePackage(): void {\n        this.pack.items.forEach(item => {\n            item.position.x /= this.pack.dimension.width;\n            item.position.y /= this.pack.dimension.height;\n            item.target.width /= this.pack.dimension.width;\n            item.target.height /= this.pack.dimension.height;\n        });\n    }\n}\n\nexport class TextureAtlasBuilder<TId> {\n    private images: ImageToPack<TId>[] = [];\n\n    private context!: CanvasRenderingContext2D;\n\n    Add(id: TId, filename: string, dimension: Dimension): void {\n        this.images.push({ id, filename, ...dimension });\n    }\n\n    async Build(): Promise<TextureAtlas<TId>> {\n        const packer = new RectangleRowPacker<ImageToPack<TId>>();\n        this.images.forEach(img => packer.Add(img));\n        const pack = packer.Pack();\n\n        this.SetupCanvas(pack.dimension.width, pack.dimension.height);\n\n        for (const packed of pack.items) {\n            const img = await TextureAtlasBuilder.CreateImage(packed.target.filename);\n\n            this.context.drawImage(img,\n                packed.position.x, packed.position.y,\n                packed.target.width, packed.target.height);\n        }\n\n        return new TextureAtlas(\n            this.context.getImageData(0, 0, pack.dimension.width, pack.dimension.height),\n            pack\n        );\n    }\n\n    private SetupCanvas(width: number, height: number): void {\n        const canvas = document.createElement('canvas');\n\n        //document.body.appendChild(canvas);\n\n        canvas.width = width;\n        canvas.height = height;\n\n        const context = canvas.getContext('2d') ?? NotNull('Failed to get context');\n\n        this.context = context;\n    }\n\n    private static async CreateImage(src: string): Promise<HTMLImageElement> {\n        const image = new Image();\n        return new Promise((resolve, reject) => {\n            image.onload = () => resolve(image);\n            image.onerror = () => reject(new Error('Failed to create an image'));\n            image.src = `${process.env.BASE_URL}${src}`;\n        });\n    }\n}\n","import { injectable } from \"inversify\";\n\nimport { AsyncConstructable, AsyncConstructorActivator } from \"../DI/AsyncConstructorActivator\";\nimport { TextureAtlas, TextureAtlasBuilder, UV } from \"../renderer/TextureAtlas\";\n\nimport { Inversify } from \"@/Inversify\";\n\nexport enum UIIcon {\n    Empty, Open, Save, ArrowRight, ArrowDown, ArrowLeft, ArrowUp, Debugger,\n    Play, PlayDebug, DebugStepInto,\n    ExclamationCircle, ExclamationTriangle, CheckCircle,\n    Breakpoint, ArrowThinAll, ArrowThinRight, ArrowThinDown, ArrowThinLeft, ArrowThinUp,\n    Delete, Stop, Heatmap, Undo, Redo, Settings, Select, Copy, Cut, Paste, EditDelete, Share,\n    Input, Output, Keyboard, Shift, Backspace\n};\n\nexport interface UVExtra extends UV {\n    aspectRatio: number;\n}\n\nexport interface IconExtra<TId> {\n    id: TId;\n    aspectRatio: number;\n}\n\n@injectable()\nexport class UIIconAtlas implements AsyncConstructable {\n    private atlas!: TextureAtlas<UIIcon>;\n    private iconExtras: IconExtra<UIIcon>[] = [];\n\n    async AsyncConstructor(): Promise<void> {\n        await this.BuildAtlas();\n    }\n\n    LookupUV(id: UIIcon): UVExtra {\n        switch (id) {\n            case UIIcon.ArrowLeft:\n                {\n                    const uv = this.atlas.LookupUV(UIIcon.ArrowRight);\n                    return {\n                        A: { x: uv.B.x, y: uv.B.y },\n                        B: { x: uv.A.x, y: uv.A.y },\n                        aspectRatio: this.ExtractAspectRatio(UIIcon.ArrowRight)\n                    };\n                }\n            case UIIcon.ArrowUp:\n                {\n                    const uv = this.atlas.LookupUV(UIIcon.ArrowDown);\n                    return {\n                        A: { x: uv.B.x, y: uv.B.y },\n                        B: { x: uv.A.x, y: uv.A.y },\n                        aspectRatio: this.ExtractAspectRatio(UIIcon.ArrowDown)\n                    };\n                }\n            case UIIcon.ArrowThinLeft:\n                {\n                    const uv = this.atlas.LookupUV(UIIcon.ArrowThinRight);\n                    return {\n                        A: { x: uv.B.x, y: uv.B.y },\n                        B: { x: uv.A.x, y: uv.A.y },\n                        aspectRatio: this.ExtractAspectRatio(UIIcon.ArrowThinRight)\n                    };\n                }\n            case UIIcon.ArrowThinDown:\n                {\n                    const uv = this.atlas.LookupUV(UIIcon.ArrowThinUp);\n                    return {\n                        A: { x: uv.B.x, y: uv.B.y },\n                        B: { x: uv.A.x, y: uv.A.y },\n                        aspectRatio: this.ExtractAspectRatio(UIIcon.ArrowThinUp)\n                    };\n                }\n            case UIIcon.Undo:\n                {\n                    const uv = this.atlas.LookupUV(UIIcon.Redo);\n                    return {\n                        A: { x: uv.B.x, y: uv.A.y },\n                        B: { x: uv.A.x, y: uv.B.y },\n                        aspectRatio: this.ExtractAspectRatio(UIIcon.Redo)\n                    };\n                }\n            default:\n                return { ...this.atlas.LookupUV(id), aspectRatio: this.ExtractAspectRatio(id) };\n        }\n    }\n\n    get Image(): ImageData {\n        return this.atlas.Image;\n    }\n\n    private ExtractAspectRatio(id: UIIcon): number {\n        return this.iconExtras.find(x => x.id === id)!.aspectRatio;\n    }\n\n    private async BuildAtlas(): Promise<void> {\n        const builder = new TextureAtlasBuilder<UIIcon>();\n\n        const icons = [\n            {\n                id: UIIcon.Empty,\n                filename: 'ui_icons/empty.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ArrowRight,\n                filename: 'ui_icons/arrow_right.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ArrowDown,\n                filename: 'ui_icons/arrow_down.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Debugger,\n                filename: 'ui_icons/bug.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Open,\n                filename: 'ui_icons/open.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Save,\n                filename: 'ui_icons/save.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Play,\n                filename: 'ui_icons/play.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.PlayDebug,\n                filename: 'ui_icons/play_debug.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.DebugStepInto,\n                filename: 'ui_icons/debug_step_into.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ExclamationCircle,\n                filename: 'ui_icons/exclamation_circle.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ExclamationTriangle,\n                filename: 'ui_icons/exclamation_triangle.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.CheckCircle,\n                filename: 'ui_icons/check_circle.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Breakpoint,\n                filename: 'ui_icons/breakpoint.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ArrowThinAll,\n                filename: 'ui_icons/arrow_thin_all.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ArrowThinUp,\n                filename: 'ui_icons/arrow_thin_up.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.ArrowThinRight,\n                filename: 'ui_icons/arrow_thin_right.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Delete,\n                filename: 'ui_icons/trash_can.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Stop,\n                filename: 'ui_icons/stop.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Heatmap,\n                filename: 'ui_icons/heatmap.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Redo,\n                filename: 'ui_icons/redo.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Settings,\n                filename: 'ui_icons/settings.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Select,\n                filename: 'ui_icons/select.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Copy,\n                filename: 'ui_icons/copy.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Cut,\n                filename: 'ui_icons/cut.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Paste,\n                filename: 'ui_icons/paste.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.EditDelete,\n                filename: 'ui_icons/edit_delete.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Share,\n                filename: 'ui_icons/share.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Input,\n                filename: 'ui_icons/input.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Output,\n                filename: 'ui_icons/output.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Keyboard,\n                filename: 'ui_icons/keyboard.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Shift,\n                filename: 'ui_icons/shift.svg',\n                dimension: { width: 128, height: 128 }\n            },\n            {\n                id: UIIcon.Backspace,\n                filename: 'ui_icons/backspace.svg',\n                dimension: { width: 128, height: 128 }\n            }\n        ];\n\n        for (const icon of icons) {\n            builder.Add(icon.id, icon.filename, icon.dimension);\n            this.iconExtras.push({ id: icon.id, aspectRatio: icon.dimension.width / icon.dimension.height });\n        }\n\n        this.atlas = await builder.Build();\n    }\n}\n\nInversify.bind(UIIconAtlas).toSelf().inSingletonScope().onActivation(AsyncConstructorActivator);\n","import { Observable, ObservableController } from \"../Observable\";\nimport { Vec2 } from \"../Primitives\";\n\nimport { Dimension, UIComponent } from \"./UIComponent\";\n\nimport { AppSettings } from \"@/app/AppSettings\";\nimport { Inversify } from \"@/Inversify\";\n\nexport enum HorizontalAnchor { Left, Right, Middle };\n\nexport enum VerticalAnchor { Bottom, Top };\n\nexport interface Anchor {\n    horizontal?: HorizontalAnchor;\n    vertical?: VerticalAnchor;\n}\n\nexport class UIObservablePositioningGroup implements UIComponent {\n    private observable = new ObservableController<UIObservablePositioningGroup>();\n\n    private scale = 1;\n\n    private childs: UIComponent[] = [];\n\n    private updateNeeded = false;\n\n    private dimension: Dimension = { width: 0, height: 0 };\n\n    constructor(\n        private position: Vec2,\n        private anchor: Anchor = { vertical: VerticalAnchor.Bottom, horizontal: HorizontalAnchor.Left }) {\n    }\n\n    public Resize(): void {\n        this.observable.Notify(this);\n    }\n\n    AppendChild(component: UIComponent): void {\n        this.childs.push(component);\n\n        if (!this.updateNeeded) {\n            queueMicrotask(() => this.UpdateChilds());\n        }\n\n        this.updateNeeded = true;\n    }\n\n    private UpdateChilds(): void {\n        this.CalculateDimension();\n\n        this.observable.Notify(this);\n\n        this.updateNeeded = false;\n    }\n\n    RemoveChild(component: UIComponent): void {\n        const removeIdx = this.childs.indexOf(component);\n\n        if (removeIdx !== -1) {\n            this.childs.splice(removeIdx, 1);\n        }\n\n        if (!this.updateNeeded) {\n            queueMicrotask(() => this.UpdateChilds());\n        }\n\n        this.updateNeeded = true;\n    }\n\n    get Observable(): Observable<UIComponent> {\n        return this.observable;\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    set Position(position: Vec2) {\n        this.position = position;\n\n        this.observable.Notify(this);\n    }\n\n    get AbsolutePosition(): Vec2 {\n        const dimension = Inversify.get(AppSettings).ViewDimension;\n\n        return {\n            x: this.HorizontalPositionRespectAnchor(dimension.Width),\n            y: this.VerticalPositionRespectAnchor(dimension.Height)\n        };\n    }\n\n    get Scale(): number {\n        return this.scale * Inversify.get(AppSettings).DevicePixelRatio;\n    }\n\n    set Scale(scale: number) {\n        this.scale = scale;\n\n        this.observable.Notify(this);\n    }\n\n    get Dimension(): Dimension {\n        return this.dimension;\n    }\n\n    CalculateDimension(): void {\n        if (this.childs.length === 0) {\n\n            this.dimension.width = 0;\n            this.dimension.height = 0;\n\n            return;\n        }\n\n        const min = { x: Number.POSITIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n        const max = { x: Number.NEGATIVE_INFINITY, y: Number.NEGATIVE_INFINITY };\n\n        for (const component of this.childs) {\n            UIObservablePositioningGroup.MaintainExtremum(component.Position, { min, max });\n\n            const rightTop = {\n                x: component.Position.x * component.Scale + component.Dimension.width,\n                y: component.Position.y * component.Scale + component.Dimension.height\n            };\n\n            UIObservablePositioningGroup.MaintainExtremum(rightTop, { min, max });\n        }\n\n        this.dimension.width = max.x - min.x;\n        this.dimension.height = max.y - min.y;\n    }\n\n    Destroy(): void {\n        [...this.childs].forEach(x => x.Destroy());\n    }\n\n    private static MaintainExtremum(point: Vec2, extremum: { min: Vec2, max: Vec2 }): void {\n        if (point.x < extremum.min.x) {\n            extremum.min.x = point.x;\n        }\n\n        if (point.x > extremum.max.x) {\n            extremum.max.x = point.x;\n        }\n\n        if (point.y < extremum.min.y) {\n            extremum.min.y = point.y;\n        }\n\n        if (point.y > extremum.max.y) {\n            extremum.max.y = point.y;\n        }\n    }\n\n    private HorizontalPositionRespectAnchor(viewWidth: number): number {\n        switch (this.anchor.horizontal) {\n            default:\n            case HorizontalAnchor.Left:\n                return this.position.x * this.Scale;\n            case HorizontalAnchor.Right:\n                return viewWidth - this.position.x * this.Scale;\n            case HorizontalAnchor.Middle:\n                return (viewWidth - this.Dimension.width) / 2 + this.Position.x;\n        }\n    }\n\n    private VerticalPositionRespectAnchor(viewHeight: number): number {\n        switch (this.anchor.vertical) {\n            default:\n            case VerticalAnchor.Bottom:\n                return this.position.y * this.Scale;\n            case VerticalAnchor.Top:\n                return viewHeight - this.position.y * this.Scale;\n        }\n    }\n}\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec2 v_icon;\\nin vec3 v_fillColor;\\nin vec3 v_iconColor;\\n\\nout vec4 out_color;\\n\\nuniform sampler2D u_icon;\\n\\nvoid main() \\n{\\n    vec4 text_color = texture(u_icon, v_icon);\\n    out_color = mix(vec4(v_fillColor, 1.0), vec4(v_iconColor - text_color.xzy, 1.0), text_color.w);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\nin vec3 a_fillColor;\\nin vec3 a_iconColor;\\nin vec2 a_icon;\\n\\nout vec2 v_icon;\\nout vec3 v_fillColor;\\nout vec3 v_iconColor;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0) ;\\n\\n  v_icon = a_icon;\\n  v_fillColor = a_fillColor;\\n  v_iconColor = a_iconColor;\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 v_color;\\n\\nout vec4 out_color;\\n\\n\\nvoid main() \\n{\\n      out_color = vec4(v_color, 1);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\nin vec3 a_color;\\n\\nout vec3 v_color;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0) ;\\n\\n  v_color = a_color;\\n}\\n\"","import { vec2 } from \"gl-matrix\";\n\nimport { UIComponent } from \"../UIComponent\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\n\nimport { Dimension, UIAlert, UIAlertIconStyle, UIAlertStyle, UIAlertText } from \"./UIAlert\";\n\nimport { Observable, ObservableController, ObserverDetacher } from \"@/lib/Observable\";\nimport { Vec2 } from \"@/lib/Primitives\";\n\nexport type DeleterCallback = (component: UIObservableAlert) => void;\n\nexport class UIObservableAlert implements UIComponent, UIAlert {\n    private observable = new ObservableController<UIObservableAlert>();\n\n    private scale = 1;\n\n    private isDestroyed = false;\n\n    private parentDetacher: ObserverDetacher | null = null;\n\n    constructor(\n        private position: Vec2,\n        private dimension: Dimension,\n        private zIndex: number,\n        private icon: UIAlertIconStyle,\n        private text: UIAlertText,\n        private style: UIAlertStyle,\n        public Offset: number,\n        private deleter: DeleterCallback,\n        private parent: UIObservablePositioningGroup | null = null) {\n        this.parentDetacher = parent?.Observable.Attach(() => this.observable.Notify(this)) ?? null;\n    }\n\n    Destroy(): void {\n        this.isDestroyed = true;\n\n        this.Uninitialize();\n\n        this.parent?.RemoveChild(this);\n\n        this.deleter(this);\n\n        if (this.parentDetacher !== null) {\n            this.parentDetacher();\n        }\n    }\n\n    get Observable(): Observable<UIObservableAlert> {\n        return this.observable;\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    set Position(position: Vec2) {\n        this.position = position;\n\n        this.observable.Notify(this);\n    }\n\n    get Dimension(): Dimension {\n        return {\n            width: this.dimension.width * this.Scale,\n            height: this.dimension.height * this.Scale\n        };\n    }\n\n    set Dimension(dimension: Dimension) {\n        this.dimension = dimension;\n\n        this.observable.Notify(this);\n    }\n\n    get AbsolutePosition(): Vec2 {\n        if (this.parent) {\n            const parentPosition = [this.parent.AbsolutePosition.x, this.parent.AbsolutePosition.y] as const;\n            const absolutePosition = vec2.add(vec2.create(), parentPosition, [this.Position.x * this.Scale, this.Position.y * this.Scale]);\n\n            return { x: absolutePosition[0], y: absolutePosition[1] };\n        } else {\n            return this.Position;\n        }\n    }\n\n    get ZIndex(): number {\n        return this.zIndex;\n    }\n\n    set ZIndex(zIndex: number) {\n        this.zIndex = zIndex;\n\n        this.observable.Notify(this);\n    }\n\n    get Scale(): number {\n        return this.parent === null ? this.scale : this.scale * this.parent.Scale;\n    }\n\n    set Scale(scale: number) {\n        this.scale = scale;\n\n        this.observable.Notify(this);\n    }\n\n    get Icon(): UIAlertIconStyle {\n        return this.icon;\n    }\n\n    set Icon(style: UIAlertIconStyle) {\n        this.icon = { ...style };\n\n        this.observable.Notify(this);\n    }\n\n    get Text(): UIAlertText {\n        return this.text;\n    }\n\n    set Text(text: UIAlertText) {\n        this.text = { ...text };\n\n        this.observable.Notify(this);\n    }\n\n    get Style(): UIAlertStyle {\n        return this.style;\n    }\n\n    set Style(style: UIAlertStyle) {\n        this.style = { ...style };\n\n        this.observable.Notify(this);\n    }\n\n    get IsDestroyed(): boolean {\n        return this.isDestroyed;\n    }\n\n    private Uninitialize(): void {\n        this.position = { x: 0, y: 0 };\n        this.dimension = { width: 0, height: 0 };\n    }\n}\n","export abstract class MemoryPoolTracker {\n    private static readonly NoFree = -1;\n    private static readonly InUse = -2;\n    private static growthFactor = 2;\n    private static shrinkFactor = 0.25;\n\n    private pool: number[];\n    private nextFree = MemoryPoolTracker.NoFree;\n    private size = 0;\n\n    constructor(\n        capacity: number) {\n        this.pool = Array.from({ length: capacity }, (_, n) => n + 1);\n\n        if (capacity > 0) {\n            this.pool[this.pool.length - 1] = MemoryPoolTracker.NoFree;\n\n            this.nextFree = 0;\n        }\n    }\n\n    /**\n     *\n     * @returns index in the pool array\n     */\n    Allocate(): number {\n        ++this.size;\n\n        if (this.HasFreeSlot) {\n            const freeSlot = this.nextFree;\n\n            this.nextFree = this.pool[this.nextFree];\n\n            this.pool[freeSlot] = MemoryPoolTracker.InUse;\n\n            return freeSlot;\n        } else {\n            const slot = this.pool.length;\n            this.nextFree = this.pool.length + 1;\n\n            this.pool = [\n                ...this.pool,\n                ...Array.from({ length: this.pool.length * MemoryPoolTracker.growthFactor - this.pool.length }, (_, n) => this.pool.length + n + 1)\n            ];\n            this.pool[this.pool.length - 1] = MemoryPoolTracker.NoFree;\n\n            this.pool[slot] = MemoryPoolTracker.InUse;\n\n            this.OnExtend(this.Capacity);\n\n            return slot;\n        }\n    }\n\n    Free(index: number): void {\n        if (index >= this.pool.length || this.pool[index] !== MemoryPoolTracker.InUse) {\n            return;\n        }\n\n        this.pool[index] = this.nextFree;\n\n        this.nextFree = index;\n\n        --this.size;\n\n        if (this.size / this.Capacity <= MemoryPoolTracker.shrinkFactor) {\n            this.OnShrink(this.GatherInUseIndices());\n\n            this.Shrink();\n        }\n    }\n\n\n    get Capacity(): number {\n        return this.pool.length;\n    }\n\n    abstract OnShrink(inUseIndices: number[]): void;\n\n    abstract OnExtend(extendedCapacity: number): void;\n\n    private get HasFreeSlot(): boolean {\n        return this.nextFree < this.pool.length && this.nextFree !== MemoryPoolTracker.NoFree;\n    }\n\n    private GatherInUseIndices(): number[] {\n        const inUse: number[] = [];\n\n        for (let n = 0; n < this.pool.length; ++n) {\n            if (this.pool[n] === MemoryPoolTracker.InUse) {\n                inUse.push(n);\n            }\n        }\n\n        return inUse;\n    }\n\n    private Shrink(): void {\n        this.pool.splice(this.size, this.pool.length - this.size);\n\n        for (let n = 0; n < this.pool.length; ++n) {\n            this.pool[n] = MemoryPoolTracker.InUse;\n        }\n\n        this.nextFree = MemoryPoolTracker.NoFree;\n    }\n}\n","import { inject, injectable } from 'inversify';\n\nimport { UIIconAtlas } from '../UIIcon';\nimport { Dimension } from '../UIIconButton/UIIconButton';\nimport { UILabel } from '../UILabel/UILabel';\nimport { UIObservablePositioningGroup } from '../UIObservablePositioningGroup';\nimport { UICreator } from '../UIRenderer';\n\nimport { UIAlert, UIAlertIconStyle, UIAlertStyle, UIAlertText } from './UIAlert';\nimport FUIALertIcon from './UIALertIcon.frag';\nimport VUIAlertIcon from './UIAlertIcon.vert';\nimport FUIAlertPanel from './UIALertPanel.frag';\nimport VUIAlertPanel from './UIAlertPanel.vert';\nimport { UIObservableAlert } from './UIObservableAlert';\n\nimport { AppSettings } from '@/app/AppSettings';\nimport { InjectionToken } from '@/app/InjectionToken';\nimport { Inversify } from '@/Inversify';\nimport { EnumSize } from \"@/lib/EnumSize\";\nimport { MemoryPoolTracker } from '@/lib/MemoryPoolTracker';\nimport { Vec2 } from '@/lib/Primitives';\nimport { PrimitiveBuilder } from '@/lib/renderer/PrimitiveBuilder';\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from '@/lib/renderer/ShaderProgram';\nimport { TypeSizeResolver } from \"@/lib/renderer/TypeSizeResolver\";\n\nenum UIAlertIconComponent { X, Y, Z, fillR, fillG, fillB, iconR, iconG, iconB, Ux, Uy };\n\nenum UIAlertPanelComponent { X, Y, Z, R, G, B };\n\n@injectable()\nclass UIAlertIconRenderer extends PrimitivesRenderer {\n    public readonly IndicesPerPrimitive = 6;\n\n    public readonly AttributesPerComponent;\n\n    constructor(@inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext) {\n        const floatSize = TypeSizeResolver.Resolve(gl.FLOAT);\n        const stride = floatSize * EnumSize(UIAlertPanelComponent);\n        const indicesPerPrimitive = 6;\n\n        super(gl,\n            { fragment: FUIALertIcon, vertex: VUIAlertIcon },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 0\n            },\n            {\n                name: 'a_fillColor',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 3 * floatSize\n            },\n            {\n                name: 'a_iconColor',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 6 * floatSize\n            },\n            {\n                name: 'a_icon',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 9 * floatSize\n            }],\n            { indicesPerPrimitive, basePrimitiveType: gl.TRIANGLES });\n\n        this.IndicesPerPrimitive = indicesPerPrimitive;\n        this.AttributesPerComponent = EnumSize(UIAlertIconComponent) * this.IndicesPerPrimitive;\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n\n    get Attributes(): Float32Array {\n        return this.attributes;\n    }\n\n}\n\nInversify.bind(UIAlertIconRenderer).toSelf().inSingletonScope();\n\n@injectable()\nexport class UIAlertRenderer extends PrimitivesRenderer {\n    private readonly IndicesPerPrimitive;\n\n    private readonly AttributesPerComponent;\n\n    private readonly zFarIncluded = 0.1;\n\n    private uiRenderer!: UICreator;\n\n    private alerts: UIObservableAlert[] = [];\n\n    private vertexAttributesTracker: MemoryPoolTracker;\n\n    private panelContentZOffset = 0.001;\n\n    private readonly iconMargin = 10;\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext,\n        @inject(UIAlertIconRenderer) private alertIcon: UIAlertIconRenderer,\n        @inject(InjectionToken.IconAtlas) private iconAtlas: UIIconAtlas,\n        @inject(InjectionToken.IconAtlasTexture) private iconAtlasTexture: WebGLTexture,\n        @inject(AppSettings) private settings: AppSettings) {\n\n        const floatSize = TypeSizeResolver.Resolve(gl.FLOAT);\n        const stride = floatSize * EnumSize(UIAlertPanelComponent);\n        const indicesPerPrimitive = 6;\n\n        super(gl,\n            { fragment: FUIAlertPanel, vertex: VUIAlertPanel },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 0\n            },\n            {\n                name: 'a_color',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 3 * floatSize\n            }],\n            { indicesPerPrimitive, basePrimitiveType: gl.TRIANGLES });\n\n        this.IndicesPerPrimitive = indicesPerPrimitive;\n        this.AttributesPerComponent = EnumSize(UIAlertPanelComponent) * this.IndicesPerPrimitive;\n\n        this.vertexAttributesTracker = new (class extends MemoryPoolTracker {\n            constructor(private renderer: UIAlertRenderer) {\n                const initialCapacity = 1;\n                super(initialCapacity);\n\n                renderer.UploadAttributes(Array.from({ length: renderer.AttributesPerComponent * initialCapacity }, () => 0));\n                renderer.alertIcon.UploadAttributes(Array.from({ length: this.renderer.alertIcon.AttributesPerComponent * initialCapacity }, () => 0));\n            }\n\n            OnShrink(inUseIndices: number[]): void {\n                const panelAttrs = new Array(this.renderer.AttributesPerComponent * inUseIndices.length).fill(0);\n                const buttonOutlineAttrs = new Array(this.renderer.alertIcon.AttributesPerComponent * inUseIndices.length).fill(0);\n\n                for (let n = 0; n < inUseIndices.length; ++n) {\n                    const offset = inUseIndices[n];\n\n                    for (let attribOffset = 0; attribOffset < this.renderer.AttributesPerComponent; ++attribOffset) {\n                        panelAttrs[n * this.renderer.AttributesPerComponent + attribOffset] = this.renderer.attributes[offset * this.renderer.AttributesPerComponent + attribOffset];\n                    }\n\n                    for (let attribOffset = 0; attribOffset < this.renderer.alertIcon.AttributesPerComponent; ++attribOffset) {\n                        buttonOutlineAttrs[n * this.renderer.alertIcon.AttributesPerComponent + attribOffset] = this.renderer.alertIcon.Attributes[offset * this.renderer.alertIcon.AttributesPerComponent + attribOffset];\n                    }\n                }\n\n                this.renderer.UploadAttributes(panelAttrs);\n\n                this.renderer.alerts.forEach(alert => {\n                    const idx = inUseIndices.indexOf(alert.Offset);\n\n                    if (idx === -1) {\n                        throw new Error(`Can't find position for offset ${alert.Offset}`);\n                    }\n\n                    alert.Offset = idx;\n                });\n            }\n\n            OnExtend(extendedCapacity: number): void {\n                const extendedPanelAttrs = Array.from(\n                    { length: extendedCapacity * this.renderer.AttributesPerComponent },\n                    (_, n) => n < this.renderer.attributes.length ? this.renderer.attributes[n] : 0);\n\n                this.renderer.UploadAttributes(extendedPanelAttrs);\n\n                const extendedAlertIconAttrs = Array.from(\n                    { length: extendedCapacity * this.renderer.alertIcon.AttributesPerComponent },\n                    (_, n) => n < this.renderer.alertIcon.Attributes.length ? this.renderer.alertIcon.Attributes[n] : 0);\n\n                this.renderer.alertIcon.UploadAttributes(extendedAlertIconAttrs);\n            }\n        })(this);\n    }\n\n    Create(position: Vec2,\n        zIndex: number,\n        icon: UIAlertIconStyle,\n        text: UIAlertText,\n        style: UIAlertStyle,\n        parent: UIObservablePositioningGroup | null = null): UIAlert {\n\n        const alertText = this.uiRenderer.CreateLabel(\n            position,\n            zIndex + this.panelContentZOffset,\n            text.text,\n            text.lineHeight,\n            parent);\n        alertText.StyleRange(0, alertText.Text.length, { color: text.color })\n\n        const iconSideLength = alertText.Dimension.height / alertText.Scale;\n        const alert = new UIObservableAlert(\n            position,\n            {\n                width: iconSideLength + 3 * this.iconMargin + alertText.Dimension.width / alertText.Scale,\n                height: iconSideLength + 2 * this.iconMargin\n            },\n            zIndex,\n            icon,\n            text,\n            style,\n            this.vertexAttributesTracker.Allocate(),\n            (component: UIObservableAlert) => this.Destroy(component, alertText),\n            parent);\n\n        if (parent !== null) {\n            parent.AppendChild(alert);\n        }\n\n        alert.Observable.Attach((component: UIObservableAlert) => this.UpdateComponent(component, alertText));\n\n        this.alerts.push(alert);\n\n        this.UpdateComponent(alert, alertText);\n\n        return alert;\n    }\n\n    public Draw(): void {\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this.iconAtlasTexture);\n\n        super.Draw();\n        this.alertIcon.Draw();\n    }\n\n    get UIRenderer(): UICreator {\n        return this.uiRenderer;\n    }\n\n    set UIRenderer(renderer: UICreator) {\n        this.uiRenderer = renderer;\n    }\n\n    get Alerts(): readonly UIAlert[] {\n        return this.alerts;\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n        this.alertIcon.ViewProjection = mat;\n    }\n\n    private UpdateComponent(component: UIObservableAlert, label: UILabel): void {\n        label.Position = this.LabelPosition(component, label);\n        label.Text = component.Text.text;\n        label.LineHeight = component.Text.lineHeight;\n        this.UpdateAttributes(component);\n    }\n\n    private LabelPosition(component: UIObservableAlert, label: UILabel): Vec2 {\n        return {\n            x: component.Position.x + 2 * this.iconMargin + (component.Dimension.height / component.Scale - 2 * this.iconMargin),\n            y: component.Position.y + (component.Dimension.height / component.Scale - label.Dimension.height / label.Scale) / 2\n        };\n    }\n\n    private UpdateAttributes(component: UIObservableAlert): void {\n        this.UpdateComponentAttributes(\n            this.ExtractPanelAttributes(component),\n            component.Offset * this.AttributesPerComponent);\n\n        if (component.IsDestroyed) {\n            const emptyAttrs = new Array(this.IndicesPerPrimitive * EnumSize(UIAlertIconComponent)).fill(0);\n\n            this.alertIcon.UpdateComponentAttributes(\n                emptyAttrs,\n                component.Offset * this.alertIcon.AttributesPerComponent);\n        } else {\n            this.alertIcon.UpdateComponentAttributes(\n                this.ExtractIconAttributes(component),\n                component.Offset * this.alertIcon.AttributesPerComponent);\n        }\n    }\n\n    private ExtractPanelAttributes(component: UIObservableAlert): number[] {\n        return PrimitiveBuilder.AABBRectangle(\n            component.AbsolutePosition,\n            component.Dimension,\n            [\n                [this.settings.ZFar - component.ZIndex - this.zFarIncluded],\n                component.Style.fillColor\n            ])\n    }\n\n    private ExtractIconAttributes(component: UIObservableAlert): number[] {\n        const sideLength = this.AlertIconSideLength(component);\n        const iconUV = this.iconAtlas.LookupUV(component.Icon.icon);\n\n        return PrimitiveBuilder.AABBRectangle(\n            { x: component.AbsolutePosition.x + this.iconMargin, y: component.AbsolutePosition.y + this.iconMargin },\n            { width: sideLength, height: sideLength },\n            [\n                [this.settings.ZFar - component.ZIndex - this.panelContentZOffset - this.zFarIncluded],\n                component.Style.fillColor,\n                component.Icon.color,\n                {\n                    LeftBottom: [iconUV.A.x, iconUV.B.y],\n                    LeftTop: [iconUV.A.x, iconUV.A.y],\n                    RightTop: [iconUV.B.x, iconUV.A.y],\n                    RightBottom: [iconUV.B.x, iconUV.B.y]\n                }\n            ]);\n    }\n\n    private AlertIconSideLength(component: UIObservableAlert): number {\n        return component.Dimension.height - 2 * this.iconMargin;\n    }\n\n    private Destroy(component: UIObservableAlert, alertText: UILabel): void {\n        const toDestroyIdx = this.alerts.indexOf(component);\n\n        if (toDestroyIdx === -1) {\n            return;\n        }\n\n        this.alerts.splice(toDestroyIdx, 1)\n\n        this.UpdateAttributes(component);\n\n        this.vertexAttributesTracker.Free(component.Offset);\n\n        alertText.Destroy();\n    }\n}\n\nInversify.bind(UIAlertRenderer).toSelf().inSingletonScope();\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nout vec4 out_color;\\n\\nvoid main() \\n{\\n      out_color = vec4(0.17254901960784313, 0.24313725490196078, 0.3137254901960784, 1);\\n}\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0) ;\\n}\\n\"","import { MyInputEvent } from \"../InputReceiver\";\nimport { Dimension } from \"../UIComponent\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\nimport { UICreator } from \"../UIRenderer\";\nimport { UITextList } from \"../UITextList/UITextList\";\n\nimport { UIEditableTextList } from \"./UIEditableTextList\";\n\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Vec2 } from \"@/lib/Primitives\";\n\nexport type UIObservableEditableTextListDeleter = () => void;\n\nexport class UIObservableEditableTextList implements UIEditableTextList {\n    public visible = true;\n\n    private onVanish = new ObservableController<void>();\n\n    private textList: UITextList;\n\n    private hasFocus = false;\n\n    private onUpdate = new ObservableController<UIObservableEditableTextList>();\n\n    constructor(\n        position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        lineHeight: number,\n        uiRenderer: UICreator,\n        private deleter: UIObservableEditableTextListDeleter,\n        parent: UIObservablePositioningGroup | null\n    ) {\n        this.textList = uiRenderer.CreateTextList(\n            position,\n            dimension,\n            zIndex,\n            text,\n            lineHeight,\n            parent);\n    }\n\n    get OnVanish(): Observable<void> {\n        return this.onVanish;\n    }\n\n    OnInput(e: MyInputEvent): void {\n        const keyCode = e.key.charCodeAt(0);\n\n        if (e.key === 'Backspace' && this.Text.length > 0) {\n            const toDelete = 1 + +(this.Text[this.Text.length - 1] === '\\n' && this.Text.length > 1);\n            this.Text = this.Text.slice(0, this.Text.length - toDelete)\n        } else if (e.key.length === 1 && keyCode >= ' '.charCodeAt(0) && keyCode <= '~'.charCodeAt(0)) {\n            this.Text = this.Text + e.key;\n        } else if (e.key === 'Enter') {\n            this.Text = this.Text + '\\n';\n        }\n    }\n\n    get Position(): Vec2 {\n        return this.textList.Position;\n    }\n\n    set Position(position: Vec2) {\n        this.textList.Position = position;\n    }\n\n    get Dimension(): Dimension {\n        return this.textList.Dimension;\n    }\n\n    set Dimension(dimension: Dimension) {\n        this.textList.Dimension = dimension;\n    }\n\n    get AbsolutePosition(): Vec2 {\n        return this.textList.AbsolutePosition;\n    }\n\n    get Text(): string {\n        return this.textList.Text;\n    }\n\n    set Text(text: string) {\n        this.textList.Text = text;\n    }\n\n    get ZIndex(): number {\n        return this.textList.ZIndex;\n    }\n\n    set ZIndex(zIndex: number) {\n        this.textList.ZIndex = zIndex;\n    }\n\n    get LineHeight(): number {\n        return this.textList.LineHeight;\n    }\n\n    set LineHeight(lineHeight: number) {\n        this.textList.LineHeight = lineHeight;\n    }\n\n    get BorderWidth(): number {\n        return this.textList.BorderWidth;\n    }\n\n    set BorderWdith(borderWidth: number) {\n        this.textList.BorderWidth = borderWidth;\n    }\n\n    get Scale(): number {\n        return this.textList.Scale;\n    }\n\n    set Scale(scale: number) {\n        this.textList.Scale = scale;\n    }\n\n    get Visible(): boolean {\n        return this.visible;\n    }\n\n    set Visible(value: boolean) {\n        this.visible = value;\n\n        if (!value) {\n            this.onVanish.Notify();\n        }\n\n        this.textList.Visible = value;\n    }\n\n    get Observable(): Observable<UIObservableEditableTextList> {\n        return this.onUpdate;\n    }\n\n    get HasFocus(): boolean {\n        return this.hasFocus;\n    }\n\n    Focus(): void {\n        this.hasFocus = true;\n    }\n\n    Blur(): void {\n        this.hasFocus = false;\n    }\n\n    ScrollToTop(): void {\n        this.textList.ScrollToTop();\n    }\n\n    Destroy(): void {\n        this.onVanish.Notify();\n\n        this.onVanish.DetachAll();\n        this.onUpdate.DetachAll();\n\n        this.deleter();\n\n        this.textList.Destroy();\n    }\n}\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { Dimension } from \"../UIComponent\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\nimport { UICreator, UIRenderer } from \"../UIRenderer\";\n\nimport { UIEditableTextList } from \"./UIEditableTextList\";\nimport FEditableTextListCursor from './UIEditableTextListCursor.frag';\nimport VEditableTextListCursor from './UIEditableTextListCursor.vert';\nimport { UIObservableEditableTextList, UIObservableEditableTextListDeleter } from \"./UIObservableEditableTextList\";\n\nimport { InjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { EnumSize } from \"@/lib/EnumSize\";\nimport { Vec2 } from \"@/lib/Primitives\";\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from \"@/lib/renderer/ShaderProgram\";\nimport { TypeSizeResolver } from \"@/lib/renderer/TypeSizeResolver\";\n\n\nenum UIEditableTextListCursorComponent { X, Y, Z };\n\n@injectable()\nexport class UIEditableTextListRenderer extends PrimitivesRenderer {\n    private uiRenderer!: UICreator;\n\n    constructor(@inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext) {\n        const floatSize = TypeSizeResolver.Resolve(gl.FLOAT);\n        const stride = floatSize * EnumSize(UIEditableTextListCursorComponent);\n        const indicesPerPrimitive = 6;\n\n        super(gl,\n            { fragment: FEditableTextListCursor, vertex: VEditableTextListCursor },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 0\n            }],\n            { indicesPerPrimitive, basePrimitiveType: gl.TRIANGLES });\n    }\n\n    Create(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        lineHeight: number,\n        deleter: UIObservableEditableTextListDeleter,\n        parent: UIObservablePositioningGroup | null = null): UIEditableTextList {\n\n        return new UIObservableEditableTextList(\n            position,\n            dimension,\n            zIndex,\n            text,\n            lineHeight,\n            this.uiRenderer,\n            deleter,\n            parent);\n    }\n\n    get UIRenderer(): UICreator {\n        return this.uiRenderer;\n    }\n\n    set UIRenderer(renderer: UICreator) {\n        this.uiRenderer = renderer;\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n}\n\nInversify.bind(UIEditableTextListRenderer).toSelf().inTransientScope();\n\nexport type UIEditableTextListRendererFactory = (uiRenderer: UIRenderer) => UIEditableTextListRenderer;\n\nInversify\n    .bind<interfaces.Factory<UIEditableTextListRendererFactory>>(InjectionToken.UIEditableTextListRendererFactory)\n    .toFactory<UIEditableTextListRenderer, [UIRenderer]>(ctx => (uiRenderer: UIRenderer) => {\n        const instance = ctx.container.get(UIEditableTextListRenderer);\n        instance.UIRenderer = uiRenderer;\n\n        return instance;\n    });\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nvec2 UndefinedUV = vec2(-1.0, -1.0);\\n\\nin vec2 v_icon;\\nin vec3 v_fillColor;\\nin vec3 v_iconColor;\\n\\nout vec4 out_color;\\n\\nuniform sampler2D u_icon;\\n\\nvoid main() \\n{\\n      if (v_icon.xy == UndefinedUV) {\\n            out_color = vec4(v_fillColor, 1.0);\\n      } else {\\n            vec4 text_color = texture(u_icon, v_icon);\\n            out_color = mix(vec4(v_fillColor, 1.0), vec4(v_iconColor - text_color.xzy, 1.0), text_color.w);\\n      }\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\nin vec3 a_fillColor;\\nin vec3 a_iconColor;\\nin vec2 a_icon;\\n\\nout vec2 v_icon;\\nout vec3 v_fillColor;\\nout vec3 v_iconColor;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0) ;\\n\\n  v_icon = a_icon;\\n  v_fillColor = a_fillColor;\\n  v_iconColor = a_iconColor;\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 v_color;\\n\\nout vec4 out_color;\\n\\n\\nvoid main() \\n{\\n      out_color = vec4(v_color, 1);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\nin vec3 a_color;\\n\\nout vec3 v_color;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0) ;\\n\\n  v_color = a_color;\\n}\\n\"","import { vec2 } from \"gl-matrix\";\n\nimport { UIComponent } from \"../UIComponent\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\n\nimport { Dimension, UIButtonStyle, UIIconStyle, UIIconButton } from \"./UIIconButton\";\n\nimport { Observable, ObservableController, ObserverDetacher } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\n\nexport type TouchCallback = (sender: UIIconButton) => void;\n\nexport type UpdateCallback = (component: UIObservableIconButton) => void;\n\nexport type DeleterCallback = (component: UIObservableIconButton) => void;\n\nexport class UIObservableIconButton implements UIComponent, UIIconButton {\n    private static readonly DisabledIconColor: Rgb = [0.47058823529411764, 0.5647058823529412, 0.611764705882353];\n\n    private static UninitializedTag = -1;\n\n    private observable = new ObservableController<UIObservableIconButton>();\n\n    private scale = 1;\n\n    private destroyed = false;\n\n    private disabled = false;\n\n    private originIconStyle!: UIIconStyle;\n\n    private parentDetacher: ObserverDetacher | null = null;\n\n    constructor(\n        private position: Vec2,\n        private dimension: Dimension,\n        private zIndex: number,\n        private style: UIButtonStyle,\n        private iconStyle: UIIconStyle,\n        private touchCallback: TouchCallback,\n        public Offset: number,\n        private deleter: DeleterCallback,\n        private parent: UIObservablePositioningGroup | null = null) {\n        this.parentDetacher = parent?.Observable.Attach(() => this.observable.Notify(this)) ?? null;\n    }\n\n    get Observable(): Observable<UIObservableIconButton> {\n        return this.observable;\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    set Position(position: Vec2) {\n        this.position = position;\n\n        this.observable.Notify(this);\n    }\n\n    get AbsolutePosition(): Vec2 {\n        if (this.parent) {\n            const parentPosition = [this.parent.AbsolutePosition.x, this.parent.AbsolutePosition.y] as const;\n            const absolutePosition = vec2.add(vec2.create(), parentPosition, [this.Position.x * this.Scale, this.Position.y * this.Scale]);\n\n            return { x: absolutePosition[0], y: absolutePosition[1] };\n        } else {\n            return this.Position;\n        }\n    }\n\n    get Dimension(): Dimension {\n        return { width: this.dimension.width * this.Scale, height: this.dimension.height * this.Scale };\n    }\n\n    set Dimension(dimension: Dimension) {\n        this.dimension = dimension;\n\n        this.observable.Notify(this);\n    }\n\n    get ZIndex(): number {\n        return this.zIndex;\n    }\n\n    set ZIndex(zIndex: number) {\n        this.zIndex = zIndex;\n\n        this.observable.Notify(this);\n    }\n\n    get Icon(): UIIconStyle {\n        return this.iconStyle;\n    }\n\n    set Icon(style: UIIconStyle) {\n        this.iconStyle = style;\n\n        this.observable.Notify(this);\n    }\n\n    get Style(): UIButtonStyle {\n        return this.style;\n    }\n\n    set Style(style: UIButtonStyle) {\n        this.style = { ...style };\n\n        this.observable.Notify(this);\n    }\n\n    get Scale(): number {\n        return this.parent === null ? this.scale : this.scale * this.parent.Scale;\n    }\n\n    set Scale(scale: number) {\n        this.scale = scale;\n\n        this.observable.Notify(this);\n    }\n\n    get Destroyed(): boolean {\n        return this.destroyed;\n    }\n\n    get Disable(): boolean {\n        return this.disabled;\n    }\n\n    set Disable(value: boolean) {\n        if (value === this.disabled) {\n            return;\n        }\n\n        this.disabled = value;\n\n        if (value) {\n            this.originIconStyle = { ...this.iconStyle };\n\n            this.iconStyle.color = UIObservableIconButton.DisabledIconColor;\n        } else {\n            this.iconStyle.color = this.originIconStyle.color;\n        }\n\n        this.observable.Notify(this);\n    }\n\n    Touch(): void {\n        if (!this.disabled) {\n            this.touchCallback(this);\n        }\n    }\n\n    Destroy(): void {\n        this.Uninitialize();\n\n        this.parent?.RemoveChild(this);\n\n        this.deleter(this);\n\n        this.Offset = UIObservableIconButton.UninitializedTag;\n\n        if (this.parentDetacher !== null) {\n            this.parentDetacher();\n        }\n    }\n\n    private Uninitialize(): void {\n        this.position = { x: 0, y: 0 };\n        this.dimension = { width: 0, height: 0 };\n        this.destroyed = true;\n    }\n}\n","\nimport { inject, injectable } from \"inversify\";\n\nimport { EnumSize } from \"../../EnumSize\";\nimport { MemoryPoolTracker } from \"../../MemoryPoolTracker\";\nimport { Rgb, Vec2 } from \"../../Primitives\";\nimport { PrimitiveBuilder } from \"../../renderer/PrimitiveBuilder\";\nimport { PrimitivesRenderer } from \"../../renderer/PrimitivesRenderer\";\nimport { Mat4 } from \"../../renderer/ShaderProgram\";\nimport { TypeSizeResolver } from \"../../renderer/TypeSizeResolver\";\nimport { UIIconAtlas, UVExtra } from \"../UIIcon\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\n\nimport { Dimension, UIButtonStyle, UIIconButton, UIIconStyle } from \"./UIIconButton\";\nimport FUIIconButton from './UIIconButton.frag';\nimport VUIIconButton from './UIIconButton.vert';\nimport FUIIconButtonOutline from './UIIconButtonOutline.frag';\nimport VUIIconButtonOutline from './UIIconButtonOutline.vert';\nimport { TouchCallback, UIObservableIconButton } from \"./UIObservableIconButton\";\n\nimport { AppSettings } from \"@/app/AppSettings\";\nimport { InjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { TextureAtlas } from \"@/lib/renderer/TextureAtlas\";\n\nenum UIIconButtonComponent { X, Y, Z, fillR, fillG, fillB, iconR, iconG, iconB, Ux, Uy };\n\nenum UIIconButtonOutlineComponent { X, Y, Z, R, G, B };\n\nclass UIButtonOutlineRenderer extends PrimitivesRenderer {\n    static IndicesPerPrimitive = 24;\n\n    static readonly AttributesPerComponent = EnumSize(UIIconButtonOutlineComponent) * UIButtonOutlineRenderer.IndicesPerPrimitive;\n\n    constructor(gl: WebGL2RenderingContext) {\n        const floatSize = TypeSizeResolver.Resolve(gl.FLOAT);\n        const stride = floatSize * EnumSize(UIIconButtonOutlineComponent);\n\n        super(gl,\n            { fragment: FUIIconButtonOutline, vertex: VUIIconButtonOutline },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 0\n            },\n            {\n                name: 'a_color',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 3 * floatSize\n            }],\n            { indicesPerPrimitive: UIButtonOutlineRenderer.IndicesPerPrimitive, basePrimitiveType: gl.TRIANGLES });\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n\n    get Attributes(): Float32Array {\n        return this.attributes;\n    }\n}\n\ninterface TouchAnimationStart {\n    target: UIIconButton;\n    originFillColor: Rgb;\n    timestamp: number;\n}\n\n@injectable()\nexport class UIIconButtonRenderer extends PrimitivesRenderer {\n    private readonly IndicesPerPrimitive;\n\n    private readonly AttributesPerComponent\n\n    private readonly zFarIncluded = 0.1;\n\n    private settings: AppSettings;\n\n    private iconButtons: UIObservableIconButton[] = [];\n\n    private outline: UIButtonOutlineRenderer;\n\n    private vertexAttributesTracker: MemoryPoolTracker;\n\n    private touchStart: TouchAnimationStart[] = [];\n\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext,\n        @inject(InjectionToken.IconAtlas) private iconAtlas: UIIconAtlas,\n        @inject(InjectionToken.IconAtlasTexture) private iconAtlasTexture: WebGLTexture) {\n        const floatSize = TypeSizeResolver.Resolve(gl.FLOAT);\n\n        const stride = floatSize * EnumSize(UIIconButtonComponent);\n        const indicesPerPrimitive = 18;\n        super(gl,\n            { fragment: FUIIconButton, vertex: VUIIconButton },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 0\n            },\n            {\n                name: 'a_fillColor',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 3 * floatSize\n            },\n            {\n                name: 'a_iconColor',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 6 * floatSize\n            },\n            {\n                name: 'a_icon',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 9 * floatSize\n            }],\n            { indicesPerPrimitive, basePrimitiveType: gl.TRIANGLES });\n\n        this.IndicesPerPrimitive = indicesPerPrimitive;\n        this.AttributesPerComponent = EnumSize(UIIconButtonComponent) * this.IndicesPerPrimitive;\n\n        this.settings = Inversify.get(AppSettings);\n\n        this.outline = new UIButtonOutlineRenderer(gl);\n\n        this.vertexAttributesTracker = new (class extends MemoryPoolTracker {\n            constructor(private renderer: UIIconButtonRenderer) {\n                const initialCapacity = 2;\n                super(initialCapacity);\n\n                renderer.UploadAttributes(Array.from({ length: renderer.AttributesPerComponent * initialCapacity }, () => 0));\n                renderer.outline.UploadAttributes(Array.from({ length: UIButtonOutlineRenderer.AttributesPerComponent * initialCapacity }, () => 0));\n            }\n\n            OnShrink(inUseIndices: number[]): void {\n                const buttonAttrs = new Array(this.renderer.AttributesPerComponent * inUseIndices.length).fill(0);\n                const buttonOutlineAttrs = new Array(UIButtonOutlineRenderer.AttributesPerComponent * inUseIndices.length).fill(0);\n\n                for (let n = 0; n < inUseIndices.length; ++n) {\n                    const offset = inUseIndices[n];\n\n                    for (let attribOffset = 0; attribOffset < this.renderer.AttributesPerComponent; ++attribOffset) {\n                        buttonAttrs[n * this.renderer.AttributesPerComponent + attribOffset] = this.renderer.attributes[offset * this.renderer.AttributesPerComponent + attribOffset];\n                    }\n\n                    for (let attribOffset = 0; attribOffset < UIButtonOutlineRenderer.AttributesPerComponent; ++attribOffset) {\n                        buttonOutlineAttrs[n * UIButtonOutlineRenderer.AttributesPerComponent + attribOffset] = this.renderer.outline.Attributes[offset * UIButtonOutlineRenderer.AttributesPerComponent + attribOffset];\n                    }\n                }\n\n                this.renderer.UploadAttributes(buttonAttrs);\n                this.renderer.outline.UploadAttributes(buttonOutlineAttrs);\n\n                this.renderer.iconButtons.forEach(btn => {\n                    const idx = inUseIndices.indexOf(btn.Offset);\n\n                    if (idx === -1) {\n                        throw new Error(`Can't find position for offset ${btn.Offset}`);\n                    }\n\n                    btn.Offset = idx;\n                });\n            }\n\n            OnExtend(extendedCapacity: number): void {\n                const extendedButtonAttrs = Array.from(\n                    { length: extendedCapacity * this.renderer.AttributesPerComponent },\n                    (_, n) => n < this.renderer.attributes.length ? this.renderer.attributes[n] : 0);\n\n                this.renderer.UploadAttributes(extendedButtonAttrs);\n\n\n                const extendedOutlineAttrs = Array.from(\n                    { length: extendedCapacity * UIButtonOutlineRenderer.AttributesPerComponent },\n                    (_, n) => n < this.renderer.outline.Attributes.length ? this.renderer.outline.Attributes[n] : 0);\n\n                this.renderer.outline.UploadAttributes(extendedOutlineAttrs);\n            }\n        })(this);\n    }\n\n    Create(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        style: UIButtonStyle,\n        iconStyle: UIIconStyle,\n        touchCallback: TouchCallback,\n        parent: UIObservablePositioningGroup | null): UIIconButton {\n\n        const button = new UIObservableIconButton(\n            position,\n            dimension,\n            zIndex,\n            style,\n            iconStyle,\n            (sender: UIIconButton) => this.TouchProxy(sender, touchCallback),\n            this.vertexAttributesTracker.Allocate(),\n            (component: UIObservableIconButton) => this.Destroy(component),\n            parent);\n\n        if (parent !== null) {\n            parent.AppendChild(button);\n        }\n\n        button.Observable.Attach((component: UIObservableIconButton) => this.UpdateAttributes(component));\n\n        this.iconButtons.push(button);\n\n        if (parent === null) {\n            this.UpdateAttributes(button);\n        }\n\n        return button;\n    }\n\n    private TouchProxy(sender: UIIconButton, origin: TouchCallback): void {\n        const alreadyTouchedIdx = this.touchStart.findIndex(btn => btn.target === sender);\n\n        if (alreadyTouchedIdx !== -1) {\n            const animation = this.touchStart[alreadyTouchedIdx];\n            animation.target.Style = { ...animation.target.Style, fillColor: animation.originFillColor };\n\n            this.touchStart.splice(alreadyTouchedIdx, 1);\n        }\n\n        this.touchStart.push({ target: sender, originFillColor: sender.Style.fillColor, timestamp: Date.now() });\n\n        origin(sender);\n    }\n\n    private Destroy(component: UIObservableIconButton): void {\n        const toDestroyIdx = this.iconButtons.indexOf(component);\n\n        if (toDestroyIdx === -1) {\n            return;\n        }\n\n        this.iconButtons.splice(toDestroyIdx, 1)\n\n        this.UpdateAttributes(component);\n\n        this.vertexAttributesTracker.Free(component.Offset);\n    }\n\n    Draw(): void {\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this.iconAtlasTexture);\n\n        this.TouchAnimation();\n\n        super.Draw();\n        this.outline.Draw();\n    }\n\n    private TouchAnimation(): void {\n        const lightingDuration = 80;\n        const darkeningDuration = 100;\n        const brightFactor = 1.2;\n\n        const notFinished: TouchAnimationStart[] = [];\n        const finished: TouchAnimationStart[] = [];\n        for (const animation of this.touchStart) {\n            if (animation.target.Destroyed) {\n                continue;\n            }\n\n            if (Date.now() - animation.timestamp <= lightingDuration + darkeningDuration) {\n                notFinished.push(animation);\n            } else {\n                finished.push(animation);\n            }\n        }\n\n        this.touchStart = notFinished;\n\n        finished.forEach(anim => anim.target.Style = { ...anim.target.Style, fillColor: anim.originFillColor });\n\n        for (const animation of this.touchStart) {\n            const fillColor: Rgb = [...animation.target.Style.fillColor];\n            const elapsed = Date.now() - animation.timestamp;\n\n            if (elapsed <= lightingDuration) {\n                const lightingProgress = elapsed / lightingDuration;\n                const bright = 1 + (brightFactor - 1) * lightingProgress;\n\n                fillColor[0] = Math.min(1, animation.originFillColor[0] * bright);\n                fillColor[1] = Math.min(1, animation.originFillColor[1] * bright);\n                fillColor[2] = Math.min(1, animation.originFillColor[2] * bright);\n            } else {\n                const darkeningProgress = (elapsed - lightingDuration) / darkeningDuration;\n                const bright = 1 + (brightFactor - 1) * (1 - darkeningProgress);\n\n                fillColor[0] = Math.min(1, animation.originFillColor[0] * bright);\n                fillColor[1] = Math.min(1, animation.originFillColor[1] * bright);\n                fillColor[2] = Math.min(1, animation.originFillColor[2] * bright);\n            }\n\n            animation.target.Style = { ...animation.target.Style, fillColor };\n        }\n    }\n\n    get IconButtons(): readonly UIIconButton[] {\n        return this.iconButtons;\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n        this.outline.ViewProjection = mat;\n    }\n\n    private UpdateAttributes(component: UIObservableIconButton): void {\n        this.UpdateContentAttributes(component);\n\n        if (component.Destroyed) {\n            this.ResetOutlineAttributes(component);\n        } else {\n            this.UpdateOutlineAttributes(component);\n        }\n    }\n\n    private UpdateContentAttributes(component: UIObservableIconButton): void {\n        this.UpdateComponentAttributes(\n            this.ExtractContentAttributes(component),\n            component.Offset * this.AttributesPerComponent);\n    }\n\n    private ResetOutlineAttributes(component: UIObservableIconButton): void {\n        this.outline.UpdateComponentAttributes(\n            new Array(UIButtonOutlineRenderer.IndicesPerPrimitive * EnumSize(UIIconButtonOutlineComponent)).fill(0),\n            component.Offset * UIButtonOutlineRenderer.AttributesPerComponent);\n    }\n\n    private UpdateOutlineAttributes(component: UIObservableIconButton): void {\n        this.outline.UpdateComponentAttributes(\n            this.ExtractOutlineAttributes(component),\n            component.Offset * UIButtonOutlineRenderer.AttributesPerComponent);\n    }\n\n    private ExtractContentAttributes(component: UIObservableIconButton): number[] {\n        const iconUV = this.iconAtlas.LookupUV(component.Icon.icon);\n\n        if (TextureAtlas.IsUndefinedUV(iconUV)) {\n            throw new Error(`Can't find icon with id ${component.Icon.icon}`);\n        }\n\n        return component.Dimension.width / component.Dimension.height >= 1 ?\n            this.ExtractContentAttributesWide(component, iconUV) :\n            this.ExtractContentAttributesTall(component, iconUV);\n    }\n\n    private ExtractContentAttributesWide(component: UIObservableIconButton, iconUV: UVExtra): number[] {\n        const iconWidth = component.Dimension.height * iconUV.aspectRatio;\n        const segmentWidth = (component.Dimension.width - iconWidth) / 2;\n\n        const leftSegmentAttributes = PrimitiveBuilder.AABBRectangle(\n            component.AbsolutePosition,\n            { width: segmentWidth, height: component.Dimension.height },\n            [[this.settings.ZFar - component.ZIndex - this.zFarIncluded], component.Style.fillColor, component.Icon.color, [-1, -1]]);\n\n        const iconAttributes = PrimitiveBuilder.AABBRectangle(\n            { x: component.AbsolutePosition.x + segmentWidth, y: component.AbsolutePosition.y },\n            { width: iconWidth, height: component.Dimension.height },\n            [\n                [this.settings.ZFar - component.ZIndex - this.zFarIncluded],\n                component.Style.fillColor,\n                component.Icon.color,\n                {\n                    LeftBottom: [iconUV.A.x, iconUV.B.y],\n                    LeftTop: [iconUV.A.x, iconUV.A.y],\n                    RightTop: [iconUV.B.x, iconUV.A.y],\n                    RightBottom: [iconUV.B.x, iconUV.B.y]\n                }\n            ]);\n\n        const rightSegmentAttributes = PrimitiveBuilder.AABBRectangle(\n            { x: component.AbsolutePosition.x + segmentWidth + iconWidth, y: component.AbsolutePosition.y },\n            { width: segmentWidth, height: component.Dimension.height },\n            [[this.settings.ZFar - component.ZIndex - this.zFarIncluded], component.Style.fillColor, component.Icon.color, [-1, -1]]);\n\n        return [...leftSegmentAttributes, ...iconAttributes, ...rightSegmentAttributes];\n    }\n\n    private ExtractContentAttributesTall(component: UIObservableIconButton, iconUV: UVExtra): number[] {\n        const iconHeight = component.Dimension.width / iconUV.aspectRatio;\n        const segmentHeight = (component.Dimension.height - iconHeight) / 2;\n\n        const bottomSegmentAttributes = PrimitiveBuilder.AABBRectangle(\n            component.AbsolutePosition,\n            { width: component.Dimension.width, height: segmentHeight },\n            [[this.settings.ZFar - component.ZIndex - this.zFarIncluded], component.Style.fillColor, component.Icon.color, [-1, -1]]);\n\n        const iconAttributes = PrimitiveBuilder.AABBRectangle(\n            { x: component.AbsolutePosition.x, y: component.AbsolutePosition.y + segmentHeight },\n            { width: component.Dimension.width, height: iconHeight },\n            [\n                [this.settings.ZFar - component.ZIndex - this.zFarIncluded],\n                component.Style.fillColor,\n                component.Icon.color,\n                {\n                    LeftBottom: [iconUV.A.x, iconUV.B.y],\n                    LeftTop: [iconUV.A.x, iconUV.A.y],\n                    RightTop: [iconUV.B.x, iconUV.A.y],\n                    RightBottom: [iconUV.B.x, iconUV.B.y]\n                }\n            ]);\n\n        const topSegmentAttributes = PrimitiveBuilder.AABBRectangle(\n            { x: component.AbsolutePosition.x, y: component.AbsolutePosition.y + segmentHeight + iconHeight },\n            { width: component.Dimension.width, height: segmentHeight },\n            [[this.settings.ZFar - component.ZIndex - this.zFarIncluded], component.Style.fillColor, component.Icon.color, [-1, -1]]);\n\n        return [...bottomSegmentAttributes, ...iconAttributes, ...topSegmentAttributes];\n    }\n\n    private ExtractOutlineAttributes(component: UIObservableIconButton): number[] {\n        const width = 2;\n\n        return PrimitiveBuilder.AABBFrame(\n            { x: component.AbsolutePosition.x - width, y: component.AbsolutePosition.y - width },\n            { width: component.Dimension.width + 2 * width, height: component.Dimension.height + 2 * width },\n            width * component.Scale, [[this.settings.ZFar - component.ZIndex - this.zFarIncluded], component.Style.outlineColor]);\n    }\n}\n\nInversify.bind(UIIconButtonRenderer).toSelf().inSingletonScope();\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 v_color;\\nin vec2 v_glyph;\\n\\nout vec4 out_color;\\n\\nuniform sampler2D u_icon;\\n\\nvoid main() \\n{\\n    vec4 text_color = texture(u_icon, v_glyph);\\n    //out_color = mix(vec4(1.0, 0, 0, 1.0), vec4(v_color - text_color.xzy, 1.0), text_color.w);\\n\\n    out_color = vec4(v_color - text_color.xzy, text_color.w);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\nin vec3 a_color;\\nin vec2 a_glyph;\\n\\nout vec3 v_color;\\nout vec2 v_glyph;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0);\\n\\n  v_color = a_color;\\n  v_glyph = a_glyph;\\n}\\n\"","import { vec2 } from \"gl-matrix\";\n\nimport { Dimension, UIComponent } from \"../UIComponent\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\n\nimport { SymbolStyle, UILabel } from \"./UILabel\";\n\nimport { Observable, ObservableController, ObserverDetacher } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\n\nexport interface GlyphAllocator {\n    Allocate: (component: UIObservableLabel) => number;\n    Free: (idx: number) => void;\n}\n\nexport class UIObservableLabel implements UIComponent, UILabel {\n    public static readonly NonPrintableOffset = -1;\n\n    private static readonly NonPrintableSymbols = ['\\r', '\\n'];\n\n    private static DefaultSymbolStyle = { color: [0, 0, 0] as Rgb };\n\n    private scale = 1;\n\n    private symbolsStyle: SymbolStyle[];\n\n    private offsets: number[] = [];\n\n    private observable = new ObservableController<UIObservableLabel>();\n\n    public dimension: Dimension = { width: 0, height: 0 };\n\n    private parentDetacher: ObserverDetacher | null = null;\n\n    private updateNeeded = false;\n\n    constructor(\n        private position: Vec2,\n        private text: string,\n        private lineHeight: number,\n        private zIndex: number,\n        private glyphAllocator: GlyphAllocator,\n        private parent: UIObservablePositioningGroup | null\n    ) {\n        this.symbolsStyle = [];\n        this.ResizeSymbolStyles();\n\n        this.AdjustPoolMemory();\n\n        this.parentDetacher = parent?.Observable.Attach(() => this.DeferredNotify()) ?? null;\n    }\n\n    StyleRange(begin: number, end: number, style: SymbolStyle): void {\n        for (let n = begin; n < end; ++n) {\n            this.symbolsStyle[n] = { ...style };\n        }\n\n        this.DeferredNotify();\n    }\n\n    ReplaceOffset(old: number, offset: number): void {\n        this.offsets[this.offsets.indexOf(old)] = offset;\n    }\n\n    get Style(): SymbolStyle[] {\n        return this.symbolsStyle;\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    set Position(position: Vec2) {\n        this.position = position;\n\n        this.DeferredNotify();\n    }\n\n    get AbsolutePosition(): Vec2 {\n        if (this.parent) {\n            const parentPosition = [this.parent.AbsolutePosition.x, this.parent.AbsolutePosition.y] as const;\n            const absolutePosition = vec2.add(vec2.create(), parentPosition, [this.Position.x * this.Scale, this.Position.y * this.Scale]);\n\n            return { x: absolutePosition[0], y: absolutePosition[1] };\n        } else {\n            return this.Position;\n        }\n    }\n\n    get Text(): string {\n        return this.text;\n    }\n\n    set Text(text: string) {\n        this.text = text;\n        this.ResizeSymbolStyles();\n        this.AdjustPoolMemory();\n\n        this.DeferredNotify();\n    }\n\n    get LineHeight(): number {\n        return this.lineHeight;\n    }\n\n    set LineHeight(lineHeight: number) {\n        this.lineHeight = lineHeight;\n\n        this.DeferredNotify();\n    }\n\n    get ZIndex(): number {\n        return this.zIndex;\n    }\n\n    set ZIndex(zIndex: number) {\n        this.zIndex = zIndex;\n\n        this.DeferredNotify();\n    }\n\n    get Scale(): number {\n        return this.parent === null ? this.scale : this.scale * this.parent.Scale;\n    }\n\n    set Scale(scale: number) {\n        this.scale = scale;\n\n        this.DeferredNotify();\n    }\n\n    get Dimension(): Dimension {\n        return { ...this.dimension };\n    }\n\n    UpdateTextDimension(dimension: Dimension): void {\n        this.dimension = dimension;\n    }\n\n    get Offsets(): number[] {\n        return this.offsets;\n    }\n\n    get Observable(): Observable<UIObservableLabel> {\n        return this.observable;\n    }\n\n    private get PrintableTextLength(): number {\n        return this.text\n            .split('')\n            .filter(char => !UIObservableLabel.NonPrintableSymbols.includes(char))\n            .length;\n    }\n\n    private get PrintableOffsetLength(): number {\n        return this.offsets\n            .filter(x => x !== UIObservableLabel.NonPrintableOffset)\n            .length;\n    }\n\n    Destroy(): void {\n        this.Uninitialize();\n\n        this.parent?.RemoveChild(this);\n\n        if (this.parentDetacher !== null) {\n            this.parentDetacher();\n        }\n    }\n\n    private DeferredNotify(): void {\n        if (!this.updateNeeded) {\n            this.updateNeeded = true;\n            queueMicrotask(() => this.Notify());\n        }\n    }\n\n    private Notify(): void {\n        this.observable.Notify(this);\n        this.updateNeeded = false;\n    }\n\n    private Uninitialize(): void {\n        this.Text = '';\n    }\n\n    private ExtendPoolMemory(): void {\n        let extraMemoryNeeded = this.PrintableTextLength - this.PrintableOffsetLength;\n\n        while (extraMemoryNeeded-- > 0) {\n            const offset = this.glyphAllocator.Allocate(this);\n            this.offsets.push(offset);\n        }\n    }\n\n    private ShrinkPoolMemory(): void {\n        const excessOffsets = this.PrintableOffsetLength - this.PrintableTextLength;\n\n        for (let n = this.offsets.length - 1, released = 0; released < excessOffsets; --n) {\n            const offset = this.offsets[n];\n\n            if (offset !== UIObservableLabel.NonPrintableOffset) {\n                this.glyphAllocator.Free(offset);\n                this.offsets.splice(n, 1);\n\n                ++released;\n            }\n        }\n    }\n\n    private AdjustPoolMemory(): void {\n        if (this.PrintableTextLength > this.PrintableOffsetLength) {\n            this.ExtendPoolMemory();\n        } else if (this.PrintableTextLength < this.PrintableOffsetLength) {\n            this.ShrinkPoolMemory();\n        }\n\n        if (this.text.length > this.offsets.length) {\n            this.AddExtraNonPrintableOffsets();\n        } else if (this.offsets.length > this.text.length) {\n            this.RemoveExcessNonPrintableOffsets();\n        }\n\n        this.AdjustNonPrintableOffsets();\n    }\n\n    private AddExtraNonPrintableOffsets(): void {\n        let extraNonPrintableOffsets = this.text.length - this.offsets.length;\n\n        while (extraNonPrintableOffsets-- > 0) {\n            this.offsets.push(UIObservableLabel.NonPrintableOffset);\n        }\n    }\n\n    private RemoveExcessNonPrintableOffsets(): void {\n        const excessOffsets = this.offsets.length - this.text.length;\n\n        for (let n = this.offsets.length - 1, removed = 0; removed < excessOffsets; --n) {\n            const offset = this.offsets[n];\n\n            if (offset === UIObservableLabel.NonPrintableOffset) {\n                this.offsets.splice(n, 1);\n\n                ++removed;\n            }\n        }\n    }\n\n    private AdjustNonPrintableOffsets(): void {\n        for (let charIdx = 0, offsetStartIdx = 0; charIdx < this.text.length; ++charIdx) {\n            const symbol = this.text[charIdx];\n            const offset = this.offsets[charIdx];\n\n            if (UIObservableLabel.NonPrintableSymbols.includes(symbol) && offset !== UIObservableLabel.NonPrintableOffset) {\n                const nonPrintableOffsetIdx = this.offsets\n                    .slice(offsetStartIdx)\n                    .findIndex((x, n) => x === UIObservableLabel.NonPrintableOffset && !UIObservableLabel.NonPrintableSymbols.includes(this.text[offsetStartIdx + n])) + offsetStartIdx;\n\n                this.offsets[charIdx] = UIObservableLabel.NonPrintableOffset;\n                this.offsets[nonPrintableOffsetIdx] = offset;\n\n                offsetStartIdx = nonPrintableOffsetIdx + 1;\n            }\n        }\n    }\n\n    private ExtendSymbolStyles(): void {\n        this.symbolsStyle = [...this.symbolsStyle, ...Array.from({ length: this.text.length }, () => ({ ...UIObservableLabel.DefaultSymbolStyle }))];\n    }\n\n    private ShrinkSymbolStyles(): void {\n        this.symbolsStyle.splice(this.text.length, this.symbolsStyle.length - this.text.length);\n    }\n\n    private ResizeSymbolStyles(): void {\n        if (this.text.length > this.symbolsStyle.length) {\n            this.ExtendSymbolStyles();\n        } else if (this.text.length < this.symbolsStyle.length) {\n            this.ShrinkSymbolStyles();\n        }\n    }\n}\n","type Callable = (...args: any[]) => any;\n\nclass CatchBlock<TTry extends Callable> {\n    constructor(private fn: TTry, private args: Parameters<TTry>) { }\n\n    CatchFn<TCatch extends Callable>(fn: TCatch, ...args: Parameters<TCatch>): ReturnType<TTry> | ReturnType<TCatch> {\n        try {\n            return this.fn(...this.args);\n        } catch (e) {\n            return fn(...args);\n        }\n    }\n\n    CatchValue<T>(value: T): ReturnType<TTry> | T {\n        try {\n            return this.fn(...this.args);\n        } catch (e) {\n            return value;\n        }\n    }\n}\n\nexport class ExceptionTrap {\n    static Try<T extends Callable>(fn: T, ...args: Parameters<T>) {\n        return new CatchBlock(fn, args);\n    }\n}\n\ntype AsyncCallable = (...args: any[]) => Promise<any>;\n\nclass AsyncCatchBlock<TTry extends AsyncCallable> {\n    constructor(private fn: TTry, private args: Parameters<TTry>) { }\n\n    async CatchFn<TCatch extends AsyncCallable>(fn: TCatch, ...args: Parameters<TCatch>): Promise<ReturnType<TTry> | ReturnType<TCatch>> {\n        try {\n            return await this.fn(...this.args);\n        } catch (e) {\n            return await fn(...args);\n        }\n    }\n\n    async CatchValue<T>(value: T): Promise<ReturnType<TTry> | T> {\n        try {\n            return await this.fn(...this.args);\n        } catch (e) {\n            return await value;\n        }\n    }\n}\n\nexport class AsyncExceptionTrap {\n    static Try<T extends AsyncCallable>(fn: T, ...args: Parameters<T>) {\n        return new AsyncCatchBlock(fn, args);\n    }\n}\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { NotNull } from \"../NotNull\";\nimport { Vec2 } from \"../Primitives\";\nimport { UV } from \"../renderer/TextureAtlas\";\n\nimport { FontAtlas } from \"./FontAtlasBuilder\";\n\nimport { InjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\n\ninterface GlyphMeshFontOptions {\n    Name: string;\n    Size: number;\n}\n\ninterface GlyphMeshOptions {\n    ASCIIRange: { Start: string, End: string },\n    Font: GlyphMeshFontOptions\n}\n\nexport interface GlyphMeshBlueprint {\n    uv: UV; // exact glyph bound\n    width: number;\n    height: number;\n    baselineOffset: Vec2;\n}\n\ninterface AtlasCellDescriptor {\n    uv: UV;\n    sideLength: number;\n}\n\ninterface GlyphBoundary {\n    width: number;\n    height: number;\n}\n\nexport class FontGlyphCollection {\n    constructor(\n        private library: Map<string, GlyphMeshBlueprint>,\n        public readonly LineHeight: number) { }\n\n    Lookup(symbol: string): GlyphMeshBlueprint {\n        if (symbol.length === 0) {\n            throw new Error(\"Symbol can't be empty string\");\n        }\n\n        const blueprint = this.library.get(symbol);\n\n        if (blueprint === undefined) {\n            throw new Error(`Failed to find glyph '${symbol}'`);\n        }\n\n        return blueprint;\n    }\n}\n\n@injectable()\nclass FontGlyphCollectionBuilderImpl {\n    private options!: GlyphMeshOptions;\n    private context!: CanvasRenderingContext2D;\n\n    private lib = new Map<string, GlyphMeshBlueprint>();\n\n    constructor(@inject(InjectionToken.FontAtlas) private fontAtlas: FontAtlas) { }\n\n    Build(options: GlyphMeshOptions): FontGlyphCollection {\n        this.options = options;\n\n        const startCode = options.ASCIIRange.Start.charCodeAt(0);\n        const endCode = options.ASCIIRange.End.charCodeAt(0);\n\n        if (startCode > endCode) {\n            throw new Error('options.ASCIIRange.Start symbol must precede options.ASCIIRange.End');\n        }\n\n\n        const sideLength = this.GlyphCellSize();\n        this.SetupCanvas(sideLength, sideLength);\n\n        this.BuildBlueprints(endCode - startCode + 1);\n\n        return new FontGlyphCollection(this.lib, options.Font.Size);\n    }\n\n    private SetupCanvas(width: number, height: number): void {\n        const canvas = document.createElement('canvas');\n\n        canvas.width = width;\n        canvas.height = height;\n\n        const context = canvas.getContext('2d') ?? NotNull('Failed to get context');\n        context.font = `${this.options.Font.Size}px ${this.options.Font.Name}`;\n        context.fillStyle = '#000';\n\n        this.context = context;\n    }\n\n    private GlyphCellSize(): number {\n        return Math.ceil(this.options.Font.Size / 10) * 10;\n    }\n\n    private BuildBlueprints(glyphCount: number) {\n        for (let n = 0; n < glyphCount; ++n) {\n            const symbol = String.fromCharCode(this.options.ASCIIRange.Start.charCodeAt(0) + n);\n            const atlasUV = this.fontAtlas.LookupUV(symbol);\n            const metrics = this.context.measureText(symbol);\n\n            const width = metrics.width;\n            const extraHeight = this.options.Font.Size / 6.4; // FIXME Added extra height because whem lineHeight has value <= 32 font texture doesnt capture whole glyph\n            const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent + extraHeight;\n\n            const uv = this.AtlasCellToGlyphUV(\n                { uv: atlasUV, sideLength: this.GlyphCellSize() },\n                { width, height });\n\n            const baselineOffset = {\n                x: 0,\n                y: metrics.fontBoundingBoxDescent - metrics.actualBoundingBoxDescent\n            };\n\n            this.lib.set(symbol, { uv, width, height, baselineOffset });\n        }\n    }\n\n    private AtlasCellToGlyphUV(cell: AtlasCellDescriptor, glyph: GlyphBoundary): UV {\n        const relA: Vec2 = {\n            x: (cell.sideLength - glyph.width) / 2,\n            y: (cell.sideLength - glyph.height) / 2\n        };\n\n        const relB: Vec2 = { x: relA.x + glyph.width, y: relA.y + glyph.height };\n\n        const uvWidth = cell.uv.B.x - cell.uv.A.x;\n        const uvHeight = cell.uv.B.y - cell.uv.A.y;\n\n        return {\n            A: {\n                x: cell.uv.A.x + relA.x / cell.sideLength * uvWidth,\n                y: cell.uv.A.y + relA.y / cell.sideLength * uvHeight\n            },\n            B: {\n                x: cell.uv.A.x + relB.x / cell.sideLength * uvWidth,\n                y: cell.uv.A.y + relB.y / cell.sideLength * uvHeight\n            }\n        };\n    }\n}\n\nInversify.bind(FontGlyphCollectionBuilderImpl).toSelf().inRequestScope();\n\nexport type FontGlyphCollectionFactory = (options: GlyphMeshOptions) => FontGlyphCollection;\n\nInversify\n    .bind<interfaces.Factory<FontGlyphCollection>>(InjectionToken.FontGlyphCollectionFactory)\n    .toFactory<FontGlyphCollection, [GlyphMeshOptions]>(ctx => (options: GlyphMeshOptions) => ctx.container.get(FontGlyphCollectionBuilderImpl).Build(options));\n","type Callable = (...args: any[]) => any;\n\ntype MethodsOnly<T> = Pick<T, { [K in keyof T]: T[K] extends Callable ? K : never }[keyof T]>;\n\nexport function SelfBind<TInstance, TMethod extends keyof MethodsOnly<TInstance>>(instance: TInstance, method: TMethod): TInstance[TMethod] {\n    return (instance[method] as any).bind(instance);\n}\n","import { inject, injectable } from 'inversify';\n\nimport { UIObservablePositioningGroup } from '../UIObservablePositioningGroup';\n\nimport { UILabel } from './UILabel';\nimport FUILabel from './UILabel.frag';\nimport VUILabel from './UILabel.vert';\nimport { UIObservableLabel } from './UIObservableLabel';\n\nimport { AppSettings } from '@/app/AppSettings';\nimport { InjectionToken, UILabelRendererTargetName } from '@/app/InjectionToken';\nimport { Inversify } from '@/Inversify';\nimport { ArrayHelper } from '@/lib/ArrayHelper';\nimport { EnumSize } from \"@/lib/EnumSize\";\nimport { ExceptionTrap } from '@/lib/ExceptionTrap';\nimport { FontGlyphCollection, FontGlyphCollectionFactory, GlyphMeshBlueprint } from '@/lib/font/FontGlyphCollection';\nimport { MemoryPoolTracker } from '@/lib/MemoryPoolTracker';\nimport { Vec2 } from '@/lib/Primitives';\nimport { PrimitiveBuilder } from '@/lib/renderer/PrimitiveBuilder';\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from '@/lib/renderer/ShaderProgram';\nimport { TypeSizeResolver } from \"@/lib/renderer/TypeSizeResolver\";\nimport { SelfBind } from '@/lib/SelfBind';\n\n\nenum UILabelComponent { X, Y, Z, R, G, B, Ux, Uy };\n\ntype Offset = number;\n\ninterface SplitedLine {\n    startIdx: number;\n    text: string;\n}\n\n/**\n * Note: In PrimitivesRenderer::PrimitiveAttributes method the index parameter means an individual symbol location but not a whole label component.\n *       It's because a label has dynamic attribute count that depends on text length.\n */\n@injectable()\nexport class UILabelRenderer extends PrimitivesRenderer {\n    private readonly IndicesPerPrimitive;\n\n    private readonly AttributesPerComponent;\n\n    private readonly zFarIncluded = 0.1;\n\n    private labels = new Map<Offset, UIObservableLabel>();\n\n    private vertexAttributesTracker: MemoryPoolTracker;\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext,\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(InjectionToken.FontAtlasTexture) private fontTexture: WebGLTexture,\n        @inject(InjectionToken.FontGlyphCollectionFactory) private fontGlyphCollectionFactory: FontGlyphCollectionFactory) {\n        const floatSize = TypeSizeResolver.Resolve(gl.FLOAT);\n        const stride = floatSize * EnumSize(UILabelComponent);\n        const indicesPerPrimitive = 6;\n\n        super(gl,\n            { fragment: FUILabel, vertex: VUILabel },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 0\n            },\n            {\n                name: 'a_color',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 3 * floatSize\n            },\n            {\n                name: 'a_glyph',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 6 * floatSize\n            }],\n            { indicesPerPrimitive, basePrimitiveType: gl.TRIANGLES });\n\n        this.IndicesPerPrimitive = indicesPerPrimitive;\n        this.AttributesPerComponent = EnumSize(UILabelComponent) * this.IndicesPerPrimitive;\n\n        this.vertexAttributesTracker = new (class extends MemoryPoolTracker {\n            constructor(private renderer: UILabelRenderer) {\n                const initialCapacity = 256;\n                super(initialCapacity);\n\n                renderer.UploadAttributes(Array.from({ length: renderer.AttributesPerComponent * initialCapacity }, () => 0));\n            }\n\n            Free(index: number): void {\n                const emptyAttrs = new Array(this.renderer.AttributesPerComponent).fill(0);\n\n                this.renderer.UpdateComponentAttributes(emptyAttrs, index * this.renderer.AttributesPerComponent);\n\n                super.Free(index);\n            }\n\n            OnShrink(inUseIndices: number[]): void {\n                const labelAttrs = new Array(this.renderer.AttributesPerComponent * inUseIndices.length).fill(0);\n\n                for (let n = 0; n < inUseIndices.length; ++n) {\n                    const offset = inUseIndices[n];\n\n                    for (let attribOffset = 0; attribOffset < this.renderer.AttributesPerComponent; ++attribOffset) {\n                        labelAttrs[n * this.renderer.AttributesPerComponent + attribOffset] = this.renderer.attributes[offset * this.renderer.AttributesPerComponent + attribOffset];\n                    }\n                }\n\n                this.renderer.UploadAttributes(labelAttrs);\n\n                inUseIndices.forEach((oldOffset, offset) => {\n                    const label = this.renderer.labels.get(oldOffset);\n\n                    if (label !== undefined) {\n                        this.renderer.labels.delete(oldOffset);\n                        this.renderer.labels.set(offset, label);\n                        label.ReplaceOffset(oldOffset, offset);\n                    }\n                });\n            }\n\n            OnExtend(extendedCapacity: number): void {\n                const extendedLabelAttrs = Array.from(\n                    { length: extendedCapacity * this.renderer.AttributesPerComponent },\n                    (_, n) => n < this.renderer.attributes.length ? this.renderer.attributes[n] : 0);\n\n                this.renderer.UploadAttributes(extendedLabelAttrs);\n            }\n        })(this);\n    }\n\n    get Labels(): readonly UILabel[] {\n        return [...new Set([...this.labels.values()]).values()];\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n\n    Create(position: Vec2,\n        zIndex: number,\n        text: string,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null): UILabel {\n        const label = new UIObservableLabel(\n            position,\n            text,\n            lineHeight,\n            zIndex,\n            {\n                Allocate: (component: UIObservableLabel) => this.AllocateGlyph(component),\n                Free: (idx: number) => this.GlyphFree(idx)\n            },\n            parent);\n\n        if (parent !== null) {\n            parent.AppendChild(label);\n        }\n\n        label.Observable.Attach((component: UIObservableLabel) => this.UpdateAttributes(component));\n\n        this.UpdateAttributes(label);\n\n        return label;\n    }\n\n    Draw(): void {\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this.fontTexture);\n\n        super.Draw();\n    }\n\n    private AllocateGlyph(component: UIObservableLabel): number {\n\n        const offset = this.vertexAttributesTracker.Allocate();\n\n        this.labels.set(offset, component);\n\n        return offset;\n    }\n\n    private GlyphFree(idx: number): void {\n        this.labels.delete(idx);\n        this.vertexAttributesTracker.Free(idx);\n    }\n\n    private UpdateAttributes(component: UIObservableLabel): void {\n        const fontGlyphCollection = this.fontGlyphCollectionFactory({ ASCIIRange: { Start: ' ', End: '~' }, Font: { Name: 'Roboto', Size: component.LineHeight } });\n\n        let width = 0;\n        const lines = UILabelRenderer.SplitString(component.Text);\n\n        if (lines.length === 0) {\n            component.UpdateTextDimension({ width: 0, height: 0 });\n            return;\n        }\n\n        const minBaseOffset = UILabelRenderer.MinBaseOffset(lines[lines.length - 1].text, component, fontGlyphCollection);\n\n        let { x, y } = {\n            x: component.AbsolutePosition.x,\n            y: component.AbsolutePosition.y - minBaseOffset\n        };\n\n        for (let n = lines.length - 1; n >= 0; --n) {\n            const line = lines[n];\n\n            if (line.text.length === 0) {\n                x = component.AbsolutePosition.x;\n                y += component.LineHeight * component.Scale;\n                continue;\n            }\n\n            for (let n = 0; n < line.text.length; ++n) {\n                const symbol = line.text[n];\n                const style = component.Style[line.startIdx + n];\n                const offset = component.Offsets[line.startIdx + n];\n\n                if (offset === UIObservableLabel.NonPrintableOffset) {\n                    continue;\n                }\n\n                const glyphBlueprint = UILabelRenderer.LookupGlyph(symbol, fontGlyphCollection);\n\n                const attributes = PrimitiveBuilder.AABBRectangle(\n                    { x, y: y + glyphBlueprint.baselineOffset.y * component.Scale },\n                    {\n                        width: glyphBlueprint.width * component.Scale,\n                        height: glyphBlueprint.height * component.Scale\n                    },\n                    [\n                        [this.settings.ZFar - component.ZIndex - this.zFarIncluded],\n                        style.color,\n                        {\n                            LeftBottom: [glyphBlueprint.uv.A.x, glyphBlueprint.uv.B.y],\n                            LeftTop: [glyphBlueprint.uv.A.x, glyphBlueprint.uv.A.y],\n                            RightTop: [glyphBlueprint.uv.B.x, glyphBlueprint.uv.A.y],\n                            RightBottom: [glyphBlueprint.uv.B.x, glyphBlueprint.uv.B.y]\n                        }\n                    ]);\n\n                this.UpdateComponentAttributes(attributes, offset * this.AttributesPerComponent);\n\n                x += glyphBlueprint.width * component.Scale;\n\n                width = Math.max(width, x - component.AbsolutePosition.x);\n            }\n\n            x = component.AbsolutePosition.x;\n            y += component.LineHeight * component.Scale + minBaseOffset;\n        }\n\n        component.UpdateTextDimension({ width, height: y - component.AbsolutePosition.y });\n    }\n\n    private static MinBaseOffset(line: string, component: UIObservableLabel, fontGlyphCollection: FontGlyphCollection): number {\n        if (line.length === 0) {\n            return 0;\n        }\n\n        const comp = (a: string, b: string) => UILabelRenderer.LookupGlyph(a, fontGlyphCollection).baselineOffset.y < UILabelRenderer.LookupGlyph(b, fontGlyphCollection).baselineOffset.y;\n        const maxBaselineOffsetSymbol = ArrayHelper.Min([...line], comp);\n\n        return UILabelRenderer.LookupGlyph(maxBaselineOffsetSymbol, fontGlyphCollection).baselineOffset.y * component.Scale;\n    }\n\n    private static LookupGlyph(symbol: string, fontGlyphCollection: FontGlyphCollection): GlyphMeshBlueprint {\n        return ExceptionTrap\n            .Try(SelfBind(fontGlyphCollection, 'Lookup'), symbol)\n            .CatchFn(SelfBind(fontGlyphCollection, 'Lookup'), '?');\n    }\n\n    private static SplitString(str: string): SplitedLine[] {\n        const lines: SplitedLine[] = [];\n\n        if (str.length === 0) {\n            return [];\n        }\n\n        let lineStart = 0;\n        for (let n = 0; n < str.length; ++n) {\n            const symbol = str[n];\n\n            if (symbol === '\\n') {\n                lines.push({ text: str.slice(lineStart, n), startIdx: lineStart });\n                lineStart = n + 1;\n            }\n        }\n\n        if (lineStart !== str.length) {\n            lines.push({ text: str.slice(lineStart, str.length), startIdx: lineStart });\n        }\n\n        return lines;\n    }\n}\n\nInversify.bind(UILabelRenderer).toSelf().inSingletonScope().whenTargetIsDefault();\nInversify.bind(UILabelRenderer).toSelf().inSingletonScope().whenTargetNamed(UILabelRendererTargetName.Perspective);\nInversify.bind(UILabelRenderer).toSelf().inTransientScope().whenTargetNamed(UILabelRendererTargetName.Unique);\n","import { vec2 } from \"gl-matrix\";\n\nimport { UIComponent } from \"../UIComponent\";\nimport { UIIcon } from \"../UIIcon\";\nimport { UIIconButton } from \"../UIIconButton/UIIconButton\";\nimport { SymbolStyle, UILabel } from \"../UILabel/UILabel\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\nimport { UICreator } from \"../UIRenderer\";\n\nimport { Dimension, UIButtonStyle, UICaptionStyle, UITextButton } from \"./UITextButton\";\n\nimport { Observable, ObservableController, ObserverDetacher } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\n\nexport type TouchCallback = (sender: UITextButton) => void;\n\nexport type UpdateCallback = (component: UIObservableTextButton) => void;\n\nexport type DeleterCallback = (component: UIObservableTextButton) => void;\n\nexport class UIObservableTextButton implements UIComponent, UITextButton {\n    private static readonly DisabledIconColor: Rgb = [0.47058823529411764, 0.5647058823529412, 0.611764705882353];\n\n    private observable = new ObservableController<UIObservableTextButton>();\n\n    private scale = 1;\n\n    private destroyed = false;\n\n    private disabled = false;\n\n    private button: UIIconButton;\n\n    private label: UILabel;\n\n    private parentDetacher: ObserverDetacher | null = null;\n\n    constructor(\n        private position: Vec2,\n        private dimension: Dimension,\n        private zIndex: number,\n        private style: UIButtonStyle,\n        private caption: UICaptionStyle,\n        private touchCallback: TouchCallback,\n        uiRenderer: UICreator,\n        private parent: UIObservablePositioningGroup | null = null) {\n\n        this.button = uiRenderer.CreateIconButton(\n            this.position,\n            this.dimension,\n            this.zIndex,\n            this.style,\n            { color: [0, 0, 0], icon: UIIcon.Empty },\n            (sender: UIIconButton) => this.TouchAdapter(sender),\n            this.parent);\n\n        const aboveButton = 0.001;\n        this.label = uiRenderer.CreateLabel(\n            this.Position,\n            zIndex + aboveButton,\n            this.caption.text,\n            this.caption.lineHeight,\n            this.parent);\n        this.label.StyleRange(0, this.label.Text.length, { color: this.caption.color });\n\n        this.label.Position = this.CaptionPosition;\n\n        this.parentDetacher = parent?.Observable.Attach(() => this.observable.Notify(this)) ?? null;\n    }\n\n    get Observable(): Observable<UIObservableTextButton> {\n        return this.observable;\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    set Position(position: Vec2) {\n        this.position = position;\n\n        this.button.Position = this.Position;\n        this.label.Position = this.CaptionPosition;\n\n        this.observable.Notify(this);\n    }\n\n    get AbsolutePosition(): Vec2 {\n        if (this.parent) {\n            const parentPosition = [this.parent.AbsolutePosition.x, this.parent.AbsolutePosition.y] as const;\n            const absolutePosition = vec2.add(vec2.create(), parentPosition, [this.Position.x * this.Scale, this.Position.y * this.Scale]);\n\n            return { x: absolutePosition[0], y: absolutePosition[1] };\n        } else {\n            return this.Position;\n        }\n    }\n\n    get Dimension(): Dimension {\n        return { width: this.dimension.width * this.Scale, height: this.dimension.height * this.Scale };\n    }\n\n    set Dimension(dimension: Dimension) {\n        this.dimension = dimension;\n\n        this.button.Dimension = dimension;\n        this.label.Position = this.CaptionPosition;\n\n        this.observable.Notify(this);\n    }\n\n    get ZIndex(): number {\n        return this.zIndex;\n    }\n\n    set ZIndex(zIndex: number) {\n        this.zIndex = zIndex;\n\n        this.button.ZIndex = zIndex;\n\n        const aboveButton = 0.001;\n        this.label.ZIndex = zIndex + aboveButton;\n\n        this.observable.Notify(this);\n    }\n\n    get Caption(): UICaptionStyle {\n        return this.caption;\n    }\n\n    set Caption(style: UICaptionStyle) {\n        this.caption = { ...style };\n\n        this.label.Text = style.text;\n        this.label.LineHeight = style.lineHeight;\n        this.label.StyleRange(0, this.label.Text.length, { color: style.color });\n\n        queueMicrotask(() => this.label.Position = this.CaptionPosition);\n\n        this.observable.Notify(this);\n    }\n\n    get Style(): UIButtonStyle {\n        return this.style;\n    }\n\n    set Style(style: UIButtonStyle) {\n        this.style = { ...style };\n\n        this.button.Style = { ...style };\n\n        this.observable.Notify(this);\n    }\n\n    get Scale(): number {\n        return this.parent === null ? this.scale : this.scale * this.parent.Scale;\n    }\n\n    set Scale(scale: number) {\n        this.scale = scale;\n\n        this.button.Scale = scale;\n        this.label.Scale = scale;\n\n        this.observable.Notify(this);\n    }\n\n    get Destroyed(): boolean {\n        return this.destroyed;\n    }\n\n    get Disable(): boolean {\n        return this.disabled;\n    }\n\n    set Disable(value: boolean) {\n        if (value === this.disabled) {\n            return;\n        }\n\n        this.disabled = value;\n        this.button.Disable = value;\n\n        this.observable.Notify(this);\n    }\n\n    private get CaptionPosition(): Vec2 {\n        return {\n            x: this.Position.x + (this.dimension.width - this.label.Dimension.width / this.label.Scale) / 2,\n            y: this.Position.y + (this.dimension.height - this.label.Dimension.height / this.label.Scale) / 2\n        }\n    }\n\n    private TouchAdapter(_sender: UIIconButton): void {\n        this.touchCallback(this);\n    }\n\n    StyleCaptionRange(begin: number, end: number, style: SymbolStyle): void {\n        this.label.StyleRange(begin, end, style);\n    }\n\n    Touch(): void {\n        this.button.Touch();\n    }\n\n    Destroy(): void {\n        this.label.Destroy();\n        this.button.Destroy();\n\n        this.parent?.RemoveChild(this);\n\n        if (this.parentDetacher !== null) {\n            this.parentDetacher();\n        }\n    }\n}\n","import { vec2 } from \"gl-matrix\";\n\nimport { Dimension } from \"../UIComponent\";\nimport { UIIcon } from \"../UIIcon\";\nimport { UIButtonStyle, UIIconButton } from \"../UIIconButton/UIIconButton\";\nimport { UILabel } from \"../UILabel/UILabel\";\nimport { UILabelRenderer } from \"../UILabel/UILabelRenderer\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\nimport { UICreator } from \"../UIRenderer\";\n\nimport { UITextList } from \"./UITextList\";\n\nimport { MathUtil } from \"@/lib/math/MathUtil\";\nimport { Observable, ObservableController, ObserverDetacher } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\n\ninterface ScrollControls {\n    scrollTopButton: UIIconButton;\n    scrollBottomButton: UIIconButton;\n}\n\nexport type UIObservableTextListDeleter = () => void;\n\nexport class UIObservableTextList implements UITextList {\n    public visible = true;\n\n    private scale = 1;\n\n    private scroll = 0;\n\n    private label: UILabel;\n\n    private scrollControls: ScrollControls | null = null;\n\n    private observable = new ObservableController<UIObservableTextList>();\n\n    private readonly scrollButtonDimension: Dimension = { width: 10, height: 20 };\n\n    private margin = 5;\n\n    private readonly scrollButtonStyle: UIButtonStyle = {\n        fillColor: [0.9254901960784314, 0.9411764705882353, 0.9450980392156862],\n        outlineColor: [0.9254901960784314, 0.9411764705882353, 0.9450980392156862]\n    };\n\n    private readonly scrollButtonIconColor: Rgb = [0.17254901960784313, 0.24313725490196078, 0.3137254901960784];\n\n    private parentDetacher: ObserverDetacher | null = null;\n\n    constructor(\n        private position: Vec2,\n        private dimension: Dimension,\n        private zIndex: number,\n        text: string,\n        lineHeight: number,\n        private borderWidth: number,\n        public Offset: number,\n        private labelRenderer: UILabelRenderer,\n        private uiRenderer: UICreator,\n        private deleter: UIObservableTextListDeleter,\n        private parent: UIObservablePositioningGroup | null\n    ) {\n        this.label = this.labelRenderer.Create(\n            {\n                x: position.x + this.BorderWidth,\n                y: position.y\n            },\n            zIndex,\n            text,\n            lineHeight,\n            parent);\n\n        this.parentDetacher = parent?.Observable.Attach(() => this.observable.Notify(this)) ?? null;\n\n        this.ScheduleUpdateScrollControlsPresence();\n    }\n\n    get Position(): Vec2 {\n        return this.position;\n    }\n\n    set Position(position: Vec2) {\n        this.position = position;\n\n        this.observable.Notify(this);\n    }\n\n    get Dimension(): Dimension {\n        return {\n            width: this.dimension.width * this.Scale,\n            height: this.dimension.height * this.Scale\n        };\n    }\n\n    set Dimension(dimension: Dimension) {\n        this.dimension = dimension;\n\n        this.observable.Notify(this);\n        this.ScheduleUpdateScrollControlsPresence();\n    }\n\n    get AbsolutePosition(): Vec2 {\n        if (this.parent) {\n            const parentPosition = [this.parent.AbsolutePosition.x, this.parent.AbsolutePosition.y] as const;\n            const absolutePosition = vec2.add(vec2.create(), parentPosition, [this.Position.x * this.Scale, this.Position.y * this.Scale]);\n\n            return { x: absolutePosition[0], y: absolutePosition[1] };\n        } else {\n            return this.Position;\n        }\n    }\n\n    get Text(): string {\n        return this.label.Text;\n    }\n\n    set Text(text: string) {\n        this.label.Text = text;\n\n        this.scroll = 0;\n        this.label.Position = {\n            x: this.position.x + this.BorderWidth,\n            y: this.position.y\n        }\n\n        this.observable.Notify(this);\n        this.ScheduleUpdateScrollControlsPresence();\n    }\n\n    get ZIndex(): number {\n        return this.zIndex;\n    }\n\n    set ZIndex(zIndex: number) {\n        this.zIndex = zIndex;\n\n        this.label.ZIndex = zIndex;\n\n        this.observable.Notify(this);\n    }\n\n    get LineHeight(): number {\n        return this.label.LineHeight;\n    }\n\n    set LineHeight(lineHeight: number) {\n        this.label.LineHeight = lineHeight;\n\n        this.observable.Notify(this);\n        this.ScheduleUpdateScrollControlsPresence();\n    }\n\n    get BorderWidth(): number {\n        return this.borderWidth * this.Scale;\n    }\n\n    set BorderWidth(width: number) {\n        this.borderWidth = width;\n\n        this.observable.Notify(this);\n    }\n\n    get Visible(): boolean {\n        return this.visible;\n    }\n\n    set Visible(value: boolean) {\n        this.visible = value;\n\n        this.ScheduleUpdateScrollControlsPresence();\n\n        this.observable.Notify(this);\n    }\n\n    get Scale(): number {\n        return this.parent === null ? this.scale : this.scale * this.parent.Scale;\n    }\n\n    set Scale(scale: number) {\n        this.scale = scale;\n\n        if (this.parent === null) {\n            this.label.Scale = scale;\n        }\n\n        this.ScheduleUpdateScrollControlsPresence();\n\n        if (this.scrollControls !== null) {\n            this.scrollControls.scrollTopButton.Scale = scale;\n            this.scrollControls.scrollBottomButton.Scale = scale;\n        }\n\n\n        this.observable.Notify(this);\n    }\n\n    get Observable(): Observable<UIObservableTextList> {\n        return this.observable;\n    }\n\n    private get IsContentOverflow(): boolean {\n        return this.label.Dimension.height > this.Dimension.height;\n    }\n\n    ScrollToTop(): void {\n        queueMicrotask(() => {\n            if (this.visible && this.IsContentOverflow) {\n                this.scroll = 0;\n                this.ScrollAligned(this.MinScroll);\n            }\n        });\n    }\n\n    Destroy(): void {\n        this.parent?.RemoveChild(this);\n\n        if (this.parentDetacher !== null) {\n            this.parentDetacher();\n        }\n\n        this.deleter();\n    }\n\n    private ScheduleUpdateScrollControlsPresence(): void {\n        queueMicrotask(() => this.UpdateScrollControlsPresence());\n    }\n\n    private UpdateScrollControlsPresence(): void {\n        if (this.visible && this.IsContentOverflow) {\n            if (this.scrollControls === null) {\n                this.scrollControls = {\n                    scrollTopButton: this.CreateTopScrollButton(),\n                    scrollBottomButton: this.CreateBottomScrollButton()\n                };\n\n                if (this.parent === null) {\n                    this.scrollControls.scrollBottomButton.Scale = this.Scale;\n                    this.scrollControls.scrollTopButton.Scale = this.Scale;\n                }\n\n                this.ScrollAligned(0);\n            }\n\n            this.scrollControls.scrollBottomButton.Position = {\n                x: this.ScrollButtonX,\n                y: this.ScrollBottomButtonY\n            };\n\n            this.scrollControls.scrollTopButton.Position = {\n                x: this.ScrollButtonX,\n                y: this.ScrollTopButtonY\n            };\n        } else {\n            if (this.scrollControls !== null) {\n                this.scrollControls.scrollTopButton.Destroy();\n                this.scrollControls.scrollBottomButton.Destroy();\n                this.scrollControls = null;\n            }\n        }\n    }\n\n    private get ScrollButtonX(): number {\n        return this.Position.x + this.dimension.width - this.borderWidth - this.scrollButtonDimension.width - this.margin;\n    }\n\n    private get ScrollTopButtonY(): number {\n        return this.Position.y + this.dimension.height - this.scrollButtonDimension.height - this.borderWidth - this.margin;\n    }\n\n    private get ScrollBottomButtonY(): number {\n        return this.Position.y + this.BorderWidth + this.margin;\n    }\n\n    private CreateTopScrollButton(): UIIconButton {\n        return this.uiRenderer.CreateIconButton(\n            {\n                x: this.ScrollButtonX,\n                y: this.ScrollTopButtonY\n            },\n            this.scrollButtonDimension,\n            1,\n            this.scrollButtonStyle,\n            { color: this.scrollButtonIconColor, icon: UIIcon.ArrowUp },\n            (_component: UIIconButton) => this.ScrollAligned(-this.LineHeight),\n            this.parent\n        );\n    }\n\n    private CreateBottomScrollButton(): UIIconButton {\n        return this.uiRenderer.CreateIconButton(\n            {\n                x: this.ScrollButtonX,\n                y: this.ScrollBottomButtonY\n            },\n            this.scrollButtonDimension,\n            1,\n            this.scrollButtonStyle,\n            { color: this.scrollButtonIconColor, icon: UIIcon.ArrowDown },\n            (_component: UIIconButton) => this.ScrollAligned(this.LineHeight),\n            this.parent\n        );\n    }\n\n    get MinScroll(): number {\n        return this.Position.y - this.label.Dimension.height / this.label.Scale + this.dimension.height - 2 * this.borderWidth;\n    }\n\n    get MaxScroll(): number {\n        return this.Position.y;\n    }\n\n    private ScrollAligned(offset: number): void {\n        this.scroll += offset;\n\n        this.scroll = MathUtil.Clamp(this.scroll, this.MinScroll, this.MaxScroll);\n\n        this.UpdateScrollButtonDisability();\n\n        this.label.Position = { ...this.label.Position, y: this.scroll };\n    }\n\n    private UpdateScrollButtonDisability(): void {\n        if (this.scroll === this.MinScroll) {\n            this.scrollControls!.scrollTopButton.Disable = true;\n        } else if (this.scrollControls!.scrollTopButton.Disable) {\n            this.scrollControls!.scrollTopButton.Disable = false;\n        }\n\n        if (this.scroll === this.MaxScroll) {\n            this.scrollControls!.scrollBottomButton.Disable = true;\n        } else if (this.scrollControls!.scrollBottomButton.Disable) {\n            this.scrollControls!.scrollBottomButton.Disable = false;\n        }\n    }\n}\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nout vec4 out_color;\\n\\nvoid main() \\n{\\n      out_color = vec4(0.17254901960784313, 0.24313725490196078, 0.3137254901960784, 1);\\n}\\n\"","import { inject, injectable, interfaces, named } from \"inversify\";\n\nimport { Dimension } from \"../UIComponent\";\nimport { UILabelRenderer } from \"../UILabel/UILabelRenderer\";\nimport { UIObservablePositioningGroup } from \"../UIObservablePositioningGroup\";\nimport { UICreator, UIRenderer } from \"../UIRenderer\";\n\nimport { UIObservableTextList, UIObservableTextListDeleter } from \"./UIObservableTextList\";\nimport { UITextList } from \"./UITextList\";\nimport FTextListBorder from './UITextListBorder.frag'\nimport VTextListBorder from './UITextListBorder.vert'\nimport FUITextListStencil from './UITextListStencil.frag';\nimport VUITextListStencil from './UITextListStencil.vert';\n\nimport { AppSettings } from \"@/app/AppSettings\";\nimport { InjectionToken, UILabelRendererTargetName } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { EnumSize } from \"@/lib/EnumSize\";\nimport { MemoryPoolTracker } from \"@/lib/MemoryPoolTracker\";\nimport { Vec2 } from \"@/lib/Primitives\";\nimport { PrimitiveBuilder } from \"@/lib/renderer/PrimitiveBuilder\";\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from \"@/lib/renderer/ShaderProgram\";\nimport { TypeSizeResolver } from \"@/lib/renderer/TypeSizeResolver\";\n\n\nenum UITextListBorderComponent { X, Y, Z };\n\nenum UITextListStencilComponent { X, Y };\n\nclass UITextListBorderRenderer extends PrimitivesRenderer {\n    public readonly IndicesPerPrimitive;\n\n    public readonly AttributesPerComponent;\n\n    constructor(gl: WebGL2RenderingContext) {\n        const floatSize = TypeSizeResolver.Resolve(gl.FLOAT);\n        const stride = floatSize * EnumSize(UITextListBorderComponent);\n        const indicesPerPrimitive = 24;\n\n        super(gl,\n            { fragment: FTextListBorder, vertex: VTextListBorder },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 0\n            }],\n            { indicesPerPrimitive, basePrimitiveType: gl.TRIANGLES });\n\n        this.IndicesPerPrimitive = indicesPerPrimitive;\n        this.AttributesPerComponent = EnumSize(UITextListBorderComponent) * this.IndicesPerPrimitive;\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n\n    get Attributes(): Float32Array {\n        return this.attributes;\n    }\n}\n\n@injectable()\nexport class UITextListRenderer extends PrimitivesRenderer {\n    private readonly IndicesPerPrimitive;\n\n    private readonly AttributesPerComponent;\n\n    private readonly zFarIncluded = 0.1;\n\n    private readonly borderWidth = 2;\n\n    private borderRenderer: UITextListBorderRenderer;\n\n    private vertexAttributesTracker: MemoryPoolTracker;\n\n    private uiRenderer!: UICreator;\n\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(InjectionToken.WebGLRenderingContext) gl: WebGL2RenderingContext,\n        @inject(UILabelRenderer) @named(UILabelRendererTargetName.Unique) private labelRenderer: UILabelRenderer) {\n\n        const floatSize = TypeSizeResolver.Resolve(gl.FLOAT);\n        const stride = floatSize * EnumSize(UITextListStencilComponent);\n        const indicesPerPrimitive = 6;\n\n        super(gl,\n            { fragment: FUITextListStencil, vertex: VUITextListStencil },\n            [{\n                name: 'a_vertex',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false,\n                stride,\n                offset: 0\n            }],\n            { indicesPerPrimitive, basePrimitiveType: gl.TRIANGLES });\n\n        this.IndicesPerPrimitive = indicesPerPrimitive;\n        this.AttributesPerComponent = EnumSize(UITextListStencilComponent) * this.IndicesPerPrimitive;\n\n        this.borderRenderer = new UITextListBorderRenderer(this.gl);\n\n        this.vertexAttributesTracker = new (class extends MemoryPoolTracker {\n            constructor(private renderer: UITextListRenderer) {\n                const initialCapacity = 2;\n                super(initialCapacity);\n\n                renderer.UploadAttributes(Array.from({ length: renderer.AttributesPerComponent * initialCapacity }, () => 0));\n                this.renderer.borderRenderer.UploadAttributes(Array.from({ length: renderer.borderRenderer.AttributesPerComponent * initialCapacity }, () => 0));\n            }\n\n            Free(index: number): void {\n                this.renderer.UpdateComponentAttributes(\n                    new Array(this.renderer.AttributesPerComponent).fill(0),\n                    index * this.renderer.AttributesPerComponent);\n\n                this.renderer.borderRenderer.UpdateComponentAttributes(\n                    new Array(this.renderer.borderRenderer.AttributesPerComponent).fill(0),\n                    index * this.renderer.borderRenderer.AttributesPerComponent);\n\n                super.Free(index);\n            }\n\n            OnShrink(inUseIndices: number[]): void {\n                const scencilRectAttrs = new Array(this.renderer.AttributesPerComponent * inUseIndices.length).fill(0);\n                const borderAttrs = new Array(this.renderer.borderRenderer.AttributesPerComponent * inUseIndices.length).fill(0);\n\n                for (let n = 0; n < inUseIndices.length; ++n) {\n                    const offset = inUseIndices[n];\n\n                    for (let attribOffset = 0; attribOffset < this.renderer.AttributesPerComponent; ++attribOffset) {\n                        scencilRectAttrs[n * this.renderer.AttributesPerComponent + attribOffset] = this.renderer.attributes[offset * this.renderer.AttributesPerComponent + attribOffset];\n                    }\n\n                    for (let attribOffset = 0; attribOffset < this.renderer.borderRenderer.AttributesPerComponent; ++attribOffset) {\n                        borderAttrs[n * this.renderer.borderRenderer.AttributesPerComponent + attribOffset] = this.renderer.borderRenderer.Attributes[offset * this.renderer.borderRenderer.AttributesPerComponent + attribOffset];\n                    }\n                }\n\n                this.renderer.UploadAttributes(scencilRectAttrs);\n                this.renderer.borderRenderer.UploadAttributes(borderAttrs);\n            }\n\n            OnExtend(extendedCapacity: number): void {\n                const extendedLabelAttrs = Array.from(\n                    { length: extendedCapacity * this.renderer.AttributesPerComponent },\n                    (_, n) => n < this.renderer.attributes.length ? this.renderer.attributes[n] : 0);\n\n                this.renderer.UploadAttributes(extendedLabelAttrs);\n\n\n                const extendedBorderAttrs = Array.from(\n                    { length: extendedCapacity * this.renderer.borderRenderer.AttributesPerComponent },\n                    (_, n) => n < this.renderer.borderRenderer.Attributes.length ? this.renderer.borderRenderer.Attributes[n] : 0);\n\n                this.renderer.UploadAttributes(extendedBorderAttrs);\n            }\n        })(this);\n    }\n\n    Create(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        lineHeight: number,\n        deleter: UIObservableTextListDeleter,\n        parent: UIObservablePositioningGroup | null = null): UITextList {\n\n        const textList = new UIObservableTextList(\n            position,\n            dimension,\n            zIndex,\n            text,\n            lineHeight,\n            this.borderWidth,\n            this.vertexAttributesTracker.Allocate(),\n            this.labelRenderer,\n            this.UIRenderer,\n            deleter,\n            parent);\n\n\n        if (parent !== null) {\n            parent.AppendChild(textList);\n        }\n\n        textList.Observable.Attach((component: UIObservableTextList) => this.UpdateAttributes(component))\n\n        this.UpdateAttributes(textList);\n\n        return textList;\n    }\n\n    Draw(): void {\n        this.gl.enable(this.gl.STENCIL_TEST);\n\n        this.gl.stencilFunc(\n            this.gl.ALWAYS,\n            1,\n            0xFF\n        );\n\n        this.gl.stencilOp(\n            this.gl.KEEP,\n            this.gl.REPLACE,// Rendering occurs behind the scene. See UITextListStencil.vert\n            this.gl.REPLACE\n        );\n\n        super.Draw();\n\n        this.gl.stencilFunc(\n            this.gl.EQUAL,\n            1,\n            0xFF\n        );\n\n        this.gl.stencilOp(\n            this.gl.KEEP,\n            this.gl.KEEP,\n            this.gl.KEEP\n        );\n\n        this.labelRenderer.Draw();\n\n        this.gl.clear(this.gl.STENCIL_BUFFER_BIT);\n        this.gl.disable(this.gl.STENCIL_TEST);\n\n        this.borderRenderer.Draw();\n    }\n\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n        this.labelRenderer.ViewProjection = mat;\n        this.borderRenderer.ViewProjection = mat;\n    }\n\n    get UIRenderer(): UICreator {\n        return this.uiRenderer;\n    }\n\n    set UIRenderer(renderer: UICreator) {\n        this.uiRenderer = renderer;\n    }\n\n    Dispose(): void {\n        this.borderRenderer.Dispose();\n\n        super.Dispose();\n    }\n\n    private UpdateAttributes(component: UIObservableTextList): void {\n        this.UpdateStencilAttributes(component);\n        this.UpdateBorderAttributes(component);\n    }\n\n    private UpdateStencilAttributes(component: UIObservableTextList): void {\n        let attrs: number[];\n        if (component.Visible) {\n            attrs = PrimitiveBuilder.AABBRectangle(\n                {\n                    x: component.AbsolutePosition.x + component.BorderWidth,\n                    y: component.AbsolutePosition.y + component.BorderWidth\n                },\n                {\n                    width: component.Dimension.width - 2 * component.BorderWidth,\n                    height: component.Dimension.height - 2 * component.BorderWidth\n                },\n                []);\n        } else {\n            attrs = new Array(this.AttributesPerComponent).fill(0);\n        }\n\n        this.UpdateComponentAttributes(attrs, component.Offset * this.AttributesPerComponent);\n    }\n\n    private UpdateBorderAttributes(component: UIObservableTextList): void {\n        let attrs: number[];\n\n        if (component.Visible) {\n            attrs = PrimitiveBuilder.AABBFrame(\n                component.AbsolutePosition,\n                component.Dimension,\n                component.BorderWidth,\n                [\n                    [this.settings.ZFar - component.ZIndex - this.zFarIncluded]\n                ]\n            );\n        } else {\n            attrs = new Array(this.borderRenderer.AttributesPerComponent).fill(0);\n        }\n\n        this.borderRenderer.UpdateComponentAttributes(attrs, component.Offset * this.borderRenderer.AttributesPerComponent);\n    }\n}\n\nInversify.bind(UITextListRenderer).toSelf().inTransientScope();\n\nexport type UITextListRendererFactory = (uiRenderer: UIRenderer) => UITextListRenderer;\n\nInversify\n    .bind<interfaces.Factory<UITextListRendererFactory>>(InjectionToken.UITextListRendererFactory)\n    .toFactory<UITextListRenderer, [UIRenderer]>(ctx => (uiRenderer: UIRenderer) => {\n        const instance = ctx.container.get(UITextListRenderer);\n        instance.UIRenderer = uiRenderer;\n\n        return instance;\n    });\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec3 a_vertex;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 1.0) ;\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nout vec4 out_color;\\n\\nvoid main() {\\n      out_color = vec4(0, 0, 0, 0);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec2 a_vertex;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position =  u_viewProject * vec4(a_vertex, 500, 1.0) ;\\n}\\n\"","import { inject, injectable } from \"inversify\";\n\nimport { ArrayHelper } from \"../ArrayHelper\";\nimport { Intersection } from \"../math/Intersection\";\nimport { Vec2 } from \"../Primitives\";\nimport { Mat4 } from \"../renderer/ShaderProgram\";\n\nimport { InputReceiver } from \"./InputReceiver\";\nimport { Dimension, UIAlert, UIAlertIconStyle, UIAlertStyle, UIAlertText } from \"./UIAlert/UIAlert\";\nimport { UIAlertRenderer } from \"./UIAlert/UIAlertRenderer\";\nimport { UIEditableTextList } from \"./UIEditableTextList/UIEditableTextList\";\nimport { UIEditableTextListRenderer, UIEditableTextListRendererFactory } from \"./UIEditableTextList/UIEditableTextListRenderer\";\nimport { UIButtonStyle, UIIconButton, UIIconStyle } from \"./UIIconButton/UIIconButton\";\nimport { UIIconButtonRenderer } from \"./UIIconButton/UIIconButtonRenderer\";\nimport { TouchCallback as IconButtonTouchCallback } from \"./UIIconButton/UIObservableIconButton\";\nimport { UILabel } from \"./UILabel/UILabel\";\nimport { UILabelRenderer } from \"./UILabel/UILabelRenderer\";\nimport { UIObservablePositioningGroup } from \"./UIObservablePositioningGroup\";\nimport { TouchCallback as TextButtonTouchCallback } from \"./UITextButton/UIObservableTextButton\";\nimport { UIObservableTextButton } from \"./UITextButton/UIObservableTextButton\";\nimport { UICaptionStyle, UITextButton } from \"./UITextButton/UITextButton\";\nimport { UITextList } from \"./UITextList/UITextList\";\nimport { UITextListRenderer, UITextListRendererFactory } from \"./UITextList/UITextListRenderer\";\n\nimport { MouseSelectEvent } from \"@/app/AppEventTransformer\";\nimport { InjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\n\nexport interface UICreator {\n    CreateIconButton(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        style: UIButtonStyle,\n        iconStyle: UIIconStyle,\n        touchCallback: IconButtonTouchCallback,\n        parent: UIObservablePositioningGroup | null): UIIconButton;\n\n    CreateTextButton(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        style: UIButtonStyle,\n        caption: UICaptionStyle,\n        touchCallback: TextButtonTouchCallback,\n        parent: UIObservablePositioningGroup | null): UITextButton;\n\n    CreateLabel(position: Vec2,\n        zIndex: number,\n        text: string,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null): UILabel;\n\n    CreateAlert(position: Vec2,\n        zIndex: number,\n        icon: UIAlertIconStyle,\n        text: UIAlertText,\n        style: UIAlertStyle,\n        parent: UIObservablePositioningGroup | null): UIAlert;\n\n    CreateTextList(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null): UITextList;\n\n    CreateEditableTextList(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null): UIEditableTextList;\n}\n\ninterface UIEditableTextListDescriptor {\n    renderer: UIEditableTextListRenderer;\n    editableTextList: UIEditableTextList;\n}\n\n@injectable()\nexport class UIRenderer implements UICreator {\n    private viewProjection: Mat4 | Float32Array | null = null;\n\n    private uiTextListRenderers: UITextListRenderer[] = [];\n\n    private uiEditableTextLists: UIEditableTextListDescriptor[] = [];\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext,\n        @inject(UIIconButtonRenderer) private iconButtonRenderer: UIIconButtonRenderer,\n        @inject(UIAlertRenderer) private alertRenderer: UIAlertRenderer,\n        @inject(UILabelRenderer) private labelsRenderer: UILabelRenderer,\n        @inject(InjectionToken.UITextListRendererFactory) private uiTextListRendererFactory: UITextListRendererFactory,\n        @inject(InjectionToken.UIEditableTextListRendererFactory) private uiEditableTextListRendererFactory: UIEditableTextListRendererFactory) {\n        this.alertRenderer.UIRenderer = this;\n    }\n\n    CreateIconButton(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        style: UIButtonStyle,\n        iconStyle: UIIconStyle,\n        touchCallback: IconButtonTouchCallback,\n        parent: UIObservablePositioningGroup | null = null): UIIconButton {\n        return this.iconButtonRenderer.Create(position, dimension, zIndex, style, iconStyle, touchCallback, parent);\n    }\n\n    CreateTextButton(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        style: UIButtonStyle,\n        caption: UICaptionStyle,\n        touchCallback: TextButtonTouchCallback,\n        parent: UIObservablePositioningGroup | null = null): UITextButton {\n        return new UIObservableTextButton(position, dimension, zIndex, style, caption, touchCallback, this, parent);\n    }\n\n    CreateLabel(position: Vec2,\n        zIndex: number,\n        text: string,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null = null): UILabel {\n        return this.labelsRenderer.Create(position, zIndex, text, lineHeight, parent);\n    }\n\n    CreateAlert(position: Vec2,\n        zIndex: number,\n        icon: UIAlertIconStyle,\n        text: UIAlertText,\n        style: UIAlertStyle,\n        parent: UIObservablePositioningGroup | null = null): UIAlert {\n        return this.alertRenderer.Create(position, zIndex, icon, text, style, parent);\n    }\n\n    CreateTextList(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null = null): UITextList {\n        const renderer = this.uiTextListRendererFactory(this);\n\n        if (this.viewProjection !== null) {\n            renderer.ViewProjection = this.viewProjection;\n        }\n\n        this.uiTextListRenderers.push(renderer);\n\n        return renderer.Create(\n            position,\n            dimension,\n            zIndex,\n            text,\n            lineHeight,\n            () => this.UIObservableTextListDeleter(renderer),\n            parent);\n    }\n\n    CreateEditableTextList(position: Vec2,\n        dimension: Dimension,\n        zIndex: number,\n        text: string,\n        lineHeight: number,\n        parent: UIObservablePositioningGroup | null = null): UIEditableTextList {\n        const renderer = this.uiEditableTextListRendererFactory(this);\n\n        if (this.viewProjection !== null) {\n            renderer.ViewProjection = this.viewProjection;\n        }\n\n\n        const descriptor: UIEditableTextListDescriptor = { renderer } as UIEditableTextListDescriptor;\n\n        const editableTextList = renderer.Create(\n            position,\n            dimension,\n            zIndex,\n            text,\n            lineHeight,\n            () => this.UIObservableEditableTextListDeleter(descriptor),\n            parent);\n\n        descriptor.editableTextList = editableTextList;\n\n        this.uiEditableTextLists.push(descriptor);\n\n        return editableTextList;\n    }\n\n    Touch(e: MouseSelectEvent): InputReceiver | boolean {\n        const touchResult = this.TouchAlerts(e.offsetX, e.offsetY) ||\n            this.TouchButtons(e.offsetX, e.offsetY) ||\n            this.TouchLabels(e.offsetX, e.offsetY);\n\n        return touchResult || (this.TouchEditableTextList(e.offsetX, e.offsetY) ?? false);\n    }\n\n    private TouchButtons(x: number, y: number): boolean {\n        const intersected = this.iconButtonRenderer.IconButtons\n            .filter(btn => Intersection.AABBRectanglePoint(\n                { x: btn.AbsolutePosition.x, y: btn.AbsolutePosition.y, width: btn.Dimension.width, height: btn.Dimension.height },\n                { x, y }));\n\n        if (intersected.length === 0) {\n            return false;\n        }\n\n        ArrayHelper\n            .Max(intersected, (a: UIIconButton, b: UIIconButton) => a.ZIndex < b.ZIndex)\n            .Touch();\n\n        return true;\n    }\n\n    private TouchLabels(x: number, y: number): boolean {\n        const intersected = this.labelsRenderer.Labels\n            .filter(label => Intersection.AABBRectanglePoint(\n                { x: label.AbsolutePosition.x, y: label.AbsolutePosition.y, width: label.Dimension.width, height: label.Dimension.height },\n                { x, y }));\n\n\n        if (intersected.length === 0) {\n            return false;\n        }\n\n        return true;\n    }\n\n    private TouchAlerts(x: number, y: number): boolean {\n        const intersected = this.alertRenderer.Alerts\n            .filter(alert => Intersection.AABBRectanglePoint(\n                { x: alert.AbsolutePosition.x, y: alert.AbsolutePosition.y, width: alert.Dimension.width, height: alert.Dimension.height },\n                { x, y }));\n\n\n        if (intersected.length === 0) {\n            return false;\n        }\n\n        intersected[0].Destroy();\n\n        return true;\n    }\n\n    private TouchEditableTextList(x: number, y: number): UIEditableTextList | null {\n        const intersected = this.uiEditableTextLists\n            .filter(desc => desc.editableTextList.Visible && Intersection.AABBRectanglePoint(\n                {\n                    x: desc.editableTextList.AbsolutePosition.x,\n                    y: desc.editableTextList.AbsolutePosition.y,\n                    width: desc.editableTextList.Dimension.width,\n                    height: desc.editableTextList.Dimension.height\n                },\n                { x, y }));\n\n\n        if (intersected.length === 0) {\n            return null;\n        }\n\n        return ArrayHelper\n            .Max(\n                intersected,\n                (a: UIEditableTextListDescriptor, b: UIEditableTextListDescriptor) => a.editableTextList.ZIndex < b.editableTextList.ZIndex)\n            .editableTextList;\n    }\n\n    private UIObservableTextListDeleter(renderer: UITextListRenderer): void {\n        this.uiTextListRenderers.splice(this.uiTextListRenderers.findIndex(x => x === renderer), 1);\n    }\n\n    private UIObservableEditableTextListDeleter(descriptor: UIEditableTextListDescriptor): void {\n        this.uiEditableTextLists.splice(this.uiEditableTextLists.findIndex(x => x === descriptor), 1);\n    }\n\n    Draw(): void {\n        this.alertRenderer.Draw();\n        this.iconButtonRenderer.Draw();\n        this.labelsRenderer.Draw();\n        this.uiTextListRenderers.forEach(x => x.Draw());\n        this.uiEditableTextLists.forEach(x => x.renderer.Draw());\n    }\n\n    set ViewProjection(projection: Mat4 | Float32Array) {\n        this.viewProjection = projection;\n\n        this.iconButtonRenderer.ViewProjection = projection;\n        this.labelsRenderer.ViewProjection = projection;\n        this.alertRenderer.ViewProjection = projection;\n        this.uiTextListRenderers.forEach(x => x.ViewProjection = projection);\n        this.uiEditableTextLists.forEach(x => x.renderer.ViewProjection = projection);\n    }\n}\n\nInversify.bind(UIRenderer).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { DebugControlsLayout } from \"./Layouts/DebugControlsLayout\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { PCDirection } from \"@/lib/befunge/CPU/CPU\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb } from \"@/lib/Primitives\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { HorizontalAnchor, UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\nexport interface PCDirectionCondition {\n    Direction?: PCDirection;\n}\n\nexport interface HeatmapToggleButtonState {\n    isShown: boolean;\n}\n\nexport enum DebugAction { RunNextBreakpoint, RunNextInstruction, Interrupt };\n\n@injectable()\nexport class DebugControls {\n    private static readonly DefaultButtonFillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n    private static readonly DefaultButtonOutlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n    private static readonly ToggleButtonOutlineColor: Rgb = [0, 0, 0];\n    private static readonly DefaultButtonIconColor: Rgb = [0.40784313725490196, 0.6235294117647059, 0.2196078431372549];\n    private static readonly DebugModeButtonIconColor: Rgb = [0.9411764705882353, 0.6392156862745098, 0.0392156862745098];\n    private static readonly BreakpointButtonIconColor: Rgb = [0.8980392156862745, 0.2235294117647059, 0.20784313725490197];\n    private static readonly ProfilerButtonIconColor: Rgb = [0.11764705882352941, 0.5647058823529412, 1];\n\n    private group: UIObservablePositioningGroup;\n\n    private executeButton: UIIconButton;\n\n    private debugButton: UIIconButton;\n    private debugMenuGroup: UIObservablePositioningGroup | null = null;\n\n    private breakpointMenuButton: UIIconButton;\n    private isBreakpointMenuOpen = false;\n    private breakpointMenuGroup: UIObservablePositioningGroup | null = null;\n\n    private heatmapButton: UIIconButton;\n\n    private readonly executeObservable = new ObservableController<void>();\n\n    private readonly debugObservable = new ObservableController<DebugAction>();\n\n    private readonly cellBreakpointObservable = new ObservableController<PCDirectionCondition>();\n    private readonly cellBreakpointDeleteObservable = new ObservableController<void>();\n\n    private isHeatmapShown = false;\n    private readonly heatmapObservable = new ObservableController<HeatmapToggleButtonState>();\n\n    private debugMode = false;\n\n    public DeactivateButton = false;\n\n    constructor(\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(DebugControlsLayout) private layout: DebugControlsLayout) {\n        this.group = new UIObservablePositioningGroup(\n            { x: 0, y: 60 },\n            { vertical: VerticalAnchor.Top, horizontal: HorizontalAnchor.Middle });\n\n        const margin = 10;\n        const buttonSideLength = 50;\n\n        this.executeButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: 0 },\n            { width: buttonSideLength, height: buttonSideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.Play, color: DebugControls.DefaultButtonIconColor },\n            _sender => this.executeObservable.Notify(),\n            this.group\n        );\n\n        this.debugButton = this.uiRenderer.CreateIconButton(\n            { x: buttonSideLength + margin, y: 0 },\n            { width: buttonSideLength, height: buttonSideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.PlayDebug, color: DebugControls.DefaultButtonIconColor },\n            _sender => this.debugObservable.Notify(DebugAction.RunNextBreakpoint),\n            this.group\n        );\n\n        this.breakpointMenuButton = this.uiRenderer.CreateIconButton(\n            { x: 2 * buttonSideLength + 2 * margin, y: 0 },\n            { width: buttonSideLength, height: buttonSideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.Breakpoint, color: DebugControls.BreakpointButtonIconColor },\n            _sender => this.ToggleBreakpointMenuButton(),\n            this.group\n        );\n\n        this.heatmapButton = this.uiRenderer.CreateIconButton(\n            { x: 3 * buttonSideLength + 3 * margin, y: 0 },\n            { width: buttonSideLength, height: buttonSideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.Heatmap, color: DebugControls.ProfilerButtonIconColor },\n            sender => this.ToggleHeatmap(sender),\n            this.group\n        );\n\n        this.layout.DebugGroup = this.group;\n    }\n\n    Resize(): void {\n        this.group.Resize();\n        this.breakpointMenuGroup?.Resize();\n        this.debugMenuGroup?.Resize();\n    }\n\n    get DebugMode(): boolean {\n        return this.debugMode;\n    }\n\n    set DebugMode(mode: boolean) {\n        if (mode !== this.debugMode) {\n            this.debugButton.Icon = {\n                icon: UIIcon.PlayDebug,\n                color: mode ? DebugControls.DebugModeButtonIconColor : DebugControls.DefaultButtonIconColor\n            };\n\n            const margin = 10;\n            const sideLength = 50;\n\n            if (mode) {\n                this.debugMenuGroup = new UIObservablePositioningGroup(\n                    {\n                        x: this.debugButton.AbsolutePosition.x / this.group.Scale,\n                        y: this.group.Position.y + 2 * margin + 2 * sideLength\n                    },\n                    { vertical: VerticalAnchor.Top });\n\n                const executeNextInstructionButton = this.uiRenderer.CreateIconButton(\n                    { x: 0, y: margin + sideLength },\n                    { width: sideLength, height: sideLength },\n                    1,\n                    { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n                    { icon: UIIcon.DebugStepInto, color: DebugControls.DebugModeButtonIconColor },\n                    _sender => this.debugObservable.Notify(DebugAction.RunNextInstruction),\n                    this.debugMenuGroup);\n\n                const stopDebuggingButton = this.uiRenderer.CreateIconButton(\n                    { x: 0, y: 0 },\n                    { width: sideLength, height: sideLength },\n                    1,\n                    { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n                    { icon: UIIcon.Stop, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n                    _sender => this.debugObservable.Notify(DebugAction.Interrupt),\n                    this.debugMenuGroup);\n            } else {\n                this.debugMenuGroup?.Destroy();\n                this.debugMenuGroup = null;\n            }\n\n            this.executeButton.Disable = mode;\n            this.heatmapButton.Disable = mode;\n        }\n\n        this.debugMode = mode;\n    }\n\n    get IsHeatmapShown(): boolean {\n        return this.isHeatmapShown;\n    }\n\n    get Execute(): Observable<void> {\n        return this.executeObservable;\n    }\n\n    get Debug(): Observable<DebugAction> {\n        return this.debugObservable;\n    }\n\n    get CellBreakopint(): Observable<PCDirectionCondition> {\n        return this.cellBreakpointObservable;\n    }\n\n    get CellBreakpointDelete(): Observable<void> {\n        return this.cellBreakpointDeleteObservable;\n    }\n\n    get Heatmap(): Observable<HeatmapToggleButtonState> {\n        return this.heatmapObservable;\n    }\n\n    private ToggleBreakpointMenuButton(): void {\n        if (this.isBreakpointMenuOpen) {\n            this.CloseCellBreakpointDirectionMenu();\n        } else {\n            this.ShowCellBreakpointDirectionMenu();\n        }\n    }\n\n    private ShowCellBreakpointDirectionMenu(): void {\n        this.isBreakpointMenuOpen = true;\n\n        this.breakpointMenuButton.Icon = { icon: UIIcon.Breakpoint, color: [0.4588235294117647, 0.4588235294117647, 0.4588235294117647] };\n\n        const margin = 10;\n        const sideLength = 50;\n        const totalButtons = 5 + +this.DeactivateButton;\n        this.breakpointMenuGroup = new UIObservablePositioningGroup(\n            {\n                x: this.breakpointMenuButton.AbsolutePosition.x / this.breakpointMenuButton.Scale,\n                y: this.group.Position.y + totalButtons * margin + totalButtons * sideLength\n            },\n            { vertical: VerticalAnchor.Top });\n\n        const breakpointAnyDirectionButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: 0 },\n            { width: sideLength, height: sideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.ArrowThinAll, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n            _sender => this.NotifyWithPCLocationCondition({}),\n            this.breakpointMenuGroup);\n\n        const breakpointLeftDirectionButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: margin + sideLength },\n            { width: sideLength, height: sideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.ArrowThinLeft, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n            _sender => this.NotifyWithPCLocationCondition({ Direction: PCDirection.Left }),\n            this.breakpointMenuGroup);\n\n        const breakpointUpDirectionButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: 2 * margin + 2 * sideLength },\n            { width: sideLength, height: sideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.ArrowThinUp, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n            _sender => this.NotifyWithPCLocationCondition({ Direction: PCDirection.Up }),\n            this.breakpointMenuGroup);\n\n        const breakpointRightDirectionButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: 3 * margin + 3 * sideLength },\n            { width: sideLength, height: sideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.ArrowThinRight, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n            _sender => this.NotifyWithPCLocationCondition({ Direction: PCDirection.Right }),\n            this.breakpointMenuGroup);\n\n        const breakpointDownDirectionButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: 4 * margin + 4 * sideLength },\n            { width: sideLength, height: sideLength },\n            1,\n            { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n            { icon: UIIcon.ArrowThinDown, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n            _sender => this.NotifyWithPCLocationCondition({ Direction: PCDirection.Down }),\n            this.breakpointMenuGroup);\n\n        if (this.DeactivateButton) {\n            const breakpointDeactivateButton = this.uiRenderer.CreateIconButton(\n                { x: 0, y: 5 * margin + 5 * sideLength },\n                { width: sideLength, height: sideLength },\n                1,\n                { fillColor: DebugControls.DefaultButtonFillColor, outlineColor: DebugControls.DefaultButtonOutlineColor },\n                { icon: UIIcon.Delete, color: [0.8980392156862745, 0.2235294117647059, 0.20784313725490197] },\n                _sender => this.NotifyWithCellBreakpointDeactivation(),\n                this.breakpointMenuGroup);\n        }\n    }\n\n    private NotifyWithPCLocationCondition(direction: PCDirectionCondition): void {\n        this.CloseCellBreakpointDirectionMenu();\n\n        this.cellBreakpointObservable.Notify(direction);\n    }\n\n    private NotifyWithCellBreakpointDeactivation(): void {\n        this.CloseCellBreakpointDirectionMenu();\n\n        this.cellBreakpointDeleteObservable.Notify();\n    }\n\n    private CloseCellBreakpointDirectionMenu(): void {\n        this.isBreakpointMenuOpen = false;\n\n        this.breakpointMenuButton.Icon = { icon: UIIcon.Breakpoint, color: DebugControls.BreakpointButtonIconColor };\n\n        this.breakpointMenuGroup?.Destroy();\n        this.breakpointMenuGroup = null;\n    }\n\n    private ToggleHeatmap(component: UIIconButton): void {\n        this.isHeatmapShown = !this.isHeatmapShown;\n\n        const feedback: HeatmapToggleButtonState = { isShown: this.isHeatmapShown };\n        this.heatmapObservable.Notify(feedback);\n\n        if (feedback.isShown === this.isHeatmapShown) {\n\n            const outlineColor = this.isHeatmapShown ?\n                DebugControls.ToggleButtonOutlineColor :\n                DebugControls.DefaultButtonOutlineColor;\n\n            component.Style = { ...component.Style, outlineColor };\n\n            if (this.isHeatmapShown) {\n                this.CloseCellBreakpointDirectionMenu();\n            }\n\n            this.executeButton.Disable = this.isHeatmapShown;\n            this.debugButton.Disable = this.isHeatmapShown;\n            this.breakpointMenuButton.Disable = this.isHeatmapShown;\n        }\n\n        this.isHeatmapShown = feedback.isShown;\n    }\n}\n\nInversify.bind(DebugControls).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { HeadlineControlsLayout } from \"./Layouts/HeadlineControlsLayout\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\nimport { Dimension } from \"@/lib/UI/UIComponent\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\n@injectable()\nexport class EditControls {\n    private group: UIObservablePositioningGroup;\n\n    private selectButton: UIIconButton;\n    private cutButton: UIIconButton;\n    private copyButton: UIIconButton;\n    private pasteButton: UIIconButton;\n    private deleteButton: UIIconButton;\n\n    private selectObservable = new ObservableController<void>();\n    private cutObservable = new ObservableController<void>();\n    private copyObservable = new ObservableController<void>();\n    private pasteObservable = new ObservableController<void>();\n    private deleteObservable = new ObservableController<void>();\n\n    constructor(\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(HeadlineControlsLayout) private layout: HeadlineControlsLayout) {\n        const fillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n        const outlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n        const buttonIconColor: Rgb = [0.17254901960784313, 0.24313725490196078, 0.3137254901960784];\n\n        const margin = 10;\n        const btnSideLength = 30;\n\n        this.group = new UIObservablePositioningGroup(\n            { x: 9 * margin + 6 * btnSideLength, y: margin + btnSideLength },\n            { vertical: VerticalAnchor.Top }\n        );\n\n        this.selectButton = this.uiRenderer.CreateIconButton({ x: 0, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Select, color: buttonIconColor },\n            _sender => this.selectObservable.Notify(),\n            this.group\n        );\n\n        this.cutButton = this.uiRenderer.CreateIconButton({ x: margin + btnSideLength, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Cut, color: buttonIconColor },\n            _sender => this.cutObservable.Notify(),\n            this.group\n        );\n\n        this.copyButton = this.uiRenderer.CreateIconButton({ x: 2 * margin + 2 * btnSideLength, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Copy, color: buttonIconColor },\n            _sender => this.copyObservable.Notify(),\n            this.group\n        );\n\n        this.pasteButton = this.uiRenderer.CreateIconButton({ x: 3 * margin + 3 * btnSideLength, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Paste, color: buttonIconColor },\n            _sender => this.pasteObservable.Notify(),\n            this.group\n        );\n\n        this.deleteButton = this.uiRenderer.CreateIconButton({ x: 4 * margin + 4 * btnSideLength, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.EditDelete, color: buttonIconColor },\n            _sender => this.deleteObservable.Notify(),\n            this.group\n        );\n\n        this.layout.Watch(this.group);\n    }\n\n    Resize(): void {\n        this.group.Resize();\n    }\n\n    get Disable(): boolean {\n        return this.selectButton.Disable;\n    }\n\n    set Disable(value: boolean) {\n        this.selectButton.Disable = value;\n        this.cutButton.Disable = value;\n        this.copyButton.Disable = value;\n        this.pasteButton.Disable = value;\n        this.deleteButton.Disable = value;\n    }\n\n    get SelectObservable(): Observable<void> {\n        return this.selectObservable;\n    }\n\n    get CutObservable(): Observable<void> {\n        return this.cutObservable;\n    }\n\n    get CopyObservable(): Observable<void> {\n        return this.copyObservable;\n    }\n\n    get PasteObservable(): Observable<void> {\n        return this.pasteObservable;\n    }\n\n    get DeleteObservable(): Observable<void> {\n        return this.deleteObservable;\n    }\n\n    get Position(): Vec2 {\n        return this.group.AbsolutePosition;\n    }\n\n    get Dimension(): Dimension {\n        return this.group.Dimension;\n    }\n}\n\nInversify.bind(EditControls).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { EditionDirection } from \"../CodeEditor/CodeEditorService\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\ninterface EditDirection {\n    group: UIObservablePositioningGroup;\n    left: UIIconButton;\n    up: UIIconButton;\n    right: UIIconButton;\n    down: UIIconButton;\n}\n\nexport interface EditDirectionControlsBoundaries {\n    lb: Vec2;\n    rt: Vec2;\n}\n\n@injectable()\nexport class EditDirectionControls {\n    private static CurrentDirectionInactiveIconColor: Rgb = [0.17254901960784313, 0.24313725490196078, 0.3137254901960784];\n    private static CurrentDirrectionActiveIconColor: Rgb = [0.1607843137254902, 0.5019607843137255, 0.7254901960784313];\n\n    private group: UIObservablePositioningGroup;\n    private editDirectionControls!: EditDirection;\n    private currentDirectionControl!: UIIconButton;\n\n    private editDirectionObservable = new ObservableController<EditionDirection>();\n\n    constructor(@inject(UIRenderer) private uiRenderer: UIRenderer) {\n        const buttonMargin = 5;\n        const [buttonWidth, btnHeight] = [37.5, 25];\n\n        const fillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n        const outlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n\n        this.group = new UIObservablePositioningGroup(\n            {\n                x: 10,\n                y: 2 * buttonWidth + 3 * buttonMargin + btnHeight + 50\n            },\n            { vertical: VerticalAnchor.Top });\n\n        this.editDirectionControls = {\n            group: this.group,\n            left: this.uiRenderer.CreateIconButton(\n                { x: 0, y: buttonWidth + buttonMargin },\n                { width: buttonWidth, height: btnHeight },\n                1,\n                { fillColor, outlineColor },\n                { icon: UIIcon.ArrowLeft, color: EditDirectionControls.CurrentDirectionInactiveIconColor },\n                sender => this.UpdateEditDirection(sender, EditionDirection.Left),\n                this.group),\n            up: this.uiRenderer.CreateIconButton(\n                { x: buttonWidth + buttonMargin / 2 - btnHeight / 2, y: buttonWidth + 2 * buttonMargin + btnHeight },\n                { width: btnHeight, height: buttonWidth },\n                1,\n                { fillColor, outlineColor },\n                { icon: UIIcon.ArrowUp, color: EditDirectionControls.CurrentDirectionInactiveIconColor },\n                sender => this.UpdateEditDirection(sender, EditionDirection.Up),\n                this.group),\n            right: this.uiRenderer.CreateIconButton(\n                { x: buttonWidth + buttonMargin, y: buttonWidth + buttonMargin },\n                { width: buttonWidth, height: btnHeight },\n                1,\n                { fillColor, outlineColor },\n                { icon: UIIcon.ArrowRight, color: EditDirectionControls.CurrentDirrectionActiveIconColor },\n                sender => this.UpdateEditDirection(sender, EditionDirection.Right),\n                this.group),\n            down: this.uiRenderer.CreateIconButton(\n                { x: buttonWidth + buttonMargin / 2 - btnHeight / 2, y: 0 },\n                { width: btnHeight, height: buttonWidth },\n                1,\n                { fillColor, outlineColor },\n                { icon: UIIcon.ArrowDown, color: EditDirectionControls.CurrentDirectionInactiveIconColor },\n                sender => this.UpdateEditDirection(sender, EditionDirection.Down),\n                this.group)\n        };\n\n        this.currentDirectionControl = this.editDirectionControls.right;\n    }\n\n    get EditDirectionObservable(): Observable<EditionDirection> {\n        return this.editDirectionObservable;\n    }\n\n    Resize(): void {\n        this.group.Resize();\n    }\n\n    ForceEditDirection(direction: EditionDirection): void {\n        this.currentDirectionControl.Icon = {\n            ...this.currentDirectionControl.Icon,\n            color: EditDirectionControls.CurrentDirectionInactiveIconColor\n        };\n\n        const control = direction === EditionDirection.Left ? this.editDirectionControls.left :\n            direction === EditionDirection.Up ? this.editDirectionControls.up :\n                direction === EditionDirection.Right ? this.editDirectionControls.right :\n                    this.editDirectionControls.down;\n\n        control.Icon = {\n            ...control.Icon,\n            color: EditDirectionControls.CurrentDirrectionActiveIconColor\n        };\n\n        this.currentDirectionControl = control;\n    }\n\n    private UpdateEditDirection(sender: UIIconButton, direction: EditionDirection): void {\n        if (sender === this.currentDirectionControl) {\n            return;\n        }\n\n        this.currentDirectionControl.Icon = {\n            ...this.currentDirectionControl.Icon,\n            color: EditDirectionControls.CurrentDirectionInactiveIconColor\n        };\n\n        sender.Icon = {\n            ...sender.Icon,\n            color: EditDirectionControls.CurrentDirrectionActiveIconColor\n        };\n\n        this.currentDirectionControl = sender;\n        this.editDirectionObservable.Notify(direction)\n    }\n\n    get Boundaries(): EditDirectionControlsBoundaries {\n        const dimension = this.group.Dimension;\n\n        return {\n            lb: this.group.AbsolutePosition,\n            rt: {\n                x: this.group.AbsolutePosition.x + dimension.width,\n                y: this.group.AbsolutePosition.y + dimension.height\n            }\n        };\n    }\n}\n\nInversify.bind(EditDirectionControls).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { HeadlineControlsLayout } from \"./Layouts/HeadlineControlsLayout\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb } from \"@/lib/Primitives\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\n@injectable()\nexport class FileControls {\n    private group: UIObservablePositioningGroup;\n\n    private openButton: UIIconButton;\n    private saveButton: UIIconButton;\n    private shareButton: UIIconButton;\n    private settingsButton: UIIconButton;\n\n    private openFromDiskObservable = new ObservableController<void>();\n    private saveToDiskObservable = new ObservableController<void>();\n    private shareObservable = new ObservableController<void>();\n    private openSettingsObservable = new ObservableController<void>();\n\n    constructor(\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(HeadlineControlsLayout) private layout: HeadlineControlsLayout) {\n        const fillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n        const outlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n        const openButtonIconColor: Rgb = [0.9411764705882353, 0.6392156862745098, 0.0392156862745098];\n        const saveButtonIconColor: Rgb = [0.08235294117647059, 0.396078431372549, 0.7529411764705882];\n        const settingsButtonIconColor: Rgb = [0.17254901960784313, 0.24313725490196078, 0.3137254901960784];\n        const margin = 10;\n        const btnSideLength = 30;\n\n        this.group = new UIObservablePositioningGroup(\n            { x: margin, y: margin + btnSideLength },\n            { vertical: VerticalAnchor.Top });\n\n        this.openButton = this.uiRenderer.CreateIconButton({ x: 0, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Open, color: openButtonIconColor },\n            _sender => this.openFromDiskObservable.Notify(),\n            this.group\n        );\n\n        this.saveButton = this.uiRenderer.CreateIconButton({ x: btnSideLength + margin, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Save, color: saveButtonIconColor },\n            _sender => this.saveToDiskObservable.Notify(),\n            this.group\n        );\n        this.saveButton.Disable = true;\n\n        this.shareButton = this.uiRenderer.CreateIconButton({ x: 2 * btnSideLength + 2 * margin, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Share, color: saveButtonIconColor },\n            _sender => this.shareObservable.Notify(),\n            this.group\n        );\n        this.shareButton.Disable = true;\n\n        this.settingsButton = this.uiRenderer.CreateIconButton({ x: 3 * btnSideLength + 3 * margin, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Settings, color: settingsButtonIconColor },\n            _sender => this.openSettingsObservable.Notify(),\n            this.group\n        );\n\n        this.layout.Watch(this.group);\n    }\n\n    Resize(): void {\n        this.group.Resize();\n    }\n\n    get ShareDisabled(): boolean {\n        return this.shareButton.Disable;\n    }\n\n    set ShareDisabled(value: boolean) {\n        this.saveButton.Disable = value;\n        this.shareButton.Disable = value;\n    }\n\n    get OpenFromDiskDisabled(): boolean {\n        return this.openButton.Disable;\n    }\n\n    set OpenFromDiskDisabled(value: boolean) {\n        this.openButton.Disable = value;\n    }\n\n    get OpenFromDiskObservable(): Observable<void> {\n        return this.openFromDiskObservable;\n    }\n\n    get SaveToDiskObservable(): Observable<void> {\n        return this.saveToDiskObservable;\n    }\n\n    get ShareObservable(): Observable<void> {\n        return this.shareObservable;\n    }\n\n    get OpenSettingsObservable(): Observable<void> {\n        return this.openSettingsObservable;\n    }\n}\n\nInversify.bind(FileControls).toSelf().inSingletonScope();","import { injectable } from \"inversify\";\n\nimport { Command } from \"./Commands/Command\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\n\n@injectable()\nexport class AppHistory {\n    private history: Command[] = [];\n\n    private cursor = -1;\n\n    private updateObservable = new ObservableController<void>();\n\n    Push(command: Command): void {\n        if (this.CanRedo) {\n            this.history.splice(this.cursor + 1);\n        }\n\n        this.history.push(command);\n        this.cursor = this.history.length - 1;\n\n        this.updateObservable.Notify();\n    }\n\n    Undo(): void {\n        if (!this.CanUndo) {\n            return;\n        }\n\n        this.history[this.cursor--].Undo();\n\n        this.updateObservable.Notify();\n    }\n\n    Redo(): void {\n        if (!this.CanRedo) {\n            return;\n        }\n\n        this.history[++this.cursor].Apply();\n\n        this.updateObservable.Notify();\n    }\n\n    Reset(): void {\n        this.history.length = 0;\n        this.cursor = -1;\n\n        this.updateObservable.Notify();\n    }\n\n    get CanUndo(): boolean {\n        return this.cursor >= 0;\n    }\n\n    get CanRedo(): boolean {\n        return this.cursor < this.history.length - 1;\n    }\n\n    get UpdateObservable(): Observable<void> {\n        return this.updateObservable;\n    }\n}\n\nInversify.bind(AppHistory).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { AppHistory } from \"../History/AppHistory\";\n\nimport { HeadlineControlsLayout } from \"./Layouts/HeadlineControlsLayout\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb } from \"@/lib/Primitives\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\n@injectable()\nexport class HistoryControls {\n    private group: UIObservablePositioningGroup;\n\n    private undoButton: UIIconButton;\n    private redoButton: UIIconButton;\n\n    private undoObservable = new ObservableController<void>();\n\n    private redoObservable = new ObservableController<void>();\n\n    constructor(\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(AppHistory) private history: AppHistory,\n        @inject(HeadlineControlsLayout) private layout: HeadlineControlsLayout) {\n        const fillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n        const outlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n        const buttonIconColor: Rgb = [0.08235294117647059, 0.396078431372549, 0.7529411764705882];\n\n        const margin = 10;\n        const btnSideLength = 30;\n\n        this.group = new UIObservablePositioningGroup(\n            { x: 6 * margin + 4 * btnSideLength, y: margin + btnSideLength },\n            { vertical: VerticalAnchor.Top });\n\n        this.undoButton = this.uiRenderer.CreateIconButton({ x: 0, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Undo, color: buttonIconColor },\n            _sender => this.undoObservable.Notify(),\n            this.group\n        );\n        this.undoButton.Disable = true;\n\n        this.redoButton = this.uiRenderer.CreateIconButton({ x: btnSideLength + margin, y: 0 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Redo, color: buttonIconColor },\n            _sender => this.redoObservable.Notify(),\n            this.group\n        );\n        this.redoButton.Disable = true;\n\n        this.history.UpdateObservable.Attach(() => this.UpdateButtonsAvailability());\n\n        this.layout.Watch(this.group)\n    }\n\n    Resize(): void {\n        this.group.Resize();\n    }\n\n    get CanUndo(): boolean {\n        return this.undoButton.Disable;\n    }\n\n    set CanUndo(value: boolean) {\n        if (this.undoButton.Disable !== value) {\n            this.undoButton.Disable = value;\n        }\n    }\n\n    get CanRedo(): boolean {\n        return this.redoButton.Disable;\n    }\n\n    set CanRedo(value: boolean) {\n        if (this.redoButton.Disable !== value) {\n            this.redoButton.Disable = value;\n        }\n    }\n\n    get UndoObservable(): Observable<void> {\n        return this.undoObservable;\n    }\n\n    get RedoObservable(): Observable<void> {\n        return this.redoObservable;\n    }\n\n    Lock(): void {\n        this.undoButton.Disable = true;\n        this.redoButton.Disable = true;\n    }\n\n    Unlock(): void {\n        this.UpdateButtonsAvailability();\n    }\n\n    private UpdateButtonsAvailability(): void {\n        this.undoButton.Disable = !this.history.CanUndo;\n        this.redoButton.Disable = !this.history.CanRedo;\n    }\n}\n\nInversify.bind(HistoryControls).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"../AppSettings\";\nimport { InjectionToken } from \"../InjectionToken\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { ExceptionTrap } from \"@/lib/ExceptionTrap\";\nimport { FontGlyphCollection, FontGlyphCollectionFactory } from \"@/lib/font/FontGlyphCollection\";\nimport { Rgb } from \"@/lib/Primitives\";\nimport { SelfBind } from \"@/lib/SelfBind\";\nimport { UIEditableTextList } from \"@/lib/UI/UIEditableTextList/UIEditableTextList\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\nimport { UITextList } from \"@/lib/UI/UITextList/UITextList\";\n\n@injectable()\nexport class IOControls {\n    private group!: UIObservablePositioningGroup;\n\n    private outputTextList: UITextList;\n    private inputEditableTextList: UIEditableTextList;\n\n    private inputButton: UIIconButton;\n    private outputButton: UIIconButton;\n\n    private fontGlyphCollection: FontGlyphCollection | null = null;\n\n    private readonly maxPanelWidth = 800;\n\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(InjectionToken.FontGlyphCollectionFactory) private fontGlyphCollectionFactory: FontGlyphCollectionFactory) {\n        const fillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n        const outlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n        const btnIconColor: Rgb = [0.17254901960784313, 0.24313725490196078, 0.3137254901960784];\n\n        const margin = 10;\n        const btnSideLength = 25;\n        const textListHeight = 100;\n\n        this.group = new UIObservablePositioningGroup({ x: 145, y: 10 }, { vertical: VerticalAnchor.Bottom });\n        this.inputButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: textListHeight + margin / 2 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Input, color: btnIconColor },\n            _sender => this.SwitchTab(true),\n            this.group);\n\n\n        this.outputButton = this.uiRenderer.CreateIconButton(\n            { x: btnSideLength + margin, y: textListHeight + margin / 2 },\n            { width: btnSideLength, height: btnSideLength },\n            1,\n            { fillColor, outlineColor },\n            { icon: UIIcon.Output, color: btnIconColor },\n            _sender => this.SwitchTab(false),\n            this.group);\n        this.outputButton.Disable = true;\n\n        this.outputTextList = this.uiRenderer.CreateTextList(\n            { x: 0, y: 0 },\n            { width: this.maxPanelWidth, height: textListHeight },\n            1,\n            '',\n            32,\n            this.group);\n\n        this.inputEditableTextList = this.uiRenderer.CreateEditableTextList(\n            { x: 0, y: 0 },\n            { width: this.maxPanelWidth, height: textListHeight },\n            1,\n            '',\n            32,\n            this.group);\n        this.inputEditableTextList.Visible = false;\n    }\n\n    private SwitchTab(inputTab: boolean): void {\n        this.inputButton.Disable = inputTab;\n        this.outputButton.Disable = !inputTab;\n\n        this.inputEditableTextList.Visible = inputTab;\n        this.outputTextList.Visible = !inputTab;\n\n        if (this.outputTextList.Visible) {\n            this.outputTextList.ScrollToTop();\n        }\n    }\n\n    get Output(): string {\n        return this.outputTextList.Text;\n    }\n\n    set Output(text: string) {\n        this.outputTextList.Text = this.NewLineFormatter(text);\n\n        this.outputTextList.ScrollToTop();\n    }\n\n    get Input(): string {\n        return this.inputEditableTextList.Text;\n    }\n\n    Resize(): void {\n        this.inputEditableTextList.Dimension = {\n            width: this.PanelWidth,\n            height: this.inputEditableTextList.Dimension.height / this.inputEditableTextList.Scale\n        };\n\n        this.outputTextList.Dimension = {\n            width: this.PanelWidth,\n            height: this.inputEditableTextList.Dimension.height / this.inputEditableTextList.Scale\n        };\n\n        this.group.Resize();\n    }\n\n\n    get PanelWidth(): number {\n        const widthToFit = this.settings.ViewDimension.Width - this.group.AbsolutePosition.x;\n        return Math.min(this.maxPanelWidth, widthToFit) / this.group.Scale;\n    }\n\n    private NewLineFormatter(str: string): string {\n        const fontGlyphCollection = this.RetrieveFontGlyphCollection();\n\n        const strArr = [...str];\n        const padding = 20 * this.group.Scale;\n\n        for (let n = 0, width = padding; n < strArr.length; ++n) {\n            const symbol = strArr[n];\n\n            if (symbol === '\\n') {\n                width = padding;\n                continue;\n            }\n\n            const glyph = ExceptionTrap\n                .Try(SelfBind(fontGlyphCollection, 'Lookup'), symbol)\n                .CatchFn(SelfBind(fontGlyphCollection, 'Lookup'), '?');\n            if (width + glyph.width > this.outputTextList.Dimension.width) {\n                width = padding;\n                strArr.splice(n, 0, '\\n');\n            } else {\n                width += glyph.width;\n            }\n        }\n\n        return strArr.join('');\n    }\n\n    private RetrieveFontGlyphCollection(): FontGlyphCollection {\n        if (this.fontGlyphCollection !== null && this.fontGlyphCollection.LineHeight === this.outputTextList.LineHeight * this.outputTextList.Scale) {\n            return this.fontGlyphCollection;\n        }\n\n        this.fontGlyphCollection = this.fontGlyphCollectionFactory({ ASCIIRange: { Start: ' ', End: '~' }, Font: { Name: 'Roboto', Size: this.outputTextList.LineHeight * this.outputTextList.Scale } });\n\n        return this.fontGlyphCollection;\n    }\n}\n\nInversify.bind(IOControls).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"../AppSettings\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Rgb } from \"@/lib/Primitives\";\nimport { UIAlert, UIAlertIconStyle, UIAlertStyle, UIAlertText } from \"@/lib/UI/UIAlert/UIAlert\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { HorizontalAnchor, UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\n@injectable()\nexport class SnackbarControls {\n    private group: UIObservablePositioningGroup;\n\n    private snackbar: UIAlert | null = null;\n\n    private contentColor: Rgb = [0.9, 0.9, 0.9];\n\n    private lineHeight = 24;\n\n    private showTime = 5000;\n\n    private hideTimer = -1;\n\n    constructor(\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(AppSettings) private settings: AppSettings) {\n        this.group = new UIObservablePositioningGroup(\n            { x: 0, y: 0 },\n            { vertical: VerticalAnchor.Bottom, horizontal: HorizontalAnchor.Middle });\n    }\n\n    Show(icon: UIAlertIconStyle, text: UIAlertText, style: UIAlertStyle): void {\n        if (this.snackbar !== null) {\n            this.Hide();\n        }\n\n        this.snackbar = this.uiRenderer.CreateAlert(\n            { x: 0, y: 0 },\n            1,\n            icon,\n            text,\n            style,\n            this.group);\n\n        this.LimitToViewportWidth();\n\n        this.hideTimer = setTimeout(() => this.Hide(), this.showTime);\n    }\n\n    private LimitToViewportWidth(): void {\n        const alertWidth = this.group.Dimension.width;\n        if (alertWidth > this.settings.ViewDimension.Width) {\n            const targetScale = this.settings.ViewDimension.Width / alertWidth;\n            this.group.Scale = targetScale;\n        }\n    }\n\n    ShowError(msg: string): void {\n        this.Show(\n            { icon: UIIcon.ExclamationCircle, color: this.contentColor },\n            { text: msg, lineHeight: this.lineHeight, color: this.contentColor },\n            { fillColor: [0.83, 0.18, 0.18] }\n        );\n    }\n\n    ShowWarning(msg: string): void {\n        this.Show(\n            { icon: UIIcon.ExclamationTriangle, color: this.contentColor },\n            { text: msg, lineHeight: this.lineHeight, color: this.contentColor },\n            { fillColor: [0.93, 0.42, 0.01] }\n        );\n    }\n\n    ShowInformation(msg: string): void {\n        this.Show(\n            { icon: UIIcon.ExclamationCircle, color: this.contentColor },\n            { text: msg, lineHeight: this.lineHeight, color: this.contentColor },\n            { fillColor: [0.1, 0.53, 0.82] }\n        );\n    }\n\n    ShowSuccess(msg: string): void {\n        this.Show(\n            { icon: UIIcon.ExclamationCircle, color: this.contentColor },\n            { text: msg, lineHeight: this.lineHeight, color: this.contentColor },\n            { fillColor: [0.18, 0.49, 0.2] }\n        );\n    }\n\n    Hide(): void {\n        this.snackbar?.Destroy();\n        this.snackbar = null;\n        clearTimeout(this.hideTimer);\n    }\n\n    Resize(): void {\n        this.group.Resize();\n    }\n}\n\nInversify.bind(SnackbarControls).toSelf().inSingletonScope();\n","export function EscapeString(str: string): string {\n    return [...str].map(x => Replacer(x)).join();\n}\n\nfunction Replacer(symbol: string): string {\n    if (symbol === '\\n') {\n        return '\\\\n';\n    } else if (symbol === '\\r') {\n        return '\\\\r';\n    } else {\n        return symbol;\n    }\n}\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"../AppSettings\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { EscapeString } from \"@/lib/font/EscapeString\";\nimport { UIObservablePositioningGroup, VerticalAnchor } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\nimport { UITextList } from \"@/lib/UI/UITextList/UITextList\";\n\n@injectable()\nexport class StackControls {\n    private group: UIObservablePositioningGroup;\n\n    private stackTextList: UITextList;\n\n    constructor(\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(AppSettings) private settings: AppSettings) {\n        this.group = new UIObservablePositioningGroup(\n            {\n                x: 10,\n                y: 480\n            },\n            { vertical: VerticalAnchor.Top }\n        );\n\n        this.stackTextList = this.uiRenderer.CreateTextList(\n            { x: 0, y: 0 },\n            { width: 130, height: 300 },\n            1,\n            '',\n            32,\n            this.group);\n\n        this.stackTextList.Visible = false;\n    }\n\n    ScrollToTop(): void {\n        this.stackTextList.ScrollToTop();\n    }\n\n    Resize(): void {\n        this.group.Resize();\n    }\n\n    set Stack(stack: number[]) {\n        this.stackTextList.Text = [...stack]\n            .reverse()\n            .map(x => `${x} (${EscapeString(String.fromCharCode(x))})`)\n            .join('\\n')\n    }\n\n    get Visible(): boolean {\n        return this.stackTextList.Visible;\n    }\n\n    set Visible(visible: boolean) {\n        this.stackTextList.Visible = visible;\n    }\n}\n\nInversify.bind(StackControls).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { EnumSize } from \"@/lib/EnumSize\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\nimport { Dimension } from \"@/lib/UI/UIComponent\";\nimport { UIIcon } from \"@/lib/UI/UIIcon\";\nimport { UIIconButton } from \"@/lib/UI/UIIconButton/UIIconButton\";\nimport { HorizontalAnchor, UIObservablePositioningGroup } from \"@/lib/UI/UIObservablePositioningGroup\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\nimport { UITextButton } from \"@/lib/UI/UITextButton/UITextButton\";\n\nenum KeyboardShiftMode { Lovercase, Uppercase, Secondary };\n\ninterface KeyboardStateFetcher {\n    shift: () => KeyboardShiftMode;\n    ascii: () => boolean;\n}\n\nclass KeyboardButtonLayout {\n    private symbols: string[];\n\n    constructor(\n        private keyboardState: KeyboardStateFetcher,\n        primary: string,\n        secondary?: string) {\n        this.symbols = secondary === undefined ?\n            [primary] :\n            [secondary, primary];\n    }\n\n    get Caption(): string {\n        let primary = this.symbols[this.symbols.length - 1];\n        primary = this.IsUppercase ? primary.toUpperCase() : primary.toLowerCase();\n\n        if (this.keyboardState.shift() !== KeyboardShiftMode.Secondary && this.keyboardState.ascii()) {\n            primary = primary.charCodeAt(0).toString();\n        }\n\n        if (this.HasSecondary) {\n            let secondary = this.symbols[0];\n\n            if (this.keyboardState.shift() === KeyboardShiftMode.Secondary && this.keyboardState.ascii()) {\n                secondary = secondary.charCodeAt(0).toString();\n            }\n\n            return `${secondary}\\n${primary}`;\n        } else {\n            return primary;\n        }\n    }\n\n    get Symbol(): string {\n        const symbol = this.symbols[this.Index];\n\n        return this.IsUppercase ? symbol.toUpperCase() : symbol.toLowerCase();\n    }\n\n    get CaptionDelimiter(): number {\n        return this.keyboardState.shift() === KeyboardShiftMode.Secondary && this.keyboardState.ascii() ?\n            this.symbols[0].charCodeAt(0).toString().length :\n            this.symbols[0].length;\n    }\n\n    get HasSecondary(): boolean {\n        return this.symbols.length > 1;\n    }\n\n    private get Index(): number {\n        return +(this.keyboardState.shift() === KeyboardShiftMode.Lovercase ||\n            this.keyboardState.shift() === KeyboardShiftMode.Uppercase) % this.symbols.length;\n    }\n\n    private get IsUppercase(): boolean {\n        return this.keyboardState.shift() === KeyboardShiftMode.Uppercase;\n    }\n}\n\ntype ButtonDeleter = () => void;\n\ninterface SymbolButtonDescriptor {\n    button: UITextButton;\n    layout: KeyboardButtonLayout;\n}\n\n@injectable()\nexport class VirtualKeyboardControls {\n    private readonly fillColor: Rgb = [0.9254901960784314, 0.9411764705882353, 0.9450980392156862];\n    private readonly outlineColor: Rgb = [0.4980392156862745, 0.5490196078431373, 0.5529411764705883];\n    private zIndex = 5;\n\n    private toggleKeyboardGroup: UIObservablePositioningGroup;\n    private toggleKeyboard = false;\n    private toggleKeyboardButton!: UIIconButton;\n    private shiftIconColor = {\n        lovercase: [0.17254901960784313, 0.24313725490196078, 0.3137254901960784] as Rgb,\n        uppercase: [0.08235294117647059, 0.396078431372549, 0.7529411764705882] as Rgb,\n        secondary: [0.5568627450980392, 0.26666666666666666, 0.6784313725490196] as Rgb\n    };\n\n    private buttonCaptionColor = {\n        inactive: [0.7411764705882353, 0.7411764705882353, 0.7411764705882353] as Rgb,\n        active: [0.17254901960784313, 0.24313725490196078, 0.3137254901960784] as Rgb\n    };\n\n    private asciiToggleOutlineColor = {\n        inactive: [0.4980392156862745, 0.5490196078431373, 0.5529411764705883] as Rgb,\n        active: [0, 0, 0] as Rgb\n    };\n\n    private buttonContentColor: Rgb = [0.17254901960784313, 0.24313725490196078, 0.3137254901960784];\n\n    private keyboardGroup: UIObservablePositioningGroup;\n    private symbolButtons: SymbolButtonDescriptor[] = [];\n    private buttonDimension = { width: 30, height: 60 };\n    private readonly symbolMargin = 5;\n\n    private spacebarButton!: UITextButton;\n\n    private buttonDeleter: ButtonDeleter[] = [];\n\n    private shiftWidth = 50;\n    private shiftMode = KeyboardShiftMode.Lovercase;\n\n    private asciiMode = false;\n\n    private digitsSymbolRow!: KeyboardButtonLayout[];\n    private firstSymbolRow!: KeyboardButtonLayout[];\n    private secondSymbolRow!: KeyboardButtonLayout[];\n    private thirdSymbolRow!: KeyboardButtonLayout[];\n\n    private observable = new ObservableController<string>();\n\n    constructor(@inject(UIRenderer) private uiRenderer: UIRenderer) {\n        this.toggleKeyboardGroup = new UIObservablePositioningGroup({ x: 10, y: 10 });\n\n        this.toggleKeyboardButton = this.uiRenderer.CreateIconButton(\n            { x: 0, y: 0 },\n            { width: 30, height: 30 },\n            this.zIndex,\n            { fillColor: this.fillColor, outlineColor: this.outlineColor },\n            { icon: UIIcon.Keyboard, color: this.shiftIconColor.lovercase },\n            (_sender: UIIconButton) => this.ToggleKeyboard(),\n            this.toggleKeyboardGroup);\n\n        this.keyboardGroup = new UIObservablePositioningGroup(\n            { x: 0, y: this.symbolMargin },\n            { horizontal: HorizontalAnchor.Middle });\n\n        this.SetupKeyboardLayouts();\n\n        this.observable.Attach(_symbol => this.TouchFeedback());\n    }\n\n    private SetupKeyboardLayouts(): void {\n        const keyboardStateFetcher = {\n            shift: () => this.shiftMode,\n            ascii: () => this.asciiMode\n        };\n\n        this.digitsSymbolRow = [\n            new KeyboardButtonLayout(keyboardStateFetcher, '1', '!'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '2', '?'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '3', ','),\n            new KeyboardButtonLayout(keyboardStateFetcher, '4', '.'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '5', '\\\\'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '6', '`'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '7'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '8'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '9'),\n            new KeyboardButtonLayout(keyboardStateFetcher, '0')\n        ];\n\n        this.firstSymbolRow = [\n            new KeyboardButtonLayout(keyboardStateFetcher, 'q', '%'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'w', '^'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'e', '~'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'r', '|'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 't', '['),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'y', ']'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'u', '<'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'i', '>'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'o', '{'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'p', '}')\n        ];\n\n        this.secondSymbolRow = [\n            new KeyboardButtonLayout(keyboardStateFetcher, 'a', '@'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 's', '#'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'd', '&'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'f', '*'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'g', '-'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'h', '+'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'j', '='),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'k', '('),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'l', ')')\n        ];\n\n        this.thirdSymbolRow = [\n            new KeyboardButtonLayout(keyboardStateFetcher, 'z', '_'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 's', '$'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'c', '\"'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'v', '\\''),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'b', ':'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'n', ';'),\n            new KeyboardButtonLayout(keyboardStateFetcher, 'm', '/')\n        ];\n    }\n\n    private ToggleKeyboard(): void {\n        this.toggleKeyboard = !this.toggleKeyboard;\n\n        this.toggleKeyboardButton.Icon = {\n            icon: this.toggleKeyboardButton.Icon.icon,\n            color: this.toggleKeyboard ? this.shiftIconColor.uppercase : this.shiftIconColor.lovercase\n        };\n\n        this.toggleKeyboard ?\n            this.SpawnKeyboard() :\n            this.HideKeyboard();\n    }\n\n    private SpawnKeyboard(): void {\n        this.CreateSymbolRow({ x: 0, y: 4 * this.buttonDimension.height + 5 * this.symbolMargin },\n            this.digitsSymbolRow);\n\n        this.CreateSymbolRow(\n            { x: 0, y: 3 * this.buttonDimension.height + 4 * this.symbolMargin },\n            this.firstSymbolRow);\n\n        this.CreateSymbolRow(\n            { x: this.buttonDimension.width / 2, y: 2 * this.buttonDimension.height + 3 * this.symbolMargin },\n            this.secondSymbolRow);\n\n        this.CreateSymbolRow(\n            { x: this.shiftWidth + this.symbolMargin, y: this.buttonDimension.height + 2 * this.symbolMargin },\n            this.thirdSymbolRow);\n\n        this.CreateBottomRow();\n    }\n\n    private CreateSymbolRow(position: Vec2, layouts: KeyboardButtonLayout[]): void {\n        for (let n = 0; n < layouts.length; ++n) {\n            const layout = layouts[n];\n            const button = this.uiRenderer.CreateTextButton(\n                {\n                    x: position.x + (this.buttonDimension.width + this.symbolMargin) * n,\n                    y: position.y\n                },\n                {\n                    width: this.buttonDimension.width,\n                    height: this.buttonDimension.height\n                },\n                this.zIndex,\n                { fillColor: this.fillColor, outlineColor: this.outlineColor },\n                { text: layout.Caption, lineHeight: 16, color: this.buttonContentColor },\n                (_sender: UITextButton) => this.observable.Notify(layouts[n].Symbol),\n                this.keyboardGroup);\n\n            this.StyleButtonCaption(button, layout, true);\n\n            this.symbolButtons.push({ button, layout });\n            this.buttonDeleter.push(() => button.Destroy());\n        }\n    }\n\n    private CreateBottomRow(): void {\n        const shift = this.uiRenderer.CreateIconButton(\n            {\n                x: 0,\n                y: this.buttonDimension.height + 2 * this.symbolMargin\n            },\n            { width: this.shiftWidth, height: this.buttonDimension.height },\n            this.zIndex,\n            { fillColor: this.fillColor, outlineColor: this.outlineColor },\n            { icon: UIIcon.Shift, color: this.buttonContentColor },\n            (sender: UIIconButton) => this.ToggleShift(sender),\n            this.keyboardGroup);\n\n        this.buttonDeleter.push(() => shift.Destroy());\n\n\n        this.spacebarButton = this.uiRenderer.CreateTextButton(\n            {\n                x: this.shiftWidth + this.symbolMargin,\n                y: this.symbolMargin\n            },\n            {\n                width: this.thirdSymbolRow.length * this.buttonDimension.width + this.symbolMargin * (this.thirdSymbolRow.length - 1),\n                height: this.buttonDimension.height\n            },\n            this.zIndex,\n            { fillColor: this.fillColor, outlineColor: this.outlineColor },\n            { text: '', lineHeight: 16, color: this.buttonContentColor },\n            (_sender: UITextButton) => this.observable.Notify(' '),\n            this.keyboardGroup);\n\n        this.buttonDeleter.push(() => this.spacebarButton.Destroy());\n\n\n        const backspace = this.uiRenderer.CreateIconButton(\n            {\n                x: this.shiftWidth + this.thirdSymbolRow.length * this.buttonDimension.width + (this.thirdSymbolRow.length + 1) * this.symbolMargin,\n                y: this.buttonDimension.height + 2 * this.symbolMargin\n            },\n            { width: this.shiftWidth, height: this.buttonDimension.height },\n            this.zIndex,\n            { fillColor: this.fillColor, outlineColor: this.outlineColor },\n            { icon: UIIcon.Backspace, color: this.buttonContentColor },\n            (_sender: UIIconButton) => this.observable.Notify('Backspace'),\n            this.keyboardGroup);\n\n        this.buttonDeleter.push(() => backspace.Destroy());\n\n\n        const asciiCodes = this.uiRenderer.CreateTextButton(\n            {\n                x: this.shiftWidth + this.thirdSymbolRow.length * this.buttonDimension.width + (this.thirdSymbolRow.length + 1) * this.symbolMargin,\n                y: this.symbolMargin\n            },\n            { width: this.shiftWidth, height: this.buttonDimension.height },\n            this.zIndex,\n            { fillColor: this.fillColor, outlineColor: this.outlineColor },\n            { text: 'ASCII', lineHeight: 16, color: this.buttonContentColor },\n            (sender: UITextButton) => this.ToggleASCII(sender),\n            this.keyboardGroup);\n\n        this.buttonDeleter.push(() => asciiCodes.Destroy());\n    }\n\n    private ToggleShift(sender: UIIconButton): void {\n        this.TouchFeedback();\n\n        this.shiftMode = (this.shiftMode + 1) % EnumSize(KeyboardShiftMode);\n\n        const color = [\n            this.shiftIconColor.lovercase,\n            this.shiftIconColor.uppercase,\n            this.shiftIconColor.secondary\n        ][this.shiftMode];\n\n        sender.Icon = { ...sender.Icon, color };\n\n        this.UpdateSymbolButtonsCaptions();\n    }\n\n    private ToggleASCII(sender: UITextButton): void {\n        this.TouchFeedback();\n\n        this.asciiMode = !this.asciiMode;\n\n        this.spacebarButton.Caption = {\n            ...this.spacebarButton.Caption,\n            text: this.asciiMode ? ' '.charCodeAt(0).toString() : ''\n        };\n\n\n        sender.Style = {\n            ...sender.Style,\n            outlineColor: this.asciiToggleOutlineColor[this.asciiMode ? 'active' : 'inactive']\n        };\n\n        this.UpdateSymbolButtonsCaptions();\n    }\n\n    private UpdateSymbolButtonsCaptions(): void {\n        this.symbolButtons.forEach(descriptor => {\n            const { button, layout } = descriptor;\n\n            button.Caption = { ...button.Caption, text: layout.Caption };\n\n            switch (this.shiftMode) {\n                case KeyboardShiftMode.Lovercase:\n                case KeyboardShiftMode.Uppercase:\n                    this.StyleButtonCaption(button, layout, true);\n                    break;\n                case KeyboardShiftMode.Secondary:\n                    this.StyleButtonCaption(button, layout, false);\n                    break;\n            }\n        });\n    }\n\n    private StyleButtonCaption(button: UITextButton, layout: KeyboardButtonLayout, primary: boolean): void {\n        if (layout.HasSecondary) {\n            const [primaryColor, secondaryColor] = primary ?\n                [this.buttonCaptionColor.inactive, this.buttonCaptionColor.active] :\n                [this.buttonCaptionColor.active, this.buttonCaptionColor.inactive];\n\n            button.StyleCaptionRange(0, layout.CaptionDelimiter, { color: primaryColor });\n            button.StyleCaptionRange(layout.CaptionDelimiter + 1, button.Caption.text.length, { color: secondaryColor });\n        } else {\n            button.StyleCaptionRange(0, button.Caption.text.length, { color: this.buttonCaptionColor.active });\n        }\n    }\n\n    private HideKeyboard(): void {\n        this.buttonDeleter.forEach(destroy => destroy());\n        this.buttonDeleter.length = 0;\n\n        this.symbolButtons.length = 0;\n\n        this.shiftMode = KeyboardShiftMode.Lovercase;\n    }\n\n    private TouchFeedback(): void {\n        navigator.vibrate(30);\n    }\n\n    get Observable(): Observable<string> {\n        return this.observable;\n    }\n\n    get AbsolutePosition(): Vec2 {\n        return this.keyboardGroup.AbsolutePosition;\n    }\n\n    get Dimension(): Dimension {\n        return this.keyboardGroup.Dimension;\n    }\n\n    Resize(): void {\n        this.toggleKeyboardGroup.Resize();\n        this.keyboardGroup.Resize();\n    }\n}\n\nInversify.bind(VirtualKeyboardControls).toSelf().inSingletonScope();\n","import { mat4 } from \"gl-matrix\";\nimport { inject, injectable } from \"inversify\";\n\nimport { MouseSelectEvent } from \"../AppEventTransformer\";\nimport { AppSettings } from \"../AppSettings\";\nimport { InjectionToken } from \"../InjectionToken\";\n\nimport { DebugControls } from \"./DebugControls\";\nimport { EditControls } from \"./EditControls\";\nimport { EditDirectionControls } from \"./EditDirectionControls\";\nimport { FileControls } from \"./FileControls\";\nimport { HistoryControls } from \"./HistoryControls\";\nimport { IOControls } from \"./IOControls\";\nimport { SnackbarControls } from \"./SnackbarControls\";\nimport { StackControls } from \"./StackControls\";\nimport { VirtualKeyboardControls } from \"./VirtualKeyboardControls\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Intersection } from \"@/lib/math/Intersection\";\nimport { InputReceiver } from \"@/lib/UI/InputReceiver\";\nimport { UIRenderer } from \"@/lib/UI/UIRenderer\";\n\n@injectable()\nexport class OverlayService {\n    private settings: AppSettings;\n\n    private stickyProjection!: mat4;\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext,\n        @inject(UIRenderer) private uiRenderer: UIRenderer,\n        @inject(SnackbarControls) private snackbarControls: SnackbarControls,\n        @inject(FileControls) private fileControls: FileControls,\n        @inject(HistoryControls) private historyControls: HistoryControls,\n        @inject(EditControls) private editControls: EditControls,\n        @inject(EditDirectionControls) private editDirectionControls: EditDirectionControls,\n        @inject(DebugControls) private debugControls: DebugControls,\n        @inject(StackControls) private stackControls: StackControls,\n        @inject(VirtualKeyboardControls) private virtualKeyboardControls: VirtualKeyboardControls,\n        @inject(IOControls) private ioControls: IOControls) {\n        this.settings = Inversify.get(AppSettings);\n\n        this.BuildStickyProjection();\n    }\n\n    get EditDirectionControls(): EditDirectionControls {\n        return this.editDirectionControls;\n    }\n\n    get DebugControls(): DebugControls {\n        return this.debugControls;\n    }\n\n    get IOControls(): IOControls {\n        return this.ioControls;\n    }\n\n    get Snackbar(): SnackbarControls {\n        return this.snackbarControls;\n    }\n\n    get FileControls(): FileControls {\n        return this.fileControls;\n    }\n\n    get HistoryControls(): HistoryControls {\n        return this.historyControls;\n    }\n\n    get EditControls(): EditControls {\n        return this.editControls;\n    }\n\n    get StackControls(): StackControls {\n        return this.stackControls;\n    }\n\n    get VirtualKeyboardControls(): VirtualKeyboardControls {\n        return this.virtualKeyboardControls;\n    }\n\n    Resize(): void {\n        this.BuildStickyProjection();\n\n        this.uiRenderer.ViewProjection = this.stickyProjection;\n\n        this.editDirectionControls.Resize();\n        this.debugControls.Resize();\n        this.fileControls.Resize();\n        this.snackbarControls.Resize();\n        this.historyControls.Resize();\n        this.editControls.Resize();\n        this.stackControls.Resize();\n        this.virtualKeyboardControls.Resize();\n        this.ioControls.Resize();\n    }\n\n    Touch(e: MouseSelectEvent): InputReceiver | boolean {\n        const x = e.offsetX;\n        const y = this.gl.canvas.height - e.offsetY;\n\n        const isKeyboardTouched = Intersection.AABBRectanglePoint(\n            {\n                x: this.virtualKeyboardControls.AbsolutePosition.x,\n                y: this.virtualKeyboardControls.AbsolutePosition.y,\n                width: this.virtualKeyboardControls.Dimension.width,\n                height: this.virtualKeyboardControls.Dimension.height\n            },\n            { x, y });\n\n        return this.uiRenderer.Touch({ offsetX: x, offsetY: y }) || isKeyboardTouched;\n    }\n\n    Draw(): void {\n        this.uiRenderer.Draw();\n    }\n\n    private BuildStickyProjection(): void {\n        this.stickyProjection = mat4.ortho(\n            mat4.create(),\n            0, this.gl.canvas.width,\n            0, this.gl.canvas.height,\n            -this.settings.ZNear, -this.settings.ZFar);\n    }\n}\n\nInversify.bind(OverlayService).toSelf().inSingletonScope();\n","import { injectable } from \"inversify\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Memory, Pointer } from \"@/lib/befunge/memory/Memory\";\nimport { MemoryLimit } from \"@/lib/befunge/memory/MemoryLimit\";\nimport { PointerArithmetics } from \"@/lib/befunge/memory/PointerArithmetics\";\n\n@injectable()\nexport class SourceCodeMemory implements Memory {\n    private nonEmptyCells = 0;\n\n    private target!: Memory;\n\n    Initialize<T extends new (...args: any[]) => Memory>(ctr: T, ...args: ConstructorParameters<T>): void {\n        this.nonEmptyCells = 0;\n        this.target = new ctr(...args);\n    }\n\n    Read(ptr: Pointer): number {\n        return this.target.Read(ptr);\n    }\n\n    Write(ptr: Pointer, value: number): void {\n        const emptyValue = ' '.charCodeAt(0);\n        const actual = this.target.Read(ptr);\n\n        if (actual !== value) {\n            if (actual === emptyValue) {\n                ++this.nonEmptyCells;\n            } else if (value === emptyValue) {\n                --this.nonEmptyCells;\n            }\n        }\n\n        this.target.Write(ptr, value);\n    }\n\n    Resize(limit: MemoryLimit): void {\n        this.target.Resize(limit);\n    }\n\n    Clone(): Memory {\n        return this.target.Clone();\n    }\n\n    get Empty(): boolean {\n        return this.nonEmptyCells === 0;\n    }\n\n    get PointerArithmetics(): PointerArithmetics {\n        return this.target.PointerArithmetics;\n    }\n\n    get Target(): Memory {\n        return this.target;\n    }\n}\n\nInversify.bind(SourceCodeMemory).toSelf().inSingletonScope();\n","import { Mat4 } from \"@/lib/renderer/ShaderProgram\";\n\nexport interface CodeEditorExtension {\n    Draw(): void;\n\n    Unload(): void;\n\n    set ViewProjection(mat: Mat4 | Float32Array);\n};\n\nexport class EmptyExtension implements CodeEditorExtension {\n    Draw(): void { }\n\n    Unload(): void { }\n\n    set ViewProjection(mat: Mat4 | Float32Array) { }\n}\n","import { inject, injectable, named } from \"inversify\";\n\nimport { UILabelRendererTargetName } from \"../InjectionToken\";\n\nimport { CodeEditorRenderer } from \"./CodeEditorRenderer\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { UILabel } from \"@/lib/UI/UILabel/UILabel\";\nimport { UILabelRenderer } from \"@/lib/UI/UILabel/UILabelRenderer\";\n\nexport enum TooltipPosition { LeftBottom, LeftTop, RightTop, RightBottom };\n\nexport type TooltipReleaser = () => void;\n\ninterface Tooltip {\n    column: number;\n    row: number;\n    position: TooltipPosition;\n    instance: UILabel\n}\n\n@injectable()\nexport class CodeEditorTooltipService {\n    private readonly tooltips: Tooltip[] = [];\n\n    constructor(\n        @inject(CodeEditorRenderer) private codeEditorRenderer: CodeEditorRenderer,\n        @inject(UILabelRenderer) @named(UILabelRendererTargetName.Perspective) private perspectiveLabelRenderer: UILabelRenderer) { }\n\n    Tooltip(column: number, row: number, text: string, position: TooltipPosition): TooltipReleaser {\n        const tooltipIdx = this.FindIndex(column, row, position);\n\n        if (tooltipIdx !== -1) {\n            if (text === '') {\n                this.ReleaseTooltip(tooltipIdx);\n            } else {\n                this.tooltips[tooltipIdx].instance.Text = text;\n            }\n\n            return this.BuildReleaser(column, row, position);\n        }\n\n        const cellSize = 10;\n        const margin = 0.5;\n\n        const instance = this.perspectiveLabelRenderer.Create(\n            { x: 0, y: 0 },\n            499.7,\n            text,\n            8,\n            null);\n\n        instance.Scale = 0.2;\n\n        let x = 0, y = 0;\n        switch (position) {\n            case TooltipPosition.LeftBottom:\n                x = margin + column * cellSize;\n                y = margin + (this.codeEditorRenderer.Dimension.Rows - row - 1) * cellSize;\n                break;\n            case TooltipPosition.LeftTop:\n                x = margin + column * cellSize;\n                y = (this.codeEditorRenderer.Dimension.Rows - row - 1) * cellSize + cellSize - instance.Dimension.height - margin;\n                break;\n            case TooltipPosition.RightTop:\n                x = column * cellSize + cellSize - instance.Dimension.width - margin;\n                y = (this.codeEditorRenderer.Dimension.Rows - row - 1) * cellSize + cellSize - instance.Dimension.height - margin;\n                break;\n            case TooltipPosition.RightBottom:\n                x = column * cellSize + cellSize - instance.Dimension.width - margin;\n                y = margin + (this.codeEditorRenderer.Dimension.Rows - row - 1) * cellSize;\n                break;\n        }\n\n        instance.Position = { x, y };\n\n        this.tooltips.push({ column, row, position, instance });\n\n        return this.BuildReleaser(column, row, position);\n    }\n\n    ReleaseAll(): void {\n        while (this.tooltips.length > 0) {\n            this.ReleaseTooltip(this.tooltips.length - 1);\n        }\n    }\n\n    private FindIndex(column: number, row: number, position: TooltipPosition): number {\n        return this.tooltips.findIndex(x => x.column === column && x.row === row && x.position === position);\n    }\n\n    private BuildReleaser(column: number, row: number, position: TooltipPosition): TooltipReleaser {\n        return () => {\n            const idx = this.FindIndex(column, row, position);\n\n            if (idx !== -1) {\n                this.ReleaseTooltip(idx);\n            }\n        };\n    }\n\n    private ReleaseTooltip(idx: number): void {\n        this.tooltips[idx].instance.Destroy();\n        this.tooltips.splice(idx, 1);\n    }\n}\n\nInversify.bind(CodeEditorTooltipService).toSelf().inSingletonScope();\n","export interface Index2D {\n    column: number;\n    row: number;\n}\n\nexport class Array2D<T> {\n    private data!: T[];\n\n    private constructor(\n        private readonly width: number,\n        private readonly height: number,\n        private provider?: () => T) {\n        if (provider) {\n            this.Initialize();\n        }\n    }\n\n    static WithConstructor<T>(width: number, height: number, constructor: new () => T): Array2D<T> {\n        return new Array2D<T>(width, height, () => new constructor());\n    }\n\n    static WithProvider<T>(width: number, height: number, provider: () => T): Array2D<T> {\n        return new Array2D<T>(width, height, provider);\n    }\n\n    Get(pos: Index2D): T {\n        return this.data[this.CoordsToIndex(pos)];\n    }\n\n    Set(pos: Index2D, value: T): void {\n        this.data[this.CoordsToIndex(pos)] = value;\n    }\n\n    Update(pos: Index2D, updater: (value: T) => T): void {\n        const idx = this.CoordsToIndex(pos);\n\n        this.data[idx] = updater(this.data[idx]);\n    }\n\n    Map<TRet>(fn: (value: T, idx: Index2D, arr: Array2D<T>) => TRet): Array2D<TRet> {\n        const mapped = new Array2D<TRet>(this.width, this.height);\n\n        mapped.data = this.data.map((value: T, idx: number) => fn(value, this.IndexToCoord(idx), this));\n\n        return mapped;\n    }\n\n    ForEach(fn: (value: T, idx: Index2D, arr: Array2D<T>) => void): void {\n        this.data.forEach((value: T, idx: number) => fn(value, this.IndexToCoord(idx), this));\n    }\n\n    Every(fn: (value: T, idx: Index2D, arr: Array2D<T>) => boolean): boolean {\n        return this.data.every((value: T, idx: number) => fn(value, this.IndexToCoord(idx), this))\n    }\n\n    Equals(arr: Array2D<T>): boolean {\n        if (arr.width !== this.width || arr.height !== this.height) {\n            return false;\n        }\n\n        return this.Every((value, index) => value === arr.Get(index));\n    }\n\n    private Initialize(): void {\n        this.data = Array.from({ length: this.width * this.height }, () => this.provider!());\n    }\n\n    private CoordsToIndex(pos: Index2D): number {\n        return pos.row * this.width + pos.column;\n    }\n\n    private IndexToCoord(index: number): Index2D {\n        const row = Math.floor(index / this.width);\n        const column = index - row * this.width;\n\n        return { column, row };\n    }\n}\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { AppHistory } from \"../History/AppHistory\";\nimport type { EditCellCommandFactory } from \"../History/Commands/EditCellCommand/EditCellCommand\";\nimport { MoveNextAction as CellMoveNextAction } from \"../History/Commands/EditCellCommand/PostActions/MoveNextAction\";\nimport type { EditCellsRegionCommandFactory } from \"../History/Commands/EditCellsRegionCommand/EditCellsRegionCommand\";\nimport { MoveNextAction as RegionMoveNextAction } from \"../History/Commands/EditCellsRegionCommand/PostActions/MoveNextAction\";\nimport { StayLeftTopAction } from \"../History/Commands/EditCellsRegionCommand/PostActions/StayLeftTopAction\";\nimport { AppCommandInjectionToken, EditCellCommandPostAction, EditCellsRegionCommandPostAction } from \"../InjectionToken\";\nimport { SourceCodeMemory } from \"../SourceCodeMemory\";\n\nimport { CodeEditorRenderer } from \"./CodeEditorRenderer\";\nimport { EditionDirection } from \"./CodeEditorService\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Array2D } from \"@/lib/containers/Array2D\";\nimport { MathUtil } from \"@/lib/math/MathUtil\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\"\n\nexport interface EditableRegion {\n    lt: Vec2;\n    rb: Vec2\n}\n\nexport interface RegionDimension {\n    width: number;\n    height: number;\n}\n\n@injectable()\nexport class EditableTarget {\n    private readonly editableCellStyle: Rgb = [0.21568627450980393, 0.2784313725490196, 0.30980392156862746];\n\n    private editableRegion: EditableRegion = {\n        lt: { x: 0, y: 0 },\n        rb: { x: 0, y: 0 }\n    };\n\n    private editionDirection: EditionDirection = EditionDirection.Right;\n\n    constructor(\n        @inject(SourceCodeMemory) private editorSourceCode: SourceCodeMemory,\n        @inject(CodeEditorRenderer) private codeEditorRenderer: CodeEditorRenderer,\n        @inject(AppCommandInjectionToken.EditCellCommandFactory) private editCellCommandFactory: EditCellCommandFactory,\n        @inject(EditCellCommandPostAction.MoveNext) private cellMoveNextPostActionFactory: interfaces.AutoFactory<CellMoveNextAction>,\n        @inject(AppCommandInjectionToken.EditCellsRegionFactory) private editCellsRegionCommandFactory: EditCellsRegionCommandFactory,\n        @inject(EditCellsRegionCommandPostAction.MoveNext) private regionMoveNextPostActionFactory: interfaces.AutoFactory<RegionMoveNextAction>,\n        @inject(EditCellsRegionCommandPostAction.StayLeftTop) private regionStayLeftTopPostActionFactory: interfaces.AutoFactory<StayLeftTopAction>,\n        @inject(AppHistory) private history: AppHistory) {\n        if (this.IsSingleCell) {\n            this.codeEditorRenderer.Select(this.editableRegion.lt.x, this.editableRegion.lt.y, this.editableCellStyle);\n        } else {\n            this.codeEditorRenderer.SelectRegion(this.editableRegion.lt, this.editableRegion.rb, this.editableCellStyle);\n        }\n    }\n\n    CellInput(keyCode: string): void {\n        this.IsSingleCell ? this.CellInputSingle(keyCode) : this.CellInputRegion(keyCode);\n    }\n\n    private CellInputSingle(keyCode: string): void {\n        const oldValue = String.fromCharCode(this.editorSourceCode.Read(this.editableRegion.lt));\n\n        const command = keyCode === 'Backspace' ?\n            this.editCellCommandFactory(\n                this.editableRegion.lt,\n                oldValue,\n                ' ',\n                this.ReversedDirection(this.editionDirection),\n                this.cellMoveNextPostActionFactory()) :\n            this.editCellCommandFactory(\n                this.editableRegion.lt,\n                oldValue,\n                keyCode,\n                this.editionDirection,\n                this.cellMoveNextPostActionFactory());\n\n        command.Apply();\n\n        if (!(keyCode === String.fromCharCode(this.editorSourceCode.Read(this.editableRegion.lt)) ||\n            keyCode === 'Backspace' && oldValue === ' ')) {\n            this.history.Push(command);\n        }\n    }\n\n    private CellInputRegion(keyCode: string): void {\n        const dimension = this.RegionDimension;\n\n        const oldValue = Array2D.WithProvider(dimension.width, dimension.height, () => 0);\n        for (let y = this.editableRegion.lt.y; y <= this.editableRegion.rb.y; ++y) {\n            for (let x = this.editableRegion.lt.x; x <= this.editableRegion.rb.x; ++x) {\n                oldValue.Set({ column: x - this.editableRegion.lt.x, row: y - this.editableRegion.lt.y }, this.editorSourceCode.Read({ x: x, y: y }));\n            }\n        }\n\n        const command = keyCode === 'Backspace' ?\n            this.editCellsRegionCommandFactory(\n                this.editableRegion,\n                oldValue,\n                Array2D.WithProvider(dimension.width, dimension.height, () => ' '.charCodeAt(0)),\n                this.ReversedDirection(this.editionDirection),\n                this.regionMoveNextPostActionFactory()) :\n            this.editCellsRegionCommandFactory(\n                this.editableRegion,\n                oldValue,\n                Array2D.WithProvider(dimension.width, dimension.height, () => keyCode.charCodeAt(0)),\n                this.editionDirection,\n                this.regionMoveNextPostActionFactory());\n\n        command.Apply();\n\n        if (!(keyCode === 'Backspace' && oldValue.Every(x => String.fromCharCode(x) === ' ') ||\n            oldValue.Every(x => String.fromCharCode(x) === keyCode))) {\n            this.history.Push(command);\n        }\n    }\n\n    private ReversedDirection(direction: EditionDirection): EditionDirection {\n        switch (direction) {\n            case EditionDirection.Left:\n                return EditionDirection.Right;\n            case EditionDirection.Right:\n                return EditionDirection.Left;\n            case EditionDirection.Up:\n                return EditionDirection.Down;\n            case EditionDirection.Down:\n                return EditionDirection.Up\n        }\n    }\n\n    Select(cell: Vec2): void {\n        if (!this.IsLocationValid(cell)) {\n            return;\n        }\n\n        this.Unselect();\n\n        this.editableRegion.lt.x = cell.x;\n        this.editableRegion.lt.y = cell.y;\n        this.editableRegion.rb.x = cell.x;\n        this.editableRegion.rb.y = cell.y;\n\n        this.codeEditorRenderer.Select(this.editableRegion.lt.x, this.editableRegion.lt.y, this.editableCellStyle);\n    }\n\n    SelectRegion(p0: Vec2, p1: Vec2): void {\n        if (!(this.IsLocationValid(p0) && this.IsLocationValid(p1))) {\n            return;\n        }\n\n        this.Unselect();\n\n        const normalized = MathUtil.Extremum([p0, p1]);\n        const region = { lt: normalized.min, rb: normalized.max };\n\n        this.editableRegion.lt = { ...region.lt };\n        this.editableRegion.rb = { ...region.rb };\n\n        this.codeEditorRenderer.SelectRegion(region.lt, region.rb, this.editableCellStyle);\n    }\n\n    private IsLocationValid(point: Vec2): boolean {\n        return point.x >= 0 && point.y >= 0 && point.x < this.codeEditorRenderer.Dimension.Columns && point.y < this.codeEditorRenderer.Dimension.Rows;\n    }\n\n    private Unselect(): void {\n        this.IsSingleCell ?\n            this.codeEditorRenderer.Unselect(this.editableRegion.lt.x, this.editableRegion.lt.y) :\n            this.codeEditorRenderer.UnselectRegion(this.editableRegion.lt, this.editableRegion.rb);\n    }\n\n    Focus(): void {\n        this.codeEditorRenderer.SelectRegion(this.editableRegion.lt, this.editableRegion.rb, this.editableCellStyle);\n    }\n\n    Blur(): void {\n        this.codeEditorRenderer.UnselectRegion(this.editableRegion.lt, this.editableRegion.rb);\n    }\n\n    ContentString(): string {\n        let sourceCode = '';\n        for (let y = this.editableRegion.lt.y; y <= this.editableRegion.rb.y; ++y) {\n            for (let x = this.editableRegion.lt.x; x <= this.editableRegion.rb.x; ++x) {\n                sourceCode += String.fromCharCode(this.editorSourceCode.Read({ x: x, y: y }));\n            }\n\n            sourceCode += '\\n';\n        }\n\n        return sourceCode.slice(0, -1);\n    }\n\n    InsertSourceCode(sourceCode: string): boolean {\n        const linesOfCode = sourceCode.split(/\\r?\\n/);\n\n        let fragmentWidth = 0;\n        const fragmentHeight = linesOfCode.length;\n        for (let y = 0; y < linesOfCode.length; ++y) {\n            const line = linesOfCode[y];\n            if (line.length > fragmentWidth) {\n                fragmentWidth = line.length;\n            }\n        }\n\n        if (!this.IsLocationValid({\n            x: this.editableRegion.lt.x + fragmentWidth - 1,\n            y: this.editableRegion.lt.y + fragmentHeight - 1\n        })) {\n            return false;\n        }\n\n        const newValue = Array2D.WithProvider(fragmentWidth, fragmentHeight, () => 32);\n        for (let row = 0; row < linesOfCode.length; ++row) {\n            const line = linesOfCode[row];\n            for (let column = 0; column < line.length; ++column) {\n                newValue.Set({ column, row }, line[column].charCodeAt(0));\n            }\n        }\n\n        const oldValue = Array2D.WithProvider(fragmentWidth, fragmentHeight, () => 0);\n        for (let y = this.editableRegion.lt.y; y < this.editableRegion.lt.y + fragmentHeight; ++y) {\n            for (let x = this.editableRegion.lt.x; x < this.editableRegion.lt.x + fragmentWidth; ++x) {\n                oldValue.Set({ column: x - this.editableRegion.lt.x, row: y - this.editableRegion.lt.y }, this.editorSourceCode.Read({ x, y }));\n            }\n        }\n\n        const command = this.editCellsRegionCommandFactory(\n            this.editableRegion,\n            oldValue,\n            newValue,\n            this.editionDirection,\n            this.regionMoveNextPostActionFactory());\n\n        command.Apply();\n\n        if (!newValue.Equals(oldValue)) {\n            this.history.Push(command);\n        }\n\n        return true;\n    }\n\n    Clear(): void {\n        const oldValue = Array2D.WithProvider(this.RegionDimension.width, this.RegionDimension.height, () => 0);\n        for (let y = this.editableRegion.lt.y; y <= this.editableRegion.rb.y; ++y) {\n            for (let x = this.editableRegion.lt.x; x <= this.editableRegion.rb.x; ++x) {\n                oldValue.Set({ column: x - this.editableRegion.lt.x, row: y - this.editableRegion.lt.y }, this.editorSourceCode.Read({ x, y }));\n            }\n        }\n\n        const command = this.editCellsRegionCommandFactory(\n            this.editableRegion,\n            oldValue,\n            Array2D.WithProvider(this.RegionDimension.width, this.RegionDimension.height, () => 32),\n            this.editionDirection,\n            this.regionStayLeftTopPostActionFactory());\n\n        command.Apply();\n\n        if (!oldValue.Every(x => x === 32)) {\n            this.history.Push(command);\n        }\n    }\n\n    get IsSingleCell(): boolean {\n        return this.editableRegion.lt.x === this.editableRegion.rb.x &&\n            this.editableRegion.lt.y === this.editableRegion.rb.y;\n    }\n\n    get RegionDimension(): RegionDimension {\n        return {\n            width: this.editableRegion.rb.x - this.editableRegion.lt.x + 1,\n            height: this.editableRegion.rb.y - this.editableRegion.lt.y + 1\n        };\n    }\n\n    get Target(): EditableRegion {\n        return this.editableRegion;\n    }\n\n    get EditionDirection(): EditionDirection {\n        return this.editionDirection;\n    }\n\n    set EditionDirection(direction: EditionDirection) {\n        this.editionDirection = direction;\n    }\n}\n\nInversify.bind(EditableTarget).toSelf().inSingletonScope();\n","import { vec3 } from \"gl-matrix\";\nimport { inject, injectable } from \"inversify\";\n\nimport { MouseSelectEvent } from \"../AppEventTransformer\";\nimport { InjectionToken } from \"../InjectionToken\";\nimport { OverlayService } from \"../Overlay/OverlayService\";\nimport { SourceCodeMemory } from \"../SourceCodeMemory\";\n\nimport { CodeEditorExtension, EmptyExtension } from \"./CodeEditorExtension\";\nimport { CodeEditorRenderer } from \"./CodeEditorRenderer\";\nimport { CodeEditorTooltipService, TooltipPosition, TooltipReleaser } from \"./CodeEditorTooltipService\";\nimport { EditableTarget } from \"./EditableTarget\";\nimport { EditorGridDimension } from \"./EditorGridRenderer\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Pointer } from \"@/lib/befunge/memory/Memory\";\nimport { AsyncExceptionTrap } from \"@/lib/ExceptionTrap\";\nimport { Intersection } from \"@/lib/math/Intersection\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\nimport { Camera } from \"@/lib/renderer/Camera\";\nimport { Mat4 } from \"@/lib/renderer/ShaderProgram\";\nimport { SelfBind } from \"@/lib/SelfBind\";\nimport { MyInputEvent } from \"@/lib/UI/InputReceiver\";\n\nexport enum EditionDirection { Left, Up, Right, Down };\n\n\nexport interface EditableCellRect {\n    lb: vec3;\n    rt: vec3;\n}\n\ninterface TouchBehavior {\n    Touch(cell: Vec2): TouchBehavior;\n}\n\nclass SelectCellBehaiver implements TouchBehavior {\n    constructor(private editableCell: EditableTarget) { }\n\n    Touch(cell: Vec2): TouchBehavior {\n        this.editableCell.Select(cell);\n\n        return this;\n    }\n}\n\nclass SelectCellsRegion implements TouchBehavior {\n    private firstTouch: Vec2;\n\n    constructor(\n        private editableCell: EditableTarget) {\n        this.firstTouch = { ...editableCell.Target.lt };\n    }\n\n    Touch(cell: Vec2): TouchBehavior {\n        this.editableCell.SelectRegion(this.firstTouch, cell);\n\n        return new SelectCellBehaiver(this.editableCell);\n    }\n}\n\n@injectable()\nexport class CodeEditorService {\n    private editDirectionObservable = new ObservableController<EditionDirection>();\n\n    private editableCellLostObservale = new ObservableController<void>();\n\n    private extension: CodeEditorExtension = new EmptyExtension();\n\n    private touchBehavior: TouchBehavior;\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext,\n        @inject(OverlayService) private overlay: OverlayService,\n        @inject(EditableTarget) private editableCell: EditableTarget,\n        @inject(CodeEditorRenderer) private codeEditorRenderer: CodeEditorRenderer,\n        @inject(SourceCodeMemory) private editorSourceCode: SourceCodeMemory,\n        @inject(CodeEditorTooltipService) private tooltipService: CodeEditorTooltipService) {\n        this.touchBehavior = new SelectCellBehaiver(this.editableCell);\n        this.overlay.EditControls.SelectObservable.Attach(() => this.OnSetEditableRegion());\n        this.overlay.EditControls.CutObservable.Attach(() => this.OnCut());\n        this.overlay.EditControls.CopyObservable.Attach(() => this.OnCopyEditableRegion());\n        this.overlay.EditControls.PasteObservable.Attach(() => this.OnPaste());\n        this.overlay.EditControls.DeleteObservable.Attach(() => this.OnDelete());\n    }\n\n    get EditDirectionObservable(): Observable<EditionDirection> {\n        return this.editDirectionObservable;\n    }\n\n    get EditableCellLostObservable(): Observable<void> {\n        return this.editableCellLostObservale;\n    }\n\n    get EditableCellDirection(): EditionDirection {\n        return this.editableCell.EditionDirection;\n    }\n\n    set EditableCellDirection(direction: EditionDirection) {\n        this.editableCell.EditionDirection = direction;\n\n        this.editDirectionObservable.Notify(direction);\n    }\n\n    LoadExtension(extension: CodeEditorExtension): void {\n        this.extension.Unload();\n\n        this.extension = extension;\n        this.extension.ViewProjection = this.codeEditorRenderer.ViewProjection;\n    }\n\n    UnloadExtension(): void {\n        this.extension.Unload();\n\n        this.extension = new EmptyExtension();\n    }\n\n    EditCell(symbol: string, column: number, row: number): void {\n        this.editorSourceCode.Write({ x: column, y: row }, symbol.charCodeAt(0));\n        this.codeEditorRenderer.Symbol(symbol, column, row);\n    }\n\n    Select(column: number, row: number, style: Rgb): void {\n        this.codeEditorRenderer.Select(column, row, style);\n    }\n\n    SelectRegion(p0: Vec2, p1: Vec2, color: Rgb): void {\n        this.codeEditorRenderer.SelectRegion(p0, p1, color);\n    }\n\n    Unselect(column: number, row: number): void {\n        this.codeEditorRenderer.Unselect(column, row);\n    }\n\n    UnselectRegion(p0: Vec2, p1: Vec2): void {\n        this.codeEditorRenderer.UnselectRegion(p0, p1);\n    }\n\n    Tooltip(column: number, row: number, text: string, position: TooltipPosition): TooltipReleaser {\n        return this.tooltipService.Tooltip(column, row, text, position);\n    }\n\n    HideAllTooltips(): void {\n        this.tooltipService.ReleaseAll();\n    }\n\n    Touch(e: MouseSelectEvent): void {\n        const posNear = Camera.Unproject({ x: e.offsetX, y: e.offsetY, z: 0 }, this.ViewProjection, this.gl.canvas);\n        const posFar = Camera.Unproject({ x: e.offsetX, y: e.offsetY, z: 1 }, this.ViewProjection, this.gl.canvas);\n\n        const intersection = Intersection.PlaneLine(\n            { a: 0, b: 0, c: 1, d: 0 },\n            { a: [posNear[0], posNear[1], posNear[2]], b: [posFar[0], posFar[1], posFar[2]] });\n\n        const x = Math.floor(intersection[0] / this.codeEditorRenderer.CellSize);\n        const y = this.codeEditorRenderer.Dimension.Rows - Math.floor(intersection[1] / this.codeEditorRenderer.CellSize) - 1;\n\n        const nextBehaivor = this.touchBehavior.Touch({ x, y });\n\n        if (nextBehaivor !== this.touchBehavior) {\n            this.touchBehavior = nextBehaivor;\n        }\n    }\n\n    Focus(): void {\n        this.editableCell.Focus();\n    }\n\n    Blur(): void {\n        this.editableCell.Blur();\n    }\n\n    SetEditableCell(location: Pointer): void {\n        this.editableCell.Select(location);\n\n        if (!this.IsEditableCellVisible) {\n            this.editableCellLostObservale.Notify();\n        }\n    }\n\n    SetEditableRegion(p0: Vec2, p1: Vec2): void {\n        this.editableCell.SelectRegion(p0, p1);\n    }\n\n    CellInput(e: MyInputEvent): void {\n        this.editableCell.CellInput(e.key);\n    }\n\n    Clear(): void {\n        this.codeEditorRenderer.Clear();\n    }\n\n    Draw(): void {\n        this.codeEditorRenderer.Draw();\n\n        this.extension.Draw();\n    }\n\n    get Dimension(): EditorGridDimension {\n        return this.codeEditorRenderer.Dimension;\n    }\n\n    get ViewProjection() {\n        return this.codeEditorRenderer.ViewProjection;\n    }\n\n    set ViewProjection(proj: Mat4 | Float32Array) {\n        this.codeEditorRenderer.ViewProjection = proj;\n        this.extension.ViewProjection = proj;\n    }\n\n    get EditableCell(): Vec2 {\n        return this.editableCell.Target.lt;\n    }\n\n    get EditableCellRect(): EditableCellRect {\n        const lb: vec3 = [\n            this.EditableCell.x * this.codeEditorRenderer.CellSize,\n            (this.codeEditorRenderer.Dimension.Rows - this.EditableCell.y - 1) * this.codeEditorRenderer.CellSize,\n            0.02];\n\n        const rt: vec3 = [\n            (this.EditableCell.x + 1) * this.codeEditorRenderer.CellSize,\n            (this.codeEditorRenderer.Dimension.Rows - this.EditableCell.y) * this.codeEditorRenderer.CellSize,\n            0.02];\n\n        return { lb, rt };\n    }\n\n    get IsEditableCellVisible(): boolean {\n        const lb: vec3 = [\n            this.editableCell.Target.lt.x * this.codeEditorRenderer.CellSize,\n            (this.codeEditorRenderer.Dimension.Rows - this.editableCell.Target.lt.y - 1) * this.codeEditorRenderer.CellSize,\n            0.02];\n\n        const lbNDC = vec3.transformMat4(vec3.create(), lb, this.ViewProjection);\n\n        if (lbNDC[0] < -1 || lbNDC[1] < -1) {\n            return false;\n        }\n\n        const rt: vec3 = [\n            (this.editableCell.Target.lt.x + 1) * this.codeEditorRenderer.CellSize,\n            (this.codeEditorRenderer.Dimension.Rows - this.editableCell.Target.lt.y) * this.codeEditorRenderer.CellSize,\n            0.02];\n\n        const rtNDC = vec3.transformMat4(vec3.create(), rt, this.ViewProjection);\n\n        if (rtNDC[0] > 1 || rtNDC[1] > 1) {\n            return false;\n        }\n\n        return true;\n    }\n\n    get CellSize(): number {\n        return this.codeEditorRenderer.CellSize;\n    }\n\n    private OnSetEditableRegion(): void {\n        this.touchBehavior = new SelectCellsRegion(this.editableCell);\n    }\n\n    private OnCut(): void {\n        navigator.clipboard.writeText(this.editableCell.ContentString());\n\n        this.editableCell.Clear();\n    }\n\n    private OnCopyEditableRegion(): void {\n        navigator.clipboard.writeText(this.editableCell.ContentString());\n    }\n\n    private async OnPaste(): Promise<void> {\n        const data = await AsyncExceptionTrap\n            .Try(SelfBind(navigator.clipboard, 'readText'))\n            .CatchValue('');\n\n        if (data.length === 0) {\n            return;\n        }\n\n        if (!this.editableCell.InsertSourceCode(data)) {\n            this.overlay.Snackbar.ShowWarning('Not enough space to insert the fragment')\n        }\n    }\n\n    private OnDelete(): void {\n        this.editableCell.Clear();\n    }\n}\n\nInversify.bind(CodeEditorService).toSelf().inSingletonScope();\n","import { Instruction } from '../instructions/Instruction';\nimport { IOPort } from '../IOPort';\nimport { Memory, Pointer } from '../memory/Memory';\n\nimport { CPU, IllegalInstructionException, PCDirection } from './CPU';\n\nexport class CPUImpl implements CPU {\n  private pcDirection = PCDirection.Right;\n  private pcLocation: Pointer = { x: 0, y: 0 };\n  private stack: number[] = [];\n  private isStringMode = false;\n  private isHalted = false;\n\n  private instructionSet: Instruction[] = Array.from({ length: 128 });\n\n  constructor(\n    private memory: Memory,\n    private io: IOPort,\n    instructions: Instruction[]\n  ) {\n    instructions.forEach(\n      inst => (this.instructionSet[inst.Code.charCodeAt(0)] = inst)\n    );\n  }\n\n  get Stack(): number[] {\n    return this.stack;\n  }\n\n  get PC(): { Location: Pointer; Direction: PCDirection } {\n    return { Location: this.pcLocation, Direction: this.pcDirection };\n  }\n\n  get NextInstructionCode(): string {\n    return String.fromCharCode(this.memory.Read(this.pcLocation));\n  }\n\n  StackPush(value: number): void {\n    this.stack.push(value);\n  }\n\n  StackPop(): number {\n    if (this.stack.length === 0) {\n      return 0;\n    } else {\n      const ret = this.stack[this.stack.length - 1];\n\n      this.stack.pop();\n\n      return ret;\n    }\n  }\n\n  StackDuplicate(): void {\n    if (this.stack.length >= 1) {\n      this.stack.push(this.stack[this.stack.length - 1]);\n    } else {\n      this.stack.push(0, 0);\n    }\n  }\n\n  StackSwap(): void {\n    if (this.stack.length >= 2) {\n      const last = this.stack[this.stack.length - 1];\n      this.stack[this.stack.length - 1] = this.stack[this.stack.length - 2];\n      this.stack[this.stack.length - 2] = last;\n    } else {\n      this.stack.push(\n        ...Array.from({ length: 2 - this.stack.length }, () => 0)\n      );\n    }\n  }\n\n  PCDirection(dir: PCDirection): void {\n    this.pcDirection = dir;\n  }\n\n  ExecuteNext(): void {\n    const instruction = this.memory.Read(this.pcLocation);\n\n    if (this.isStringMode && instruction !== '\"'.charCodeAt(0)) {\n      this.stack.push(instruction);\n    } else if (this.KnownInstruction(instruction)) {\n      this.instructionSet[instruction].Execute(this);\n    } else {\n      throw new IllegalInstructionException(this.pcLocation, instruction, String.fromCharCode(instruction))\n    }\n\n    this.SkipNext();\n  }\n\n  SkipNext(): void {\n    this.pcLocation = this.memory.PointerArithmetics.Move(\n      this.pcLocation,\n      this.pcDirection\n    );\n  }\n\n  StringModeToggle(): void {\n    this.isStringMode = !this.isStringMode;\n  }\n\n  ReadMemory(ptr: Pointer): number {\n    return this.memory.Read(ptr);\n  }\n\n  WriteMemory(ptr: Pointer, value: number): void {\n    this.memory.Write(ptr, value);\n  }\n\n  WriteIO(symbol: string): void {\n    this.io.OutputWrite(symbol);\n  }\n\n  ReadCharacter(): string {\n    return this.io.InputReadCharacter();\n  }\n\n  ReadNumber(): number {\n    return this.io.InputReadNumber();\n  }\n\n  Halt(): void {\n    this.isHalted = true;\n  }\n\n  get IsHalted(): boolean {\n    return this.isHalted;\n  }\n\n  private KnownInstruction(instruction: number): boolean {\n    return this.instructionSet[instruction] !== undefined;\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Add implements Instruction {\n  get Code(): string {\n    return '+';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(cpu.StackPop() + cpu.StackPop());\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Bridge implements Instruction {\n  get Code(): string {\n    return '#';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.SkipNext();\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Divide implements Instruction {\n  get Code(): string {\n    return '/';\n  }\n\n  Execute(cpu: CPU): void {\n    const a = cpu.StackPop();\n    const b = cpu.StackPop();\n\n    cpu.StackPush(Math.trunc(b / a));\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class EndProgramm implements Instruction {\n  get Code(): string {\n    return '@';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.Halt();\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class GreatherThan implements Instruction {\n  get Code(): string {\n    return '`';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(+(cpu.StackPop() < cpu.StackPop()));\n  }\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class HoriontalIf implements Instruction {\n  get Code(): string {\n    return '_';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(\n      cpu.StackPop() === 0 ? PCDirection.Right : PCDirection.Left\n    );\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class InputASCII implements Instruction {\n  get Code(): string {\n    return '~';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(cpu.ReadCharacter().charCodeAt(0));\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class InputInteger implements Instruction {\n  get Code(): string {\n    return '&';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(cpu.ReadNumber());\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class MemoryRead implements Instruction {\n  get Code(): string {\n    return 'g';\n  }\n\n  Execute(cpu: CPU): void {\n    const y = cpu.StackPop();\n    const x = cpu.StackPop();\n\n    cpu.StackPush(cpu.ReadMemory({ x: x, y: y }));\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class MemoryWrite implements Instruction {\n  get Code(): string {\n    return 'p';\n  }\n\n  Execute(cpu: CPU): void {\n    const y = cpu.StackPop();\n    const x = cpu.StackPop();\n    const value = cpu.StackPop();\n\n    cpu.WriteMemory({ x: x, y: y }, value);\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Modulo implements Instruction {\n  get Code(): string {\n    return '%';\n  }\n\n  Execute(cpu: CPU): void {\n    const a = cpu.StackPop();\n    const b = cpu.StackPop();\n\n    cpu.StackPush(b % a);\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Multiply implements Instruction {\n  get Code(): string {\n    return '*';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(cpu.StackPop() * cpu.StackPop());\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Negation implements Instruction {\n  get Code(): string {\n    return '!';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(+(cpu.StackPop() === 0));\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class NoOperation implements Instruction {\n  get Code(): string {\n    return ' ';\n  }\n  Execute(_cpu: CPU): void {}\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PCDirectionDown implements Instruction {\n  get Code(): string {\n    return 'v';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(PCDirection.Down);\n  }\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PCDirectionLeft implements Instruction {\n  get Code(): string {\n    return '<';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(PCDirection.Left);\n  }\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PCDirectionRandom implements Instruction {\n  get Code(): string {\n    return '?';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(\n      Math.floor((Math.random() * Object.keys(PCDirection).length) >> 1)\n    );\n  }\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PCDirectionRight implements Instruction {\n  get Code(): string {\n    return '>';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(PCDirection.Right);\n  }\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PCDirectionUp implements Instruction {\n  get Code(): string {\n    return '^';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(PCDirection.Up);\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class StackPop implements Instruction {\n  get Code(): string {\n    return '$';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPop();\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PrintASCII implements Instruction {\n  get Code(): string {\n    return ',';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.WriteIO(String.fromCharCode(cpu.StackPop()));\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class PrintInteger implements Instruction {\n  get Code(): string {\n    return '.';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.WriteIO(cpu.StackPop().toString() + ' ');\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class StackDuplicate implements Instruction {\n  get Code(): string {\n    return ':';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackDuplicate();\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class StackPushDigit implements Instruction {\n  constructor(private digit: number) {}\n\n  get Code(): string {\n    return this.digit.toString();\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackPush(this.digit);\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class StackSwap implements Instruction {\n  get Code(): string {\n    return '\\\\';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StackSwap();\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class Subtract implements Instruction {\n  get Code(): string {\n    return '-';\n  }\n  Execute(cpu: CPU): void {\n    const a = cpu.StackPop();\n    const b = cpu.StackPop();\n    cpu.StackPush(b - a);\n  }\n}\n","import { CPU } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class ToggleStringMode implements Instruction {\n  get Code(): string {\n    return '\"';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.StringModeToggle();\n  }\n}\n","import { CPU, PCDirection } from '../CPU/CPU';\n\nimport { Instruction } from './Instruction';\n\nexport class VerticalIf implements Instruction {\n  get Code(): string {\n    return '|';\n  }\n\n  Execute(cpu: CPU): void {\n    cpu.PCDirection(cpu.StackPop() === 0 ? PCDirection.Down : PCDirection.Up);\n  }\n}\n","export class IOPort {\n  private input: string[] = [];\n\n  private output: string[] = [];\n\n  InputWrite(data: string): void {\n    this.input.push(...data);\n  }\n\n  InputReadCharacter(): string {\n    if (this.input.length === 0) {\n      throw new Error('Failed to read from IO port');\n    }\n\n    return this.input.shift()!;\n  }\n\n  InputReadNumber(): number {\n    let numberEnd = 0;\n    for (\n      let char = this.input[numberEnd];\n      numberEnd < this.input.length && char >= '0' && char <= '9';\n      ++numberEnd);\n\n    if (numberEnd === 0) {\n      throw new Error('Failed to read number from IO port');\n    }\n\n    return Number.parseInt(this.input.splice(0, numberEnd).join(''));\n  }\n\n  get HasInput(): boolean {\n    return this.input.length > 0;\n  }\n\n  OutputWrite(data: string): void {\n    this.output.push(...data);\n  }\n\n  OutputRead(): string {\n    if (this.output.length === 0) {\n      throw new Error('Failed to read from IO port');\n    }\n\n    return this.output.shift()!;\n  }\n\n  get HasOutput(): boolean {\n    return this.output.length > 0;\n  }\n}\n","import { CPU } from './CPU/CPU';\nimport { CPUImpl } from './CPU/CPUImpl';\nimport { Debugger } from './Debugger';\nimport {\n  Add,\n  Bridge,\n  Divide,\n  EndProgramm,\n  GreatherThan,\n  HoriontalIf,\n  InputASCII,\n  InputInteger,\n  MemoryWrite,\n  Modulo,\n  Multiply,\n  Negation,\n  PCDirectionDown,\n  PCDirectionLeft,\n  PCDirectionRandom,\n  PCDirectionRight,\n  PCDirectionUp,\n  PrintASCII,\n  PrintInteger,\n  StackDuplicate,\n  StackPop,\n  StackPushDigit,\n  StackSwap,\n  Subtract,\n  ToggleStringMode,\n  VerticalIf,\n  MemoryRead,\n  NoOperation\n} from './instructions';\nimport { Instruction } from './instructions/Instruction';\nimport { IOPort } from './IOPort';\nimport { Memory, Pointer } from './memory/Memory';\nimport { MemoryLimit } from './memory/MemoryLimit';\nimport { Profiler } from './Profiler';\n\nexport type MemoryWriteInterceptor = (ptr: Pointer, value: number) => void;\nexport type MemoryInterceptorReleaser = () => void;\n\nclass MemoryWriteInstructionInterceptor implements Instruction {\n  constructor(\n    private origin: MemoryWrite,\n    private interceptor: MemoryWriteInterceptor) { }\n\n  get Code(): string {\n    return this.origin.Code;\n  }\n\n  Execute(cpu: CPU): void {\n    const [value, x, y] = cpu.Stack.slice(-3);\n\n    this.interceptor({ x: x, y: y }, value);\n\n    this.origin.Execute(cpu);\n  }\n}\n\nexport class Befunge {\n  private io: IOPort;\n\n  private cpu: CPU;\n\n  private instructionsExecuted = 0;\n\n  private memoryWriteInterceptors: MemoryWriteInterceptor[] = [];\n\n  constructor(private memoryLimit: MemoryLimit, private memory: Memory) {\n    this.io = new IOPort();\n    this.cpu = new CPUImpl(this.memory, this.io, [\n      new Add(),\n      new Subtract(),\n      new Multiply(),\n      new Divide(),\n      new Modulo(),\n      new Negation(),\n      new GreatherThan(),\n      new PCDirectionRight(),\n      new PCDirectionLeft(),\n      new PCDirectionDown(),\n      new PCDirectionUp(),\n      new PCDirectionRandom(),\n      new HoriontalIf(),\n      new VerticalIf(),\n      new ToggleStringMode(),\n      new StackDuplicate(),\n      new StackSwap(),\n      new StackPop(),\n      new PrintInteger(),\n      new PrintASCII(),\n      new Bridge(),\n      new MemoryWriteInstructionInterceptor(\n        new MemoryWrite(),\n        (ptr: Pointer, value: number) => this.OnMemoryWrite(ptr, value)),\n      new MemoryRead(),\n      new InputInteger(),\n      new InputASCII(),\n      new EndProgramm(),\n      new NoOperation(),\n      ...[0, 1, 2, 3, 4, 5, 6, 7, 8, 9].map(d => new StackPushDigit(d))\n    ]);\n  }\n\n  LoadExecutable(code: string): void {\n    if (this.IsMemoryLimitDynamic) {\n      const memoryRequirements = Befunge.ExecutableMemoryLimit(code);\n\n      if (\n        memoryRequirements.Width > this.memoryLimit.Width ||\n        memoryRequirements.Height > this.memoryLimit.Height\n      ) {\n        this.memory.Resize(memoryRequirements);\n      }\n    }\n\n    const ptr: Pointer = { x: 0, y: 0 };\n\n    for (const symbol of code) {\n      if (symbol === '\\n') {\n        ptr.x = 0;\n        ++ptr.y;\n      } else {\n        this.memory.Write(ptr, symbol.charCodeAt(0));\n        ++ptr.x;\n      }\n    }\n  }\n\n  SetInput(input: string): void {\n    this.io.InputWrite(input);\n  }\n\n  /**\n   * Execute code loaded by `LoadExecutable`.\n   * Second call to `Run` or `RunFor` with same instance is forbidden, you should create new instance to each execution\n   */\n  Run(): void {\n    while (!this.cpu.IsHalted) {\n      this.cpu.ExecuteNext();\n    }\n  }\n\n  /**\n   * Execute code loaded by `LoadExecutable` until end or timeout.\n   * Second call to `Run` or `RunFor` with same instance is forbidden, you should create new instance to each execution\n   * @param timeout timeout\n   * @returns true if the program successfully finished, false if it terminated due to the timeout\n   */\n  RunFor(timeout: number): boolean {\n    const startTime = Date.now();\n    const instructionsSkipPerTimeoutCheck = 100000;\n\n    for (this.instructionsExecuted = 0;\n      !this.cpu.IsHalted && (this.instructionsExecuted % instructionsSkipPerTimeoutCheck !== 0 || Date.now() - startTime < timeout);\n      ++this.instructionsExecuted) {\n      this.cpu.ExecuteNext();\n    }\n\n    return this.IsHalted;\n  }\n\n  RunNext(): void {\n    this.cpu.ExecuteNext();\n  }\n\n  CollectOutput(): string {\n    let output = '';\n\n    while (this.io.HasOutput) {\n      output += this.io.OutputRead();\n    }\n\n    return output;\n  }\n\n  CollectOutputUntil(maxLength: number): string {\n    let output = '';\n\n    for (let readed = 0; this.io.HasOutput && readed < maxLength; ++readed) {\n      output += this.io.OutputRead();\n    }\n\n    return output;\n  }\n\n  AttachDebugger(d: Debugger): void {\n    d.AttachCPU(this.cpu);\n  }\n\n  AttachProfiler(profiler: Profiler): void {\n    profiler.AttachCPU(this.cpu);\n  }\n\n  AddMemoryWriteInterceptor(interceptor: MemoryWriteInterceptor): MemoryInterceptorReleaser {\n    this.memoryWriteInterceptors.push(interceptor);\n\n    return () => {\n      const rmIdx = this.memoryWriteInterceptors.indexOf(interceptor);\n\n      if (rmIdx !== -1) {\n        this.memoryWriteInterceptors.splice(rmIdx, 1);\n      }\n    };\n  }\n\n  private OnMemoryWrite(ptr: Pointer, value: number): void {\n    this.memoryWriteInterceptors.forEach(fn => fn(ptr, value));\n  }\n\n  get NextInstruction() {\n    return this.cpu.NextInstructionCode;\n  }\n\n  get IsHalted(): boolean {\n    return this.cpu.IsHalted;\n  }\n\n  get InstructionsExecuted(): number {\n    return this.instructionsExecuted;\n  }\n\n  get IP(): Pointer {\n    return this.cpu.PC.Location;\n  }\n\n  private get IsMemoryLimitDynamic(): boolean {\n    return (\n      this.memoryLimit.Width === Number.POSITIVE_INFINITY ||\n      this.memoryLimit.Height === Number.POSITIVE_INFINITY\n    );\n  }\n\n  private static ExecutableMemoryLimit(code: string): MemoryLimit {\n    let maxRowLength = 0;\n    let maxColumnLength = 0;\n    let rowLength = 0;\n\n    for (const instruction of code) {\n      if (instruction === '\\n') {\n        if (maxRowLength < rowLength) {\n          maxRowLength = rowLength;\n        }\n\n        rowLength = 0;\n        ++maxColumnLength;\n      } else {\n        ++rowLength;\n      }\n    }\n\n    return { Width: maxRowLength, Height: maxColumnLength };\n  }\n}\n","import { CPU, PCDirection } from './CPU/CPU';\nimport { Pointer } from './memory/Memory';\n\nexport type BreakpointReleaser = () => void;\n\nexport interface PcLocationCondition {\n  Location: Pointer;\n  Direction?: PCDirection;\n}\n\ninterface StackCondition {\n  Size?: ValueCondition;\n  Value?: ValueCondition;\n}\n\ninterface ValueCondition {\n  Condition: ComparsionCondition;\n  Value: number;\n}\n\nexport enum ComparsionCondition {\n  Less,\n  LessEqual,\n  Greater,\n  GreaterEqual,\n  Equal\n}\n\nexport interface BreakpointCondition {\n  PC?: PcLocationCondition;\n  Stack?: StackCondition;\n}\n\nexport class Debugger {\n  private target: CPU | null = null;\n\n  private pcLocationBrk = new Map<number, Map<number, BreakpointCondition[]>>();\n  private stackBrk: BreakpointCondition[] = [];\n\n  private noDebug = false;\n\n  AttachCPU(cpu: CPU): void {\n    this.target = cpu;\n  }\n\n  get IsHalted(): boolean {\n    return this.target?.IsHalted ?? true;\n  }\n\n  RunNext(): BreakpointCondition[] {\n    if (!this.target?.IsHalted) {\n      if (this.noDebug) {\n        this.noDebug = false;\n      } else {\n        const triggered = this.BreakpointsCheck();\n\n        if (triggered.length > 0) {\n          this.noDebug = true;\n          return triggered;\n        }\n      }\n\n      this.target?.ExecuteNext();\n    }\n\n    return [];\n  }\n\n  RunFor(timeout: number): BreakpointCondition[] | null {\n    const startTime = Date.now();\n    const instructionsSkipPerTimeoutCheck = 100000;\n\n    let breakpoints: BreakpointCondition[] = [];\n\n    for (let instructionsExecuted = 0;\n      !this.target?.IsHalted &&\n      breakpoints.length === 0 &&\n      (instructionsExecuted % instructionsSkipPerTimeoutCheck !== 0 || Date.now() - startTime < timeout);\n      ++instructionsExecuted) {\n      breakpoints = this.RunNext();\n    }\n\n    return breakpoints.length > 0 ? breakpoints : null;\n  }\n\n  SetBreakpoint(brk: BreakpointCondition): BreakpointReleaser {\n    if (brk.PC) {\n      let column = this.pcLocationBrk.get(brk.PC.Location.x);\n\n      if (!column) {\n        column = new Map<number, BreakpointCondition[]>();\n        column.set(brk.PC.Location.y, []);\n\n        this.pcLocationBrk.set(brk.PC.Location.x, column);\n      }\n\n      let row = column.get(brk.PC.Location.y);\n\n      if (row === undefined) {\n        row = [];\n        column.set(brk.PC.Location.y, row);\n      }\n\n      row.push(brk);\n    }\n\n    if (brk.Stack && (brk.Stack.Size || brk.Stack.Value)) {\n      this.stackBrk.push(brk);\n    }\n\n    return () => this.BreakpointReleaser(brk);\n  }\n\n  get PCBreakpoints(): PcLocationCondition[] {\n    return [...this.pcLocationBrk.values()]\n      .flatMap(x => [...x.values()])\n      .flatMap(x => [...x])\n      .map(x => x.PC!);\n  }\n\n  get Stack(): number[] {\n    return this.target?.Stack ?? [];\n  }\n\n  private BreakpointReleaser(brk: BreakpointCondition): void {\n    if (brk.PC) {\n      const column = this.pcLocationBrk.get(brk.PC.Location.x);\n      const brks = column?.get(brk.PC.Location.y);\n\n      if (brks) {\n        if (brks.length === 1) {\n          column?.delete(brk.PC.Location.y);\n        } else {\n          const toRemove = brks.indexOf(brk);\n\n          if (toRemove >= 0) {\n            brks.splice(toRemove, 1);\n          }\n        }\n      }\n    }\n\n    if (brk.Stack) {\n      const toRemove = this.stackBrk.indexOf(brk);\n\n      if (toRemove >= 0) {\n        this.stackBrk.splice(toRemove, 1);\n      }\n    }\n  }\n\n  private BreakpointsCheck(): BreakpointCondition[] {\n    return [...this.BreakpointCheckPC(), ...this.BreakpointCheckStack()];\n  }\n\n  private BreakpointCheckPC(): BreakpointCondition[] {\n    if (this.target === null) {\n      return [];\n    }\n\n    const column = this.pcLocationBrk.get(this.target.PC.Location.x);\n\n    if (!column) {\n      return [];\n    }\n\n    const brks = column.get(this.target.PC.Location.y);\n\n    return (\n      brks?.filter(brk => {\n        if (brk) {\n          if (brk.PC?.Direction === undefined) {\n            return true;\n          } else {\n            return brk.PC.Direction === this.target!.PC.Direction;\n          }\n        } else {\n          return false;\n        }\n      }) ?? []\n    );\n  }\n\n  private BreakpointCheckStack(): BreakpointCondition[] {\n    if (this.target === null) {\n      return [];\n    }\n\n    return this.stackBrk.filter(brk => {\n      if (brk.Stack?.Size?.Value !== this.target?.Stack.length) {\n        return false;\n      }\n\n      if (brk.Stack?.Value) {\n        if (this.target?.Stack.length === 0) {\n          return false;\n        }\n\n        const top = this.target!.Stack[this.target!.Stack.length - 1];\n\n        switch (brk.Stack.Value.Condition) {\n          case ComparsionCondition.Equal:\n            return brk.Stack.Value.Value === top;\n          case ComparsionCondition.Less:\n            return brk.Stack.Value.Value < top;\n          case ComparsionCondition.LessEqual:\n            return brk.Stack.Value.Value <= top;\n          case ComparsionCondition.Greater:\n            return brk.Stack.Value.Value > top;\n          case ComparsionCondition.GreaterEqual:\n            return brk.Stack.Value.Value >= top;\n        }\n      }\n\n      return true;\n    });\n  }\n}\n","import { Array2D } from \"../containers/Array2D\";\n\nimport { CPU } from \"./CPU/CPU\";\nimport { MemoryLimit } from \"./memory/MemoryLimit\";\n\nexport class Profiler {\n    private target: CPU | null = null;\n\n    constructor(private memoryLimit: MemoryLimit) { }\n\n    AttachCPU(cpu: CPU): void {\n        this.target = cpu;\n    }\n\n    CellHeatmapFor(timeout: number): Array2D<number> | null {\n        if (this.target === null) {\n            throw new Error('Attempting to gather heatmap without attached any cpu. Call AttachCPU first.');\n        }\n\n        const startTime = Date.now();\n        const instructionsSkipPerTimeoutCheck = 100000;\n\n        const heatmap = Array2D.WithProvider(\n            this.memoryLimit.Width,\n            this.memoryLimit.Height,\n            () => 0);\n\n        for (let instructionsExecuted = 0;\n            !this.target.IsHalted && (instructionsExecuted % instructionsSkipPerTimeoutCheck !== 0 || Date.now() - startTime < timeout);\n            ++instructionsExecuted) {\n            heatmap.Update({\n                column: this.target.PC.Location.x,\n                row: this.target.PC.Location.y\n            },\n                x => x + 1);\n\n            this.target.ExecuteNext();\n        }\n\n\n        return this.target.IsHalted ? heatmap : null;\n    }\n}\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"./AppSettings\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Befunge } from \"@/lib/befunge/Befunge\";\nimport { Debugger } from \"@/lib/befunge/Debugger\";\nimport { Memory } from \"@/lib/befunge/memory/Memory\";\nimport { MemoryLimit } from \"@/lib/befunge/memory/MemoryLimit\";\nimport { Profiler } from \"@/lib/befunge/Profiler\";\n\n@injectable()\nexport class BefungeToolbox {\n    private interpreter!: Befunge;\n    private debugger!: Debugger;\n    private profiler!: Profiler;\n\n    constructor(@inject(AppSettings) private settings: AppSettings) { }\n\n    get Interpreter(): Befunge {\n        return this.interpreter;\n    }\n\n    get Debugger(): Debugger {\n        return this.debugger;\n    }\n\n    get Profiler(): Profiler {\n        return this.profiler;\n    }\n\n    Reset(memoryLimit: MemoryLimit, memory: Memory): void {\n        this.interpreter = new Befunge(memoryLimit, memory);\n\n        this.debugger = new Debugger();\n        this.interpreter.AttachDebugger(this.debugger);\n\n        this.profiler = new Profiler(this.settings.MemoryLimit);\n        this.interpreter.AttachProfiler(this.profiler);\n    }\n}\n\nInversify.bind(BefungeToolbox).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"../AppSettings\";\nimport { BefungeToolbox } from \"../BefungeToolbox\";\nimport { CodeEditorService } from \"../CodeEditor/CodeEditorService\";\nimport { TooltipPosition } from \"../CodeEditor/CodeEditorTooltipService\";\nimport { DebugAction, PCDirectionCondition } from \"../Overlay/DebugControls\";\nimport { OverlayService } from \"../Overlay/OverlayService\";\nimport { SourceCodeMemory } from \"../SourceCodeMemory\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { BreakpointCondition, BreakpointReleaser, PcLocationCondition } from \"@/lib/befunge/Debugger\";\nimport { Pointer } from \"@/lib/befunge/memory/Memory\";\nimport { Rgb, Vec2 } from \"@/lib/Primitives\";\n\ninterface CellBreakpointController extends PcLocationCondition {\n    releaser: BreakpointReleaser | null;\n}\n\n@injectable()\nexport class DebuggingService {\n    private debugMode = false;\n    private breakpoints: CellBreakpointController[] = [];\n    private activeCellBreakpoints: PcLocationCondition[] = [];\n    private activeBreakpointColor: Rgb = [0.8980392156862745, 0.2235294117647059, 0.20784313725490197];\n    private inactiveBreakpointColor: Rgb = [0.9764705882352941, 0.6588235294117647, 0.1450980392156863];\n\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(OverlayService) private overlay: OverlayService,\n        @inject(CodeEditorService) private codeEditor: CodeEditorService,\n        @inject(BefungeToolbox) private befungeToolbox: BefungeToolbox,\n        @inject(SourceCodeMemory) private editorSourceCode: SourceCodeMemory\n    ) {\n        this.overlay.DebugControls.Debug.Attach((action: DebugAction) => this.DebugCodeAction(action));\n        this.overlay.DebugControls.CellBreakopint.Attach((cond: PCDirectionCondition) => this.OnCellBreakpointAction(cond));\n        this.overlay.DebugControls.CellBreakpointDelete.Attach(() => this.OnCellBreakpointDelete());\n    }\n\n    OnSelect(prevEditableCell: Vec2): void {\n        const hasBrk = this.breakpoints\n            .some(brk => brk.Location.x === this.codeEditor.EditableCell.x && brk.Location.y === this.codeEditor.EditableCell.y);\n\n        this.overlay.DebugControls.DeactivateButton = hasBrk;\n\n        if (prevEditableCell.x !== this.codeEditor.EditableCell.x || prevEditableCell.y !== this.codeEditor.EditableCell.y) {\n            if (this.activeCellBreakpoints.some(brk => brk.Location.x === prevEditableCell.x && brk.Location.y === prevEditableCell.y)) {\n                this.codeEditor.Select(prevEditableCell.x, prevEditableCell.y, this.activeBreakpointColor);\n            } else if (this.breakpoints.some(brk => brk.Location.x === prevEditableCell.x && brk.Location.y === prevEditableCell.y)) {\n                this.codeEditor.Select(prevEditableCell.x, prevEditableCell.y, this.inactiveBreakpointColor);\n            }\n        }\n    }\n\n    OnCellInput(prevEditableCell: Vec2): void {\n        if (this.breakpoints.some(brk => brk.Location.x === prevEditableCell.x && brk.Location.y === prevEditableCell.y)) {\n            this.codeEditor.Select(prevEditableCell.x, prevEditableCell.y, this.inactiveBreakpointColor);\n        }\n    }\n\n    private RunNext(action: DebugAction): void {\n        if (!this.DebugMode) {\n            this.befungeToolbox.Reset(this.settings.MemoryLimit, this.editorSourceCode.Clone());\n            this.befungeToolbox.Interpreter.SetInput(this.overlay.IOControls.Input);\n            this.befungeToolbox.Interpreter.AddMemoryWriteInterceptor((ptr: Pointer, value: number) => this.OnMemoryWrite(ptr, value));\n\n            this.UploadBreakpointsToDebugger();\n\n            this.DebugMode = true;\n            this.overlay.DebugControls.DebugMode = true;\n\n            this.overlay.IOControls.Output = '';\n        }\n\n        const debug = this.befungeToolbox.Debugger;\n        const interpreter = this.befungeToolbox.Interpreter;\n\n\n        this.activeCellBreakpoints.forEach(brk => this.codeEditor.Unselect(brk.Location.x, brk.Location.y));\n\n        let executionResult: BreakpointCondition[] | null;\n        try {\n            if (action === DebugAction.RunNextBreakpoint) {\n                executionResult = debug.RunFor(this.settings.ExecutionTimeout);\n            } else if (action === DebugAction.RunNextInstruction) {\n                executionResult = debug.RunNext();\n                if (executionResult.length > 0) {\n                    executionResult = debug.RunNext();\n                }\n            } else {\n                throw new Error('Unexpected debug action');\n            }\n        } catch (e) {\n            if (e instanceof Error) {\n                this.overlay.Snackbar.ShowError(e.message)\n            }\n\n            this.Interrupt();\n            return;\n        }\n\n\n        let breakpoints: BreakpointCondition[] = [];\n\n        if (executionResult === null) {\n            if (!debug.IsHalted) {\n                this.overlay.Snackbar.ShowWarning('Terminated due timeout');\n\n                this.overlay.StackControls.Stack = [];\n            }\n\n            this.DebugMode = false;\n            this.overlay.DebugControls.DebugMode = false;\n            this.activeCellBreakpoints = [];\n\n            this.codeEditor.HideAllTooltips();\n        } else {\n            breakpoints = executionResult;\n        }\n\n        if (action === DebugAction.RunNextBreakpoint && breakpoints.length > 0) {\n            this.RestoreCellBreakpointsSelection();\n\n            this.activeCellBreakpoints = [];\n            for (const brk of breakpoints) {\n                if (brk.PC) {\n                    this.activeCellBreakpoints.push(brk.PC);\n                    this.codeEditor.Select(brk.PC.Location.x, brk.PC.Location.y, this.activeBreakpointColor);\n                }\n            }\n\n            this.overlay.StackControls.Stack = debug.Stack;\n            this.overlay.StackControls.ScrollToTop();\n            this.overlay.IOControls.Output += interpreter.CollectOutputUntil(this.settings.MaxOutputLength);\n        } else {\n            this.RestoreCellBreakpointsSelection();\n\n            this.activeCellBreakpoints = [{ Location: { x: interpreter.IP.x, y: interpreter.IP.y } }];\n\n            this.codeEditor.Select(interpreter.IP.x, interpreter.IP.y, this.activeBreakpointColor);\n\n            this.overlay.StackControls.Stack = debug.Stack;\n            this.overlay.StackControls.ScrollToTop();\n            this.overlay.IOControls.Output += interpreter.CollectOutputUntil(this.settings.MaxOutputLength);\n        }\n\n        if (debug.IsHalted) {\n            this.DebugMode = false;\n            this.overlay.DebugControls.DebugMode = false;\n\n            this.activeCellBreakpoints.forEach(brk => this.codeEditor.Unselect(brk.Location.x, brk.Location.y));\n            this.activeCellBreakpoints = [];\n\n            this.overlay.IOControls.Output += interpreter.CollectOutputUntil(this.settings.MaxOutputLength);\n\n            this.RestoreCellBreakpointsSelection();\n\n            this.codeEditor.HideAllTooltips();\n\n            this.overlay.Snackbar.ShowSuccess(`Completed`);\n\n            this.overlay.StackControls.Stack = [];\n        }\n    }\n\n    private Interrupt(): void {\n        this.DebugMode = false;\n        this.overlay.DebugControls.DebugMode = false;\n\n        this.activeCellBreakpoints.forEach(brk => this.codeEditor.Unselect(brk.Location.x, brk.Location.y));\n        this.activeCellBreakpoints = [];\n\n        this.RestoreCellBreakpointsSelection();\n\n\n        this.codeEditor.HideAllTooltips();\n\n        this.overlay.StackControls.Stack = [];\n    }\n\n    private get DebugMode(): boolean {\n        return this.debugMode;\n    }\n\n    private set DebugMode(debug: boolean) {\n        this.debugMode = debug;\n\n        this.overlay.StackControls.Visible = debug;\n        this.overlay.EditControls.Disable = debug;\n    }\n\n    private DebugCodeAction(action: DebugAction): void {\n        if (action === DebugAction.RunNextBreakpoint && this.breakpoints.length === 0 && !this.debugMode) {\n            this.RunNext(DebugAction.RunNextInstruction);\n        } else if (action === DebugAction.Interrupt) {\n            this.Interrupt();\n        } else {\n            this.RunNext(action);\n        }\n    }\n\n    private UploadBreakpointsToDebugger(): void {\n        this.breakpoints.forEach(brk => {\n            brk.releaser = this.SetCellBreakpoint(brk);\n        });\n    }\n\n    private SetCellBreakpoint(brk: PcLocationCondition): BreakpointReleaser {\n        const releaser = this.befungeToolbox.Debugger.SetBreakpoint({ PC: brk });\n\n        this.codeEditor.Select(brk.Location.x, brk.Location.y, this.inactiveBreakpointColor);\n\n        return () => {\n            releaser();\n            this.codeEditor.Unselect(brk.Location.x, brk.Location.y);\n        };\n    }\n\n    private OnCellBreakpointAction(cond: PCDirectionCondition): void {\n        const existIdx = this.breakpoints\n            .findIndex(brk => brk.Location.x === this.codeEditor.EditableCell.x && brk.Location.y === this.codeEditor.EditableCell.y);\n\n        const condition: PcLocationCondition = {\n            Location: { ...this.codeEditor.EditableCell },\n            ...cond\n        };\n\n        if (existIdx === -1) {\n            const releaser = this.DebugMode ? this.SetCellBreakpoint(condition) : null;\n            this.breakpoints.push({ ...condition, releaser });\n\n            this.codeEditor.Select(condition.Location.x, condition.Location.y, this.inactiveBreakpointColor);\n\n            this.overlay.DebugControls.DeactivateButton = true;\n        } else {\n            const releaser = this.DebugMode ? this.SetCellBreakpoint(condition) : null;\n            this.breakpoints[existIdx] = { ...condition, releaser };\n        }\n    }\n\n    private OnCellBreakpointDelete(): void {\n        const existIdx = this.breakpoints\n            .findIndex(brk => brk.Location.x === this.codeEditor.EditableCell.x && brk.Location.y === this.codeEditor.EditableCell.y);\n\n        if (existIdx !== -1) {\n            const brkRemove = this.breakpoints[existIdx];\n\n            if (brkRemove.releaser !== null) {\n                brkRemove.releaser();\n            }\n\n            this.breakpoints.splice(existIdx, 1);\n\n            this.codeEditor.Select(brkRemove.Location.x, brkRemove.Location.y, [0.21568627450980393, 0.2784313725490196, 0.30980392156862746]);\n\n            this.overlay.DebugControls.DeactivateButton = false;\n        }\n    }\n\n    private RestoreCellBreakpointsSelection(): void {\n        for (const brk of this.befungeToolbox.Debugger.PCBreakpoints) {\n            this.codeEditor.Select(brk.Location.x, brk.Location.y, this.inactiveBreakpointColor);\n        }\n    }\n\n    private OnMemoryWrite(ptr: Pointer, value: number): void {\n        this.codeEditor.Tooltip(\n            ptr.x,\n            ptr.y,\n            `${value.toString()}(${String.fromCharCode(value)})`,\n            TooltipPosition.RightTop);\n    }\n}\n\nInversify.bind(DebuggingService).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"../AppSettings\";\nimport { BefungeToolbox } from \"../BefungeToolbox\";\nimport { OverlayService } from \"../Overlay/OverlayService\";\nimport { SourceCodeMemory } from \"../SourceCodeMemory\";\n\nimport { Inversify } from \"@/Inversify\";\n\n@injectable()\nexport class ExecutionService {\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(OverlayService) private overlay: OverlayService,\n        @inject(BefungeToolbox) private befungeToolbox: BefungeToolbox,\n        @inject(SourceCodeMemory) private editorSourceCode: SourceCodeMemory\n    ) {\n        this.overlay.DebugControls.Execute.Attach(() => this.Execute());\n    }\n\n    private Execute(): void {\n        this.befungeToolbox.Reset(this.settings.MemoryLimit, this.editorSourceCode.Clone());\n\n        this.befungeToolbox.Interpreter.SetInput(this.overlay.IOControls.Input);\n\n        try {\n            if (this.befungeToolbox.Interpreter.RunFor(this.settings.ExecutionTimeout)) {\n                this.overlay.Snackbar.ShowSuccess(`Ok\\nInstructions executed: ${this.befungeToolbox.Interpreter.InstructionsExecuted}`);\n            } else {\n                this.overlay.Snackbar.ShowWarning('Terminated due timeout');\n            }\n\n            this.overlay.IOControls.Output = this.befungeToolbox.Interpreter.CollectOutputUntil(this.settings.MaxOutputLength);\n        } catch (e) {\n            if (e instanceof Error) {\n                this.overlay.Snackbar.ShowError(e.message)\n            }\n        }\n    }\n}\n\nInversify.bind(ExecutionService).toSelf().inSingletonScope();\n","export default \"#version 300 es\\nprecision highp float;\\nprecision highp int;\\n\\nin vec2 v_uvCoord;\\nin vec4 v_color;\\n\\nuniform float u_time;\\n\\nout vec4 out_color;\\n\\n// https://thebookofshaders.com/13/\\n\\n// Author @patriciogv - 2015\\n// http://patriciogonzalezvivo.com\\n\\nfloat random(in vec2 _st) {\\n    return fract(sin(dot(_st.xy, vec2(12.9898f, 78.233f))) *\\n        43758.5453123f);\\n}\\n\\n// Based on Morgan McGuire @morgan3d\\n// https://www.shadertoy.com/view/4dS3Wd\\nfloat noise(in vec2 _st) {\\n    vec2 i = floor(_st);\\n    vec2 f = fract(_st);\\n\\n    // Four corners in 2D of a tile\\n    float a = random(i);\\n    float b = random(i + vec2(1.0f, 0.0f));\\n    float c = random(i + vec2(0.0f, 1.0f));\\n    float d = random(i + vec2(1.0f, 1.0f));\\n\\n    vec2 u = f * f * (3.0f - 2.0f * f);\\n\\n    return mix(a, b, u.x) +\\n        (c - a) * u.y * (1.0f - u.x) +\\n        (d - b) * u.x * u.y;\\n}\\n\\n#define NUM_OCTAVES 5\\n\\nfloat fbm(in vec2 _st) {\\n    float v = 0.0f;\\n    float a = 0.364f;\\n    vec2 shift = vec2(100.0f);\\n    // Rotate to reduce axial bias\\n    mat2 rot = mat2(cos(0.5f), sin(0.5f), -sin(0.5f), cos(0.50f));\\n    for(int i = 0; i < NUM_OCTAVES; ++i) {\\n        v += a * noise(_st);\\n        _st = rot * _st * 2.0f + shift;\\n        a *= 0.684f;\\n    }\\n    return v;\\n}\\n\\nvoid main() {\\n    vec2 st = v_uvCoord;\\n    ;\\n    // st += st * abs(sin(u_time*0.1)*3.0);\\n    vec3 color = vec3(0.0f);\\n\\n    vec2 q = vec2(0.f);\\n    q.x = fbm(st + 0.00f * u_time);\\n    q.y = fbm(st + vec2(1.0f));\\n\\n    vec2 r = vec2(0.f);\\n    r.x = fbm(st + 1.0f * q + vec2(1.7f, 9.2f) + 0.15f * u_time);\\n    r.y = fbm(st + 1.0f * q + vec2(8.3f, 2.8f) + 0.126f * u_time);\\n\\n    float f = fbm(st + r);\\n\\n    color = mix(vec3(0.101961f, 0.619608f, 0.666667f), vec3(0.666667f, 0.666667f, 0.498039f), clamp((f * f) * 4.0f, 0.0f, 1.0f));\\n\\n    color = mix(color, vec3(0.990f, 0.976f, 0.986f), clamp(length(q), 0.0f, 1.0f));\\n\\n    color = mix(color, v_color.rgb, clamp(length(r.x), 0.0f, 1.0f));\\n\\n    out_color = vec4((f * f * f + .6f * f * f + .5f * f) * color, v_color.a);\\n}\"","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { AppSettings } from \"../../AppSettings\";\nimport { InjectionToken } from \"../../InjectionToken\";\n\nimport FHeatmapGrid from './HeatmapGrid.frag';\nimport VHeatmapGrid from './HeatmapGrid.vert';\n\nimport { Inversify } from \"@/Inversify\";\nimport { Array2D } from \"@/lib/containers/Array2D\";\nimport { EnumSize } from \"@/lib/EnumSize\";\nimport { Rgba, Vec2 } from \"@/lib/Primitives\";\nimport { PrimitiveBuilder } from \"@/lib/renderer/PrimitiveBuilder\";\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from \"@/lib/renderer/ShaderProgram\";\nimport { UV } from \"@/lib/renderer/TextureAtlas\";\nimport { TypeSizeResolver } from \"@/lib/renderer/TypeSizeResolver\";\n\nenum HeatmapCellComponent { X, Y, Fx, Fy, R, G, B };\n\n\nexport class HeatmapGridRenderer extends PrimitivesRenderer {\n    private readonly startTime = Date.now() / 1000;\n\n    constructor(gl: WebGL2RenderingContext, attributes: number[]) {\n        const floatSize = TypeSizeResolver.Resolve(gl.FLOAT);\n        const gridStride = floatSize * EnumSize(HeatmapCellComponent);\n\n        super(gl,\n            { fragment: FHeatmapGrid, vertex: VHeatmapGrid },\n            [{\n                name: 'a_vertex',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false,\n                stride: gridStride,\n                offset: 0\n            },\n            {\n                name: 'a_uvCoord',\n                size: 2,\n                type: gl.FLOAT,\n                normalized: false,\n                stride: gridStride,\n                offset: 0\n            },\n            {\n                name: 'a_color',\n                size: 4,\n                type: gl.FLOAT,\n                normalized: false,\n                stride: gridStride,\n                offset: 2 * floatSize\n            }],\n            { indicesPerPrimitive: 6, basePrimitiveType: gl.TRIANGLES });\n\n        this.UploadAttributes(attributes);\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n\n    Draw(): void {\n        this.shader.SetUniform1f('u_time', Date.now() / 1000 - this.startTime);\n\n        super.Draw();\n    }\n}\n\ntype HeatmapColorInput = Array2D<Rgba>;\n\n@injectable()\nclass HeatmapGridRendererBuilder {\n    public readonly CellSize = 10;\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext,\n        @inject(AppSettings) private settings: AppSettings\n    ) { }\n\n    Build(heatmap: HeatmapColorInput): HeatmapGridRenderer {\n        const width = this.settings.MemoryLimit.Width * this.CellSize;\n        const height = this.settings.MemoryLimit.Height * this.CellSize;\n        const aspectRatio = width / height;\n        const uvCellSize = { width: this.CellSize / width, height: this.CellSize / height };\n        const vertexList: number[] = [];\n        for (let row = 0; row < this.settings.MemoryLimit.Height; ++row) {\n            for (let column = 0; column < this.settings.MemoryLimit.Width; ++column) {\n                const color: Rgba = heatmap.Get({ column, row: this.settings.MemoryLimit.Height - row - 1 });\n\n                const cell = this.BuildCell(\n                    { x: column * this.CellSize, y: row * this.CellSize },\n                    {\n                        A: { x: column * this.CellSize / width * aspectRatio, y: row * this.CellSize / height },\n                        B: { x: (column * this.CellSize / width + uvCellSize.width) * aspectRatio, y: row * this.CellSize / height + uvCellSize.height }\n                    },\n                    color);\n\n                vertexList.push(...cell);\n            }\n        }\n\n        return new HeatmapGridRenderer(this.gl, vertexList);\n    }\n\n    private BuildCell(\n        position: Vec2,\n        uvCoord: UV,\n        color: Rgba\n    ): number[] {\n        return PrimitiveBuilder.AABBRectangle(\n            position,\n            { width: this.CellSize, height: this.CellSize },\n            [\n                {\n                    LeftBottom: [uvCoord.A.x, uvCoord.A.y],\n                    LeftTop: [uvCoord.A.x, uvCoord.B.y],\n                    RightTop: [uvCoord.B.x, uvCoord.B.y],\n                    RightBottom: [uvCoord.B.x, uvCoord.A.y]\n                },\n                color\n            ]\n        );\n    }\n}\n\nInversify.bind(HeatmapGridRendererBuilder).toSelf().inRequestScope();\n\nexport type HeatMapGridFactory = (heatmap: HeatmapColorInput) => HeatmapGridRenderer;\n\nInversify\n    .bind<interfaces.Factory<HeatMapGridFactory>>(InjectionToken.HeatmapGridRendererFactory)\n    .toFactory<HeatmapGridRenderer, [HeatmapColorInput]>(ctx => (data: HeatmapColorInput) => ctx.container.get(HeatmapGridRendererBuilder).Build(data));\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec2 a_vertex;\\nin vec2 a_uvCoord;\\nin vec4 a_color;\\n\\nout vec2 v_uvCoord;\\nout vec4 v_color;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position = u_viewProject * vec4(a_vertex, 0.1, 1.0);\\n\\n  v_uvCoord = a_uvCoord;\\n  v_color = a_color;\\n}\\n\"","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { HeatMapGridFactory, HeatmapGridRenderer } from \"./HeatMapGridRenderer\";\n\nimport { AppSettings } from \"@/app/AppSettings\";\nimport { CodeEditorExtension } from \"@/app/CodeEditor/CodeEditorExtension\";\nimport { CodeEditorService } from \"@/app/CodeEditor/CodeEditorService\";\nimport { TooltipPosition, TooltipReleaser } from \"@/app/CodeEditor/CodeEditorTooltipService\";\nimport { InjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { Array2D } from \"@/lib/containers/Array2D\";\nimport { Rgb, Rgba } from \"@/lib/Primitives\";\nimport { Mat4 } from \"@/lib/renderer/ShaderProgram\";\n\ntype HeatmapHitStats = Array2D<number>;\n\n\nclass HeatmapExtension implements CodeEditorExtension {\n    constructor(\n        private heatmapGridRenderer: HeatmapGridRenderer,\n        private tooltipReleasers: TooltipReleaser[]) { }\n\n    Draw(): void {\n        this.heatmapGridRenderer.Draw();\n    }\n\n    Unload(): void {\n        this.heatmapGridRenderer.Dispose();\n        this.tooltipReleasers.forEach(release => release());\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.heatmapGridRenderer.ViewProjection = mat;\n    }\n}\n\n@injectable()\nexport class HeatmapExtensionBuilder {\n    private readonly lowHitsColor: Rgb = [0, 0.5568627450980392, 1];\n    private readonly highHitsColor: Rgb = [1, 0, 0];\n\n    private hitsColorsDiff!: Rgb;\n\n    private maxHits = Number.NEGATIVE_INFINITY;\n\n    private heatmap!: HeatmapHitStats;\n\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(CodeEditorService) private codeEditor: CodeEditorService,\n        @inject(InjectionToken.HeatmapGridRendererFactory) private heatmapGridRendererFactory: HeatMapGridFactory\n    ) { }\n\n    Build(heatmap: HeatmapHitStats): HeatmapExtension {\n        this.heatmap = heatmap;\n\n        this.Setup();\n\n        const releasers = this.DrawHitsOnCell();\n\n        const colors = this.heatmap.Map(x => this.HitsToColor(x));\n\n        const renderer = this.heatmapGridRendererFactory(colors);\n\n        return new HeatmapExtension(renderer, releasers)\n    }\n\n    private HitsToColor(hits: number): Rgba {\n        if (hits === 0) {\n            return [1, 1, 1, 0];\n        }\n\n        const t = hits / this.maxHits;\n\n        return [\n            this.lowHitsColor[0] + this.hitsColorsDiff[0] * t,\n            this.lowHitsColor[1] + this.hitsColorsDiff[1] * t,\n            this.lowHitsColor[2] + this.hitsColorsDiff[2] * t,\n            0.8\n        ]\n    }\n\n    private Setup(): void {\n        this.heatmap.ForEach(x => this.maxHits = Math.max(this.maxHits, x));\n\n        this.hitsColorsDiff = [\n            this.highHitsColor[0] - this.lowHitsColor[0],\n            this.highHitsColor[1] - this.lowHitsColor[1],\n            this.highHitsColor[2] - this.lowHitsColor[2]\n        ];\n    }\n\n    private DrawHitsOnCell(): TooltipReleaser[] {\n        const releasers: TooltipReleaser[] = [];\n\n        for (let row = 0; row < this.settings.MemoryLimit.Height; ++row) {\n            for (let column = 0; column < this.settings.MemoryLimit.Width; ++column) {\n                const hits = this.heatmap.Get({ column, row });\n                if (hits > 0) {\n                    const releaser = this.codeEditor.Tooltip(column, row, hits.toString(), TooltipPosition.LeftBottom);\n\n                    releasers.push(releaser);\n                }\n            }\n        }\n\n        return releasers;\n    }\n}\n\nInversify.bind(HeatmapExtensionBuilder).toSelf().inTransientScope();\n\nexport type HeatmapExtensionFactory = (heatmap: HeatmapHitStats) => HeatmapExtension;\n\nInversify\n    .bind<interfaces.Factory<HeatmapExtensionFactory>>(InjectionToken.HeatmapExtensionFactory)\n    .toFactory<HeatmapExtension, [HeatmapHitStats]>(ctx => (stats: HeatmapHitStats) => ctx.container.get(HeatmapExtensionBuilder).Build(stats));\n","import { inject, injectable } from \"inversify\";\n\nimport { HeatmapExtensionFactory } from \"../AnalysisTools/Heatmap/HeatmapExtension\";\nimport { AppSettings } from \"../AppSettings\";\nimport { BefungeToolbox } from \"../BefungeToolbox\";\nimport { CodeEditorService } from \"../CodeEditor/CodeEditorService\";\nimport { InjectionToken } from \"../InjectionToken\";\nimport { HeatmapToggleButtonState } from \"../Overlay/DebugControls\";\nimport { OverlayService } from \"../Overlay/OverlayService\";\nimport { SourceCodeMemory } from \"../SourceCodeMemory\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { ObservablePriority } from \"@/lib/Observable\";\n\n@injectable()\nexport class ProfillingService {\n    constructor(\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(SourceCodeMemory) private editorSourceCode: SourceCodeMemory,\n        @inject(BefungeToolbox) private befungeToolbox: BefungeToolbox,\n        @inject(CodeEditorService) private codeEditor: CodeEditorService,\n        @inject(OverlayService) private overlay: OverlayService,\n        @inject(InjectionToken.HeatmapExtensionFactory) private heatmapExtensionFactory: HeatmapExtensionFactory\n    ) {\n        this.overlay.DebugControls.Heatmap.Attach(\n            (shown: HeatmapToggleButtonState) => this.ToggleHeatmap(shown),\n            { priority: ObservablePriority.High });\n    }\n\n    private ToggleHeatmap(feedback: HeatmapToggleButtonState): void {\n        feedback.isShown ? this.BuildHeatmap(feedback) : this.HideHeatmap();\n    }\n\n    private BuildHeatmap(feedback: HeatmapToggleButtonState): void {\n        this.befungeToolbox.Reset(this.settings.MemoryLimit, this.editorSourceCode.Clone());\n\n        this.befungeToolbox.Interpreter.SetInput(this.overlay.IOControls.Input);\n\n        try {\n            const heatmap = this.befungeToolbox.Profiler.CellHeatmapFor(1000);\n\n            if (heatmap === null) {\n                this.overlay.Snackbar.ShowWarning('Terminated due timeout');\n\n                feedback.isShown = false;\n            } else {\n                const extension = this.heatmapExtensionFactory(heatmap);\n\n                this.codeEditor.LoadExtension(extension);\n            }\n        } catch (e) {\n            if (e instanceof Error) {\n                this.overlay.Snackbar.ShowError(e.message)\n            }\n\n            feedback.isShown = false;\n        }\n    }\n\n    private HideHeatmap(): void {\n        this.codeEditor.UnloadExtension();\n    }\n}\n\nInversify.bind(ProfillingService).toSelf().inSingletonScope();\n","import { inject, injectable } from \"inversify\";\n\nimport { DebuggingService } from \"./DebuggingService\";\nimport { ExecutionService } from \"./ExecutionService\";\nimport { ProfillingService } from \"./ProfilingService\";\n\nimport { Inversify } from \"@/Inversify\";\n\n@injectable()\nexport class CodeExecutionService {\n    constructor(\n        @inject(ExecutionService) private executionService: ExecutionService,\n        @inject(DebuggingService) private debuggingService: DebuggingService,\n        @inject(ProfillingService) private profillingService: ProfillingService\n    ) { }\n\n    get Execution(): ExecutionService {\n        return this.executionService;\n    }\n\n    get Debugging(): DebuggingService {\n        return this.debuggingService;\n    }\n\n    get Profilling(): ProfillingService {\n        return this.profillingService;\n    }\n}\n\nInversify.bind(CodeExecutionService).toSelf().inSingletonScope();\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { CodeEditorService } from \"./CodeEditor/CodeEditorService\";\nimport { CodeExecutionService } from \"./CodeExecution/CodeExecutionService\";\nimport { InjectionToken } from \"./InjectionToken\";\nimport { OverlayService } from \"./Overlay/OverlayService\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { Observable, ObservableController } from \"@/lib/Observable\";\nimport { InputReceiver, MyInputEvent } from \"@/lib/UI/InputReceiver\";\n\n@injectable()\nexport class CodeEditorServiceInputReceiver implements InputReceiver {\n    private onVanish = new ObservableController<void>();\n\n    constructor(\n        @inject(CodeEditorService) private codeEditor: CodeEditorService,\n        @inject(OverlayService) private overlay: OverlayService,\n        @inject(CodeExecutionService) private codeExecutionService: CodeExecutionService) { }\n\n    OnInput(e: MyInputEvent): void {\n        const keyCode = e.key.charCodeAt(0);\n\n        if (e.key.length === 1 && keyCode >= ' '.charCodeAt(0) && keyCode <= '~'.charCodeAt(0) || e.key === 'Backspace') {\n            if (this.overlay.DebugControls.DebugMode) {\n                this.overlay.Snackbar.ShowInformation('Editing is disabled during the debugging');\n            } else if (this.overlay.DebugControls.IsHeatmapShown) {\n                this.overlay.Snackbar.ShowInformation('Editing is disabled while heatmap is active');\n            } else {\n                const prevEditableCell = { ...this.codeEditor.EditableCell };\n\n                this.codeEditor.CellInput(e);\n\n                this.codeExecutionService.Debugging.OnCellInput(prevEditableCell);\n            }\n        }\n    }\n\n    Focus(): void {\n        this.codeEditor.Focus();\n    }\n\n    Blur(): void {\n        this.codeEditor.Blur();\n    }\n\n    get OnVanish(): Observable<void> {\n        return this.onVanish;\n    }\n}\n\nInversify.bind(CodeEditorServiceInputReceiver).toSelf().inRequestScope();\n\nexport type CodeEditorServiceInputReceiverFactory = () => CodeEditorServiceInputReceiver;\n\nInversify\n    .bind<interfaces.Factory<CodeEditorServiceInputReceiver>>(InjectionToken.CodeEditorServiceInputReceiverFactory)\n    .toFactory<CodeEditorServiceInputReceiver>(ctx => () => ctx.container.get(CodeEditorServiceInputReceiver));\n","export default \"#version 300 es\\nprecision mediump float;\\n\\nout vec4 out_color;\\n\\n\\nvoid main() \\n{\\n      out_color = vec4(0, 0.5686274509803921, 0.9176470588235294, 1);\\n}\\n\"","export default \"#version 300 es\\nprecision mediump float;\\n\\nin vec4 a_vertex;\\n\\nuniform mat4 u_viewProject;\\n\\nvoid main() \\n{\\n  gl_Position = u_viewProject * a_vertex;\\n  gl_PointSize = 10.0;\\n}\\n\"","import FDebugRenderer from './DebugRenderer.frag';\nimport VDebugRenderer from './DebugRenderer.vert';\n\nimport { PrimitivesRenderer } from \"@/lib/renderer/PrimitivesRenderer\";\nimport { Mat4 } from '@/lib/renderer/ShaderProgram';\nimport { TypeSizeResolver } from '@/lib/renderer/TypeSizeResolver';\n\nexport class DebugRenderer extends PrimitivesRenderer {\n    constructor(gl: WebGL2RenderingContext) {\n        const floatSize = TypeSizeResolver.Resolve(gl.FLOAT);\n        \n        super(\n            gl,\n            { vertex: VDebugRenderer, fragment: FDebugRenderer },\n            [{\n                name: 'a_vertex',\n                size: 3,\n                type: gl.FLOAT,\n                normalized: false,\n                stride: 3 * floatSize,\n                offset: 0\n            }],\n            { indicesPerPrimitive: 3, basePrimitiveType: gl.LINES });\n    }\n\n    set ViewProjection(mat: Mat4 | Float32Array) {\n        this.shader.SetUniformMatrix4fv('u_viewProject', mat);\n    }\n}","import { vec2 } from \"gl-matrix\";\n\nimport { CameraService } from \"../CameraService\";\n\nimport { Effect } from \"@/lib/effect/Effect\";\nimport { Camera, Viewport } from \"@/lib/renderer/Camera\";\n\nexport class SmoothCameraMove implements Effect {\n    private isDone = false;\n\n    private progress = 0;\n\n    private duration = 400;\n\n    constructor(\n        private camera: CameraService,\n        private destination: vec2,\n        private viewport: Viewport\n    ) { }\n\n    get IsDone(): boolean {\n        return this.isDone;\n    }\n\n    Draw(elapsed: number): void {\n        let fract = elapsed / this.duration;\n\n        this.progress += fract;\n\n        if (this.progress > 1) {\n            fract -= this.progress - 1;\n        }\n\n        const movement = vec2.mul(vec2.create(), this.destination, vec2.fromValues(fract, fract));\n\n        const delta = Camera.UnprojectMovement(\n            { x: movement[0], y: -movement[1] },\n            { a: 0, b: 0, c: 1, d: 0 },\n            this.camera.ViewProjection,\n            this.viewport);\n\n        this.camera.Translate({\n            x: delta.x,\n            y: delta.y\n        });\n\n        if (this.progress >= 1) {\n            this.isDone = true;\n        }\n    }\n}\n","import { ZCameraBoundary } from \"../AppSettings\";\nimport { CameraService } from \"../CameraService\";\n\nimport { Effect } from \"@/lib/effect/Effect\";\n\nexport class SmoothCameraZoom implements Effect {\n    private progress = 0;\n\n    private duration = 100;\n\n    private distance = 50;\n\n    private isDone = false;\n\n    constructor(\n        private direction: 'in' | 'out',\n        private camera: CameraService,\n        private boundary: ZCameraBoundary) {\n    }\n\n    get IsDone(): boolean {\n        return this.isDone;\n    }\n\n    Draw(elapsed: number): void {\n        const fract = elapsed / this.duration;\n\n        this.progress += fract;\n\n        const delta = this.distance * fract * (this.direction === 'in' ? -1 : 1);\n\n        const z = this.camera.Position.z + delta;\n\n        if (z >= this.boundary.max || z <= this.boundary.min) {\n            this.isDone = true;\n            return;\n        }\n\n        this.camera.Translate({ z: delta });\n\n        if (this.progress >= 1) {\n            this.isDone = true;\n        }\n    }\n}\n","export class DecodingErrorException extends Error {\n    constructor() { super('Failed to decode shared url') }\n}\n\nexport class BefungeSourceCodeCodec {\n    static Encode(decoded: string): string {\n        return btoa(decoded);\n    }\n\n    static Decode(encoded: string): string {\n        try {\n            return atob(encoded);\n        } catch (e) {\n            if (e instanceof DOMException) {\n                switch (e.name) {\n                    case 'InvalidCharacterError':\n                        throw new DecodingErrorException();\n                }\n            }\n\n            throw e;\n        }\n    }\n}\n","import { PCDirection } from '../CPU/CPU';\n\nimport { Pointer } from './Memory';\nimport { MemoryLimit } from './MemoryLimit';\nimport { PointerArithmetics } from './PointerArithmetics';\n\nexport class ModuloPointerArithmetics implements PointerArithmetics {\n  constructor(private memoryLimit: MemoryLimit) {}\n\n  Move(ptr: Pointer, dir: PCDirection): Pointer {\n    switch (dir) {\n      case PCDirection.Right:\n        return { x: (ptr.x + 1) % this.memoryLimit.Width, y: ptr.y };\n      case PCDirection.Left:\n        return {\n          x: ptr.x === 0 ? this.memoryLimit.Width - 1 : ptr.x - 1,\n          y: ptr.y\n        };\n      case PCDirection.Down:\n        return { x: ptr.x, y: (ptr.y + 1) % this.memoryLimit.Height };\n      case PCDirection.Up:\n        return {\n          x: ptr.x,\n          y: ptr.y === 0 ? this.memoryLimit.Height - 1 : ptr.y - 1\n        };\n    }\n  }\n}\n","import { Memory, Pointer } from './Memory';\nimport { MemoryLimit } from './MemoryLimit';\nimport { ModuloPointerArithmetics } from './ModuloPointerArithmetics';\nimport { PointerArithmetics } from './PointerArithmetics';\n\nexport class ArrayMemory implements Memory {\n  private pointerArithmetics: PointerArithmetics;\n  private memory: Uint8Array;\n\n  constructor(private limit: MemoryLimit) {\n    this.pointerArithmetics = new ModuloPointerArithmetics(limit);\n    this.memory = new Uint8Array(limit.Width * limit.Height);\n\n    const emptyValue = ' '.charCodeAt(0);\n\n    for (let n = 0; n < this.memory.length; ++n) {\n      this.memory[n] = emptyValue;\n    }\n  }\n\n  get PointerArithmetics(): PointerArithmetics {\n    return this.pointerArithmetics;\n  }\n\n  Read(ptr: Pointer): number {\n    if (this.IsPointerOutOfBound(ptr)) {\n      return 0;\n    }\n\n    return this.memory[this.PointerToIndex(ptr)];\n  }\n\n  Write(ptr: Pointer, value: number): void {\n    if (this.IsPointerOutOfBound(ptr)) {\n      return;\n    }\n\n    this.memory[this.PointerToIndex(ptr)] = value;\n  }\n\n  Resize(limit: MemoryLimit): void {\n    const resized = new ArrayMemory(limit);\n\n    this.CopyMemoryTo(resized);\n\n    this.memory = resized.memory;\n    this.limit = limit;\n  }\n\n  Clone(): Memory {\n    const copy = new ArrayMemory(this.limit);\n\n    copy.memory.set(this.memory);\n\n    return copy;\n  }\n\n  private PointerToIndex(ptr: Pointer): number {\n    return ptr.y * this.limit.Width + ptr.x;\n  }\n\n  private IsPointerOutOfBound(ptr: Pointer): boolean {\n    return ptr.x >= this.limit.Width || ptr.y >= this.limit.Height;\n  }\n\n  private CopyMemoryTo(dst: ArrayMemory): void {\n    const copyingWidth = Math.min(this.limit.Width, dst.limit.Width);\n    const copyingHeight = Math.min(this.limit.Height, dst.limit.Height);\n\n    for (let x = 0; x < copyingWidth; ++x) {\n      for (let y = 0; y < copyingHeight; ++y) {\n        const ptr: Pointer = { x: x, y: y };\n\n        dst.Write(ptr, this.Read(ptr));\n      }\n    }\n  }\n}\n","\nexport interface IllegalInstruction {\n    value: number;\n    offset: number;\n}\n\nexport class SourceCodeValidityAnalyser {\n    private static readonly validSymbols = SourceCodeValidityAnalyser.ValidSymbols();\n\n    private sourceCode: string[];\n\n    private sourceCodeLength: number;\n\n    constructor(src: string) {\n        this.sourceCode = [...src].reverse();\n        this.sourceCodeLength = this.sourceCode.length;\n    }\n\n    NextIllegalInstruction(): IllegalInstruction | null {\n        if (this.sourceCode.length === 0) {\n            return null;\n        }\n\n        const illegalInstructionIdx = this.sourceCode\n            .findLastIndex(x => !SourceCodeValidityAnalyser.validSymbols.includes(x.charCodeAt(0)));\n\n        if (illegalInstructionIdx === -1) {\n            this.sourceCode = [];\n\n            return null;\n        }\n\n        const value = this.sourceCode[illegalInstructionIdx].charCodeAt(0);\n\n        this.sourceCode.length = illegalInstructionIdx;\n\n        return { value, offset: this.sourceCodeLength - illegalInstructionIdx + 1 };\n    }\n\n    private static ValidSymbols(): number[] {\n        const start = ' '.charCodeAt(0);\n        const end = '~'.charCodeAt(0);\n\n        return [10, 13, ...Array.from({ length: end - start + 1 }, (_x, n) => n + start)];\n    }\n}\n","import { injectable } from \"inversify\";\n\nimport { Effect } from \"./Effect\";\n\nimport { Inversify } from \"@/Inversify\";\n\nexport enum RegistrationCollisionResolver { Add, Replace, Skip }\n\nexport interface RegistrationPolicy<T> {\n    id: T;\n    rule: RegistrationCollisionResolver;\n}\n\ninterface EffectItem {\n    effect: Effect;\n    policy: RegistrationPolicy<unknown>;\n}\n\n@injectable()\nexport class EffectRunner {\n    private defaultPolicy: RegistrationPolicy<any>;\n    private effects: EffectItem[] = [];\n\n    constructor() {\n        this.defaultPolicy = { id: Symbol('Default policy id'), rule: RegistrationCollisionResolver.Add };\n    }\n\n    Register<T>(effect: Effect, policy: RegistrationPolicy<T> = this.defaultPolicy): void {\n        const item = this.effects.findLast(x => x.policy.id === policy.id);\n\n        if (item === undefined || item.policy.rule === RegistrationCollisionResolver.Add) {\n            this.effects.push({ effect, policy });\n        } else if (item.policy.rule === RegistrationCollisionResolver.Replace) {\n            item.effect = effect;\n        }\n    }\n\n    Draw(elapsed: number): boolean {\n        for (let n = 0; n < this.effects.length; ++n) {\n            const item = this.effects[n];\n\n            if (item.effect.IsDone) {\n                this.effects.splice(n--, 1);\n            } else {\n                item.effect.Draw(elapsed);\n            }\n        }\n\n        return this.effects.length > 0;\n    }\n}\n\nInversify.bind(EffectRunner).toSelf().inSingletonScope();\n","import { Observable } from \"../Observable\";\n\nexport interface MyInputEvent {\n    key: string;\n}\n\nexport interface InputReceiver {\n    OnVanish: Observable<void>;\n    OnInput(e: MyInputEvent): void;\n    Focus(): void;\n    Blur(): void;\n}\n\nexport function IsInputReceiver(x: any): x is InputReceiver {\n    return typeof x === 'object' && 'OnInput' in x;\n}\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { Command } from \"../Command\";\n\nimport { PostAction } from \"./PostActions/PostAction\";\n\nimport { CodeEditorService, EditionDirection } from \"@/app/CodeEditor/CodeEditorService\";\nimport { AppCommandInjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { Pointer } from \"@/lib/befunge/memory/Memory\";\n\n\n@injectable()\nexport class EditCellCommand implements Command {\n    private location: Pointer = { x: -1, y: -1 };\n\n    private oldValue = '';\n\n    private newValue = '';\n\n    private editDirection = EditionDirection.Right;\n\n    private postAction!: PostAction;\n\n    constructor(@inject(CodeEditorService) private codeEditorService: CodeEditorService) { }\n\n    Initialize(...args: Parameters<EditCellCommandFactory>): void {\n        [{ ...this.location }, this.oldValue, this.newValue, this.editDirection, this.postAction] = args;\n    }\n\n    Apply(): void {\n        this.codeEditorService.EditCell(this.newValue, this.location.x, this.location.y);\n\n        this.postAction.Apply(this);\n    }\n\n    Undo(): void {\n        this.codeEditorService.EditCell(this.oldValue, this.location.x, this.location.y);\n\n        this.codeEditorService.SetEditableCell(this.location);\n        this.codeEditorService.EditableCellDirection = this.editDirection;\n    }\n\n    get Location(): Pointer {\n        return this.location;\n    }\n\n    get OldValue(): string {\n        return this.oldValue;\n    }\n\n    get NewValue(): string {\n        return this.newValue;\n    }\n\n    get EditDirection(): EditionDirection {\n        return this.editDirection;\n    }\n}\n\nInversify.bind(EditCellCommand).toSelf().inTransientScope();\n\nexport type EditCellCommandFactory = (location: Pointer, oldValue: string, newValue: string, editDirection: EditionDirection, postAction: PostAction) => Command;\n\nInversify\n    .bind<interfaces.Factory<EditCellCommand>>(AppCommandInjectionToken.EditCellCommandFactory)\n    .toFactory<EditCellCommand, Parameters<EditCellCommandFactory>>(ctx => (location: Pointer, oldValue: string, newValue: string, editDirection: EditionDirection, postAction: PostAction) => {\n        const instance = ctx.container.get(EditCellCommand);\n        instance.Initialize(location, oldValue, newValue, editDirection, postAction);\n\n        return instance;\n    });\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { EditCellCommand } from \"../EditCellCommand\";\n\nimport { PostAction } from \"./PostAction\";\n\nimport { CodeEditorService, EditionDirection } from \"@/app/CodeEditor/CodeEditorService\";\nimport { EditCellCommandPostAction } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { Pointer } from \"@/lib/befunge/memory/Memory\";\n\n@injectable()\nexport class MoveNextAction implements PostAction {\n    constructor(@inject(CodeEditorService) private codeEditorService: CodeEditorService) { }\n\n    Apply(target: EditCellCommand): void {\n        const codeFlowEditDirection = this.FollowCodeFlowHelper(target);\n        if (target.EditDirection !== codeFlowEditDirection) {\n            this.codeEditorService.EditableCellDirection = codeFlowEditDirection;\n        }\n\n        this.codeEditorService.SetEditableCell(this.GetNextEditableCell(target, codeFlowEditDirection));\n    }\n\n    private GetNextEditableCell(target: EditCellCommand, overriddenDirection: EditionDirection): Pointer {\n        const nextEditableCell: Pointer = { ...target.Location };\n\n        switch (overriddenDirection) {\n            case EditionDirection.Left:\n                nextEditableCell.x = target.Location.x === 0 ?\n                    this.codeEditorService.Dimension.Columns - 1 :\n                    target.Location.x - 1;\n                break;\n            case EditionDirection.Up:\n                nextEditableCell.y = target.Location.y === 0 ?\n                    this.codeEditorService.Dimension.Rows - 1 :\n                    target.Location.y - 1;\n                break;\n            case EditionDirection.Right:\n                nextEditableCell.x = target.Location.x === this.codeEditorService.Dimension.Columns - 1 ?\n                    0 :\n                    target.Location.x + 1;\n                break;\n            case EditionDirection.Down:\n                nextEditableCell.y = target.Location.y === this.codeEditorService.Dimension.Rows - 1 ?\n                    0 :\n                    target.Location.y + 1;\n                break;\n        }\n\n        return nextEditableCell;\n    }\n\n    private FollowCodeFlowHelper(target: EditCellCommand): EditionDirection {\n        if (target.NewValue === '<') {\n            return EditionDirection.Left;\n        } else if (target.NewValue === '^') {\n            return EditionDirection.Up;\n        } else if (target.NewValue === '>') {\n            return EditionDirection.Right;\n        } else if (target.NewValue === 'v') {\n            return EditionDirection.Down;\n        }\n\n        return target.EditDirection;\n    }\n}\n\nInversify.bind(MoveNextAction).toSelf().inTransientScope();\n\nInversify\n    .bind<interfaces.Factory<MoveNextAction>>(EditCellCommandPostAction.MoveNext)\n    .toAutoFactory(MoveNextAction);\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport { Command } from \"../Command\";\n\nimport { PostAction } from \"./PostActions/PostAction\";\n\nimport { CodeEditorService, EditionDirection } from \"@/app/CodeEditor/CodeEditorService\";\nimport { EditableRegion } from \"@/app/CodeEditor/EditableTarget\";\nimport { AppCommandInjectionToken } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { Array2D } from \"@/lib/containers/Array2D\";\nimport { MathUtil } from \"@/lib/math/MathUtil\";\n\nexport type PostActionEditablePosition = 'next' | 'left_top' | 'right_bottom';\n\n@injectable()\nexport class EditCellsRegionCommand implements Command {\n    private region: EditableRegion = {\n        lt: { x: -1, y: -1 },\n        rb: { x: -1, y: -1 }\n    };\n\n    private oldValue!: Array2D<number>;\n\n    private newValue!: Array2D<number>;\n\n    private editDirection = EditionDirection.Right;\n\n    private postAction!: PostAction;\n\n    constructor(@inject(CodeEditorService) private codeEditorService: CodeEditorService) { }\n\n    Initialize(...args: Parameters<EditCellsRegionCommandFactory>): void {\n        const region = MathUtil.Extremum([args[0].lt, args[0].rb]);\n        this.region.lt = region.min;\n        this.region.rb = region.max;\n\n        [, this.oldValue, this.newValue, this.editDirection, this.postAction] = args;\n    }\n\n    Apply(): void {\n        this.newValue\n            .ForEach((x, idx) => this.codeEditorService.EditCell(String.fromCharCode(x), this.region.lt.x + idx.column, this.region.lt.y + idx.row));\n\n        this.postAction.Apply(this);\n    }\n\n    Undo(): void {\n        this.oldValue\n            .ForEach((x, idx) => this.codeEditorService.EditCell(String.fromCharCode(x), this.region.lt.x + idx.column, this.region.lt.y + idx.row));\n\n        this.codeEditorService.SetEditableCell(this.region.lt);\n        this.codeEditorService.EditableCellDirection = this.editDirection;\n    }\n\n    get Region(): EditableRegion {\n        return this.region;\n    }\n\n    get EditDirection(): EditionDirection {\n        return this.editDirection;\n    }\n}\n\nInversify.bind(EditCellsRegionCommand).toSelf().inTransientScope();\n\nexport type EditCellsRegionCommandFactory = (region: EditableRegion, oldValue: Array2D<number>, newValue: Array2D<number>, editDirection: EditionDirection, postAction: PostAction) => Command;\n\nInversify\n    .bind<interfaces.Factory<EditCellsRegionCommand>>(AppCommandInjectionToken.EditCellsRegionFactory)\n    .toFactory<EditCellsRegionCommand, Parameters<EditCellsRegionCommandFactory>>(ctx => (region: EditableRegion, oldValue: Array2D<number>, newValue: Array2D<number>, editDirection: EditionDirection, postAction: PostAction) => {\n        const instance = ctx.container.get(EditCellsRegionCommand);\n        instance.Initialize(region, oldValue, newValue, editDirection, postAction);\n\n        return instance;\n    });\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport type { EditCellsRegionCommand } from \"../EditCellsRegionCommand\";\n\nimport { PostAction } from \"./PostAction\";\n\nimport { CodeEditorService, EditionDirection } from \"@/app/CodeEditor/CodeEditorService\";\nimport { EditCellsRegionCommandPostAction } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\nimport { Pointer } from \"@/lib/befunge/memory/Memory\";\n\n@injectable()\nexport class MoveNextAction implements PostAction {\n    constructor(@inject(CodeEditorService) private codeEditorService: CodeEditorService) { }\n\n    Apply(target: EditCellsRegionCommand): void {\n        this.codeEditorService.SetEditableCell(this.GetNextEditableCell(target));\n    }\n\n    private GetNextEditableCell(target: EditCellsRegionCommand): Pointer {\n        switch (target.EditDirection) {\n            case EditionDirection.Left:\n                {\n                    const x = target.Region.lt.x === 0 ?\n                        this.codeEditorService.Dimension.Columns - 1 :\n                        target.Region.lt.x - 1;\n\n                    return { x, y: target.Region.lt.y };\n                }\n            case EditionDirection.Up:\n                {\n                    const y = target.Region.lt.y === 0 ?\n                        this.codeEditorService.Dimension.Rows - 1 :\n                        target.Region.lt.y - 1;\n\n                    return { x: target.Region.lt.x, y };\n                }\n            case EditionDirection.Right:\n                {\n                    const x = target.Region.rb.x === this.codeEditorService.Dimension.Columns - 1 ?\n                        0 :\n                        target.Region.rb.x + 1;\n\n                    return { x, y: target.Region.rb.y };\n                }\n            case EditionDirection.Down:\n                {\n                    const y = target.Region.rb.y === this.codeEditorService.Dimension.Rows - 1 ?\n                        0 :\n                        target.Region.rb.y + 1;\n\n                    return { x: target.Region.rb.x, y };\n                }\n        }\n    }\n}\n\nInversify.bind(MoveNextAction).toSelf().inTransientScope();\n\nInversify\n    .bind<interfaces.Factory<MoveNextAction>>(EditCellsRegionCommandPostAction.MoveNext)\n    .toAutoFactory(MoveNextAction);\n","import { inject, injectable, interfaces } from \"inversify\";\n\nimport type { EditCellsRegionCommand } from \"../EditCellsRegionCommand\";\n\nimport { PostAction } from \"./PostAction\";\n\nimport { CodeEditorService } from \"@/app/CodeEditor/CodeEditorService\";\nimport { EditCellsRegionCommandPostAction } from \"@/app/InjectionToken\";\nimport { Inversify } from \"@/Inversify\";\n\n@injectable()\nexport class StayLeftTopAction implements PostAction {\n    constructor(@inject(CodeEditorService) private codeEditorService: CodeEditorService) { }\n\n    Apply(target: EditCellsRegionCommand): void {\n        this.codeEditorService.SetEditableCell(target.Region.lt);\n    }\n}\n\nInversify.bind(StayLeftTopAction).toSelf().inTransientScope();\n\nInversify\n    .bind<interfaces.Factory<StayLeftTopAction>>(EditCellsRegionCommandPostAction.StayLeftTop)\n    .toAutoFactory(StayLeftTopAction);\n","import { vec2, vec3 } from 'gl-matrix';\nimport { inject, injectable, named } from 'inversify';\n\nimport { AppEventTransformer, MouseMovementEvent, MouseSelectEvent } from './AppEventTransformer';\nimport { AppSettings } from './AppSettings';\nimport { CameraService } from './CameraService';\nimport { CodeEditorService } from './CodeEditor/CodeEditorService';\nimport { CodeEditorServiceInputReceiverFactory } from './CodeEditorServiceInputReceiver';\nimport { CodeExecutionService } from './CodeExecution/CodeExecutionService';\nimport { DebugRenderer } from './DebugRenderer';\nimport { SmoothCameraMove } from './Effects/SmoothCameraMove';\nimport { SmoothCameraZoom } from './Effects/SmoothCameraZoom';\nimport { AppHistory } from './History/AppHistory';\nimport { InjectionToken, UILabelRendererTargetName } from './InjectionToken';\nimport { HeatmapToggleButtonState } from './Overlay/DebugControls';\nimport { OverlayService } from './Overlay/OverlayService';\nimport { SnackbarControls } from './Overlay/SnackbarControls';\nimport { SourceCodeMemory } from './SourceCodeMemory';\n\nimport { Inversify } from '@/Inversify';\nimport { BefungeSourceCodeCodec } from '@/lib/befunge/BefungeSourceCodeCodec';\nimport { ArrayMemory } from '@/lib/befunge/memory/ArrayMemory';\nimport { SourceCodeValidityAnalyser } from '@/lib/befunge/SourceCodeValidityAnalyser';\nimport { AsyncConstructable, AsyncConstructorActivator } from '@/lib/DI/AsyncConstructorActivator';\nimport { EffectRunner, RegistrationCollisionResolver } from '@/lib/effect/EffectRunner';\nimport { Intersection } from '@/lib/math/Intersection';\nimport { MathUtil } from '@/lib/math/MathUtil';\nimport { Transformation } from '@/lib/math/Transformation';\nimport { ObserverDetacher } from '@/lib/Observable';\nimport { Vec2 } from '@/lib/Primitives';\nimport { Camera } from '@/lib/renderer/Camera';\nimport { InputReceiver, IsInputReceiver, MyInputEvent } from '@/lib/UI/InputReceiver';\nimport { UILabelRenderer } from '@/lib/UI/UILabel/UILabelRenderer';\nimport './History/Commands';\nimport router from '@/router';\n\n\nasync function Delay(delay: number): Promise<void> {\n    return new Promise(ok => setTimeout(ok, delay));\n}\n\n@injectable()\nexport class AppService extends AppEventTransformer implements AsyncConstructable {\n    private isRunning = true;\n\n    private touchZoomStartZ = 0;\n\n    private inFocusOnVanishReleaser: ObserverDetacher;\n    private inFocus: InputReceiver;\n\n    private debugRenderer: DebugRenderer;\n    private debugPoints: number[] = [5, 5, 0.2, 0, 0, 0];\n\n    private openedFilename: string | null = null;\n\n    private lastFrameTime = Date.now();\n\n    constructor(\n        @inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext,\n        @inject(CameraService) private camera: CameraService,\n        @inject(AppSettings) private settings: AppSettings,\n        @inject(EffectRunner) private effectRunner: EffectRunner,\n        @inject(OverlayService) private overlay: OverlayService,\n        @inject(CodeEditorService) private codeEditor: CodeEditorService,\n        @inject(SourceCodeMemory) private editorSourceCode: SourceCodeMemory,\n        @inject(AppHistory) private history: AppHistory,\n        @inject(CodeExecutionService) private codeExecutionService: CodeExecutionService,\n        @inject(UILabelRenderer) @named(UILabelRendererTargetName.Perspective) private perspectiveLabelRenderer: UILabelRenderer,\n        @inject(InjectionToken.CodeEditorServiceInputReceiverFactory) private codeEditorServiceInputReceiverFactory: CodeEditorServiceInputReceiverFactory) {\n        super();\n\n        this.camera.MoveTo(\n            {\n                x: 0,\n                y: 0,\n                z: this.settings.ZCameraBoundary.min + (this.settings.ZCameraBoundary.max - this.settings.ZCameraBoundary.min) * 0.75\n            });\n\n        gl.clearColor(1, 1, 1, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n\n\n        this.codeEditor.ViewProjection = this.camera.ViewProjection;\n        this.FocusCameraAtEditor();\n\n        this.editorSourceCode.Initialize(ArrayMemory, this.settings.MemoryLimit);\n\n        this.inFocus = this.codeEditorServiceInputReceiverFactory();\n        this.inFocus.Focus();\n        this.inFocusOnVanishReleaser = this.inFocus.OnVanish.Attach(() => 0);\n\n        this.debugRenderer = new DebugRenderer(gl);\n        this.debugRenderer.ViewProjection = this.camera.ViewProjection;\n        this.debugRenderer.UploadAttributes(this.debugPoints);\n\n        const label = this.perspectiveLabelRenderer.Create({ x: 0, y: 0 }, 499, 'TESTING (d) \\n 1234567890', 8, null);\n        label.Scale = 0.2;\n        const Debug = async () => {\n            const text = 'Hello world! 1234567890$@';\n\n            for (let n = 0; n < text.length; ++n) {\n\n                this.codeEditor.EditCell(text[n], n, 1);\n\n                await Delay(10);\n            }\n\n            const startCode = ' '.charCodeAt(0);\n            const endCode = '~'.charCodeAt(0);\n            const startRow = 3;\n            for (let n = 0; n < endCode - startCode; ++n) {\n                this.codeEditor.EditCell(String.fromCharCode(n + startCode), n % 80, startRow + Math.floor(n / 80));\n\n                await Delay(10);\n            }\n\n            let x = true;\n            while (x) {\n                for (let n = 0; n < 80; ++n) {\n                    this.codeEditor.Select(n, 6, [0, 0, n / 80]);\n\n                    await Delay(50);\n                }\n\n                /* for (let n = 79; n >= 0; --n) {\n                    this.codeEditorRenderer.Unselect(n, 6);\n\n                    await Delay(50);\n                } */\n                x = false;\n            }\n        }\n\n        //Debug();\n    }\n\n    async AsyncConstructor(): Promise<void> {\n        this.overlay.EditDirectionControls.EditDirectionObservable.Attach(dir => this.codeEditor.EditableCellDirection = dir);\n        this.codeEditor.EditDirectionObservable.Attach(dir => this.overlay.EditDirectionControls.ForceEditDirection(dir));\n        this.codeEditor.EditableCellLostObservable.Attach(() => this.FollowEditableCell());\n\n        this.overlay.FileControls.OpenFromDiskObservable.Attach(() => this.OpenFileFromDisk());\n        this.overlay.FileControls.SaveToDiskObservable.Attach(() => this.SaveSourceToDisk());\n        this.overlay.FileControls.ShareObservable.Attach(() => this.ShareSourceCode());\n        this.overlay.FileControls.OpenSettingsObservable.Attach(() => this.OpenSettings());\n\n        this.overlay.HistoryControls.UndoObservable.Attach(() => this.history.Undo());\n        this.overlay.HistoryControls.RedoObservable.Attach(() => this.history.Redo());\n\n        this.overlay.DebugControls.Heatmap.Attach(feedback => this.ControlsResponseToHeatmapActivation(feedback));\n\n        this.history.UpdateObservable.Attach(() => this.OnSourceCodeChanged());\n\n        this.overlay.VirtualKeyboardControls.Observable.Attach((key: string) => this.inFocus.OnInput({ key }));\n\n        this.Start();\n    }\n\n    Resize(): void {\n        this.settings.ViewDimension = { Width: this.gl.canvas.width, Height: this.gl.canvas.height };\n        this.settings.AspectRatio = this.gl.canvas.width / this.gl.canvas.height;\n\n        this.camera.Resize();\n\n        this.overlay.Resize();\n\n        this.codeEditor.ViewProjection = this.camera.ViewProjection;\n        this.debugRenderer.ViewProjection = this.camera.ViewProjection;\n        this.perspectiveLabelRenderer.ViewProjection = this.camera.ViewProjection;\n    }\n\n    OnCameraMove(e: MouseMovementEvent): void {\n        const delta = Camera.UnprojectMovement(\n            { x: e.movementX, y: e.movementY },\n            { a: 0, b: 0, c: 1, d: 0 },\n            this.camera.ViewProjection,\n            this.gl.canvas);\n\n        this.camera.Translate({ x: delta.x, y: delta.y });\n\n        this.codeEditor.ViewProjection = this.camera.ViewProjection;\n        this.debugRenderer.ViewProjection = this.camera.ViewProjection;\n        this.perspectiveLabelRenderer.ViewProjection = this.camera.ViewProjection;\n    }\n\n    OnSelect(e: MouseSelectEvent): void {\n        const touchResult = this.overlay.Touch(e);\n\n        if (touchResult === false) {\n            this.SwitchFocus(this.codeEditorServiceInputReceiverFactory());\n            const prevEditableCell = { ...this.codeEditor.EditableCell };\n\n            this.codeEditor.Touch(e);\n\n            this.codeExecutionService.Debugging.OnSelect(prevEditableCell);\n        } else if (IsInputReceiver(touchResult)) {\n            this.SwitchFocus(touchResult);\n        }\n\n        const posNear = Camera.Unproject({ x: e.offsetX, y: e.offsetY, z: 0 }, this.camera.ViewProjection, this.gl.canvas);\n        const posFar = Camera.Unproject({ x: e.offsetX, y: e.offsetY, z: 1 }, this.camera.ViewProjection, this.gl.canvas);\n\n        const intersection = Intersection.PlaneLine(\n            { a: 0, b: 0, c: 1, d: 0 },\n            { a: [posNear[0], posNear[1], posNear[2]], b: [posFar[0], posFar[1], posFar[2]] });\n\n        this.debugPoints.push(posNear[0], posNear[1], posNear[2], intersection[0], intersection[1], intersection[2]);\n\n        this.debugRenderer.UploadAttributes(this.debugPoints);\n    }\n\n    OnStepZoom(e: WheelEvent): void {\n        const smoothCameraZoomEffect = new SmoothCameraZoom(\n            e.deltaY < 0 ? 'in' : 'out',\n            this.camera,\n            this.settings.ZCameraBoundary);\n\n        this.effectRunner.Register(\n            smoothCameraZoomEffect,\n            { id: 'camera_zoom', rule: RegistrationCollisionResolver.Replace });\n    }\n\n    OnTouchZoomStart(): void {\n        this.touchZoomStartZ = this.camera.Position.z;\n    }\n\n    OnTouchZoom(zoom: number): void {\n        this.camera.MoveTo({\n            z: MathUtil.Clamp(this.touchZoomStartZ * zoom, this.settings.ZCameraBoundary.min, this.settings.ZCameraBoundary.max)\n        });\n\n        this.codeEditor.ViewProjection = this.camera.ViewProjection;\n        this.debugRenderer.ViewProjection = this.camera.ViewProjection;\n        this.perspectiveLabelRenderer.ViewProjection = this.camera.ViewProjection;\n    }\n\n    OnKeyDown(e: MyInputEvent): void {\n        this.inFocus.OnInput(e);\n    }\n\n    public Dispose(): void {\n        this.isRunning = false;\n    }\n\n    private Start(): void {\n        requestAnimationFrame(() => this.DrawFrame(Date.now() - this.lastFrameTime));\n    }\n\n    private DrawFrame(elapsed: number): void {\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT | this.gl.STENCIL_BUFFER_BIT);\n\n        if (this.effectRunner.Draw(elapsed)) {\n            this.codeEditor.ViewProjection = this.camera.ViewProjection;\n            this.debugRenderer.ViewProjection = this.camera.ViewProjection;\n            this.perspectiveLabelRenderer.ViewProjection = this.camera.ViewProjection;\n        }\n\n        this.codeEditor.Draw();\n        this.perspectiveLabelRenderer.Draw();\n        //this.debugRenderer.Draw();\n\n        this.gl.clear(this.gl.DEPTH_BUFFER_BIT);\n\n        this.overlay.Draw();\n\n        if (this.isRunning) {\n            const now = Date.now();\n            const elapsed = now - this.lastFrameTime;\n            requestAnimationFrame(() => this.DrawFrame(elapsed))\n            this.lastFrameTime = now;\n        }\n    }\n\n    private async OpenFileFromDisk(): Promise<void> {\n        let sourceCode = '';\n\n        try {\n            const [fileHandle] = await window.showOpenFilePicker({ multiple: false });\n\n            if (fileHandle.kind !== \"file\") {\n                return;\n            }\n            this.openedFilename = fileHandle.name;\n            const file = await fileHandle.getFile();\n\n            sourceCode = await file.text();\n        } catch (e) {\n            if (e instanceof DOMException) {\n                switch (e.name) {\n                    case 'AbortError':\n                        return;\n                }\n\n                this.overlay.Snackbar.ShowError(e.message)\n            }\n\n            return;\n        }\n\n\n        const validator = new SourceCodeValidityAnalyser(sourceCode);\n\n        const firstProblem = validator.NextIllegalInstruction();\n\n        if (firstProblem !== null) {\n            let remainingProblems = 0;\n\n            for (; validator.NextIllegalInstruction(); ++remainingProblems);\n\n            let problemMsg = `File contains illegal symbol '${firstProblem.value}' at ${firstProblem.offset}`;\n\n            if (remainingProblems > 0) {\n                problemMsg += ` and ${remainingProblems} more`;\n            }\n\n            this.overlay.Snackbar\n                .ShowError(problemMsg);\n\n            return;\n        }\n\n        this.LoadSourceCodeToEditor(sourceCode);\n\n        this.history.Reset();\n        router.replace({ name: 'CodeEditor' });\n\n        this.FocusCameraAtEditor();\n    }\n\n    private async SaveSourceToDisk(): Promise<void> {\n        try {\n            const fileHandle = await window.showSaveFilePicker({ suggestedName: this.openedFilename ?? '' });\n\n            const stream = await fileHandle.createWritable();\n\n            await stream.write(this.SourceCodeString());\n\n            await stream.close();\n        } catch (e) {\n            if (e instanceof DOMException) {\n                switch (e.name) {\n                    case 'AbortError':\n                        return;\n                }\n\n                this.overlay.Snackbar.ShowError(e.message)\n            }\n        }\n    }\n\n    private SourceCodeString(): string {\n        let sourceString = '';\n        for (let y = 0; y < this.settings.MemoryLimit.Height; ++y) {\n            let line = '';\n\n            for (let x = 0; x < this.settings.MemoryLimit.Width; ++x) {\n                line += String.fromCharCode(this.editorSourceCode.Read({ x, y }));\n            }\n\n            sourceString += line.trimEnd() + '\\n';\n        }\n\n        return sourceString;\n    }\n\n    private ShareSourceCode(): void {\n        const encoded = BefungeSourceCodeCodec.Encode(this.SourceCodeString());\n\n        router.replace({ name: 'Share', params: { encoded } });\n    }\n\n    private OpenSettings(): void {\n        console.log('Open settings');\n    }\n\n    LoadSourceCodeToEditor(sourceCode: string): void {\n        this.ResetSourceCodeEditor();\n\n        const linesOfCode = sourceCode.split(/\\r?\\n/);\n\n        for (let row = 0; row < linesOfCode.length; ++row) {\n            const line = linesOfCode[row];\n            for (let column = 0; column < line.length; ++column) {\n                this.codeEditor.EditCell(line[column], column, row);\n            }\n        }\n\n        this.overlay.FileControls.ShareDisabled = this.editorSourceCode.Empty;\n    }\n\n    private OnSourceCodeChanged(): void {\n        this.overlay.FileControls.ShareDisabled = this.editorSourceCode.Empty;\n    }\n\n    get Snackbar(): SnackbarControls {\n        return this.overlay.Snackbar;\n    }\n\n    private FollowEditableCell(): void {\n        const cellRect = this.codeEditor.EditableCellRect;\n        const lbNDC = vec3.transformMat4(vec3.create(), cellRect.lb, this.camera.ViewProjection);\n        const rtNDC = vec3.transformMat4(vec3.create(), cellRect.rt, this.camera.ViewProjection);\n\n        const ndcDiagonal = vec3.sub(vec3.create(), rtNDC, lbNDC);\n        const ndcStickToEdgeMovement = Transformation.MoveRectangleToPlaceInsideRectangle(\n            { lb: { x: lbNDC[0], y: lbNDC[1] }, rt: { x: rtNDC[0], y: rtNDC[1] } },\n            { lb: { x: -1, y: -1 }, rt: { x: 1, y: 1 } });\n\n        const finalMovement = vec2.fromValues(ndcStickToEdgeMovement.x, ndcStickToEdgeMovement.y);\n\n        if (ndcStickToEdgeMovement.x > 0) {\n            const ndcDistanceToLeft = ndcDiagonal[0] * this.codeEditor.EditableCell.x;\n            finalMovement[0] += Math.min(ndcDistanceToLeft, 1);\n        } else if (ndcStickToEdgeMovement.x < 0) {\n            const ndcDistanceToRight = ndcDiagonal[0] * (this.settings.MemoryLimit.Width - this.codeEditor.EditableCell.x - 1);\n            finalMovement[0] -= Math.min(ndcDistanceToRight, 1);\n        }\n\n        if (ndcStickToEdgeMovement.y > 0) {\n            const ndcDistanceToBottom = ndcDiagonal[1] * (this.settings.MemoryLimit.Height - this.codeEditor.EditableCell.y - 1);\n            finalMovement[1] += Math.min(ndcDistanceToBottom, 1);\n        } else if (ndcStickToEdgeMovement.y < 0) {\n            const ndcDistanceToTop = ndcDiagonal[1] * this.codeEditor.EditableCell.y;\n            finalMovement[1] -= Math.min(ndcDistanceToTop, 1);\n        }\n\n\n        const movement: vec2 = [\n            finalMovement[0] * this.gl.canvas.width / 2,\n            finalMovement[1] * this.gl.canvas.height / 2\n        ];\n\n        const effect = new SmoothCameraMove(\n            this.camera,\n            movement,\n            this.gl.canvas);\n\n        this.effectRunner.Register(\n            effect,\n            { id: 'follow_editable_cell', rule: RegistrationCollisionResolver.Replace });\n    }\n\n    private ResetSourceCodeEditor(): void {\n        this.editorSourceCode.Initialize(ArrayMemory, this.settings.MemoryLimit);\n        this.codeEditor.Clear();\n    }\n\n    private SwitchFocus(component: InputReceiver): void {\n        this.inFocus.Blur();\n        this.inFocusOnVanishReleaser();\n\n        this.inFocus = component;\n        this.inFocus.Focus();\n        this.inFocus.OnVanish.Attach(() => this.SwitchFocus(this.codeEditorServiceInputReceiverFactory()));\n    }\n\n    private ControlsResponseToHeatmapActivation(feedback: HeatmapToggleButtonState): void {\n        this.overlay.FileControls.OpenFromDiskDisabled = feedback.isShown;\n\n        feedback.isShown ?\n            this.overlay.HistoryControls.Lock() :\n            this.overlay.HistoryControls.Unlock();\n\n        this.overlay.EditControls.Disable = feedback.isShown;\n    }\n\n    private FocusCameraAtEditor(): void {\n        const uiLeftTopEditorGridPosition = this.overlay.EditDirectionControls.Boundaries.rt;\n        const margin = 10;\n        const wndLeftTopEditorGridPosition: Vec2 = {\n            x: uiLeftTopEditorGridPosition.x + margin,\n            y: this.settings.ViewDimension.Height - uiLeftTopEditorGridPosition.y\n        };\n\n        const posNear = Camera.Unproject({ ...wndLeftTopEditorGridPosition, z: 0 }, this.camera.ViewProjection, this.gl.canvas);\n        const posFar = Camera.Unproject({ ...wndLeftTopEditorGridPosition, z: 1 }, this.camera.ViewProjection, this.gl.canvas);\n\n        const intersection = Intersection.PlaneLine(\n            { a: 0, b: 0, c: 1, d: 0 },\n            { a: [posNear[0], posNear[1], posNear[2]], b: [posFar[0], posFar[1], posFar[2]] });\n\n        intersection[1] -= this.settings.MemoryLimit.Height * this.codeEditor.CellSize;\n\n        this.camera.Translate({\n            x: -intersection[0],\n            y: -intersection[1]\n        });\n\n        this.codeEditor.ViewProjection = this.camera.ViewProjection;\n        this.perspectiveLabelRenderer.ViewProjection = this.camera.ViewProjection;\n    }\n}\n\nInversify.bind(AppService).toSelf().inSingletonScope().onActivation(AsyncConstructorActivator);\n","import { inject, injectable } from \"inversify\";\n\nimport { AppSettings } from \"./AppSettings\";\nimport { InjectionToken } from \"./InjectionToken\";\n\nimport { Inversify } from \"@/Inversify\";\nimport { AsyncConstructable, AsyncConstructorActivator } from \"@/lib/DI/AsyncConstructorActivator\";\nimport { FontAtlas, FontAtlasBuilder } from \"@/lib/font/FontAtlasBuilder\";\nimport { NotNull } from \"@/lib/NotNull\";\nimport { UIIconAtlas } from \"@/lib/UI/UIIcon\";\n\n@injectable()\nexport class GlobalDependencies implements AsyncConstructable {\n    constructor(@inject(InjectionToken.WebGLRenderingContext) private gl: WebGL2RenderingContext) { }\n\n    async AsyncConstructor(): Promise<void> {\n        Inversify.get(AppSettings).ViewDimension = { Width: this.gl.canvas.width, Height: this.gl.canvas.height };\n\n        await this.SetupGlobalDependencies();\n    }\n\n    private async SetupGlobalDependencies(): Promise<void> {\n        Inversify\n            .bind<FontAtlas>(InjectionToken.FontAtlas)\n            .toConstantValue(FontAtlasBuilder.Build({ ASCIIRange: { Start: ' ', End: '~' }, Font: { Name: 'Roboto', Size: 72 } }));\n\n        Inversify\n            .bind<WebGLTexture>(InjectionToken.FontAtlasTexture)\n            .toConstantValue(this.BuildTexture(Inversify.get<FontAtlas>(InjectionToken.FontAtlas).Image));\n\n        Inversify\n            .bind<UIIconAtlas>(InjectionToken.IconAtlas)\n            .toConstantValue(await Inversify.getAsync(UIIconAtlas));\n\n        Inversify\n            .bind<WebGLTexture>(InjectionToken.IconAtlasTexture)\n            .toConstantValue(this.BuildTexture(Inversify.get<UIIconAtlas>(InjectionToken.IconAtlas).Image));\n    }\n\n    private BuildTexture(data: TexImageSource): WebGLTexture {\n        const texture = this.gl.createTexture() ?? NotNull('Failed to create texture');\n\n        this.gl.activeTexture(this.gl.TEXTURE0);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n\n        this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, data);\n\n        return texture;\n    }\n}\n\nInversify.bind(GlobalDependencies).toSelf().inSingletonScope().onActivation(AsyncConstructorActivator);\n","import { defineComponent as _defineComponent } from 'vue'\nimport { normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { computed, onMounted, onBeforeUnmount, ref } from 'vue';\n\ninterface Emits {\n  (e: 'contextReady', context: WebGL2RenderingContext): void;\n  (e: 'resize'): void\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'WebglCanvas',\n  props: {\n  width: { type: Number },\n  height: { type: Number }\n},\n  emits: [\"contextReady\", \"resize\"],\n  setup(__props, { emit }) {\n\nconst props = __props;\n\n\n\n\n\nconst innerWidth = ref(0);\nconst innerHeight = ref(0);\n\nconst canvas = ref<HTMLCanvasElement>();\nlet context: WebGL2RenderingContext | null = null;\n\nconst isPropsUsed = computed(\n  () => !(props.width === undefined && props.height === undefined)\n);\n\nconst width = computed(() => props.width ?? innerWidth.value);\nconst height = computed(() => props.height ?? innerHeight.value);\nconst widthCss = computed(() => isPropsUsed.value ? SizingToCss(width.value) : '100%');\nconst heightCss = computed(() => isPropsUsed.value ? SizingToCss(height.value) : '100%');\n\nonMounted(() => {\n  if (isPropsUsed.value) {\n    UpdateViewport();\n  } else {\n    OnResize();\n    window.addEventListener('resize', OnResize);\n  }\n\n  SetupContext();\n});\n\nonBeforeUnmount(() => {\n  if (!isPropsUsed.value) {\n    window.removeEventListener('resize', OnResize);\n  }\n});\n\nfunction UpdateViewport(): void {\n  if (canvas.value) {\n    canvas.value.width = width.value;\n    canvas.value.height = height.value;\n\n    context?.viewport(0, 0, width.value, height.value);\n  }\n}\n\nfunction OnResize(): void {\n  innerWidth.value = (canvas.value?.clientWidth ?? 0) * window.devicePixelRatio;\n  innerHeight.value = (canvas.value?.clientHeight ?? 0) * window.devicePixelRatio;\n\n  UpdateViewport();\n\n  emit('resize');\n}\n\nfunction SetupContext(): void {\n  if (canvas.value === undefined) {\n    console.error('Canvas element not found');\n    return;\n  }\n\n  context = canvas.value.getContext('webgl2', { stencil: true });\n\n  if (context === null) {\n    console.error(\"Can't initialize webgl2 context\");\n    return;\n  }\n\n  context.enable(context.CULL_FACE);\n\n  context.enable(context.DEPTH_TEST);\n\n  context.enable(context.BLEND);\n  context.blendFunc(context.SRC_ALPHA, context.ONE_MINUS_SRC_ALPHA);\n\n  emit('contextReady', context);\n}\n\nfunction SizingToCss(value: number): string {\n  return `${value}px`;\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"canvas\", {\n    ref_key: \"canvas\",\n    ref: canvas,\n    style: _normalizeStyle({ width: widthCss.value, height: heightCss.value })\n  }, null, 4))\n}\n}\n\n})","import script from \"./WebglCanvas.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WebglCanvas.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./WebglCanvas.vue?vue&type=style&index=0&id=3248c29e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3248c29e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { onBeforeUnmount } from 'vue';\n\nimport { AppService } from './AppService';\nimport { GlobalDependencies } from './GlobalDependencies';\nimport { InjectionToken } from './InjectionToken';\n\nimport { Inversify } from '@/Inversify';\nimport { BefungeSourceCodeCodec } from '@/lib/befunge/BefungeSourceCodeCodec';\nimport Webgl2Canvas from '@/lib/VueComponents/WebglCanvas.vue';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'CodeEditor',\n  props: { encoded: { required: false, type: String, default: '' } },\n  setup(__props) {\n\nconst props = __props;\n\nlet service!: AppService;\n\n\n\nonBeforeUnmount(() => service.Dispose());\n\nasync function OnContextReady(context: WebGL2RenderingContext): Promise<void> {\n  Inversify\n    .bind<WebGL2RenderingContext>(InjectionToken.WebGLRenderingContext)\n    .toConstantValue(context);\n\n  await Inversify.getAsync(GlobalDependencies);\n\n  service = await Inversify.getAsync(AppService);\n  service.Resize();\n\n  OnSharedCode();\n}\n\nfunction OnResize(): void {\n  service?.Resize();\n}\n\nfunction OnMouseMove(e: MouseEvent): void {\n  service?.OnMouseMove(e);\n}\n\nfunction OnMouseDown(e: MouseEvent): void {\n  service?.OnMouseDown(e);\n}\n\nfunction OnMouseUp(e: MouseEvent): void {\n  service?.OnMouseUp(e);\n}\n\nfunction OnWheel(e: WheelEvent): void {\n  service?.OnWheel(e);\n}\n\nfunction OnKeyDown(e: KeyboardEvent): void {\n  service?.OnKeyDown(e);\n}\n\nfunction OnTouchMove(e: TouchEvent): void {\n  service?.OnTouchMove(e);\n}\n\nfunction OnTouchStart(e: TouchEvent): void {\n  service?.OnTouchStart(e);\n}\n\nfunction OnTouchEnd(e: TouchEvent): void {\n  service?.OnTouchEnd(e);\n}\n\nfunction OnSharedCode() {\n  if (props.encoded.length > 0) {\n    try {\n      const sourceCode = BefungeSourceCodeCodec.Decode(props.encoded);\n      service.LoadSourceCodeToEditor(sourceCode);\n    } catch (e) {\n      if (e instanceof Error) {\n        service.Snackbar.ShowError(e.message);\n      }\n    }\n  }\n};\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(Webgl2Canvas, {\n    autofocus: \"\",\n    tabindex: \"0\",\n    onContextReady: OnContextReady,\n    onResize: OnResize,\n    onMousemove: OnMouseMove,\n    onMousedown: OnMouseDown,\n    onMouseup: OnMouseUp,\n    onWheelPassive: OnWheel,\n    onKeydown: OnKeyDown,\n    onTouchmove: OnTouchMove,\n    onTouchstart: OnTouchStart,\n    onTouchend: OnTouchEnd\n  }))\n}\n}\n\n})","import script from \"./CodeEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CodeEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router';\n\nimport CodeEditor from '@/app/CodeEditor.vue';\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: '/',\n    name: 'CodeEditor',\n    props: true,\n    component: CodeEditor\n  },\n  {\n    path: '/share/:encoded',\n    name: 'Share',\n    props: true,\n    component: CodeEditor\n  }\n];\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\n\nexport default router;\n","import { createStore } from 'vuex';\n\nexport default createStore({\n  state: {},\n  getters: {},\n  mutations: {},\n  actions: {},\n  modules: {}\n});\n","import 'reflect-metadata';\n\nimport { createApp } from 'vue';\n\nimport '@fontsource/roboto/500.css';\n\nimport App from './App.vue';\nimport './registerServiceWorker';\nimport router from './router';\nimport store from './store';\n\nasync function Main(): Promise<void> {\n    // Explicitly load the font otherwise it not be visible for the background canvas that used for generating a bitmap font\n    const roboto = new FontFace('Roboto', `url(${process.env.BASE_URL}fonts/roboto-latin-500-normal.3170fd9a.woff2)`);\n    await roboto.load();\n\n    createApp(App).use(store).use(router).mount('#app');\n}\n\nMain();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkbefunge\"] = self[\"webpackChunkbefunge\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(7786); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createBlock","_component_router_view","script","__exports__","render","register","ready","console","log","registered","cached","updatefound","updated","offline","error","MouseButtons","MathUtil","static","value","min","max","Math","x","y","tolerance","Number","EPSILON","abs","points","length","Error","n","p","p0","p1","sqrt","SqrDistance","pow","OnSelectStrategy","constructor","releaseTimeout","maxDistance","_defineProperty","OnMouseDown","e","this","mouseDownStart","Date","now","lastMouseDownPosition","offsetX","offsetY","OnMouseUp","distance","vec2","elapsedTime","isSelect","IsSelect","TouchPan","moveCamera","OnTouchStart","touch","targetTouches","touchPrev","id","identifier","pageX","pageY","OnTouchMove","item","movementX","window","devicePixelRatio","movementY","TouchZoom","zoomStart","zoomProgress","UpdateTrace","OnTouchEnd","forEach","prevTouch","prev","find","every","trace","preventDefault","map","dist0","Distance","dist1","AppEventTransformer","touchPan","OnCameraMove","touchZoom","OnTouchZoomStart","zoom","OnTouchZoom","OnMouseMove","buttons","Left","selectStrategy","OnSelect","OnWheel","OnStepZoom","__decorate","injectable","InjectionToken","WebGLRenderingContext","Symbol","FontAtlas","IconAtlas","FontAtlasTexture","IconAtlasTexture","FontGlyphCollectionFactory","HeatmapGridRendererFactory","HeatmapExtensionFactory","UITextListRendererFactory","CodeEditorServiceInputReceiverFactory","UIEditableTextListRendererFactory","UILabelRendererTargetName","Perspective","Unique","AppCommandInjectionToken","EditCellCommandFactory","EditCellsRegionFactory","EditCellCommandPostAction","MoveNext","EditCellsRegionCommandPostAction","StayLeftTop","Inversify","Container","AppSettings","gl","PI","Width","Height","AspectRatio","canvas","width","height","DevicePixelRatio","__param","inject","WebGL2RenderingContext","_a","Object","bind","toSelf","inSingletonScope","EnumSize","keys","NotNull","msg","startSymbolCode","Columns","Rows","GlyphCount","Image","LookupUV","symbol","symbolCode","charCodeAt","glyphIdx","column","row","floor","glyphWidth","glyphHeight","leftTop","A","B","FontAtlasBuilderImpl","Build","options","startCode","ASCIIRange","Start","endCode","End","glyphCount","columnCount","ceil","rowCount","glyphCellSize","GlyphCellSize","SetupCanvas","FillCanvasWithGlyphs","context","getImageData","document","createElement","getContext","font","Font","Size","Name","fillStyle","col","halfGlyphCellSize","cellCenter","String","fromCharCode","drawPosition","CenteredToBaseLine","fillText","pos","metrics","measureText","actualBoundingBoxAscent","actualBoundingBoxDescent","FontAtlasBuilder","PrimitiveBuilder","position","dimension","attributes","leftBottom","rightTop","rightBottom","attr","Array","isArray","push","LeftBottom","LeftTop","RightTop","RightBottom","borderWidth","borderTop","AABBRectangle","borderRight","borderBottom","borderLeft","ShaderProgram","Map","instance","createProgram","Attach","type","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","err","getShaderInfoLog","deleteShader","attachShader","async","url","fetch","text","Link","linkProgram","getProgramParameter","LINK_STATUS","deleteProgram","Use","useProgram","SetUniform3fv","name","uniform3fv","GetUniformLocation","SetUniform2fv","uniform2fv","SetUniform4fv","uniform4fv","SetUniform1f","uniform1f","SetUniform1i","uniform1i","SetUniform2iv","uniform2iv","SetUniformMatrix4fv","uniformMatrix4fv","GetAttributeLocation","loc","getAttribLocation","Dispose","uniformCache","get","getUniformLocation","set","TypeSizeResolver","Sizes","BYTE","Int8Array","BYTES_PER_ELEMENT","SHORT","Int16Array","UNSIGNED_BYTE","Uint8Array","UNSIGNED_SHORT","Uint16Array","FLOAT","Float32Array","HALF_FLOAT","INT","Int32Array","UNSIGNED_INT","Uint32Array","INT_2_10_10_10_REV","UNSIGNED_INT_2_10_10_10_REV","PrimitivesRenderer","primitiveDescription","Setup","SetupAttributes","UploadAttributes","attrib","attributeSetCount","componentsPerAttributeSet","bindBuffer","ARRAY_BUFFER","vbo","bufferData","DYNAMIC_DRAW","UpdateComponentAttributes","attriutes","offset","bufferSubData","Resolve","PrimitiveAttributes","index","buffer","indicesPerPrimitive","Draw","bindVertexArray","vao","drawArrays","basePrimitiveType","deleteBuffer","deleteVertexArray","createBuffer","createVertexArray","FRAGMENT_SHADER","fragment","VERTEX_SHADER","vertex","stride","reduce","size","location","enableVertexAttribArray","vertexAttribPointer","normalized","unmanaged","CodeCellComponent","EditorGridRenderer","settings","fontAtlas","fontAtlasTexture","floatSize","gridStride","super","FGrid","VGrid","TRIANGLES","SetupRenderer","ResizeGrid","vertexList","MemoryLimit","cell","BuildCell","CellSize","cellAttrs","symbolUV","UVOffset","UVStartOffset","bindTexture","TEXTURE_2D","color","uv","ViewProjection","mat","Dimension","_b","_c","_d","WebGLTexture","CodeCellOutlineComponent","EditorGridCellsOutlineRenderer","gridRenderer","FCellsOutline","VCellsOutline","editorOutline","AABBFrame","gridOutlineWidth","gridOutlineColor","rowAttrs","outlineWidth","cellOutlineColor","colAttrs","SelectionComponent","SelectionRenderer","_class","editorGridRenderer","selectionStride","FSelection","VSelection","SelectionRenderer_1","IndicesPerPrimitive","Select","SelectRegion","region","Extremum","FlipY","OutOfGrid","selectionIdx","selected","findIndex","r","a","b","colorOffset","attrs","componentsPerVertex","colorStart","selection","point","Unselect","UnselectRegion","copy","splice","CodeEditorRenderer","editorGridCellsOutlineRenderer","selectionRenderer","viewProjection","Clear","ArrayHelper","array","comparator","Transformation","movable","destination","betweenByX","Between","lb","rt","betweenByY","distanceToTop","distanceToBottom","distanceToLeft","distanceToRight","corners","DistanceDiff","closest","Min","diff","leftToRight","rightToLeft","bottomToTop","topToBottom","intersectByX","intersectByY","Intersection","plane","line","d0","vec3","c","d","d1","t","intersection","rectangle","aTopRight","bTopRight","Camera","viewport","vec","z","v","vec4","invertViewProj","mat4","movement","posNear0","Unproject","posFar0","intersection0","PlaneLine","posNear1","posFar1","intersection1","delta","CameraService","codeEditorRenderer","UpdateProjection","UpdateViewProjection","MoveTo","undefined","camera","MaintainCodeEditorVisible","Translate","Position","Resize","projection","Fovy","ZNear","ZFar","view","cellSize","lbNDC","rtNDC","ndcCompensation","ShortestMoveForIntersection","screenCompensation","ViewDimension","worldCompensation","UnprojectMovement","HeadlineControlsLayout","POSITIVE_INFINITY","Watch","component","Observable","ComponentUpdated","components","AbsolutePosition","absolutePosition","Scale","skipUpdates","margin","targetScale","scale","MaintainPositionDimension","relativeExtremum","absoluteExtremum","flatMap","MapComponent","DebugControlsLayout","headlineLayout","DebugGroup","group","debugGroup","DebugGroupUpdated","queueMicrotask","RecalculatePosition","debugGroupDimension","RangeRange","verticalPosition","IllegalInstructionException","Where","Opcode","PCDirection","ObservablePriority","Low","NEGATIVE_INFINITY","Normal","High","ObservableController","observer","priority","descriptor","observers","MaintainSorted","DetachAll","Notify","sender","o","temp","AsyncConstructorActivator","_context","constructable","AsyncConstructor","RectangleRowPacker","Add","rectangles","Pack","idealArea","maxWidth","rect","estimatedWidth","sort","pack","maxHeightInRow","target","items","TextureAtlas","ClonePackage","NormalizePackage","found","UndefinedUV","TextureAtlasBuilder","filename","images","packer","img","packed","CreateImage","drawImage","src","image","Promise","resolve","reject","onload","onerror","UIIcon","UIIconAtlas","BuildAtlas","ArrowLeft","atlas","ArrowRight","aspectRatio","ExtractAspectRatio","ArrowUp","ArrowDown","ArrowThinLeft","ArrowThinRight","ArrowThinDown","ArrowThinUp","Undo","Redo","iconExtras","builder","icons","Empty","Debugger","Open","Save","Play","PlayDebug","DebugStepInto","ExclamationCircle","ExclamationTriangle","CheckCircle","Breakpoint","ArrowThinAll","Delete","Stop","Heatmap","Settings","Copy","Cut","Paste","EditDelete","Share","Input","Output","Keyboard","Shift","Backspace","icon","HorizontalAnchor","VerticalAnchor","onActivation","UIObservablePositioningGroup","anchor","vertical","Bottom","horizontal","observable","AppendChild","childs","updateNeeded","UpdateChilds","CalculateDimension","RemoveChild","removeIdx","indexOf","HorizontalPositionRespectAnchor","VerticalPositionRespectAnchor","MaintainExtremum","Destroy","extremum","viewWidth","Right","Middle","viewHeight","Top","UIObservableAlert","zIndex","style","Offset","deleter","parent","parentDetacher","isDestroyed","Uninitialize","parentPosition","ZIndex","Icon","Text","Style","IsDestroyed","MemoryPoolTracker","capacity","NoFree","pool","from","_","nextFree","Allocate","HasFreeSlot","freeSlot","InUse","slot","growthFactor","OnExtend","Capacity","Free","shrinkFactor","OnShrink","GatherInUseIndices","Shrink","inUse","UIAlertIconComponent","UIAlertPanelComponent","UIAlertIconRenderer","FUIALertIcon","VUIAlertIcon","AttributesPerComponent","Attributes","UIAlertRenderer","alertIcon","iconAtlas","iconAtlasTexture","FUIAlertPanel","VUIAlertPanel","vertexAttributesTracker","renderer","initialCapacity","inUseIndices","panelAttrs","fill","buttonOutlineAttrs","attribOffset","alerts","alert","idx","extendedCapacity","extendedPanelAttrs","extendedAlertIconAttrs","Create","alertText","uiRenderer","CreateLabel","panelContentZOffset","lineHeight","StyleRange","iconSideLength","iconMargin","UpdateComponent","UIRenderer","Alerts","label","LabelPosition","LineHeight","UpdateAttributes","ExtractPanelAttributes","emptyAttrs","ExtractIconAttributes","zFarIncluded","fillColor","sideLength","AlertIconSideLength","iconUV","toDestroyIdx","_e","UIObservableEditableTextList","textList","CreateTextList","OnVanish","onVanish","OnInput","keyCode","key","toDelete","slice","BorderWidth","BorderWdith","Visible","visible","onUpdate","HasFocus","hasFocus","Focus","Blur","ScrollToTop","UIEditableTextListCursorComponent","UIEditableTextListRenderer","FEditableTextListCursor","VEditableTextListCursor","inTransientScope","toFactory","ctx","container","UIObservableIconButton","iconStyle","touchCallback","Destroyed","destroyed","Disable","disabled","originIconStyle","DisabledIconColor","Touch","UninitializedTag","UIIconButtonComponent","UIIconButtonOutlineComponent","UIButtonOutlineRenderer","FUIIconButtonOutline","VUIIconButtonOutline","UIIconButtonRenderer","FUIIconButton","VUIIconButton","outline","buttonAttrs","iconButtons","btn","extendedButtonAttrs","extendedOutlineAttrs","button","TouchProxy","origin","alreadyTouchedIdx","touchStart","animation","originFillColor","timestamp","TouchAnimation","lightingDuration","darkeningDuration","brightFactor","notFinished","finished","anim","elapsed","lightingProgress","bright","darkeningProgress","IconButtons","UpdateContentAttributes","ResetOutlineAttributes","UpdateOutlineAttributes","ExtractContentAttributes","ExtractOutlineAttributes","IsUndefinedUV","ExtractContentAttributesWide","ExtractContentAttributesTall","iconWidth","segmentWidth","leftSegmentAttributes","iconAttributes","rightSegmentAttributes","iconHeight","segmentHeight","bottomSegmentAttributes","topSegmentAttributes","outlineColor","UIObservableLabel","glyphAllocator","symbolsStyle","ResizeSymbolStyles","AdjustPoolMemory","DeferredNotify","begin","end","ReplaceOffset","old","offsets","UpdateTextDimension","Offsets","PrintableTextLength","split","filter","char","NonPrintableSymbols","includes","PrintableOffsetLength","NonPrintableOffset","ExtendPoolMemory","extraMemoryNeeded","ShrinkPoolMemory","excessOffsets","released","AddExtraNonPrintableOffsets","RemoveExcessNonPrintableOffsets","AdjustNonPrintableOffsets","extraNonPrintableOffsets","removed","charIdx","offsetStartIdx","nonPrintableOffsetIdx","ExtendSymbolStyles","DefaultSymbolStyle","ShrinkSymbolStyles","CatchBlock","fn","args","CatchFn","CatchValue","ExceptionTrap","AsyncCatchBlock","AsyncExceptionTrap","FontGlyphCollection","library","Lookup","blueprint","FontGlyphCollectionBuilderImpl","BuildBlueprints","lib","atlasUV","extraHeight","AtlasCellToGlyphUV","baselineOffset","fontBoundingBoxDescent","glyph","relA","relB","uvWidth","uvHeight","SelfBind","method","inRequestScope","UILabelComponent","UILabelRenderer","UILabelRenderer_1","fontTexture","fontGlyphCollectionFactory","FUILabel","VUILabel","labelAttrs","oldOffset","labels","delete","extendedLabelAttrs","Labels","Set","values","AllocateGlyph","GlyphFree","fontGlyphCollection","lines","SplitString","minBaseOffset","MinBaseOffset","startIdx","glyphBlueprint","LookupGlyph","comp","maxBaselineOffsetSymbol","Try","str","lineStart","whenTargetIsDefault","whenTargetNamed","UIObservableTextButton","caption","CreateIconButton","TouchAdapter","aboveButton","CaptionPosition","Caption","_sender","StyleCaptionRange","UIObservableTextList","labelRenderer","ScheduleUpdateScrollControlsPresence","scroll","scrollControls","scrollTopButton","scrollBottomButton","IsContentOverflow","ScrollAligned","MinScroll","UpdateScrollControlsPresence","CreateTopScrollButton","CreateBottomScrollButton","ScrollButtonX","ScrollBottomButtonY","ScrollTopButtonY","scrollButtonDimension","scrollButtonStyle","scrollButtonIconColor","_component","MaxScroll","Clamp","UpdateScrollButtonDisability","UITextListBorderComponent","UITextListStencilComponent","UITextListBorderRenderer","FTextListBorder","VTextListBorder","UITextListRenderer","FUITextListStencil","VUITextListStencil","borderRenderer","scencilRectAttrs","borderAttrs","extendedBorderAttrs","enable","STENCIL_TEST","stencilFunc","ALWAYS","stencilOp","KEEP","REPLACE","EQUAL","clear","STENCIL_BUFFER_BIT","disable","UpdateStencilAttributes","UpdateBorderAttributes","named","iconButtonRenderer","alertRenderer","labelsRenderer","uiTextListRendererFactory","uiEditableTextListRendererFactory","CreateTextButton","CreateAlert","uiTextListRenderers","UIObservableTextListDeleter","CreateEditableTextList","editableTextList","UIObservableEditableTextListDeleter","uiEditableTextLists","touchResult","TouchAlerts","TouchButtons","TouchLabels","TouchEditableTextList","intersected","AABBRectanglePoint","Max","desc","_f","DebugAction","DebugControls","layout","buttonSideLength","executeButton","DebugControls_1","DefaultButtonFillColor","DefaultButtonOutlineColor","DefaultButtonIconColor","executeObservable","debugButton","debugObservable","RunNextBreakpoint","breakpointMenuButton","BreakpointButtonIconColor","ToggleBreakpointMenuButton","heatmapButton","ProfilerButtonIconColor","ToggleHeatmap","breakpointMenuGroup","debugMenuGroup","DebugMode","debugMode","mode","DebugModeButtonIconColor","RunNextInstruction","Interrupt","IsHeatmapShown","isHeatmapShown","Execute","Debug","CellBreakopint","cellBreakpointObservable","CellBreakpointDelete","cellBreakpointDeleteObservable","heatmapObservable","isBreakpointMenuOpen","CloseCellBreakpointDirectionMenu","ShowCellBreakpointDirectionMenu","totalButtons","DeactivateButton","NotifyWithPCLocationCondition","Direction","Up","Down","NotifyWithCellBreakpointDeactivation","direction","feedback","isShown","ToggleButtonOutlineColor","EditControls","buttonIconColor","btnSideLength","selectButton","selectObservable","cutButton","cutObservable","copyButton","copyObservable","pasteButton","pasteObservable","deleteButton","deleteObservable","SelectObservable","CutObservable","CopyObservable","PasteObservable","DeleteObservable","EditDirectionControls","buttonMargin","buttonWidth","btnHeight","editDirectionControls","left","EditDirectionControls_1","CurrentDirectionInactiveIconColor","UpdateEditDirection","EditionDirection","up","right","CurrentDirrectionActiveIconColor","down","currentDirectionControl","EditDirectionObservable","editDirectionObservable","ForceEditDirection","control","Boundaries","FileControls","openButtonIconColor","saveButtonIconColor","settingsButtonIconColor","openButton","openFromDiskObservable","saveButton","saveToDiskObservable","shareButton","shareObservable","settingsButton","openSettingsObservable","ShareDisabled","OpenFromDiskDisabled","OpenFromDiskObservable","SaveToDiskObservable","ShareObservable","OpenSettingsObservable","AppHistory","Push","command","CanRedo","history","cursor","updateObservable","CanUndo","Apply","Reset","UpdateObservable","HistoryControls","undoButton","undoObservable","redoButton","redoObservable","UpdateButtonsAvailability","UndoObservable","RedoObservable","Lock","Unlock","IOControls","btnIconColor","textListHeight","inputButton","SwitchTab","outputButton","outputTextList","maxPanelWidth","inputEditableTextList","inputTab","NewLineFormatter","PanelWidth","widthToFit","RetrieveFontGlyphCollection","strArr","padding","join","SnackbarControls","Show","snackbar","Hide","LimitToViewportWidth","hideTimer","setTimeout","showTime","alertWidth","ShowError","contentColor","ShowWarning","ShowInformation","ShowSuccess","clearTimeout","EscapeString","Replacer","StackControls","stackTextList","Stack","stack","reverse","KeyboardShiftMode","KeyboardButtonLayout","keyboardState","primary","secondary","symbols","IsUppercase","toUpperCase","toLowerCase","shift","Secondary","ascii","toString","HasSecondary","Index","CaptionDelimiter","Lovercase","Uppercase","VirtualKeyboardControls","lovercase","uppercase","inactive","active","toggleKeyboardGroup","toggleKeyboardButton","shiftIconColor","ToggleKeyboard","keyboardGroup","symbolMargin","SetupKeyboardLayouts","_symbol","TouchFeedback","keyboardStateFetcher","shiftMode","asciiMode","digitsSymbolRow","firstSymbolRow","secondSymbolRow","thirdSymbolRow","toggleKeyboard","SpawnKeyboard","HideKeyboard","CreateSymbolRow","buttonDimension","shiftWidth","CreateBottomRow","layouts","buttonContentColor","StyleButtonCaption","symbolButtons","buttonDeleter","ToggleShift","spacebarButton","backspace","asciiCodes","ToggleASCII","UpdateSymbolButtonsCaptions","asciiToggleOutlineColor","primaryColor","secondaryColor","buttonCaptionColor","destroy","navigator","vibrate","OverlayService","snackbarControls","fileControls","historyControls","editControls","debugControls","stackControls","virtualKeyboardControls","ioControls","BuildStickyProjection","Snackbar","stickyProjection","isKeyboardTouched","_g","_h","_j","_k","_l","SourceCodeMemory","Initialize","ctr","nonEmptyCells","Read","ptr","Write","emptyValue","actual","limit","Clone","PointerArithmetics","Target","EmptyExtension","Unload","TooltipPosition","CodeEditorTooltipService","perspectiveLabelRenderer","Tooltip","tooltipIdx","FindIndex","ReleaseTooltip","tooltips","BuildReleaser","ReleaseAll","Array2D","provider","Get","data","CoordsToIndex","Update","updater","mapped","IndexToCoord","ForEach","Every","Equals","arr","EditableTarget","editorSourceCode","editCellCommandFactory","cellMoveNextPostActionFactory","editCellsRegionCommandFactory","regionMoveNextPostActionFactory","regionStayLeftTopPostActionFactory","lt","rb","IsSingleCell","editableRegion","editableCellStyle","CellInput","CellInputSingle","CellInputRegion","oldValue","ReversedDirection","editionDirection","RegionDimension","WithProvider","IsLocationValid","ContentString","sourceCode","InsertSourceCode","linesOfCode","fragmentWidth","fragmentHeight","newValue","interfaces","AutoFactory","SelectCellBehaiver","editableCell","SelectCellsRegion","firstTouch","CodeEditorService","overlay","tooltipService","touchBehavior","OnSetEditableRegion","OnCut","OnCopyEditableRegion","OnPaste","OnDelete","EditableCellLostObservable","editableCellLostObservale","EditableCellDirection","LoadExtension","extension","UnloadExtension","EditCell","HideAllTooltips","posNear","posFar","nextBehaivor","SetEditableCell","IsEditableCellVisible","SetEditableRegion","proj","EditableCell","EditableCellRect","clipboard","writeText","CPUImpl","memory","io","instructions","inst","instructionSet","Code","PC","Location","pcLocation","pcDirection","NextInstructionCode","StackPush","StackPop","ret","pop","StackDuplicate","StackSwap","last","dir","ExecuteNext","instruction","isStringMode","KnownInstruction","SkipNext","Move","StringModeToggle","ReadMemory","WriteMemory","WriteIO","OutputWrite","ReadCharacter","InputReadCharacter","ReadNumber","InputReadNumber","Halt","isHalted","IsHalted","cpu","Bridge","Divide","trunc","EndProgramm","GreatherThan","HoriontalIf","InputASCII","InputInteger","MemoryRead","MemoryWrite","Modulo","Multiply","Negation","NoOperation","_cpu","PCDirectionDown","PCDirectionLeft","PCDirectionRandom","random","PCDirectionRight","PCDirectionUp","PrintASCII","PrintInteger","StackPushDigit","digit","Subtract","ToggleStringMode","VerticalIf","IOPort","InputWrite","input","numberEnd","parseInt","HasInput","output","OutputRead","HasOutput","MemoryWriteInstructionInterceptor","interceptor","Befunge","memoryLimit","OnMemoryWrite","LoadExecutable","code","IsMemoryLimitDynamic","memoryRequirements","ExecutableMemoryLimit","SetInput","Run","RunFor","timeout","startTime","instructionsSkipPerTimeoutCheck","instructionsExecuted","RunNext","CollectOutput","CollectOutputUntil","maxLength","readed","AttachDebugger","AttachCPU","AttachProfiler","profiler","AddMemoryWriteInterceptor","memoryWriteInterceptors","rmIdx","NextInstruction","InstructionsExecuted","IP","maxRowLength","maxColumnLength","rowLength","ComparsionCondition","noDebug","triggered","BreakpointsCheck","breakpoints","SetBreakpoint","brk","pcLocationBrk","Value","stackBrk","BreakpointReleaser","PCBreakpoints","brks","toRemove","BreakpointCheckPC","BreakpointCheckStack","top","Condition","Equal","Less","LessEqual","Greater","GreaterEqual","Profiler","CellHeatmapFor","heatmap","BefungeToolbox","Interpreter","interpreter","debugger","DebuggingService","codeEditor","befungeToolbox","action","DebugCodeAction","cond","OnCellBreakpointAction","OnCellBreakpointDelete","prevEditableCell","hasBrk","some","activeCellBreakpoints","activeBreakpointColor","inactiveBreakpointColor","OnCellInput","UploadBreakpointsToDebugger","debug","executionResult","ExecutionTimeout","message","RestoreCellBreakpointsSelection","MaxOutputLength","releaser","SetCellBreakpoint","existIdx","condition","brkRemove","ExecutionService","HeatmapCellComponent","HeatmapGridRenderer","FHeatmapGrid","VHeatmapGrid","HeatmapGridRendererBuilder","uvCellSize","uvCoord","HeatmapExtension","heatmapGridRenderer","tooltipReleasers","release","HeatmapExtensionBuilder","heatmapGridRendererFactory","releasers","DrawHitsOnCell","colors","HitsToColor","hits","maxHits","lowHitsColor","hitsColorsDiff","highHitsColor","HeatMapGridFactory","stats","ProfillingService","heatmapExtensionFactory","shown","BuildHeatmap","HideHeatmap","CodeExecutionService","executionService","debuggingService","profillingService","Execution","Debugging","Profilling","CodeEditorServiceInputReceiver","codeExecutionService","DebugRenderer","VDebugRenderer","FDebugRenderer","LINES","SmoothCameraMove","IsDone","isDone","fract","duration","progress","SmoothCameraZoom","boundary","DecodingErrorException","BefungeSourceCodeCodec","decoded","btoa","encoded","atob","DOMException","ModuloPointerArithmetics","ArrayMemory","pointerArithmetics","IsPointerOutOfBound","PointerToIndex","resized","CopyMemoryTo","dst","copyingWidth","copyingHeight","SourceCodeValidityAnalyser","sourceCodeLength","NextIllegalInstruction","illegalInstructionIdx","findLastIndex","validSymbols","start","_x","ValidSymbols","RegistrationCollisionResolver","EffectRunner","defaultPolicy","rule","Register","effect","policy","effects","findLast","Replace","IsInputReceiver","EditCellCommand","codeEditorService","editDirection","postAction","OldValue","NewValue","EditDirection","MoveNextAction","codeFlowEditDirection","FollowCodeFlowHelper","GetNextEditableCell","overriddenDirection","nextEditableCell","toAutoFactory","EditCellsRegionCommand","Region","StayLeftTopAction","AppService","effectRunner","codeEditorServiceInputReceiverFactory","ZCameraBoundary","clearColor","COLOR_BUFFER_BIT","FocusCameraAtEditor","inFocus","inFocusOnVanishReleaser","debugRenderer","debugPoints","FollowEditableCell","OpenFileFromDisk","SaveSourceToDisk","ShareSourceCode","OpenSettings","ControlsResponseToHeatmapActivation","OnSourceCodeChanged","SwitchFocus","smoothCameraZoomEffect","deltaY","touchZoomStartZ","OnKeyDown","isRunning","requestAnimationFrame","DrawFrame","lastFrameTime","DEPTH_BUFFER_BIT","fileHandle","showOpenFilePicker","multiple","kind","openedFilename","file","getFile","validator","firstProblem","remainingProblems","problemMsg","LoadSourceCodeToEditor","router","replace","showSaveFilePicker","suggestedName","stream","createWritable","write","SourceCodeString","close","sourceString","trimEnd","Encode","params","ResetSourceCodeEditor","cellRect","ndcDiagonal","ndcStickToEdgeMovement","MoveRectangleToPlaceInsideRectangle","finalMovement","ndcDistanceToLeft","ndcDistanceToRight","ndcDistanceToBottom","ndcDistanceToTop","uiLeftTopEditorGridPosition","wndLeftTopEditorGridPosition","GlobalDependencies","SetupGlobalDependencies","toConstantValue","BuildTexture","getAsync","texture","createTexture","activeTexture","TEXTURE0","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","texImage2D","RGBA","_defineComponent","__name","props","emits","setup","__props","emit","innerWidth","ref","innerHeight","isPropsUsed","computed","widthCss","SizingToCss","heightCss","UpdateViewport","OnResize","clientWidth","clientHeight","SetupContext","stencil","CULL_FACE","DEPTH_TEST","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","onMounted","addEventListener","onBeforeUnmount","removeEventListener","_ctx","_cache","_openBlock","_createElementBlock","ref_key","_normalizeStyle","required","default","service","OnContextReady","OnSharedCode","Decode","Webgl2Canvas","autofocus","tabindex","onContextReady","onResize","onMousemove","onMousedown","onMouseup","onWheelPassive","onKeydown","onTouchmove","onTouchstart","onTouchend","routes","path","CodeEditor","createRouter","createWebHistory","process","createStore","state","getters","mutations","actions","modules","Main","roboto","FontFace","load","createApp","App","use","store","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","notFulfilled","Infinity","i","fulfilled","j","getter","__esModule","definition","defineProperty","enumerable","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}